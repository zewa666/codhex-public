var OT=Object.defineProperty;var LT=(s,t,e)=>t in s?OT(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var k=(s,t,e)=>(LT(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();/*! Capacitor: https://capacitorjs.com/ - MIT License */const bT=s=>{const t=new Map;t.set("web",{name:"web"});const e=s.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},r=(n,o)=>{e.platforms.set(n,o)},i=n=>{e.platforms.has(n)&&(e.currentPlatform=e.platforms.get(n))};return e.addPlatform=r,e.setPlatform=i,e},wT=s=>s.CapacitorPlatforms=bT(s),$g=wT(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});$g.addPlatform;$g.setPlatform;var br;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(br||(br={}));class El extends Error{constructor(t,e,r){super(t),this.message=t,this.code=e,this.data=r}}const FT=s=>{var t,e;return s!=null&&s.androidBridge?"android":!((e=(t=s==null?void 0:s.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||e===void 0)&&e.bridge?"ios":"web"},DT=s=>{var t,e,r,i,n;const o=s.CapacitorCustomPlatform||null,a=s.Capacitor||{},h=a.Plugins=a.Plugins||{},u=s.CapacitorPlatforms,l=()=>o!==null?o.name:FT(s),f=((t=u==null?void 0:u.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||l,c=()=>f()!=="web",d=((e=u==null?void 0:u.currentPlatform)===null||e===void 0?void 0:e.isNativePlatform)||c,v=E=>{const P=T.get(E);return!!(P!=null&&P.platforms.has(f())||m(E))},p=((r=u==null?void 0:u.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||v,g=E=>{var P;return(P=a.PluginHeaders)===null||P===void 0?void 0:P.find(M=>M.name===E)},m=((i=u==null?void 0:u.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||g,x=E=>s.console.error(E),y=(E,P,M)=>Promise.reject(`${M} does not have an implementation of "${P}".`),T=new Map,C=(E,P={})=>{const M=T.get(E);if(M)return console.warn(`Capacitor plugin "${E}" already registered. Cannot register plugins twice.`),M.proxy;const R=f(),A=m(E);let O;const b=async()=>(!O&&R in P?O=typeof P[R]=="function"?O=await P[R]():O=P[R]:o!==null&&!O&&"web"in P&&(O=typeof P.web=="function"?O=await P.web():O=P.web),O),w=(F,L)=>{var D,B;if(A){const G=A==null?void 0:A.methods.find(N=>L===N.name);if(G)return G.rtype==="promise"?N=>a.nativePromise(E,L.toString(),N):(N,X)=>a.nativeCallback(E,L.toString(),N,X);if(F)return(D=F[L])===null||D===void 0?void 0:D.bind(F)}else{if(F)return(B=F[L])===null||B===void 0?void 0:B.bind(F);throw new El(`"${E}" plugin is not implemented on ${R}`,br.Unimplemented)}},I=F=>{let L;const D=(...B)=>{const G=b().then(N=>{const X=w(N,F);if(X){const U=X(...B);return L=U==null?void 0:U.remove,U}else throw new El(`"${E}.${F}()" is not implemented on ${R}`,br.Unimplemented)});return F==="addListener"&&(G.remove=async()=>L()),G};return D.toString=()=>`${F.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:F,writable:!1,configurable:!1}),D},Y=I("addListener"),z=I("removeListener"),V=(F,L)=>{const D=Y({eventName:F},L),B=async()=>{const N=await D;z({eventName:F,callbackId:N},L)},G=new Promise(N=>D.then(()=>N({remove:B})));return G.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await B()},G},W=new Proxy({},{get(F,L){switch(L){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?V:Y;case"removeListener":return z;default:return I(L)}}});return h[E]=W,T.set(E,{name:E,proxy:W,platforms:new Set([...Object.keys(P),...A?[R]:[]])}),W},S=((n=u==null?void 0:u.currentPlatform)===null||n===void 0?void 0:n.registerPlugin)||C;return a.convertFileSrc||(a.convertFileSrc=E=>E),a.getPlatform=f,a.handleError=x,a.isNativePlatform=d,a.isPluginAvailable=p,a.pluginMethodNoop=y,a.registerPlugin=S,a.Exception=El,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},IT=s=>s.Capacitor=DT(s),Ah=IT(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),If=Ah.registerPlugin;Ah.Plugins;class Zg{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i);const n=async()=>this.removeListener(t,e),o=Promise.resolve({remove:n});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()}}),o}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,e){const r=this.listeners[t];r&&r.forEach(i=>i(e))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,e){this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:r=>{this.notifyListeners(e,r)}}}unimplemented(t="not implemented"){return new Ah.Exception(t,br.Unimplemented)}unavailable(t="not available"){return new Ah.Exception(t,br.Unavailable)}async removeListener(t,e){const r=this.listeners[t];if(!r)return;const i=r.indexOf(e);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const oc=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),hc=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class BT extends Zg{async getCookies(){const t=document.cookie,e={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,n]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=hc(i).trim(),n=hc(n).trim(),e[i]=n}),e}async setCookie(t){try{const e=oc(t.key),r=oc(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,n=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${e}=${r||""}${i}; path=${n}; ${o};`}catch(e){return Promise.reject(e)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const e of t)document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}If("CapacitorCookies",{web:()=>new BT});const GT=async s=>new Promise((t,e)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>e(i),r.readAsDataURL(s)}),YT=(s={})=>{const t=Object.keys(s);return Object.keys(s).map(i=>i.toLocaleLowerCase()).reduce((i,n,o)=>(i[n]=s[t[o]],i),{})},NT=(s,t=!0)=>s?Object.entries(s).reduce((r,i)=>{const[n,o]=i;let a,h;return Array.isArray(o)?(h="",o.forEach(u=>{a=t?encodeURIComponent(u):u,h+=`${n}=${a}&`}),h.slice(0,-1)):(a=t?encodeURIComponent(o):o,h=`${n}=${a}`),`${r}&${h}`},"").substr(1):null,XT=(s,t={})=>{const e=Object.assign({method:s.method||"GET",headers:s.headers},t),i=YT(s.headers)["content-type"]||"";if(typeof s.data=="string")e.body=s.data;else if(i.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[o,a]of Object.entries(s.data||{}))n.set(o,a);e.body=n.toString()}else if(i.includes("multipart/form-data")){const n=new FormData;if(s.data instanceof FormData)s.data.forEach((a,h)=>{n.append(h,a)});else for(const a of Object.keys(s.data))n.append(a,s.data[a]);e.body=n;const o=new Headers(e.headers);o.delete("content-type"),e.headers=o}else(i.includes("application/json")||typeof s.data=="object")&&(e.body=JSON.stringify(s.data));return e};class zT extends Zg{async request(t){const e=XT(t,t.webFetchExtra),r=NT(t.params,t.shouldEncodeUrlParams),i=r?`${t.url}?${r}`:t.url,n=await fetch(i,e),o=n.headers.get("content-type")||"";let{responseType:a="text"}=n.ok?t:{};o.includes("application/json")&&(a="json");let h,u;switch(a){case"arraybuffer":case"blob":u=await n.blob(),h=await GT(u);break;case"json":h=await n.json();break;case"document":case"text":default:h=await n.text()}const l={};return n.headers.forEach((f,c)=>{l[c]=f}),{data:h,headers:l,status:n.status,url:n.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}If("CapacitorHttp",{web:()=>new zT});var lc;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(lc||(lc={}));var uc;(function(s){s.None="NONE",s.Slide="SLIDE",s.Fade="FADE"})(uc||(uc={}));const fc=If("StatusBar");var VT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function UT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Rh={},WT={get exports(){return Rh},set exports(s){Rh=s}};(function(s,t){(function(r,i){s.exports=i()})(VT,function(){return function(e){var r={};function i(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=r,i.d=function(n,o,a){i.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:a})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,o){if(o&1&&(n=i(n)),o&8||o&4&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),o&2&&typeof n!="string")for(var h in n)i.d(a,h,function(u){return n[u]}.bind(null,h));return a},i.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(o,"a",o),o},i.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},i.p="",i(i.s=1528)}([function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}function n(l,f,c){var d=c?l[f]:Object.getOwnPropertyDescriptor(l,f);return!c&&d.value&&typeof d.value=="object"&&(d=d.value),d&&i(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function o(l,f){var c=Object.getOwnPropertyDescriptor(l,f);return c?(c.value&&typeof c.value=="object"&&(c=c.value),c.configurable===!1):!1}function a(l,f,c,d){for(var v in f)if(f.hasOwnProperty(v)){var p=n(f,v,c);if(p!==!1){var g=d||l;if(o(g.prototype,v)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+v+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(l.prototype,v,p)}else l.prototype[v]=f[v]}}function h(l,f){if(f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++)a(l,f[c].prototype||f[c])}}function u(l){l||(l={});var f,c;if(l.initialize){if(typeof l.initialize!="function")throw new Error("initialize must be a function");f=l.initialize,delete l.initialize}else if(l.Extends){var d=l.Extends;f=function(){d.apply(this,arguments)}}else f=function(){};l.Extends?(f.prototype=Object.create(l.Extends.prototype),f.prototype.constructor=f,c=l.Extends,delete l.Extends):f.prototype.constructor=f;var v=null;return l.Mixins&&(v=l.Mixins,delete l.Mixins),h(f,v),a(f,l,!0,c),f}u.extend=a,u.mixin=h,u.ignoreFinals=!1,e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=typeof n;return!n||h==="number"||h==="string"?a:n.hasOwnProperty(o)&&n[o]!==void 0?n[o]:a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(124),a=new n({initialize:function(u,l){this.x=0,this.y=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0):(l===void 0&&(l=u),this.x=u||0,this.y=l||0)},clone:function(){return new a(this.x,this.y)},copy:function(h){return this.x=h.x||0,this.y=h.y||0,this},setFromObject:function(h){return this.x=h.x||0,this.y=h.y||0,this},set:function(h,u){return u===void 0&&(u=h),this.x=h,this.y=u,this},setTo:function(h,u){return this.set(h,u)},setToPolar:function(h,u){return u==null&&(u=1),this.x=Math.cos(h)*u,this.y=Math.sin(h)*u,this},equals:function(h){return this.x===h.x&&this.y===h.y},fuzzyEquals:function(h,u){return o(this.x,h.x,u)&&o(this.y,h.y,u)},angle:function(){var h=Math.atan2(this.y,this.x);return h<0&&(h+=2*Math.PI),h},setAngle:function(h){return this.setToPolar(h,this.length())},add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h):(this.x=0,this.y=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(h){var u=h.x-this.x,l=h.y-this.y;return Math.sqrt(u*u+l*l)},distanceSq:function(h){var u=h.x-this.x,l=h.y-this.y;return u*u+l*l},length:function(){var h=this.x,u=this.y;return Math.sqrt(h*h+u*u)},setLength:function(h){return this.normalize().scale(h)},lengthSq:function(){var h=this.x,u=this.y;return h*h+u*u},normalize:function(){var h=this.x,u=this.y,l=h*h+u*u;return l>0&&(l=1/Math.sqrt(l),this.x=h*l,this.y=u*l),this},normalizeRightHand:function(){var h=this.x;return this.x=this.y*-1,this.y=h,this},normalizeLeftHand:function(){var h=this.x;return this.x=this.y,this.y=h*-1,this},dot:function(h){return this.x*h.x+this.y*h.y},cross:function(h){return this.x*h.y-this.y*h.x},lerp:function(h,u){u===void 0&&(u=0);var l=this.x,f=this.y;return this.x=l+u*(h.x-l),this.y=f+u*(h.y-f),this},transformMat3:function(h){var u=this.x,l=this.y,f=h.val;return this.x=f[0]*u+f[3]*l+f[6],this.y=f[1]*u+f[4]*l+f[7],this},transformMat4:function(h){var u=this.x,l=this.y,f=h.val;return this.x=f[0]*u+f[4]*l+f[12],this.y=f[1]*u+f[5]*l+f[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(h){var u=this.length();return u&&u>h&&this.scale(h/u),this},reflect:function(h){return h=h.clone().normalize(),this.subtract(h.scale(2*this.dot(h)))},mirror:function(h){return this.reflect(h).negate()},rotate:function(h){var u=Math.cos(h),l=Math.sin(h);return this.set(u*this.x-l*this.y,l*this.x+u*this.y)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(56),a=new n({initialize:function(u,l){u===void 0&&(u=0),l===void 0&&(l=u),this.type=o.POINT,this.x=u,this.y=l},setTo:function(h,u){return h===void 0&&(h=0),u===void 0&&(u=h),this.x=h,this.y=u,this}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(24),a=i(20),h=new n({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(u){return(u.renderCanvas||u.renderWebGL)&&this.displayList.add(u),u.preUpdate&&this.updateList.add(u),u},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(u,l){h.prototype.hasOwnProperty(u)||(h.prototype[u]=l)},h.remove=function(u){h.prototype.hasOwnProperty(u)&&delete h.prototype[u]},o.register("GameObjectFactory",h,"add"),e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(!n||typeof n=="number")return a;if(n.hasOwnProperty(o))return n[o];if(o.indexOf(".")!==-1){for(var h=o.split("."),u=n,l=a,f=0;f<h.length;f++)if(u.hasOwnProperty(h[f]))l=u[h[f]],u=u[h[f]];else{l=a;break}return l}else return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(typeof n!="object"||n.nodeType||n===n.window)return!1;try{if(n.constructor&&!{}.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},n={install:function(o){for(var a in i)o[a]=i[a]},register:function(o,a){i[o]=a},destroy:function(){i={}}};e.exports=n},function(e,r,i){var n=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function h(c,d,v){this.fn=c,this.context=d,this.once=v||!1}function u(c,d,v,p,g){if(typeof v!="function")throw new TypeError("The listener must be a function");var m=new h(v,p||c,g),x=o?o+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function f(){this._events=new a,this._eventsCount=0}f.prototype.eventNames=function(){var d=[],v,p;if(this._eventsCount===0)return d;for(p in v=this._events)n.call(v,p)&&d.push(o?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(v)):d},f.prototype.listeners=function(d){var v=o?o+d:d,p=this._events[v];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,x=new Array(m);g<m;g++)x[g]=p[g].fn;return x},f.prototype.listenerCount=function(d){var v=o?o+d:d,p=this._events[v];return p?p.fn?1:p.length:0},f.prototype.emit=function(d,v,p,g,m,x){var y=o?o+d:d;if(!this._events[y])return!1;var T=this._events[y],C=arguments.length,S,E;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,v),!0;case 3:return T.fn.call(T.context,v,p),!0;case 4:return T.fn.call(T.context,v,p,g),!0;case 5:return T.fn.call(T.context,v,p,g,m),!0;case 6:return T.fn.call(T.context,v,p,g,m,x),!0}for(E=1,S=new Array(C-1);E<C;E++)S[E-1]=arguments[E];T.fn.apply(T.context,S)}else{var P=T.length,M;for(E=0;E<P;E++)switch(T[E].once&&this.removeListener(d,T[E].fn,void 0,!0),C){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,v);break;case 3:T[E].fn.call(T[E].context,v,p);break;case 4:T[E].fn.call(T[E].context,v,p,g);break;default:if(!S)for(M=1,S=new Array(C-1);M<C;M++)S[M-1]=arguments[M];T[E].fn.apply(T[E].context,S)}}return!0},f.prototype.on=function(d,v,p){return u(this,d,v,p,!1)},f.prototype.once=function(d,v,p){return u(this,d,v,p,!0)},f.prototype.removeListener=function(d,v,p,g){var m=o?o+d:d;if(!this._events[m])return this;if(!v)return l(this,m),this;var x=this._events[m];if(x.fn)x.fn===v&&(!g||x.once)&&(!p||x.context===p)&&l(this,m);else{for(var y=0,T=[],C=x.length;y<C;y++)(x[y].fn!==v||g&&!x[y].once||p&&x[y].context!==p)&&T.push(x[y]);T.length?this._events[m]=T.length===1?T[0]:T:l(this,m)}return this},f.prototype.removeAllListeners=function(d){var v;return d?(v=o?o+d:d,this._events[v]&&l(this,v)):(this._events=new a,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(57),a=i(171),h=i(306),u=i(56),l=i(47),f=i(174),c=new n({initialize:function(v,p,g,m){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),this.type=u.RECTANGLE,this.x=v,this.y=p,this.width=g,this.height=m},contains:function(d,v){return o(this,d,v)},getPoint:function(d,v){return a(this,d,v)},getPoints:function(d,v,p){return h(this,d,v,p)},getRandomPoint:function(d){return f(this,d)},setTo:function(d,v,p,g){return this.x=d,this.y=v,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(d,v){return v===void 0&&(v=d),this.x=d,this.y=v,this},setSize:function(d,v){return v===void 0&&(v=d),this.width=d,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(d){return d===void 0&&(d=new l),d.setTo(this.x,this.y,this.right,this.y),d},getLineB:function(d){return d===void 0&&(d=new l),d.setTo(this.right,this.y,this.right,this.bottom),d},getLineC:function(d){return d===void 0&&(d=new l),d.setTo(this.right,this.bottom,this.x,this.bottom),d},getLineD:function(d){return d===void 0&&(d=new l),d.setTo(this.x,this.bottom,this.x,this.y),d},left:{get:function(){return this.x},set:function(d){d>=this.right?this.width=0:this.width=this.right-d,this.x=d}},right:{get:function(){return this.x+this.width},set:function(d){d<=this.x?this.width=0:this.width=d-this.x}},top:{get:function(){return this.y},set:function(d){d>=this.bottom?this.height=0:this.height=this.bottom-d,this.y=d}},bottom:{get:function(){return this.y+this.height},set:function(d){d<=this.y?this.height=0:this.height=d-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(n){for(var o="",a=0;a<n;++a)a>0&&(o+=`
else `),a<n-1&&(o+="if(test == "+a+".0){}");return o}e.exports={getTintFromFloats:function(n,o,a,h){var u=(n*255|0)&255,l=(o*255|0)&255,f=(a*255|0)&255,c=(h*255|0)&255;return(c<<24|u<<16|l<<8|f)>>>0},getTintAppendFloatAlpha:function(n,o){var a=(o*255|0)&255;return(a<<24|n)>>>0},getTintAppendFloatAlphaAndSwap:function(n,o){var a=(n>>16|0)&255,h=(n>>8|0)&255,u=(n|0)&255,l=(o*255|0)&255;return(l<<24|u<<16|h<<8|a)>>>0},getFloatsFromUintRGB:function(n){var o=(n>>16|0)&255,a=(n>>8|0)&255,h=(n|0)&255;return[o/255,a/255,h/255]},checkShaderMax:function(n,o){(!o||o===-1)&&(o=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS));for(var a=n.createShader(n.FRAGMENT_SHADER),h=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var u=h.replace(/%forloop%/gi,i(o));if(n.shaderSource(a,u),n.compileShader(a),!n.getShaderParameter(a,n.COMPILE_STATUS))o=o/2|0;else break}return o},parseFragmentShaderMaxTextures:function(n,o){if(!n)return"";for(var a="",h=0;h<o;h++)h>0&&(a+=`
	else `),h<o-1&&(a+="if (outTexId < "+h+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+h+"], outTexCoord);",a+=`
	}`;return n=n.replace(/%count%/gi,o.toString()),n.replace(/%forloop%/gi,a)}}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(193),o=i(6),a=function(h,u,l){var f=o(h,u,null);if(f===null)return l;if(Array.isArray(f))return n.RND.pick(f);if(typeof f=="object"){if(f.hasOwnProperty("randInt"))return n.RND.integerInRange(f.randInt[0],f.randInt[1]);if(f.hasOwnProperty("randFloat"))return n.RND.realInRange(f.randFloat[0],f.randFloat[1])}else if(typeof f=="function")return f(u);return f};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(176),a=i(101),h=i(9),u=i(75),l=i(20),f=new n({Extends:h,initialize:function(d,v){h.call(this),this.scene=d,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this),d.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(c,d){return this.data||(this.data=new a(this)),this.data.set(c,d),this},incData:function(c,d){return this.data||(this.data=new a(this)),this.data.inc(c,d),this},toggleData:function(c){return this.data||(this.data=new a(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new a(this)),this.data.get(c)},setInteractive:function(c,d,v){return this.scene.sys.input.enable(this,c,d,v),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(c){return!(f.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,d=this.parentContainer,v=[];d&&(v.unshift(d.getIndex(c)),c=d,d.parentContainer);)d=d.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(c)):v.unshift(this.scene.sys.displayList.getIndex(c)),v},addToDisplayList:function(c){return c===void 0&&(c=this.scene.sys.displayList),this.displayList&&this.displayList!==c&&this.removeFromDisplayList(),c.exists(this)||(this.displayList=c,c.add(this,!0),c.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),c.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var c=this.displayList||this.scene.sys.displayList;return c.exists(this)&&(c.remove(this,!0),c.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),c.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(c){!this.scene||this.ignoreDestroy||(c===void 0&&(c=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(u.DESTROY,this,c),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});f.RENDER_MASK=15,e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(24),a=i(20),h=new n({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(u,l){h.prototype.hasOwnProperty(u)||(h.prototype[u]=l)},h.remove=function(u){h.prototype.hasOwnProperty(u)&&delete h.prototype[u]},o.register("GameObjectCreator",h,"make"),e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(7),o=function(){var a,h,u,l,f,c,d=arguments[0]||{},v=1,p=arguments.length,g=!1;for(typeof d=="boolean"&&(g=d,d=arguments[1]||{},v=2),p===v&&(d=this,--v);v<p;v++)if((a=arguments[v])!=null)for(h in a)u=d[h],l=a[h],d!==l&&(g&&l&&(n(l)||(f=Array.isArray(l)))?(f?(f=!1,c=u&&Array.isArray(u)?u:[]):c=u&&n(u)?u:{},d[h]=o(g,c,l)):l!==void 0&&(d[h]=l));return d};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return Math.max(o,Math.min(a,n))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=new n,a=new n,h=new n,u={camera:o,sprite:a,calc:h},l=function(f,c,d){var v=o,p=a,g=h;return p.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),v.copyFrom(c.matrix),d?(v.multiplyWithOffset(d,-c.scrollX*f.scrollFactorX,-c.scrollY*f.scrollFactorY),p.e=f.x,p.f=f.y):(p.e-=c.scrollX*f.scrollFactorX,p.f-=c.scrollY*f.scrollFactorY),v.multiply(p,g),u};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(95),h=i(2),u=i(155),l=i(240),f=i(517),c=i(156),d=new n({initialize:function(p,g){this.loader=p,this.cache=h(g,"cache",!1),this.type=h(g,"type",!1),this.key=h(g,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var x=h(g,"url");x===void 0?x=p.path+m+"."+h(g,"extension",""):typeof x=="string"&&!x.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(x=p.path+x),this.url=x,this.src="",this.xhrSettings=c(h(g,"responseType",void 0)),h(g,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,h(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?o.FILE_POPULATED:o.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(g,"config",{}),this.multiFile,this.linkFile},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===o.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=o.FILE_LOADING,this.src=u(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=f(this,this.loader.xhr))},onLoad:function(v,p){var g=v.responseURL&&(v.responseURL.indexOf("file://")===0||v.responseURL.indexOf("capacitor://")===0),m=g&&p.target.status===0,x=!(p.target&&p.target.status!==200)||m;v.readyState===4&&v.status>=400&&v.status<=599&&(x=!1),this.state=o.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,x)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=o.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=o.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=o.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(v){v===void 0&&(v=this.data);var p=this.key,g=this.type;this.loader.emit(a.FILE_COMPLETE,p,g,v),this.loader.emit(a.FILE_KEY_COMPLETE+g+"-"+p,p,g,v),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});d.createObjectURL=function(v,p,g){if(typeof URL=="function")v.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(p.type||g)+";base64,"+m.result.split(",")[1]},m.onerror=v.onerror,m.readAsDataURL(p)}},d.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},n={},o={};o.register=function(a,h,u,l){l===void 0&&(l=!1),i[a]={plugin:h,mapping:u,custom:l}},o.registerCustom=function(a,h,u,l){n[a]={plugin:h,mapping:u,data:l}},o.hasCore=function(a){return i.hasOwnProperty(a)},o.hasCustom=function(a){return n.hasOwnProperty(a)},o.getCore=function(a){return i[a]},o.getCustom=function(a){return n[a]},o.getCustomClass=function(a){return n.hasOwnProperty(a)?n[a].plugin:null},o.remove=function(a){i.hasOwnProperty(a)&&delete i[a]},o.removeCustom=function(a){n.hasOwnProperty(a)&&delete n[a]},o.destroyCorePlugins=function(){for(var a in i)i.hasOwnProperty(a)&&delete i[a]},o.destroyCustomPlugins=function(){for(var a in n)n.hasOwnProperty(a)&&delete n[a]},e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(14),a=i(3),h=new n({initialize:function(l,f,c,d,v,p){l===void 0&&(l=1),f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=1),v===void 0&&(v=0),p===void 0&&(p=0),this.matrix=new Float32Array([l,f,c,d,v,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(u){this.matrix[0]=u}},b:{get:function(){return this.matrix[1]},set:function(u){this.matrix[1]=u}},c:{get:function(){return this.matrix[2]},set:function(u){this.matrix[2]=u}},d:{get:function(){return this.matrix[3]},set:function(u){this.matrix[3]=u}},e:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},f:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},tx:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},ty:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var u=this.matrix,l=u[0],f=u[1],c=u[2],d=u[3];return l||f?f>0?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):c||d?o.TAU-(d>0?Math.acos(-c/this.scaleY):-Math.acos(c/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var u=this.matrix;return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,this},translate:function(u,l){var f=this.matrix;return f[4]=f[0]*u+f[2]*l+f[4],f[5]=f[1]*u+f[3]*l+f[5],this},scale:function(u,l){var f=this.matrix;return f[0]*=u,f[1]*=u,f[2]*=l,f[3]*=l,this},rotate:function(u){var l=Math.sin(u),f=Math.cos(u),c=this.matrix,d=c[0],v=c[1],p=c[2],g=c[3];return c[0]=d*f+p*l,c[1]=v*f+g*l,c[2]=d*-l+p*f,c[3]=v*-l+g*f,this},multiply:function(u,l){var f=this.matrix,c=u.matrix,d=f[0],v=f[1],p=f[2],g=f[3],m=f[4],x=f[5],y=c[0],T=c[1],C=c[2],S=c[3],E=c[4],P=c[5],M=l===void 0?this:l;return M.a=y*d+T*p,M.b=y*v+T*g,M.c=C*d+S*p,M.d=C*v+S*g,M.e=E*d+P*p+m,M.f=E*v+P*g+x,M},multiplyWithOffset:function(u,l,f){var c=this.matrix,d=u.matrix,v=c[0],p=c[1],g=c[2],m=c[3],x=c[4],y=c[5],T=l*v+f*g+x,C=l*p+f*m+y,S=d[0],E=d[1],P=d[2],M=d[3],R=d[4],A=d[5];return c[0]=S*v+E*g,c[1]=S*p+E*m,c[2]=P*v+M*g,c[3]=P*p+M*m,c[4]=R*v+A*g+T,c[5]=R*p+A*m+C,this},transform:function(u,l,f,c,d,v){var p=this.matrix,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5];return p[0]=u*g+l*x,p[1]=u*m+l*y,p[2]=f*g+c*x,p[3]=f*m+c*y,p[4]=d*g+v*x+T,p[5]=d*m+v*y+C,this},transformPoint:function(u,l,f){f===void 0&&(f={x:0,y:0});var c=this.matrix,d=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5];return f.x=u*d+l*p+m,f.y=u*v+l*g+x,f},invert:function(){var u=this.matrix,l=u[0],f=u[1],c=u[2],d=u[3],v=u[4],p=u[5],g=l*d-f*c;return u[0]=d/g,u[1]=-f/g,u[2]=-c/g,u[3]=l/g,u[4]=(c*p-d*v)/g,u[5]=-(l*p-f*v)/g,this},copyFrom:function(u){var l=this.matrix;return l[0]=u.a,l[1]=u.b,l[2]=u.c,l[3]=u.d,l[4]=u.e,l[5]=u.f,this},copyFromArray:function(u){var l=this.matrix;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],this},copyToContext:function(u){var l=this.matrix;return u.transform(l[0],l[1],l[2],l[3],l[4],l[5]),u},setToContext:function(u){var l=this.matrix;return u.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),u},copyToArray:function(u){var l=this.matrix;return u===void 0?u=[l[0],l[1],l[2],l[3],l[4],l[5]]:(u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5]),u},setTransform:function(u,l,f,c,d,v){var p=this.matrix;return p[0]=u,p[1]=l,p[2]=f,p[3]=c,p[4]=d,p[5]=v,this},decomposeMatrix:function(){var u=this.decomposedMatrix,l=this.matrix,f=l[0],c=l[1],d=l[2],v=l[3],p=f*v-c*d;if(u.translateX=l[4],u.translateY=l[5],f||c){var g=Math.sqrt(f*f+c*c);u.rotation=c>0?Math.acos(f/g):-Math.acos(f/g),u.scaleX=g,u.scaleY=p/g}else if(d||v){var m=Math.sqrt(d*d+v*v);u.rotation=Math.PI*.5-(v>0?Math.acos(-d/m):-Math.acos(d/m)),u.scaleX=p/m,u.scaleY=m}else u.rotation=0,u.scaleX=0,u.scaleY=0;return u},applyITRS:function(u,l,f,c,d){var v=this.matrix,p=Math.sin(f),g=Math.cos(f);return v[4]=u,v[5]=l,v[0]=g*c,v[1]=p*c,v[2]=-p*d,v[3]=g*d,this},applyInverse:function(u,l,f){f===void 0&&(f=new a);var c=this.matrix,d=c[0],v=c[1],p=c[2],g=c[3],m=c[4],x=c[5],y=1/(d*g+p*-v);return f.x=g*y*u+-p*y*l+(x*p-m*g)*y,f.y=d*y*l+-v*y*u+(-x*d+m*v)*y,f},getX:function(u,l){return u*this.a+l*this.c+this.e},getY:function(u,l){return u*this.b+l*this.d+this.f},getXRound:function(u,l,f){var c=this.getX(u,l);return f&&(c=Math.round(c)),c},getYRound:function(u,l,f){var c=this.getY(u,l);return f&&(c=Math.round(c)),c},getCSSMatrix:function(){var u=this.matrix;return"matrix("+u[0]+","+u[1]+","+u[2]+","+u[3]+","+u[4]+","+u[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(a,h,u,l,f,c){a===void 0&&(a=0),h===void 0&&(h=0),u===void 0&&(u=c.width),l===void 0&&(l=c.height),f||(f={});var d=n(f,"isNotEmpty",!1),v=n(f,"isColliding",!1),p=n(f,"hasInterestingFace",!1);a<0&&(u+=a,a=0),h<0&&(l+=h,h=0),a+u>c.width&&(u=Math.max(c.width-a,0)),h+l>c.height&&(l=Math.max(c.height-h,0));for(var g=[],m=h;m<h+l;m++)for(var x=a;x<a+u;x++){var y=c.data[m][x];if(y!==null){if(d&&y.index===-1||v&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u,l){h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=1);var f,c=0,d=n.length;if(l===1)for(f=u;f<d;f++)n[f][o]=a+c*h,c++;else for(f=u;f>=0;f--)n[f][o]=a+c*h,c++;return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(13),a=function(h,u,l){u.x=o(l,"x",0),u.y=o(l,"y",0),u.depth=o(l,"depth",0),u.flipX=o(l,"flipX",!1),u.flipY=o(l,"flipY",!1);var f=o(l,"scale",null);typeof f=="number"?u.setScale(f):f!==null&&(u.scaleX=o(f,"x",1),u.scaleY=o(f,"y",1));var c=o(l,"scrollFactor",null);typeof c=="number"?u.setScrollFactor(c):c!==null&&(u.scrollFactorX=o(c,"x",1),u.scrollFactorY=o(c,"y",1)),u.rotation=o(l,"rotation",0);var d=o(l,"angle",null);d!==null&&(u.angle=d),u.alpha=o(l,"alpha",1);var v=o(l,"origin",null);if(typeof v=="number")u.setOrigin(v);else if(v!==null){var p=o(v,"x",.5),g=o(v,"y",.5);u.setOrigin(p,g)}u.blendMode=o(l,"blendMode",n.NORMAL),u.visible=o(l,"visible",!0);var m=o(l,"add",!0);return m&&h.sys.displayList.add(u),u.preUpdate&&h.sys.updateList.add(u),u};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(a,h,u,l,f){var c=l.alpha*u.alpha;if(c<=0)return!1;var d=n(u,l,f).calc;return h.globalCompositeOperation=a.blendModes[u.blendMode],h.globalAlpha=c,h.save(),d.setToContext(h),h.imageSmoothingEnabled=!(!a.antialias||u.frame&&u.frame.source.scaleMode),!0};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),o=i(192),a=[],h=!1,u=function(){var l=function(y,T,C,S,E){T===void 0&&(T=1),C===void 0&&(C=1),S===void 0&&(S=n.CANVAS),E===void 0&&(E=!1);var P,M=d(S);return M===null?(M={parent:y,canvas:document.createElement("canvas"),type:S},S===n.CANVAS&&a.push(M),P=M.canvas):(M.parent=y,P=M.canvas),E&&(M.parent=P),P.width=T,P.height=C,h&&S===n.CANVAS&&o.disable(P.getContext("2d")),P},f=function(y,T,C){return l(y,T,C,n.CANVAS)},c=function(y,T,C){return l(y,T,C,n.WEBGL)},d=function(y){if(y===void 0&&(y=n.CANVAS),y===n.WEBGL)return null;for(var T=0;T<a.length;T++){var C=a[T];if(!C.parent&&C.type===y)return C}return null},v=function(y){var T=y instanceof HTMLCanvasElement;a.forEach(function(C){(T&&C.canvas===y||!T&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},p=function(){var y=0;return a.forEach(function(T){T.parent&&y++}),y},g=function(){return a.length-p()},m=function(){h=!0},x=function(){h=!1};return{create2D:f,create:l,createWebGL:c,disableSmoothing:m,enableSmoothing:x,first:d,free:g,pool:a,remove:v,total:p}};e.exports=u()},function(e,r){var i={};e.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(o,a){var h,u;typeof a=="boolean"?(h=2,u=a):(h=1,u=!0);for(var l=h;l<arguments.length;l++){var f=arguments[l];if(f)for(var c in f)u&&f[c]&&f[c].constructor===Object&&(!o[c]||o[c].constructor===Object)?(o[c]=o[c]||{},i.extend(o[c],u,f[c])):o[c]=f[c]}return o},i.clone=function(o,a){return i.extend({},a,o)},i.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var h in o)a.push(h);return a},i.values=function(o){var a=[];if(Object.keys){for(var h=Object.keys(o),u=0;u<h.length;u++)a.push(o[h[u]]);return a}for(var l in o)a.push(o[l]);return a},i.get=function(o,a,h,u){a=a.split(".").slice(h,u);for(var l=0;l<a.length;l+=1)o=o[a[l]];return o},i.set=function(o,a,h,u,l){var f=a.split(".").slice(u,l);return i.get(o,a,0,-1)[f[f.length-1]]=h,h},i.shuffle=function(o){for(var a=o.length-1;a>0;a--){var h=Math.floor(i.random()*(a+1)),u=o[a];o[a]=o[h],o[h]=u}return o},i.choose=function(o){return o[Math.floor(i.random()*o.length)]},i.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},i.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},i.isFunction=function(o){return typeof o=="function"},i.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},i.isString=function(o){return Object.prototype.toString.call(o)==="[object String]"},i.clamp=function(o,a,h){return o<a?a:o>h?h:o},i.sign=function(o){return o<0?-1:1},i.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+n()*(a-o)};var n=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var h=0;h<o.length;h++)if(o[h]===a)return h;return-1},i.map=function(o,a){if(o.map)return o.map(a);for(var h=[],u=0;u<o.length;u+=1)h.push(a(o[u]));return h},i.topologicalSort=function(o){var a=[],h=[],u=[];for(var l in o)!h[l]&&!u[l]&&i._topologicalSort(l,h,u,o,a);return a},i._topologicalSort=function(o,a,h,u,l){var f=u[o]||[];h[o]=!0;for(var c=0;c<f.length;c+=1){var d=f[c];h[d]||a[d]||i._topologicalSort(d,a,h,u,l)}h[o]=!1,a[o]=!0,l.push(o)},i.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var h=arguments[a];h._chained?o.push.apply(o,h._chained):o.push(h)}var u=function(){for(var l,f=new Array(arguments.length),c=0,d=arguments.length;c<d;c++)f[c]=arguments[c];for(c=0;c<o.length;c+=1){var v=o[c].apply(l,f);typeof v<"u"&&(l=v)}return l};return u._chained=o,u},i.chainPathBefore=function(o,a,h){return i.set(o,a,i.chain(h,i.get(o,a)))},i.chainPathAfter=function(o,a,h){return i.set(o,a,i.chain(i.get(o,a),h))}}()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(15),h=i(47),u=new n({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Transform,o.Visible],initialize:function(f,c,d){c===void 0&&(c="Shape"),a.call(this,f,c),this.geom=d,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(l,f){return f===void 0&&(f=1),l===void 0?this.isFilled=!1:(this.fillColor=l,this.fillAlpha=f,this.isFilled=!0),this},setStrokeStyle:function(l,f,c){return c===void 0&&(c=1),l===void 0?this.isStroked=!1:(this.lineWidth=l,this.strokeColor=f,this.strokeAlpha=c,this.isStroked=!0),this},setClosePath:function(l){return this.closePath=l,this},setSize:function(l,f){return this.width=l,this.height=f,this},setDisplaySize:function(l,f){return this.displayWidth=l,this.displayHeight=f,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}}});e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(a){return a*n.DEG_TO_RAD};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(103),a=i(328),h=i(188),u=i(329),l=new n({initialize:function(c,d,v,p){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,d,v,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(f,c,d,v,p){return v===void 0&&(v=255),p===void 0&&(p=!0),this._locked=!0,this.red=f,this.green=c,this.blue=d,this.alpha=v,this._locked=!1,this.update(p)},setGLTo:function(f,c,d,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=f,this.greenGL=c,this.blueGL=d,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(f){return this._locked=!0,this.red=f.r,this.green=f.g,this.blue=f.b,f.hasOwnProperty("a")&&(this.alpha=f.a),this._locked=!1,this.update(!0)},setFromHSV:function(f,c,d){return h(f,c,d,this)},update:function(f){if(f===void 0&&(f=!1),this._locked)return this;var c=this.r,d=this.g,v=this.b,p=this.a;return this._color=o(c,d,v),this._color32=a(c,d,v,p),this._rgba="rgba("+c+","+d+","+v+","+p/255+")",f&&u(c,d,v,this),this},updateHSV:function(){var f=this.r,c=this.g,d=this.b;return u(f,c,d,this),this},clone:function(){return new l(this.r,this.g,this.b,this.a)},gray:function(f){return this.setTo(f,f,f)},random:function(f,c){f===void 0&&(f=0),c===void 0&&(c=255);var d=Math.floor(f+Math.random()*(c-f)),v=Math.floor(f+Math.random()*(c-f)),p=Math.floor(f+Math.random()*(c-f));return this.setTo(d,v,p)},randomGray:function(f,c){f===void 0&&(f=0),c===void 0&&(c=255);var d=Math.floor(f+Math.random()*(c-f));return this.setTo(d,d,d)},saturate:function(f){return this.s+=f/100,this},desaturate:function(f){return this.s-=f/100,this},lighten:function(f){return this.v+=f/100,this},darken:function(f){return this.v-=f/100,this},brighten:function(f){var c=this.r,d=this.g,v=this.b;return c=Math.max(0,Math.min(255,c-Math.round(255*-(f/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(f/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(f/100)))),this.setTo(c,d,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(f){this.gl[0]=Math.min(Math.abs(f),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(f){this.gl[1]=Math.min(Math.abs(f),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(f){this.gl[2]=Math.min(Math.abs(f),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(f){this.gl[3]=Math.min(Math.abs(f),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(f){f=Math.floor(Math.abs(f)),this.r=Math.min(f,255),this.gl[0]=f/255,this.update(!0)}},green:{get:function(){return this.g},set:function(f){f=Math.floor(Math.abs(f)),this.g=Math.min(f,255),this.gl[1]=f/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(f){f=Math.floor(Math.abs(f)),this.b=Math.min(f,255),this.gl[2]=f/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(f){f=Math.floor(Math.abs(f)),this.a=Math.min(f,255),this.gl[3]=f/255,this.update()}},h:{get:function(){return this._h},set:function(f){this._h=f,h(f,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(f){this._s=f,h(this._h,f,this._v,this)}},v:{get:function(){return this._v},set:function(f){this._v=f,h(this._h,this._s,f,this)}}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l){this.x=0,this.y=0,this.z=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=u||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clone:function(){return new o(this.x,this.y,this.z)},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this.z=a.z+h.z,this},crossVectors:function(a,h){var u=a.x,l=a.y,f=a.z,c=h.x,d=h.y,v=h.z;return this.x=l*v-f*d,this.y=f*c-u*v,this.z=u*d-l*c,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this},set:function(a,h,u){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=h||0,this.z=u||0),this},setFromMatrixPosition:function(a){return this.fromArray(a.val,12)},setFromMatrixColumn:function(a,h){return this.fromArray(a.val,h*4)},fromArray:function(a,h){return h===void 0&&(h=0),this.x=a[h],this.y=a[h+1],this.z=a[h+2],this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addScale:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this.z+=a.z*h||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(a){var h=a.x-this.x,u=a.y-this.y,l=a.z-this.z||0;return Math.sqrt(h*h+u*u+l*l)},distanceSq:function(a){var h=a.x-this.x,u=a.y-this.y,l=a.z-this.z||0;return h*h+u*u+l*l},length:function(){var a=this.x,h=this.y,u=this.z;return Math.sqrt(a*a+h*h+u*u)},lengthSq:function(){var a=this.x,h=this.y,u=this.z;return a*a+h*h+u*u},normalize:function(){var a=this.x,h=this.y,u=this.z,l=a*a+h*h+u*u;return l>0&&(l=1/Math.sqrt(l),this.x=a*l,this.y=h*l,this.z=u*l),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},cross:function(a){var h=this.x,u=this.y,l=this.z,f=a.x,c=a.y,d=a.z;return this.x=u*d-l*c,this.y=l*f-h*d,this.z=h*c-u*f,this},lerp:function(a,h){h===void 0&&(h=0);var u=this.x,l=this.y,f=this.z;return this.x=u+h*(a.x-u),this.y=l+h*(a.y-l),this.z=f+h*(a.z-f),this},applyMatrix3:function(a){var h=this.x,u=this.y,l=this.z,f=a.val;return this.x=f[0]*h+f[3]*u+f[6]*l,this.y=f[1]*h+f[4]*u+f[7]*l,this.z=f[2]*h+f[5]*u+f[8]*l,this},applyMatrix4:function(a){var h=this.x,u=this.y,l=this.z,f=a.val,c=1/(f[3]*h+f[7]*u+f[11]*l+f[15]);return this.x=(f[0]*h+f[4]*u+f[8]*l+f[12])*c,this.y=(f[1]*h+f[5]*u+f[9]*l+f[13])*c,this.z=(f[2]*h+f[6]*u+f[10]*l+f[14])*c,this},transformMat3:function(a){var h=this.x,u=this.y,l=this.z,f=a.val;return this.x=h*f[0]+u*f[3]+l*f[6],this.y=h*f[1]+u*f[4]+l*f[7],this.z=h*f[2]+u*f[5]+l*f[8],this},transformMat4:function(a){var h=this.x,u=this.y,l=this.z,f=a.val;return this.x=f[0]*h+f[4]*u+f[8]*l+f[12],this.y=f[1]*h+f[5]*u+f[9]*l+f[13],this.z=f[2]*h+f[6]*u+f[10]*l+f[14],this},transformCoordinates:function(a){var h=this.x,u=this.y,l=this.z,f=a.val,c=h*f[0]+u*f[4]+l*f[8]+f[12],d=h*f[1]+u*f[5]+l*f[9]+f[13],v=h*f[2]+u*f[6]+l*f[10]+f[14],p=h*f[3]+u*f[7]+l*f[11]+f[15];return this.x=c/p,this.y=d/p,this.z=v/p,this},transformQuat:function(a){var h=this.x,u=this.y,l=this.z,f=a.x,c=a.y,d=a.z,v=a.w,p=v*h+c*l-d*u,g=v*u+d*h-f*l,m=v*l+f*u-c*h,x=-f*h-c*u-d*l;return this.x=p*v+x*-f+g*-d-m*-c,this.y=g*v+x*-c+m*-f-p*-d,this.z=m*v+x*-d+p*-c-g*-f,this},project:function(a){var h=this.x,u=this.y,l=this.z,f=a.val,c=f[0],d=f[1],v=f[2],p=f[3],g=f[4],m=f[5],x=f[6],y=f[7],T=f[8],C=f[9],S=f[10],E=f[11],P=f[12],M=f[13],R=f[14],A=f[15],O=1/(h*p+u*y+l*E+A);return this.x=(h*c+u*g+l*T+P)*O,this.y=(h*d+u*m+l*C+M)*O,this.z=(h*v+u*x+l*S+R)*O,this},projectViewMatrix:function(a,h){return this.applyMatrix4(a).applyMatrix4(h)},unprojectViewMatrix:function(a,h){return this.applyMatrix4(a).applyMatrix4(h)},unproject:function(a,h){var u=a.x,l=a.y,f=a.z,c=a.w,d=this.x-u,v=c-this.y-1-l,p=this.z;return this.x=2*d/f-1,this.y=2*v/c-1,this.z=2*p-1,this.project(h)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});o.ZERO=new o,o.RIGHT=new o(1,0,0),o.LEFT=new o(-1,0,0),o.UP=new o(0,-1,0),o.DOWN=new o(0,1,0),o.FORWARD=new o(0,0,1),o.BACK=new o(0,0,-1),o.ONE=new o(1,1,1),e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,r,i){var n={};e.exports=n;var o=i(64),a=i(83),h=i(165),u=i(32),l=i(84),f=i(271);(function(){n._inertiaScale=4,n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,n.create=function(d){var v={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!d.hasOwnProperty("position")&&d.hasOwnProperty("vertices")?d.position=o.centre(d.vertices):d.hasOwnProperty("vertices")||(v.vertices=o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=u.extend(v,d);return c(p,d),p.setOnCollideWith=function(g,m){return m?this.onCollideWith[g.id]=m:delete this.onCollideWith[g.id],this},p},n.nextGroup=function(d){return d?n._nextNonCollidingGroupId--:n._nextCollidingGroupId++},n.nextCategory=function(){return n._nextCategory=n._nextCategory<<1,n._nextCategory};var c=function(d,v){v=v||{},n.set(d,{bounds:d.bounds||l.create(d.vertices),positionPrev:d.positionPrev||a.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d});var p=d.bounds;if(o.rotate(d.vertices,d.angle,d.position),f.rotate(d.axes,d.angle),l.update(p,d.vertices,d.velocity),n.set(d,{axes:v.axes||d.axes,area:v.area||d.area,mass:v.mass||d.mass,inertia:v.inertia||d.inertia}),d.parts.length===1){var g=d.centerOfMass,m=d.centerOffset,x=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-d.position.x)/x,g.y=-(p.min.y-d.position.y)/y,m.x=x*g.x,m.y=y*g.y}};n.set=function(d,v,p){var g;typeof v=="string"&&(g=v,v={},v[g]=p);for(g in v)if(Object.prototype.hasOwnProperty.call(v,g))switch(p=v[g],g){case"isStatic":n.setStatic(d,p);break;case"isSleeping":h.set(d,p);break;case"mass":n.setMass(d,p);break;case"density":n.setDensity(d,p);break;case"inertia":n.setInertia(d,p);break;case"vertices":n.setVertices(d,p);break;case"position":n.setPosition(d,p);break;case"angle":n.setAngle(d,p);break;case"velocity":n.setVelocity(d,p);break;case"angularVelocity":n.setAngularVelocity(d,p);break;case"parts":n.setParts(d,p);break;case"centre":n.setCentre(d,p);break;default:d[g]=p}},n.setStatic=function(d,v){for(var p=0;p<d.parts.length;p++){var g=d.parts[p];g.isStatic=v,v?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},n.setMass=function(d,v){var p=d.inertia/(d.mass/6);d.inertia=p*(v/6),d.inverseInertia=1/d.inertia,d.mass=v,d.inverseMass=1/d.mass,d.density=d.mass/d.area},n.setDensity=function(d,v){n.setMass(d,v*d.area),d.density=v},n.setInertia=function(d,v){d.inertia=v,d.inverseInertia=1/d.inertia},n.setVertices=function(d,v){v[0].body===d?d.vertices=v:d.vertices=o.create(v,d),d.axes=f.fromVertices(d.vertices),d.area=o.area(d.vertices),n.setMass(d,d.density*d.area);var p=o.centre(d.vertices);o.translate(d.vertices,p,-1),n.setInertia(d,n._inertiaScale*o.inertia(d.vertices,d.mass)),o.translate(d.vertices,d.position),l.update(d.bounds,d.vertices,d.velocity)},n.setParts=function(d,v,p){var g;for(v=v.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,g=0;g<v.length;g++){var m=v[g];m!==d&&(m.parent=d,d.parts.push(m))}if(d.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var x=[];for(g=0;g<v.length;g++)x=x.concat(v[g].vertices);o.clockwiseSort(x);var y=o.hull(x),T=o.centre(y);n.setVertices(d,y),o.translate(d.vertices,T)}var C=n._totalProperties(d),S=C.centre.x,E=C.centre.y,P=d.bounds,M=d.centerOfMass,R=d.centerOffset;l.update(P,d.vertices,d.velocity),M.x=-(P.min.x-S)/(P.max.x-P.min.x),M.y=-(P.min.y-E)/(P.max.y-P.min.y),R.x=S,R.y=E,d.area=C.area,d.parent=d,d.position.x=S,d.position.y=E,d.positionPrev.x=S,d.positionPrev.y=E,n.setMass(d,C.mass),n.setInertia(d,C.inertia),n.setPosition(d,C.centre)}},n.setCentre=function(d,v,p){p?(d.positionPrev.x+=v.x,d.positionPrev.y+=v.y,d.position.x+=v.x,d.position.y+=v.y):(d.positionPrev.x=v.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=v.y-(d.position.y-d.positionPrev.y),d.position.x=v.x,d.position.y=v.y)},n.setPosition=function(d,v){var p=a.sub(v,d.position);d.positionPrev.x+=p.x,d.positionPrev.y+=p.y;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.position.x+=p.x,m.position.y+=p.y,o.translate(m.vertices,p),l.update(m.bounds,m.vertices,d.velocity)}},n.setAngle=function(d,v){var p=v-d.angle;d.anglePrev+=p;for(var g=0;g<d.parts.length;g++){var m=d.parts[g];m.angle+=p,o.rotate(m.vertices,p,d.position),f.rotate(m.axes,p),l.update(m.bounds,m.vertices,d.velocity),g>0&&a.rotateAbout(m.position,p,d.position,m.position)}},n.setVelocity=function(d,v){d.positionPrev.x=d.position.x-v.x,d.positionPrev.y=d.position.y-v.y,d.velocity.x=v.x,d.velocity.y=v.y,d.speed=a.magnitude(d.velocity)},n.setAngularVelocity=function(d,v){d.anglePrev=d.angle-v,d.angularVelocity=v,d.angularSpeed=Math.abs(d.angularVelocity)},n.translate=function(d,v){n.setPosition(d,a.add(d.position,v))},n.rotate=function(d,v,p){if(!p)n.setAngle(d,d.angle+v);else{var g=Math.cos(v),m=Math.sin(v),x=d.position.x-p.x,y=d.position.y-p.y;n.setPosition(d,{x:p.x+(x*g-y*m),y:p.y+(x*m+y*g)}),n.setAngle(d,d.angle+v)}},n.scale=function(d,v,p,g){var m=0,x=0;g=g||d.position;for(var y=0;y<d.parts.length;y++){var T=d.parts[y];T.scale.x=v,T.scale.y=p,o.scale(T.vertices,v,p,g),T.axes=f.fromVertices(T.vertices),T.area=o.area(T.vertices),n.setMass(T,d.density*T.area),o.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),n.setInertia(T,n._inertiaScale*o.inertia(T.vertices,T.mass)),o.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(m+=T.area,x+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*v,T.position.y=g.y+(T.position.y-g.y)*p,l.update(T.bounds,T.vertices,d.velocity)}d.parts.length>1&&(d.area=m,d.isStatic||(n.setMass(d,d.density*m),n.setInertia(d,x))),d.circleRadius&&(v===p?d.circleRadius*=v:d.circleRadius=null)},n.update=function(d,v,p,g){var m=Math.pow(v*p*d.timeScale,2),x=1-d.frictionAir*p*d.timeScale,y=d.position.x-d.positionPrev.x,T=d.position.y-d.positionPrev.y;d.velocity.x=y*x*g+d.force.x/d.mass*m,d.velocity.y=T*x*g+d.force.y/d.mass*m,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.angularVelocity=(d.angle-d.anglePrev)*x*g+d.torque/d.inertia*m,d.anglePrev=d.angle,d.angle+=d.angularVelocity,d.speed=a.magnitude(d.velocity),d.angularSpeed=Math.abs(d.angularVelocity);for(var C=0;C<d.parts.length;C++){var S=d.parts[C];o.translate(S.vertices,d.velocity),C>0&&(S.position.x+=d.velocity.x,S.position.y+=d.velocity.y),d.angularVelocity!==0&&(o.rotate(S.vertices,d.angularVelocity,d.position),f.rotate(S.axes,d.angularVelocity),C>0&&a.rotateAbout(S.position,d.angularVelocity,d.position,S.position)),l.update(S.bounds,S.vertices,d.velocity)}},n.applyForce=function(d,v,p){d.force.x+=p.x,d.force.y+=p.y;var g={x:v.x-d.position.x,y:v.y-d.position.y};d.torque+=g.x*p.y-g.y*p.x},n._totalProperties=function(d){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=d.parts.length===1?0:1;p<d.parts.length;p++){var g=d.parts[p],m=g.mass!==1/0?g.mass:1;v.mass+=m,v.area+=g.area,v.inertia+=g.inertia,v.centre=a.add(v.centre,a.mult(g.position,m))}return v.centre=a.div(v.centre,v.mass),v}})()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y+n.height-n.height*n.originY};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x-n.width*n.originX};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x+n.width-n.width*n.originX};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y-n.height*n.originY};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u,l){h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=1);var f,c=0,d=n.length;if(l===1)for(f=u;f<d;f++)n[f][o]+=a+c*h,c++;else for(f=u;f>=0;f--)n[f][o]+=a+c*h,c++;return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(307),a=i(172),h=i(56),u=i(173),l=i(3),f=new n({initialize:function(d,v,p,g){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=h.LINE,this.x1=d,this.y1=v,this.x2=p,this.y2=g},getPoint:function(c,d){return o(this,c,d)},getPoints:function(c,d,v){return a(this,c,d,v)},getRandomPoint:function(c){return u(this,c)},setTo:function(c,d,v,p){return c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),this.x1=c,this.y1=d,this.x2=v,this.y2=p,this},getPointA:function(c){return c===void 0&&(c=new l),c.set(this.x1,this.y1),c},getPointB:function(c){return c===void 0&&(c=new l),c.set(this.x2,this.y2),c},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(c){this.x1<=this.x2?this.x1=c:this.x2=c}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(c){this.x1>this.x2?this.x1=c:this.x2=c}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(c){this.y1<=this.y2?this.y1=c:this.y2=c}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(c){this.y1>this.y2?this.y1=c:this.y2=c}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=a||o.fillColor,l=h||o.fillAlpha,f=(u&16711680)>>>16,c=(u&65280)>>>8,d=u&255;n.fillStyle="rgba("+f+","+c+","+d+","+l+")"};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f){var c=[];f.forEach(function(v){v&&c.push(v)}),this.loader=h,this.type=u,this.key=l,this.multiKeyIndex=h.multiKeyIndex++,this.files=c,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=h.baseURL,this.path=h.path,this.prefix=h.prefix;for(var d=0;d<c.length;d++)c[d].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(a){return this.files.push(a),a.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(a){var h=this.files.indexOf(a);h!==-1&&this.pending--},onFileFailed:function(a){var h=this.files.indexOf(a);h!==-1&&this.failed++}});e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=n-a,l=o-h;return Math.sqrt(u*u+l*l)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.y=o+n.height*n.originY,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x=o+n.width*n.originX,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x=o-n.width+n.width*n.originX,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.y=o-n.height+n.height*n.originY,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n.width<=0||n.height<=0?!1:n.x<=o&&n.x+n.width>=o&&n.y<=a&&n.y+n.height>=a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(175),a=i(9),h=i(374),u=i(2),l=i(69),f=i(91),c=i(141),d=i(12),v=i(375),p=new n({Extends:a,initialize:function(m){a.call(this);var x=m.game,y=x.renderer,T=y.gl;this.name=u(m,"name","WebGLPipeline"),this.game=x,this.renderer=y,this.manager,this.gl=T,this.view=x.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=u(m,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=u(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1},boot:function(){var g,m=this.gl,x=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new l().identity());var T=this.renderTargets,C=u(x,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var S=y.width,E=y.height;if(typeof C=="number")for(g=0;g<C;g++)T.push(new c(y,S,E,1,0,!0));else if(Array.isArray(C))for(g=0;g<C.length;g++){var P=u(C[g],"scale",1),M=u(C[g],"minFilter",0),R=u(C[g],"autoClear",1);T.push(new c(y,S,E,P,M,R))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(x);var A=this.shaders,O=0;for(g=0;g<A.length;g++)A[g].vertexSize>O&&(O=A[g].vertexSize);var b=u(x,"batchSize",y.config.batchSize);this.vertexCapacity=b*6;var w=new ArrayBuffer(this.vertexCapacity*O);this.vertexData=w,this.bytes=new Uint8Array(w),this.vertexViewF32=new Float32Array(w),this.vertexViewU32=new Uint32Array(w);var I=u(x,"vertices",null);for(I?(this.vertexViewF32.set(I),this.vertexBuffer=y.createVertexBuffer(w,m.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(w.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),g=A.length-1;g>=0;g--)A[g].rebind();this.hasBooted=!0,y.on(f.RESIZE,this.resize,this),y.on(f.PRE_RENDER,this.onPreRender,this),y.on(f.RENDER,this.onRender,this),y.on(f.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,m){var x=this.renderer;if(g!==this.currentShader||x.currentProgram!==this.currentShader.program){this.flush(),x.resetTextures();var y=this.setVertexBuffer();y&&!m&&(m=!0),g.bind(m,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===g)return m[x]},setShadersFromConfig:function(g){var m,x=this.shaders,y=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var T="vertShader",C="fragShader",S="attributes",E=u(g,T,null),P=d.parseFragmentShaderMaxTextures(u(g,C,null),y.maxTextures),M=u(g,S,null),R=u(g,"shaders",[]),A=R.length;if(A===0)E&&P&&(this.shaders=[new v(this,"default",E,P,o(M))]);else{var O=[];for(m=0;m<A;m++){var b=R[m],w=u(b,"name","default"),I=u(b,T,E),Y=d.parseFragmentShaderMaxTextures(u(b,C,P),y.maxTextures),z=u(b,S,M);I&&Y&&O.push(new v(this,w,I,Y,o(z)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,m){return m===void 0&&(m=g.frame),this.currentUnit=this.renderer.setTextureSource(m.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,m){(g!==this.width||m!==this.height)&&this.flush(),this.width=g,this.height=m;for(var x=this.renderTargets,y=0;y<x.length;y++)x[y].resize(g,m);return this.setProjectionMatrix(g,m),this.emit(h.RESIZE,g,m,this),this.onResize(g,m),this},setProjectionMatrix:function(g,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=g,this.projectionHeight=m,x.ortho(0,g,m,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",C=0;C<y.length;C++){var S=y[C];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,x.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==m)&&this.setProjectionMatrix(g,m)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var m=this.setVertexBuffer();return g.bind(m),this.currentShader=g,this.emit(h.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var y=m[x].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,m=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==m?(g.bindBuffer(g.ARRAY_BUFFER,m),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var m=this.gl,x=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*y)),m.drawArrays(this.topology,0,x)),this.vertexCount=0,this.emit(h.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,m,x,y,T,C,S){var E=this.vertexViewF32,P=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++M]=g,E[++M]=m,E[++M]=x,E[++M]=y,E[++M]=T,E[++M]=C,P[++M]=S,this.vertexCount++},batchQuad:function(g,m,x,y,T,C,S,E,P,M,R,A,O,b,w,I,Y,z,V,W){W===void 0&&(W=this.currentUnit);var F=!1;return this.shouldFlush(6)&&(this.flush(),F=!0,W=this.setTexture2D(V)),this.batchVert(m,x,M,R,W,z,b),this.batchVert(y,T,M,O,W,z,I),this.batchVert(C,S,A,O,W,z,Y),this.batchVert(m,x,M,R,W,z,b),this.batchVert(C,S,A,O,W,z,Y),this.batchVert(E,P,A,R,W,z,w),this.onBatch(g),F},batchTri:function(g,m,x,y,T,C,S,E,P,M,R,A,O,b,w,I,Y){Y===void 0&&(Y=this.currentUnit);var z=!1;return this.shouldFlush(3)&&(this.flush(),z=!0,Y=this.setTexture2D(I)),this.batchVert(m,x,E,P,Y,w,A),this.batchVert(y,T,E,R,Y,w,O),this.batchVert(C,S,M,R,Y,w,b),this.onBatch(g),z},drawFillRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),m=Math.floor(m);var P=Math.floor(g+x),M=Math.floor(m+y),R=this.setTexture2D(S),A=d.getTintAppendFloatAlphaAndSwap(T,C),O=0,b=0,w=1,I=1;E&&(b=1,I=0),this.batchQuad(null,g,m,g,M,P,M,P,m,O,b,w,I,A,A,A,A,0,S,R)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,g),this},bindRenderTarget:function(g,m){return this.bindTexture(g.texture,m)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1f(g,m),this},set2f:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2f(g,m,x),this},set3f:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,m,x,y),this},set4f:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4f(g,m,x,y,T),this},set1fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(g,m),this},set2fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(g,m),this},set3fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(g,m),this},set4fv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(g,m),this},set1iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(g,m),this},set2iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(g,m),this},set3iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(g,m),this},set4iv:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(g,m),this},set1i:function(g,m,x){return x===void 0&&(x=this.currentShader),x.set1i(g,m),this},set2i:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.set2i(g,m,x),this},set3i:function(g,m,x,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,m,x,y),this},set4i:function(g,m,x,y,T,C){return C===void 0&&(C=this.currentShader),C.set4i(g,m,x,y,T),this},setMatrix2fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,m,x),this},setMatrix3fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,m,x),this},setMatrix4fv:function(g,m,x,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,m,x),this},destroy:function(){this.emit(h.DESTROY,this);var g,m=this.shaders;for(g=0;g<m.length;g++)m[g].destroy();var x=this.renderTargets;for(g=0;g<x.length;g++)x[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(f.RESIZE,this.resize,this),y.off(f.PRE_RENDER,this.onPreRender,this),y.off(f.RENDER,this.onRender,this),y.off(f.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function n(L,D,B){B=B||2;var G=D&&D.length,N=G?D[0]*B:L.length,X=o(L,0,N,B,!0),U=[];if(!X||X.next===X.prev)return U;var H,$,Z,J,Q,_,j;if(G&&(X=d(L,D,X,B)),L.length>80*B){H=Z=L[0],$=J=L[1];for(var tt=B;tt<N;tt+=B)Q=L[tt],_=L[tt+1],Q<H&&(H=Q),_<$&&($=_),Q>Z&&(Z=Q),_>J&&(J=_);j=Math.max(Z-H,J-$),j=j!==0?1/j:0}return h(X,U,B,H,$,j),U}function o(L,D,B,G,N){var X,U;if(N===F(L,D,B,G)>0)for(X=D;X<B;X+=G)U=z(X,L[X],L[X+1],U);else for(X=B-G;X>=D;X-=G)U=z(X,L[X],L[X+1],U);return U&&M(U,U.next)&&(V(U),U=U.next),U}function a(L,D){if(!L)return L;D||(D=L);var B=L,G;do if(G=!1,!B.steiner&&(M(B,B.next)||P(B.prev,B,B.next)===0)){if(V(B),B=D=B.prev,B===B.next)break;G=!0}else B=B.next;while(G||B!==D);return D}function h(L,D,B,G,N,X,U){if(L){!U&&X&&x(L,G,N,X);for(var H=L,$,Z;L.prev!==L.next;){if($=L.prev,Z=L.next,X?l(L,G,N,X):u(L)){D.push($.i/B),D.push(L.i/B),D.push(Z.i/B),V(L),L=Z.next,H=Z.next;continue}if(L=Z,L===H){U?U===1?(L=f(a(L),D,B),h(L,D,B,G,N,X,2)):U===2&&c(L,D,B,G,N,X):h(a(L),D,B,G,N,X,1);break}}}}function u(L){var D=L.prev,B=L,G=L.next;if(P(D,B,G)>=0)return!1;for(var N=L.next.next;N!==L.prev;){if(S(D.x,D.y,B.x,B.y,G.x,G.y,N.x,N.y)&&P(N.prev,N,N.next)>=0)return!1;N=N.next}return!0}function l(L,D,B,G){var N=L.prev,X=L,U=L.next;if(P(N,X,U)>=0)return!1;for(var H=N.x<X.x?N.x<U.x?N.x:U.x:X.x<U.x?X.x:U.x,$=N.y<X.y?N.y<U.y?N.y:U.y:X.y<U.y?X.y:U.y,Z=N.x>X.x?N.x>U.x?N.x:U.x:X.x>U.x?X.x:U.x,J=N.y>X.y?N.y>U.y?N.y:U.y:X.y>U.y?X.y:U.y,Q=T(H,$,D,B,G),_=T(Z,J,D,B,G),j=L.prevZ,tt=L.nextZ;j&&j.z>=Q&&tt&&tt.z<=_;){if(j!==L.prev&&j!==L.next&&S(N.x,N.y,X.x,X.y,U.x,U.y,j.x,j.y)&&P(j.prev,j,j.next)>=0||(j=j.prevZ,tt!==L.prev&&tt!==L.next&&S(N.x,N.y,X.x,X.y,U.x,U.y,tt.x,tt.y)&&P(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;j&&j.z>=Q;){if(j!==L.prev&&j!==L.next&&S(N.x,N.y,X.x,X.y,U.x,U.y,j.x,j.y)&&P(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;tt&&tt.z<=_;){if(tt!==L.prev&&tt!==L.next&&S(N.x,N.y,X.x,X.y,U.x,U.y,tt.x,tt.y)&&P(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function f(L,D,B){var G=L;do{var N=G.prev,X=G.next.next;!M(N,X)&&R(N,G,G.next,X)&&w(N,X)&&w(X,N)&&(D.push(N.i/B),D.push(G.i/B),D.push(X.i/B),V(G),V(G.next),G=L=X),G=G.next}while(G!==L);return a(G)}function c(L,D,B,G,N,X){var U=L;do{for(var H=U.next.next;H!==U.prev;){if(U.i!==H.i&&E(U,H)){var $=Y(U,H);U=a(U,U.next),$=a($,$.next),h(U,D,B,G,N,X),h($,D,B,G,N,X);return}H=H.next}U=U.next}while(U!==L)}function d(L,D,B,G){var N=[],X,U,H,$,Z;for(X=0,U=D.length;X<U;X++)H=D[X]*G,$=X<U-1?D[X+1]*G:L.length,Z=o(L,H,$,G,!1),Z===Z.next&&(Z.steiner=!0),N.push(C(Z));for(N.sort(v),X=0;X<N.length;X++)p(N[X],B),B=a(B,B.next);return B}function v(L,D){return L.x-D.x}function p(L,D){if(D=g(L,D),D){var B=Y(D,L);a(D,D.next),a(B,B.next)}}function g(L,D){var B=D,G=L.x,N=L.y,X=-1/0,U;do{if(N<=B.y&&N>=B.next.y&&B.next.y!==B.y){var H=B.x+(N-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(H<=G&&H>X){if(X=H,H===G){if(N===B.y)return B;if(N===B.next.y)return B.next}U=B.x<B.next.x?B:B.next}}B=B.next}while(B!==D);if(!U)return null;if(G===X)return U;var $=U,Z=U.x,J=U.y,Q=1/0,_;B=U;do G>=B.x&&B.x>=Z&&G!==B.x&&S(N<J?G:X,N,Z,J,N<J?X:G,N,B.x,B.y)&&(_=Math.abs(N-B.y)/(G-B.x),w(B,L)&&(_<Q||_===Q&&(B.x>U.x||B.x===U.x&&m(U,B)))&&(U=B,Q=_)),B=B.next;while(B!==$);return U}function m(L,D){return P(L.prev,L,D.prev)<0&&P(D.next,L,L.next)<0}function x(L,D,B,G){var N=L;do N.z===null&&(N.z=T(N.x,N.y,D,B,G)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==L);N.prevZ.nextZ=null,N.prevZ=null,y(N)}function y(L){var D,B,G,N,X,U,H,$,Z=1;do{for(B=L,L=null,X=null,U=0;B;){for(U++,G=B,H=0,D=0;D<Z&&(H++,G=G.nextZ,!!G);D++);for($=Z;H>0||$>0&&G;)H!==0&&($===0||!G||B.z<=G.z)?(N=B,B=B.nextZ,H--):(N=G,G=G.nextZ,$--),X?X.nextZ=N:L=N,N.prevZ=X,X=N;B=G}X.nextZ=null,Z*=2}while(U>1);return L}function T(L,D,B,G,N){return L=32767*(L-B)*N,D=32767*(D-G)*N,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,L|D<<1}function C(L){var D=L,B=L;do(D.x<B.x||D.x===B.x&&D.y<B.y)&&(B=D),D=D.next;while(D!==L);return B}function S(L,D,B,G,N,X,U,H){return(N-U)*(D-H)-(L-U)*(X-H)>=0&&(L-U)*(G-H)-(B-U)*(D-H)>=0&&(B-U)*(X-H)-(N-U)*(G-H)>=0}function E(L,D){return L.next.i!==D.i&&L.prev.i!==D.i&&!b(L,D)&&(w(L,D)&&w(D,L)&&I(L,D)&&(P(L.prev,L,D.prev)||P(L,D.prev,D))||M(L,D)&&P(L.prev,L,L.next)>0&&P(D.prev,D,D.next)>0)}function P(L,D,B){return(D.y-L.y)*(B.x-D.x)-(D.x-L.x)*(B.y-D.y)}function M(L,D){return L.x===D.x&&L.y===D.y}function R(L,D,B,G){var N=O(P(L,D,B)),X=O(P(L,D,G)),U=O(P(B,G,L)),H=O(P(B,G,D));return!!(N!==X&&U!==H||N===0&&A(L,B,D)||X===0&&A(L,G,D)||U===0&&A(B,L,G)||H===0&&A(B,D,G))}function A(L,D,B){return D.x<=Math.max(L.x,B.x)&&D.x>=Math.min(L.x,B.x)&&D.y<=Math.max(L.y,B.y)&&D.y>=Math.min(L.y,B.y)}function O(L){return L>0?1:L<0?-1:0}function b(L,D){var B=L;do{if(B.i!==L.i&&B.next.i!==L.i&&B.i!==D.i&&B.next.i!==D.i&&R(B,B.next,L,D))return!0;B=B.next}while(B!==L);return!1}function w(L,D){return P(L.prev,L,L.next)<0?P(L,D,L.next)>=0&&P(L,L.prev,D)>=0:P(L,D,L.prev)<0||P(L,L.next,D)<0}function I(L,D){var B=L,G=!1,N=(L.x+D.x)/2,X=(L.y+D.y)/2;do B.y>X!=B.next.y>X&&B.next.y!==B.y&&N<(B.next.x-B.x)*(X-B.y)/(B.next.y-B.y)+B.x&&(G=!G),B=B.next;while(B!==L);return G}function Y(L,D){var B=new W(L.i,L.x,L.y),G=new W(D.i,D.x,D.y),N=L.next,X=D.prev;return L.next=D,D.prev=L,B.next=N,N.prev=B,G.next=B,B.prev=G,X.next=G,G.prev=X,G}function z(L,D,B,G){var N=new W(L,D,B);return G?(N.next=G.next,N.prev=G,G.next.prev=N,G.next=N):(N.prev=N,N.next=N),N}function V(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function W(L,D,B){this.i=L,this.x=D,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(L,D,B,G){var N=D&&D.length,X=N?D[0]*B:L.length,U=Math.abs(F(L,0,X,B));if(N)for(var H=0,$=D.length;H<$;H++){var Z=D[H]*B,J=H<$-1?D[H+1]*B:L.length;U-=Math.abs(F(L,Z,J,B))}var Q=0;for(H=0;H<G.length;H+=3){var _=G[H]*B,j=G[H+1]*B,tt=G[H+2]*B;Q+=Math.abs((L[_]-L[tt])*(L[j+1]-L[_+1])-(L[_]-L[j])*(L[tt+1]-L[_+1]))}return U===0&&Q===0?0:Math.abs((Q-U)/U)};function F(L,D,B,G){for(var N=0,X=D,U=B-G;X<B;X+=G)N+=(L[U]-L[X])*(L[X+1]+L[U+1]),U=X;return N}n.flatten=function(L){for(var D=L[0][0].length,B={vertices:[],holes:[],dimensions:D},G=0,N=0;N<L.length;N++){for(var X=0;X<L[N].length;X++)for(var U=0;U<D;U++)B.vertices.push(L[N][X][U]);N>0&&(G+=L[N-1].length,B.holes.push(G))}return B},e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=a||o.strokeColor,l=h||o.strokeAlpha,f=(u&16711680)>>>16,c=(u&65280)>>>8,d=u&255;n.strokeStyle="rgba("+f+","+c+","+d+","+l+")",n.lineWidth=o.lineWidth};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(6),f=i(7),c=new n({Extends:a,initialize:function(v,p,g,m,x){var y="json";if(f(p)){var T=p;p=u(T,"key"),g=u(T,"url"),m=u(T,"xhrSettings"),y=u(T,"extension",y),x=u(T,"dataKey",x)}var C={type:"json",cache:v.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:m,config:x};a.call(this,v,C),f(g)&&(x?this.data=l(g,x):this.data=g,this.state=o.FILE_POPULATED)},onProcess:function(){if(this.state!==o.FILE_POPULATED){this.state=o.FILE_PROCESSING;try{var d=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var v=this.config;typeof v=="string"?this.data=l(d,v,d):this.data=d}this.onProcessComplete()}});h.register("json",function(d,v,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new c(this,d[m]));else this.addFile(new c(this,d,v,g,p));return this}),e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),o=i(26),a=function(h,u,l,f,c){for(var d=null,v=null,p=null,g=null,m=o(h,u,l,f,null,c),x=0;x<m.length;x++){var y=m[x];y&&(y.collides?(d=n(y.x,y.y-1,!0,c),v=n(y.x,y.y+1,!0,c),p=n(y.x-1,y.y,!0,c),g=n(y.x+1,y.y,!0,c),y.faceTop=!(d&&d.collides),y.faceBottom=!(v&&v.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=a},function(e,r,i){var n={};e.exports=n;var o=i(83),a=i(32);(function(){n.create=function(h,u){for(var l=[],f=0;f<h.length;f++){var c=h[f],d={x:c.x,y:c.y,index:f,body:u,isInternal:!1,contact:null,offset:null};d.contact={vertex:d,normalImpulse:0,tangentImpulse:0},l.push(d)}return l},n.fromPath=function(h,u){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return h.replace(l,function(c,d,v){f.push({x:parseFloat(d),y:parseFloat(v)})}),n.create(f,u)},n.centre=function(h){for(var u=n.area(h,!0),l={x:0,y:0},f,c,d,v=0;v<h.length;v++)d=(v+1)%h.length,f=o.cross(h[v],h[d]),c=o.mult(o.add(h[v],h[d]),f),l=o.add(l,c);return o.div(l,6*u)},n.mean=function(h){for(var u={x:0,y:0},l=0;l<h.length;l++)u.x+=h[l].x,u.y+=h[l].y;return o.div(u,h.length)},n.area=function(h,u){for(var l=0,f=h.length-1,c=0;c<h.length;c++)l+=(h[f].x-h[c].x)*(h[f].y+h[c].y),f=c;return u?l/2:Math.abs(l)/2},n.inertia=function(h,u){for(var l=0,f=0,c=h,d,v,p=0;p<c.length;p++)v=(p+1)%c.length,d=Math.abs(o.cross(c[v],c[p])),l+=d*(o.dot(c[v],c[v])+o.dot(c[v],c[p])+o.dot(c[p],c[p])),f+=d;return u/6*(l/f)},n.translate=function(h,u,l){var f;if(l)for(f=0;f<h.length;f++)h[f].x+=u.x*l,h[f].y+=u.y*l;else for(f=0;f<h.length;f++)h[f].x+=u.x,h[f].y+=u.y;return h},n.rotate=function(h,u,l){if(u!==0){for(var f=Math.cos(u),c=Math.sin(u),d=0;d<h.length;d++){var v=h[d],p=v.x-l.x,g=v.y-l.y;v.x=l.x+(p*f-g*c),v.y=l.y+(p*c+g*f)}return h}},n.contains=function(h,u){for(var l=0;l<h.length;l++){var f=h[l],c=h[(l+1)%h.length];if((u.x-f.x)*(c.y-f.y)+(u.y-f.y)*(f.x-c.x)>0)return!1}return!0},n.scale=function(h,u,l,f){if(u===1&&l===1)return h;f=f||n.centre(h);for(var c,d,v=0;v<h.length;v++)c=h[v],d=o.sub(c,f),h[v].x=f.x+d.x*u,h[v].y=f.y+d.y*l;return h},n.chamfer=function(h,u,l,f,c){typeof u=="number"?u=[u]:u=u||[8],l=typeof l<"u"?l:-1,f=f||2,c=c||14;for(var d=[],v=0;v<h.length;v++){var p=h[v-1>=0?v-1:h.length-1],g=h[v],m=h[(v+1)%h.length],x=u[v<u.length?v:u.length-1];if(x===0){d.push(g);continue}var y=o.normalise({x:g.y-p.y,y:p.x-g.x}),T=o.normalise({x:m.y-g.y,y:g.x-m.x}),C=Math.sqrt(2*Math.pow(x,2)),S=o.mult(a.clone(y),x),E=o.normalise(o.mult(o.add(y,T),.5)),P=o.sub(g,o.mult(E,C)),M=l;l===-1&&(M=Math.pow(x,.32)*1.75),M=a.clamp(M,f,c),M%2===1&&(M+=1);for(var R=Math.acos(o.dot(y,T)),A=R/M,O=0;O<M;O++)d.push(o.add(o.rotate(S,A*O),P))}return d},n.clockwiseSort=function(h){var u=n.mean(h);return h.sort(function(l,f){return o.angle(u,l)-o.angle(u,f)}),h},n.isConvex=function(h){var u=0,l=h.length,f,c,d,v;if(l<3)return null;for(f=0;f<l;f++)if(c=(f+1)%l,d=(f+2)%l,v=(h[c].x-h[f].x)*(h[d].y-h[c].y),v-=(h[c].y-h[f].y)*(h[d].x-h[c].x),v<0?u|=1:v>0&&(u|=2),u===3)return!1;return u!==0?!0:null},n.hull=function(h){var u=[],l=[],f,c;for(h=h.slice(0),h.sort(function(d,v){var p=d.x-v.x;return p!==0?p:d.y-v.y}),c=0;c<h.length;c+=1){for(f=h[c];l.length>=2&&o.cross3(l[l.length-2],l[l.length-1],f)<=0;)l.pop();l.push(f)}for(c=h.length-1;c>=0;c-=1){for(f=h[c];u.length>=2&&o.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),l.pop(),u.concat(l)}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(66),a=i(300),h=i(301),u=i(56),l=i(170),f=new n({initialize:function(d,v,p){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),this.type=u.CIRCLE,this.x=d,this.y=v,this._radius=p,this._diameter=p*2},contains:function(c,d){return o(this,c,d)},getPoint:function(c,d){return a(this,c,d)},getPoints:function(c,d,v){return h(this,c,d,v)},getRandomPoint:function(c){return l(this,c)},setTo:function(c,d,v){return this.x=c,this.y=d,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(c,d){return d===void 0&&(d=c),this.x=c,this.y=d,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this._diameter=c*2}},diameter:{get:function(){return this._diameter},set:function(c){this._diameter=c,this._radius=c*.5}},left:{get:function(){return this.x-this._radius},set:function(c){this.x=c+this._radius}},right:{get:function(){return this.x+this._radius},set:function(c){this.x=c-this._radius}},top:{get:function(){return this.y-this._radius},set:function(c){this.y=c+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(c){this.y=c-this._radius}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(n.radius>0&&o>=n.left&&o<=n.right&&a>=n.top&&a<=n.bottom){var h=(n.x-o)*(n.x-o),u=(n.y-a)*(n.y-a);return h+u<=n.radius*n.radius}else return!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt((n.x2-n.x1)*(n.x2-n.x1)+(n.y2-n.y1)*(n.y2-n.y1))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=a-o;return o+((n-o)%h+h)%h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(39),a=1e-6,h=new n({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new h(this)},set:function(v){return this.copy(v)},setValues:function(v,p,g,m,x,y,T,C,S,E,P,M,R,A,O,b){var w=this.val;return w[0]=v,w[1]=p,w[2]=g,w[3]=m,w[4]=x,w[5]=y,w[6]=T,w[7]=C,w[8]=S,w[9]=E,w[10]=P,w[11]=M,w[12]=R,w[13]=A,w[14]=O,w[15]=b,this},copy:function(v){var p=v.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,p,g){var m=u.fromQuat(g),x=m.val,y=p.x,T=p.y,C=p.z;return this.setValues(x[0]*y,x[1]*y,x[2]*y,0,x[4]*T,x[5]*T,x[6]*T,0,x[8]*C,x[9]*C,x[10]*C,0,v.x,v.y,v.z,1)},xyz:function(v,p,g){this.identity();var m=this.val;return m[12]=v,m[13]=p,m[14]=g,this},scaling:function(v,p,g){this.zero();var m=this.val;return m[0]=v,m[5]=p,m[10]=g,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,p=v[1],g=v[2],m=v[3],x=v[6],y=v[7],T=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=p,v[6]=v[9],v[7]=v[13],v[8]=g,v[9]=x,v[11]=v[14],v[12]=m,v[13]=y,v[14]=T,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],P=v[9],M=v[10],R=v[11],A=v[12],O=v[13],b=v[14],w=v[15],I=p*T-g*y,Y=p*C-m*y,z=p*S-x*y,V=g*C-m*T,W=g*S-x*T,F=m*S-x*C,L=E*O-P*A,D=E*b-M*A,B=E*w-R*A,G=P*b-M*O,N=P*w-R*O,X=M*w-R*b,U=I*X-Y*N+z*G+V*B-W*D+F*L;return U?(U=1/U,this.setValues((T*X-C*N+S*G)*U,(m*N-g*X-x*G)*U,(O*F-b*W+w*V)*U,(M*W-P*F-R*V)*U,(C*B-y*X-S*D)*U,(p*X-m*B+x*D)*U,(b*z-A*F-w*Y)*U,(E*F-M*z+R*Y)*U,(y*N-T*B+S*L)*U,(g*B-p*N-x*L)*U,(A*W-O*z+w*I)*U,(P*z-E*W-R*I)*U,(T*D-y*G-C*L)*U,(p*G-g*D+m*L)*U,(O*Y-A*V-b*I)*U,(E*V-P*Y+M*I)*U)):this},adjoint:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],P=v[9],M=v[10],R=v[11],A=v[12],O=v[13],b=v[14],w=v[15];return this.setValues(T*(M*w-R*b)-P*(C*w-S*b)+O*(C*R-S*M),-(g*(M*w-R*b)-P*(m*w-x*b)+O*(m*R-x*M)),g*(C*w-S*b)-T*(m*w-x*b)+O*(m*S-x*C),-(g*(C*R-S*M)-T*(m*R-x*M)+P*(m*S-x*C)),-(y*(M*w-R*b)-E*(C*w-S*b)+A*(C*R-S*M)),p*(M*w-R*b)-E*(m*w-x*b)+A*(m*R-x*M),-(p*(C*w-S*b)-y*(m*w-x*b)+A*(m*S-x*C)),p*(C*R-S*M)-y*(m*R-x*M)+E*(m*S-x*C),y*(P*w-R*O)-E*(T*w-S*O)+A*(T*R-S*P),-(p*(P*w-R*O)-E*(g*w-x*O)+A*(g*R-x*P)),p*(T*w-S*O)-y*(g*w-x*O)+A*(g*S-x*T),-(p*(T*R-S*P)-y*(g*R-x*P)+E*(g*S-x*T)),-(y*(P*b-M*O)-E*(T*b-C*O)+A*(T*M-C*P)),p*(P*b-M*O)-E*(g*b-m*O)+A*(g*M-m*P),-(p*(T*b-C*O)-y*(g*b-m*O)+A*(g*C-m*T)),p*(T*M-C*P)-y*(g*M-m*P)+E*(g*C-m*T))},determinant:function(){var v=this.val,p=v[0],g=v[1],m=v[2],x=v[3],y=v[4],T=v[5],C=v[6],S=v[7],E=v[8],P=v[9],M=v[10],R=v[11],A=v[12],O=v[13],b=v[14],w=v[15],I=p*T-g*y,Y=p*C-m*y,z=p*S-x*y,V=g*C-m*T,W=g*S-x*T,F=m*S-x*C,L=E*O-P*A,D=E*b-M*A,B=E*w-R*A,G=P*b-M*O,N=P*w-R*O,X=M*w-R*b;return I*X-Y*N+z*G+V*B-W*D+F*L},multiply:function(v){var p=this.val,g=p[0],m=p[1],x=p[2],y=p[3],T=p[4],C=p[5],S=p[6],E=p[7],P=p[8],M=p[9],R=p[10],A=p[11],O=p[12],b=p[13],w=p[14],I=p[15],Y=v.val,z=Y[0],V=Y[1],W=Y[2],F=Y[3];return p[0]=z*g+V*T+W*P+F*O,p[1]=z*m+V*C+W*M+F*b,p[2]=z*x+V*S+W*R+F*w,p[3]=z*y+V*E+W*A+F*I,z=Y[4],V=Y[5],W=Y[6],F=Y[7],p[4]=z*g+V*T+W*P+F*O,p[5]=z*m+V*C+W*M+F*b,p[6]=z*x+V*S+W*R+F*w,p[7]=z*y+V*E+W*A+F*I,z=Y[8],V=Y[9],W=Y[10],F=Y[11],p[8]=z*g+V*T+W*P+F*O,p[9]=z*m+V*C+W*M+F*b,p[10]=z*x+V*S+W*R+F*w,p[11]=z*y+V*E+W*A+F*I,z=Y[12],V=Y[13],W=Y[14],F=Y[15],p[12]=z*g+V*T+W*P+F*O,p[13]=z*m+V*C+W*M+F*b,p[14]=z*x+V*S+W*R+F*w,p[15]=z*y+V*E+W*A+F*I,this},multiplyLocal:function(v){var p=this.val,g=v.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,p){var g=v.val,m=p.val,x=g[0],y=g[4],T=g[8],C=g[12],S=g[1],E=g[5],P=g[9],M=g[13],R=g[2],A=g[6],O=g[10],b=g[14],w=g[3],I=g[7],Y=g[11],z=g[15],V=m[0],W=m[4],F=m[8],L=m[12],D=m[1],B=m[5],G=m[9],N=m[13],X=m[2],U=m[6],H=m[10],$=m[14],Z=m[3],J=m[7],Q=m[11],_=m[15];return this.setValues(x*V+y*D+T*X+C*Z,S*V+E*D+P*X+M*Z,R*V+A*D+O*X+b*Z,w*V+I*D+Y*X+z*Z,x*W+y*B+T*U+C*J,S*W+E*B+P*U+M*J,R*W+A*B+O*U+b*J,w*W+I*B+Y*U+z*J,x*F+y*G+T*H+C*Q,S*F+E*G+P*H+M*Q,R*F+A*G+O*H+b*Q,w*F+I*G+Y*H+z*Q,x*L+y*N+T*$+C*_,S*L+E*N+P*$+M*_,R*L+A*N+O*$+b*_,w*L+I*N+Y*$+z*_)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,p,g){var m=this.val;return m[12]=m[0]*v+m[4]*p+m[8]*g+m[12],m[13]=m[1]*v+m[5]*p+m[9]*g+m[13],m[14]=m[2]*v+m[6]*p+m[10]*g+m[14],m[15]=m[3]*v+m[7]*p+m[11]*g+m[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,p,g){var m=this.val;return m[0]=m[0]*v,m[1]=m[1]*v,m[2]=m[2]*v,m[3]=m[3]*v,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*g,m[9]=m[9]*g,m[10]=m[10]*g,m[11]=m[11]*g,this},makeRotationAxis:function(v,p){var g=Math.cos(p),m=Math.sin(p),x=1-g,y=v.x,T=v.y,C=v.z,S=x*y,E=x*T;return this.setValues(S*y+g,S*T-m*C,S*C+m*T,0,S*T+m*C,E*T+g,E*C-m*y,0,S*C-m*T,E*C+m*y,x*C*C+g,0,0,0,0,1)},rotate:function(v,p){var g=this.val,m=p.x,x=p.y,y=p.z,T=Math.sqrt(m*m+x*x+y*y);if(Math.abs(T)<a)return this;T=1/T,m*=T,x*=T,y*=T;var C=Math.sin(v),S=Math.cos(v),E=1-S,P=g[0],M=g[1],R=g[2],A=g[3],O=g[4],b=g[5],w=g[6],I=g[7],Y=g[8],z=g[9],V=g[10],W=g[11],F=g[12],L=g[13],D=g[14],B=g[15],G=m*m*E+S,N=x*m*E+y*C,X=y*m*E-x*C,U=m*x*E-y*C,H=x*x*E+S,$=y*x*E+m*C,Z=m*y*E+x*C,J=x*y*E-m*C,Q=y*y*E+S;return this.setValues(P*G+O*N+Y*X,M*G+b*N+z*X,R*G+w*N+V*X,A*G+I*N+W*X,P*U+O*H+Y*$,M*U+b*H+z*$,R*U+w*H+V*$,A*U+I*H+W*$,P*Z+O*J+Y*Q,M*Z+b*J+z*Q,R*Z+w*J+V*Q,A*Z+I*J+W*Q,F,L,D,B)},rotateX:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[4],y=p[5],T=p[6],C=p[7],S=p[8],E=p[9],P=p[10],M=p[11];return p[4]=x*m+S*g,p[5]=y*m+E*g,p[6]=T*m+P*g,p[7]=C*m+M*g,p[8]=S*m-x*g,p[9]=E*m-y*g,p[10]=P*m-T*g,p[11]=M*m-C*g,this},rotateY:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],C=p[3],S=p[8],E=p[9],P=p[10],M=p[11];return p[0]=x*m-S*g,p[1]=y*m-E*g,p[2]=T*m-P*g,p[3]=C*m-M*g,p[8]=x*g+S*m,p[9]=y*g+E*m,p[10]=T*g+P*m,p[11]=C*g+M*m,this},rotateZ:function(v){var p=this.val,g=Math.sin(v),m=Math.cos(v),x=p[0],y=p[1],T=p[2],C=p[3],S=p[4],E=p[5],P=p[6],M=p[7];return p[0]=x*m+S*g,p[1]=y*m+E*g,p[2]=T*m+P*g,p[3]=C*m+M*g,p[4]=S*m-x*g,p[5]=E*m-y*g,p[6]=P*m-T*g,p[7]=M*m-C*g,this},fromRotationTranslation:function(v,p){var g=v.x,m=v.y,x=v.z,y=v.w,T=g+g,C=m+m,S=x+x,E=g*T,P=g*C,M=g*S,R=m*C,A=m*S,O=x*S,b=y*T,w=y*C,I=y*S;return this.setValues(1-(R+O),P+I,M-w,0,P-I,1-(E+O),A+b,0,M+w,A-b,1-(E+R),0,p.x,p.y,p.z,1)},fromQuat:function(v){var p=v.x,g=v.y,m=v.z,x=v.w,y=p+p,T=g+g,C=m+m,S=p*y,E=p*T,P=p*C,M=g*T,R=g*C,A=m*C,O=x*y,b=x*T,w=x*C;return this.setValues(1-(M+A),E+w,P-b,0,E-w,1-(S+A),R+O,0,P+b,R-O,1-(S+M),0,0,0,0,1)},frustum:function(v,p,g,m,x,y){var T=1/(p-v),C=1/(m-g),S=1/(x-y);return this.setValues(x*2*T,0,0,0,0,x*2*C,0,0,(p+v)*T,(m+g)*C,(y+x)*S,-1,0,0,y*x*2*S,0)},perspective:function(v,p,g,m){var x=1/Math.tan(v/2),y=1/(g-m);return this.setValues(x/p,0,0,0,0,x,0,0,0,0,(m+g)*y,-1,0,0,2*m*g*y,0)},perspectiveLH:function(v,p,g,m){return this.setValues(2*g/v,0,0,0,0,2*g/p,0,0,0,0,-m/(g-m),1,0,0,g*m/(g-m),0)},ortho:function(v,p,g,m,x,y){var T=v-p,C=g-m,S=x-y;return T=T===0?T:1/T,C=C===0?C:1/C,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*C,0,0,0,0,2*S,0,(v+p)*T,(m+g)*C,(y+x)*S,1)},lookAtRH:function(v,p,g){var m=this.val;return d.subVectors(v,p),d.getLengthSquared()===0&&(d.z=1),d.normalize(),f.crossVectors(g,d),f.getLengthSquared()===0&&(Math.abs(g.z)===1?d.x+=1e-4:d.z+=1e-4,d.normalize(),f.crossVectors(g,d)),f.normalize(),c.crossVectors(d,f),m[0]=f.x,m[1]=f.y,m[2]=f.z,m[4]=c.x,m[5]=c.y,m[6]=c.z,m[8]=d.x,m[9]=d.y,m[10]=d.z,this},lookAt:function(v,p,g){var m=v.x,x=v.y,y=v.z,T=g.x,C=g.y,S=g.z,E=p.x,P=p.y,M=p.z;if(Math.abs(m-E)<a&&Math.abs(x-P)<a&&Math.abs(y-M)<a)return this.identity();var R=m-E,A=x-P,O=y-M,b=1/Math.sqrt(R*R+A*A+O*O);R*=b,A*=b,O*=b;var w=C*O-S*A,I=S*R-T*O,Y=T*A-C*R;b=Math.sqrt(w*w+I*I+Y*Y),b?(b=1/b,w*=b,I*=b,Y*=b):(w=0,I=0,Y=0);var z=A*Y-O*I,V=O*w-R*Y,W=R*I-A*w;return b=Math.sqrt(z*z+V*V+W*W),b?(b=1/b,z*=b,V*=b,W*=b):(z=0,V=0,W=0),this.setValues(w,z,R,0,I,V,A,0,Y,W,O,0,-(w*m+I*x+Y*y),-(z*m+V*x+W*y),-(R*m+A*x+O*y),1)},yawPitchRoll:function(v,p,g){this.zero(),u.zero(),l.zero();var m=this.val,x=u.val,y=l.val,T=Math.sin(g),C=Math.cos(g);return m[10]=1,m[15]=1,m[0]=C,m[1]=T,m[4]=-T,m[5]=C,T=Math.sin(p),C=Math.cos(p),x[0]=1,x[15]=1,x[5]=C,x[10]=C,x[9]=-T,x[6]=T,T=Math.sin(v),C=Math.cos(v),y[5]=1,y[15]=1,y[0]=C,y[2]=-T,y[8]=T,y[10]=C,this.multiplyLocal(u),this.multiplyLocal(l),this},setWorldMatrix:function(v,p,g,m,x){return this.yawPitchRoll(v.y,v.x,v.z),u.scaling(g.x,g.y,g.z),l.xyz(p.x,p.y,p.z),this.multiplyLocal(u),this.multiplyLocal(l),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(v,p){var g=this.val,m=v.val,x=g[0],y=g[1],T=g[2],C=g[3],S=g[4],E=g[5],P=g[6],M=g[7],R=g[8],A=g[9],O=g[10],b=g[11],w=g[12],I=g[13],Y=g[14],z=g[15],V=m[0],W=m[1],F=m[2],L=m[3],D=m[4],B=m[5],G=m[6],N=m[7],X=m[8],U=m[9],H=m[10],$=m[11],Z=m[12],J=m[13],Q=m[14],_=m[15];return p.setValues(V*x+W*S+F*R+L*w,W*y+W*E+F*A+L*I,F*T+W*P+F*O+L*Y,L*C+W*M+F*b+L*z,D*x+B*S+G*R+N*w,D*y+B*E+G*A+N*I,D*T+B*P+G*O+N*Y,D*C+B*M+G*b+N*z,X*x+U*S+H*R+$*w,X*y+U*E+H*A+$*I,X*T+U*P+H*O+$*Y,X*C+U*M+H*b+$*z,Z*x+J*S+Q*R+_*w,Z*y+J*E+Q*A+_*I,Z*T+J*P+Q*O+_*Y,Z*C+J*M+Q*b+_*z)},fromRotationXYTranslation:function(v,p,g){var m=p.x,x=p.y,y=p.z,T=Math.sin(v.x),C=Math.cos(v.x),S=Math.sin(v.y),E=Math.cos(v.y),P=m,M=x,R=y,A=-T,O=0-A*S,b=0-C*S,w=A*E,I=C*E;return g||(P=E*m+S*y,M=O*m+C*x+w*y,R=b*m+T*x+I*y),this.setValues(E,O,b,0,0,C,T,0,S,w,I,0,P,M,R,1)},getMaxScaleOnAxis:function(){var v=this.val,p=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],g=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],m=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(p,g,m))}}),u=new h,l=new h,f=new o,c=new o,d=new o;e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function c(d,v,p,g,m){var x="png",y;if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),y=u(T,"normalMap"),g=u(T,"xhrSettings"),x=u(T,"extension",x),m=u(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var C={type:"image",cache:d.textureManager,extension:x,responseType:"blob",key:v,url:p,xhrSettings:g,config:m};if(a.call(this,d,C),y){var S=new c(d,this.key,y,g,m);S.type="normalMap",this.setLink(S),d.addFile(S)}},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this;this.data.onload=function(){a.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(c.data),c.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var c,d=this.linkFile;d&&d.state===o.FILE_COMPLETE?(this.type==="image"?c=this.cache.addImage(this.key,this.data,d.data):c=this.cache.addImage(d.key,d.data,this.data),this.pendingDestroy(c),d.pendingDestroy(c)):d||(c=this.cache.addImage(this.key,this.data),this.pendingDestroy(c))}});h.register("image",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o?n.setCollision(!0,!0,!0,!0,!1):n.resetCollision(!1)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),o=i(0),a=i(11),h=i(15),u=i(1065),l=new o({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,u],initialize:function(c,d,v,p,g){h.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(p,g),this.setPosition(d,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,c){this.anims.update(f,c)},play:function(f,c){return this.anims.play(f,c)},playReverse:function(f,c){return this.anims.playReverse(f,c)},playAfterDelay:function(f,c){return this.anims.playAfterDelay(f,c)},playAfterRepeat:function(f,c){return this.anims.playAfterRepeat(f,c)},chain:function(f){return this.anims.chain(f)},stop:function(){return this.anims.stop()},stopAfterDelay:function(f){return this.anims.stopAfterDelay(f)},stopAfterRepeat:function(f){return this.anims.stopAfterRepeat(f)},stopOnFrame:function(f){return this.anims.stopOnFrame(f)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){if(!(o>=n.length)){for(var a=n.length-1,h=n[o],u=o;u<a;u++)n[u]=n[u+1];return n.length=a,h}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return a===void 0&&(a=0),o===0?n:(n-=a,n=o*Math.floor(n/o),h?(a+n)/o:a+n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o={};for(var a in n)Array.isArray(n[a])?o[a]=n[a].slice(0):o[a]=n[a];return o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=n.length;if(o<0||o>u||o>=a||a>u||o+a>u){if(h)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(h,u){return String(h).localeCompare(u)}function n(h,u){var l=h.length;if(l<=1)return h;for(var f=new Array(l),c=1;c<l;c*=2){o(h,u,c,f);var d=h;h=f,f=d}return h}function o(h,u,l,f){var c=h.length,d=0,v=l*2,p,g,m,x,y;for(p=0;p<c;p+=v)for(g=p+l,m=g+l,g>c&&(g=c),m>c&&(m=c),x=p,y=g;;)if(x<g&&y<m)u(h[x],h[y])<=0?f[d++]=h[x++]:f[d++]=h[y++];else if(x<g)f[d++]=h[x++];else if(y<m)f[d++]=h[y++];else break}var a=function(h,u){u===void 0&&(u=i);var l=n(h,u);return l!==h&&o(l,null,h.length,h),h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(134),o=i(205),a=function(h,u){var l=n.Power0;if(typeof h=="string")if(n.hasOwnProperty(h))l=n[h];else{var f="";h.indexOf(".")&&(f=h.substr(h.indexOf(".")+1),f.toLowerCase()==="in"?f="easeIn":f.toLowerCase()==="out"?f="easeOut":f.toLowerCase()==="inout"&&(f="easeInOut")),h=o(h.substr(0,h.indexOf(".")+1)+f),n.hasOwnProperty(h)&&(l=n[h])}else typeof h=="function"?l=h:Array.isArray(h)&&h.length;if(!u)return l;var c=u.slice(0);return c.unshift(0),function(d){return c[0]=d,l.apply(this,c)}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(a,h,u,l,f){var c=a.strokeTint,d=n.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*u);c.TL=d,c.TR=d,c.BL=d,c.BR=d;var v=h.pathData,p=v.length-1,g=h.lineWidth,m=g/2,x=v[0]-l,y=v[1]-f;h.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=v[T]-l,S=v[T+1]-f;a.batchLine(x,y,C,S,m,m,g,T-2,h.closePath?T===p-1:!1),x=C,y=S}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(115),a=i(476),h=i(477),u=i(56),l=i(47),f=i(181),c=new n({initialize:function(v,p,g,m,x,y){v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),this.type=u.TRIANGLE,this.x1=v,this.y1=p,this.x2=g,this.y2=m,this.x3=x,this.y3=y},contains:function(d,v){return o(this,d,v)},getPoint:function(d,v){return a(this,d,v)},getPoints:function(d,v,p){return h(this,d,v,p)},getRandomPoint:function(d){return f(this,d)},setTo:function(d,v,p,g,m,x){return d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=d,this.y1=v,this.x2=p,this.y2=g,this.x3=m,this.y3=x,this},getLineA:function(d){return d===void 0&&(d=new l),d.setTo(this.x1,this.y1,this.x2,this.y2),d},getLineB:function(d){return d===void 0&&(d=new l),d.setTo(this.x2,this.y2,this.x3,this.y3),d},getLineC:function(d){return d===void 0&&(d=new l),d.setTo(this.x3,this.y3,this.x1,this.y1),d},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(d){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-d:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-d:v=this.x3-d,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(d){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-d:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-d:v=this.x3-d,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(d){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-d:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-d:v=this.y3-d,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(d){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-d:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-d:v=this.y3-d,this.y1-=v,this.y2-=v,this.y3-=v}}});e.exports=c},function(e,r){var i={};e.exports=i,function(){i.create=function(n,o){return{x:n||0,y:o||0}},i.clone=function(n){return{x:n.x,y:n.y}},i.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},i.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},i.rotate=function(n,o,a){var h=Math.cos(o),u=Math.sin(o);a||(a={});var l=n.x*h-n.y*u;return a.y=n.x*u+n.y*h,a.x=l,a},i.rotateAbout=function(n,o,a,h){var u=Math.cos(o),l=Math.sin(o);h||(h={});var f=a.x+((n.x-a.x)*u-(n.y-a.y)*l);return h.y=a.y+((n.x-a.x)*l+(n.y-a.y)*u),h.x=f,h},i.normalise=function(n){var o=i.magnitude(n);return o===0?{x:0,y:0}:{x:n.x/o,y:n.y/o}},i.dot=function(n,o){return n.x*o.x+n.y*o.y},i.cross=function(n,o){return n.x*o.y-n.y*o.x},i.cross3=function(n,o,a){return(o.x-n.x)*(a.y-n.y)-(o.y-n.y)*(a.x-n.x)},i.add=function(n,o,a){return a||(a={}),a.x=n.x+o.x,a.y=n.y+o.y,a},i.sub=function(n,o,a){return a||(a={}),a.x=n.x-o.x,a.y=n.y-o.y,a},i.mult=function(n,o){return{x:n.x*o,y:n.y*o}},i.div=function(n,o){return{x:n.x/o,y:n.y/o}},i.perp=function(n,o){return o=o===!0?-1:1,{x:o*-n.y,y:o*n.x}},i.neg=function(n){return{x:-n.x,y:-n.y}},i.angle=function(n,o){return Math.atan2(o.y-n.y,o.x-n.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(e,r){var i={};e.exports=i,function(){i.create=function(n){var o={min:{x:0,y:0},max:{x:0,y:0}};return n&&i.update(o,n),o},i.update=function(n,o,a){n.min.x=1/0,n.max.x=-1/0,n.min.y=1/0,n.max.y=-1/0;for(var h=0;h<o.length;h++){var u=o[h];u.x>n.max.x&&(n.max.x=u.x),u.x<n.min.x&&(n.min.x=u.x),u.y>n.max.y&&(n.max.y=u.y),u.y<n.min.y&&(n.min.y=u.y)}a&&(a.x>0?n.max.x+=a.x:n.min.x+=a.x,a.y>0?n.max.y+=a.y:n.min.y+=a.y)},i.contains=function(n,o){return o.x>=n.min.x&&o.x<=n.max.x&&o.y>=n.min.y&&o.y<=n.max.y},i.overlaps=function(n,o){return n.min.x<=o.max.x&&n.max.x>=o.min.x&&n.max.y>=o.min.y&&n.min.y<=o.max.y},i.translate=function(n,o){n.min.x+=o.x,n.max.x+=o.x,n.min.y+=o.y,n.max.y+=o.y},i.shift=function(n,o){var a=n.max.x-n.min.x,h=n.max.y-n.min.y;n.min.x=o.x,n.max.x=o.x+a,n.min.y=o.y,n.max.y=o.y+h}}()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(0),a=i(11),h=i(502),u=new o({Mixins:[a.Alpha,a.Flip,a.Visible],initialize:function(f,c,d,v,p,g,m,x){this.layer=f,this.index=c,this.x=d,this.y=v,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=m!==void 0?m:p,this.baseHeight=x!==void 0?x:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(l,f){return!(l<this.pixelX||f<this.pixelY||l>this.right||f>this.bottom)},copy:function(l){return this.index=l.index,this.alpha=l.alpha,this.properties=l.properties,this.visible=l.visible,this.setFlip(l.flipX,l.flipY),this.tint=l.tint,this.rotation=l.rotation,this.collideUp=l.collideUp,this.collideDown=l.collideDown,this.collideLeft=l.collideLeft,this.collideRight=l.collideRight,this.collisionCallback=l.collisionCallback,this.collisionCallbackContext=l.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(l){var f=this.tilemapLayer;return f?f.tileToWorldX(this.x,l):this.x*this.baseWidth},getRight:function(l){var f=this.tilemapLayer;return f?this.getLeft(l)+this.width*f.scaleX:this.getLeft(l)+this.width},getTop:function(l){var f=this.tilemapLayer;return f?f.tileToWorldY(this.y,l)-(this.height-this.baseHeight)*f.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(l){var f=this.tilemapLayer;return f?this.getTop(l)+this.height*f.scaleY:this.getTop(l)+this.height},getBounds:function(l,f){return f===void 0&&(f=new h),f.x=this.getLeft(),f.y=this.getTop(),f.width=this.getRight()-f.x,f.height=this.getBottom()-f.y,f},getCenterX:function(l){return(this.getLeft(l)+this.getRight(l))/2},getCenterY:function(l){return(this.getTop(l)+this.getBottom(l))/2},intersects:function(l,f,c,d){return!(c<=this.pixelX||d<=this.pixelY||l>=this.right||f>=this.bottom)},isInteresting:function(l,f){return l&&f?this.canCollide||this.hasInterestingFace:l?this.collides:f?this.hasInterestingFace:!1},resetCollision:function(l){if(l===void 0&&(l=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,l){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(l,f,c,d,v){if(f===void 0&&(f=l),c===void 0&&(c=l),d===void 0&&(d=l),v===void 0&&(v=!0),this.collideLeft=l,this.collideRight=f,this.collideUp=c,this.collideDown=d,this.faceLeft=l,this.faceRight=f,this.faceTop=c,this.faceBottom=d,v){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(l,f){return l===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=l,this.collisionCallbackContext=f),this},setSize:function(l,f,c,d){return l!==void 0&&(this.width=l),f!==void 0&&(this.height=f),c!==void 0&&(this.baseWidth=c),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var l=this.layer.orientation;if(l===n.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(l===n.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(l===n.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(l===n.HEXAGONAL){var f=this.layer.hexSideLength,c=(this.baseHeight-f)/2+f;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*c}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var l=this.layer.tilemapLayer;if(l){var f=l.gidMap[this.index];if(f)return f}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var l=this.tilemapLayer;return l?l.tilemap:null}}});e.exports=u},function(e,r,i){var n={};e.exports=n;var o=i(64),a=i(32),h=i(41),u=i(84),l=i(83),f=i(1393);(function(){n.rectangle=function(c,d,v,p,g){g=g||{};var m={label:"Rectangle Body",position:{x:c,y:d},vertices:o.fromPath("L 0 0 L "+v+" 0 L "+v+" "+p+" L 0 "+p)};if(g.chamfer){var x=g.chamfer;m.vertices=o.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return h.create(a.extend({},m,g))},n.trapezoid=function(c,d,v,p,g,m){m=m||{},g*=.5;var x=(1-g*2)*v,y=v*g,T=y+x,C=T+y,S;g<.5?S="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+C+" 0":S="L 0 0 L "+T+" "+-p+" L "+C+" 0";var E={label:"Trapezoid Body",position:{x:c,y:d},vertices:o.fromPath(S)};if(m.chamfer){var P=m.chamfer;E.vertices=o.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete m.chamfer}return h.create(a.extend({},E,m))},n.circle=function(c,d,v,p,g){p=p||{};var m={label:"Circle Body",circleRadius:v};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,v)));return x%2===1&&(x+=1),n.polygon(c,d,x,v,a.extend({},m,p))},n.polygon=function(c,d,v,p,g){if(g=g||{},v<3)return n.circle(c,d,p,g);for(var m=2*Math.PI/v,x="",y=m*.5,T=0;T<v;T+=1){var C=y+T*m,S=Math.cos(C)*p,E=Math.sin(C)*p;x+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:c,y:d},vertices:o.fromPath(x)};if(g.chamfer){var M=g.chamfer;P.vertices=o.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete g.chamfer}return h.create(a.extend({},P,g))},n.fromVertices=function(c,d,v,p,g,m,x){var y,T,C,S,E,P;for(p=p||{},T=[],g=typeof g<"u"?g:!1,m=typeof m<"u"?m:.01,x=typeof x<"u"?x:10,f||a.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),a.isArray(v[0])||(v=[v]),P=0;P<v.length;P+=1)if(S=v[P],C=o.isConvex(S),C||!f)C?S=o.clockwiseSort(S):S=o.hull(S),T.push({position:{x:c,y:d},vertices:S});else{var M=S.map(function(b){return[b.x,b.y]});f.makeCCW(M),m!==!1&&f.removeCollinearPoints(M,m);var R=f.quickDecomp(M);for(E=0;E<R.length;E++){var A=R[E],O=A.map(function(b){return{x:b[0],y:b[1]}});x>0&&o.area(O)<x||T.push({position:o.centre(O),vertices:O})}}for(E=0;E<T.length;E++)T[E]=h.create(a.extend(T[E],p));return g&&n.flagCoincidentParts(T,5),T.length>1?(y=h.create(a.extend({parts:T.slice(0)},p)),h.setPosition(y,{x:c,y:d}),y):T[0]},n.flagCoincidentParts=function(c,d){d===void 0&&(d=5);for(var v=0;v<c.length;v++)for(var p=c[v],g=v+1;g<c.length;g++){var m=c[g];if(u.overlaps(p.bounds,m.bounds))for(var x=p.vertices,y=m.vertices,T=0;T<p.vertices.length;T++)for(var C=0;C<m.vertices.length;C++){var S=l.magnitudeSquared(l.sub(x[(T+1)%x.length],y[C])),E=l.magnitudeSquared(l.sub(x[T],y[(C+1)%y.length]));S<d&&E<d&&(x[T].isInternal=!0,y[C].isInternal=!0)}}return c}})()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x-n.width*n.originX+n.width*.5};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.width*n.originX;return n.x=o+a-n.width*.5,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.y-n.height*n.originY+n.height*.5};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.height*n.originY;return n.y=o+a-n.height*.5,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),o=function(a,h,u,l){l===void 0&&(l=a);var f;if(!Array.isArray(h))return f=a.indexOf(h),f!==-1?(n(a,f),u&&u.call(l,h),h):null;for(var c=h.length-1,d=[];c>=0;){var v=h[c];f=a.indexOf(v),f!==-1&&(n(a,f),d.push(v),u&&u.call(l,v)),c--}return d};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(199),a=i(10),h=i(3),u=new n({initialize:function(f){this.type=f,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(l,f){return f===void 0&&(f=32),l.strokePoints(this.getPoints(f))},getBounds:function(l,f){l||(l=new a),f===void 0&&(f=16);var c=this.getLength();f>c&&(f=c/2);var d=Math.max(1,Math.round(c/f));return o(this.getSpacedPoints(d),l)},getDistancePoints:function(l){var f=this.getLength(),c=Math.max(1,f/l);return this.getSpacedPoints(c)},getEndPoint:function(l){return l===void 0&&(l=new h),this.getPointAt(1,l)},getLength:function(){var l=this.getLengths();return l[l.length-1]},getLengths:function(l){if(l===void 0&&(l=this.arcLengthDivisions),this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var f=[],c,d=this.getPoint(0,this._tmpVec2A),v=0;f.push(0);for(var p=1;p<=l;p++)c=this.getPoint(p/l,this._tmpVec2B),v+=c.distance(d),f.push(v),d.copy(c);return this.cacheArcLengths=f,f},getPointAt:function(l,f){var c=this.getUtoTmapping(l);return this.getPoint(c,f)},getPoints:function(l,f,c){c===void 0&&(c=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var d=0;d<=l;d++)c.push(this.getPoint(d/l));return c},getRandomPoint:function(l){return l===void 0&&(l=new h),this.getPoint(Math.random(),l)},getSpacedPoints:function(l,f,c){c===void 0&&(c=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var d=0;d<=l;d++){var v=this.getUtoTmapping(d/l,null,l);c.push(this.getPoint(v))}return c},getStartPoint:function(l){return l===void 0&&(l=new h),this.getPointAt(0,l)},getTangent:function(l,f){f===void 0&&(f=new h);var c=1e-4,d=l-c,v=l+c;return d<0&&(d=0),v>1&&(v=1),this.getPoint(d,this._tmpVec2A),this.getPoint(v,f),f.subtract(this._tmpVec2A).normalize()},getTangentAt:function(l,f){var c=this.getUtoTmapping(l);return this.getTangent(c,f)},getTFromDistance:function(l,f){return l<=0?0:this.getUtoTmapping(0,l,f)},getUtoTmapping:function(l,f,c){var d=this.getLengths(c),v=0,p=d.length,g;f?g=Math.min(f,d[p-1]):g=l*d[p-1];for(var m=0,x=p-1,y;m<=x;)if(v=Math.floor(m+(x-m)/2),y=d[v]-g,y<0)m=v+1;else if(y>0)x=v-1;else{x=v;break}if(v=x,d[v]===g)return v/(p-1);var T=d[v],C=d[v+1],S=C-T,E=(g-T)/S;return(v+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h,u){u===void 0&&(u=new n);var l=a.x1,f=a.y1,c=a.x2,d=a.y2,v=h.x1,p=h.y1,g=h.x2,m=h.y2,x=(g-v)*(f-p)-(m-p)*(l-v),y=(c-l)*(f-p)-(d-f)*(l-v),T=(m-p)*(c-l)-(g-v)*(d-f);if(T===0)return!1;var C=x/T,S=y/T;return C>=0&&C<=1&&S>=0&&S<=1?(u.x=l+C*(c-l),u.y=f+C*(d-f),!0):!1};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.atan2(n.y2-n.y1,n.x2-n.x1)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=function(a,h,u){return a=n(a,0,1),(u-h)*a+h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n&&n.hasOwnProperty(o)?n[o]:a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(315),a=new n({initialize:function(u,l){this.parent=u,this.events=l,l||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(o.DESTROY,this.destroy,this)},get:function(h){var u=this.list;if(Array.isArray(h)){for(var l=[],f=0;f<h.length;f++)l.push(u[h[f]]);return l}else return u[h]},getAll:function(){var h={};for(var u in this.list)this.list.hasOwnProperty(u)&&(h[u]=this.list[u]);return h},query:function(h){var u={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(h)&&(u[l]=this.list[l]);return u},set:function(h,u){if(this._frozen)return this;if(typeof h=="string")return this.setValue(h,u);for(var l in h)this.setValue(l,h[l]);return this},inc:function(h,u){if(this._frozen)return this;u===void 0&&(u=1);var l=this.get(h);return l===void 0&&(l=0),this.set(h,l+u),this},toggle:function(h){return this._frozen?this:(this.set(h,!this.get(h)),this)},setValue:function(h,u){if(this._frozen)return this;if(this.has(h))this.values[h]=u;else{var l=this,f=this.list,c=this.events,d=this.parent;Object.defineProperty(this.values,h,{enumerable:!0,configurable:!0,get:function(){return f[h]},set:function(v){if(!l._frozen){var p=f[h];f[h]=v,c.emit(o.CHANGE_DATA,d,h,v,p),c.emit(o.CHANGE_DATA_KEY+h,d,v,p)}}}),f[h]=u,c.emit(o.SET_DATA,d,h,u)}return this},each:function(h,u){for(var l=[this.parent,null,void 0],f=1;f<arguments.length;f++)l.push(arguments[f]);for(var c in this.list)l[1]=c,l[2]=this.list[c],h.apply(u,l);return this},merge:function(h,u){u===void 0&&(u=!0);for(var l in h)h.hasOwnProperty(l)&&(u||!u&&!this.has(l))&&this.setValue(l,h[l]);return this},remove:function(h){if(this._frozen)return this;if(Array.isArray(h))for(var u=0;u<h.length;u++)this.removeValue(h[u]);else return this.removeValue(h);return this},removeValue:function(h){if(this.has(h)){var u=this.list[h];delete this.list[h],delete this.values[h],this.events.emit(o.REMOVE_DATA,this.parent,h,u)}return this},pop:function(h){var u=void 0;return!this._frozen&&this.has(h)&&(u=this.list[h],delete this.list[h],delete this.values[h],this.events.emit(o.REMOVE_DATA,this.parent,h,u)),u},has:function(h){return this.list.hasOwnProperty(h)},setFreeze:function(h){return this._frozen=h,this},reset:function(){for(var h in this.list)delete this.list[h],delete this.values[h];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(o.CHANGE_DATA),this.events.off(o.SET_DATA),this.events.off(o.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(h){this._frozen=!!h}},count:{get:function(){var h=0;for(var u in this.list)this.list[u]!==void 0&&h++;return h}}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h){if(this.entries={},this.size=0,Array.isArray(h))for(var u=0;u<h.length;u++)this.set(h[u][0],h[u][1])},set:function(a,h){return this.has(a)||this.size++,this.entries[a]=h,this},get:function(a){if(this.has(a))return this.entries[a]},getArray:function(){var a=[],h=this.entries;for(var u in h)a.push(h[u]);return a},has:function(a){return this.entries.hasOwnProperty(a)},delete:function(a){return this.has(a)&&(delete this.entries[a],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(a){delete this.entries[a]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var a=[],h=this.entries;for(var u in h)a.push(h[u]);return a},dump:function(){var a=this.entries;console.group("Map");for(var h in a)console.log(h,a[h]);console.groupEnd()},each:function(a){var h=this.entries;for(var u in h)if(a(u,h[u])===!1)break;return this},contains:function(a){var h=this.entries;for(var u in h)if(h[u]===a)return!0;return!1},merge:function(a,h){h===void 0&&(h=!1);var u=this.entries,l=a.entries;for(var f in l)u.hasOwnProperty(f)&&h?u[f]=l[f]:this.set(f,l[f]);return this}});e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n<<16|o<<8|a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(e,r,i){(function(n){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var o={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function a(){if(typeof importScripts=="function")return o;var h=navigator.userAgent;/Windows/.test(h)?o.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(o.iOS=!0,o.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),o.iOSVersion=parseInt(RegExp.$1,10)):o.macOS=!0:/Android/.test(h)?o.android=!0:/Linux/.test(h)?o.linux=!0:/iP[ao]d|iPhone/i.test(h)?(o.iOS=!0,navigator.appVersion.match(/OS (\d+)/),o.iOSVersion=parseInt(RegExp.$1,10),o.iPhone=h.toLowerCase().indexOf("iphone")!==-1,o.iPad=h.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?o.kindle=!0:/CrOS/.test(h)&&(o.chromeOS=!0),(/Windows Phone/i.test(h)||/IEMobile/i.test(h))&&(o.android=!1,o.iOS=!1,o.macOS=!1,o.windows=!0,o.windowsPhone=!0);var u=/Silk/.test(h);return(o.windows||o.macOS||o.linux&&!u||o.chromeOS)&&(o.desktop=!0),(o.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))&&(o.desktop=!1),navigator.standalone&&(o.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(o.cordova=!0),window.ejecta!==void 0&&(o.ejecta=!0)),typeof n<"u"&&n.versions&&n.versions.node&&(o.node=!0),o.node&&typeof n.versions=="object"&&(o.nodeWebkit=!!n.versions["node-webkit"],o.electron=!!n.versions.electron),/Crosswalk/.test(h)&&(o.crosswalk=!0),o.pixelRatio=window.devicePixelRatio||1,o}e.exports=a()}).call(this,i(807))},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(59),a=i(2),h=i(878),u=i(879),l=i(25),f=i(12),c=i(107),d=i(58),v=new n({Extends:d,initialize:function(g){var m=g.game.renderer,x=a(g,"fragShader",h);g.fragShader=f.parseFragmentShaderMaxTextures(x,m.maxTextures),g.vertShader=a(g,"vertShader",u),g.attributes=a(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),d.call(this,g),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){d.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,m){this.manager.set(this,p);var x=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,C=p.frame,S=C.glTexture,E=C.u0,P=C.v0,M=C.u1,R=C.v1,A=C.x,O=C.y,b=C.cutWidth,w=C.cutHeight,I=C.customPivot,Y=p.displayOriginX,z=p.displayOriginY,V=-Y+A,W=-z+O;if(p.isCropped){var F=p._crop;(F.flipX!==p.flipX||F.flipY!==p.flipY)&&C.updateCropUVs(F,p.flipX,p.flipY),E=F.u0,P=F.v0,M=F.u1,R=F.v1,b=F.width,w=F.height,A=F.x,O=F.y,V=-Y+A,W=-z+O}var L=1,D=1;p.flipX&&(I||(V+=-C.realWidth+Y*2),L=-1),(p.flipY||C.source.isGLTexture&&!S.flipY)&&(I||(W+=-C.realHeight+z*2),D=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*L,p.scaleY*D),x.copyFrom(g.matrix),m?(x.multiplyWithOffset(m,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),x.multiply(y,T);var B=V+b,G=W+w,N=g.roundPixels,X=T.getXRound(V,W,N),U=T.getYRound(V,W,N),H=T.getXRound(V,G,N),$=T.getYRound(V,G,N),Z=T.getXRound(B,G,N),J=T.getYRound(B,G,N),Q=T.getXRound(B,W,N),_=T.getYRound(B,W,N),j=f.getTintAppendFloatAlpha,tt=g.alpha,lt=j(p.tintTopLeft,tt*p._alphaTL),rt=j(p.tintTopRight,tt*p._alphaTR),et=j(p.tintBottomLeft,tt*p._alphaBL),q=j(p.tintBottomRight,tt*p._alphaBR);this.shouldFlush(6)&&this.flush();var vt=this.setGameObject(p,C);this.manager.preBatch(p),this.batchQuad(p,X,U,H,$,Z,J,Q,_,E,P,M,R,lt,rt,et,q,p.tintFill,S,vt),this.manager.postBatch(p)},batchTexture:function(p,g,m,x,y,T,C,S,E,P,M,R,A,O,b,w,I,Y,z,V,W,F,L,D,B,G,N,X,U,H,$,Z){this.manager.set(this,p);var J=this._tempMatrix1,Q=this._tempMatrix2,_=this._tempMatrix3,j=Y/m+N,tt=z/x+X,lt=(Y+V)/m+N,rt=(z+W)/x+X,et=C,q=S,vt=-w,it=-I;if(p.isCropped){var ot=p._crop,De=ot.width,Ie=ot.height;et=De,q=Ie,C=De,S=Ie,Y=ot.x,z=ot.y;var Dt=Y,mt=z;R&&(Dt=V-ot.x-De),A&&(mt=W-ot.y-Ie),j=Dt/m+N,tt=mt/x+X,lt=(Dt+De)/m+N,rt=(mt+Ie)/x+X,vt=-w+Y,it=-I+z}A=A^(!$&&g.isRenderTexture?1:0),R&&(et*=-1,vt+=C),A&&(q*=-1,it+=S);var Zt=vt+et,Wt=it+q;Q.applyITRS(y,T,M,E,P),J.copyFrom(U.matrix),H?(J.multiplyWithOffset(H,-U.scrollX*O,-U.scrollY*b),Q.e=y,Q.f=T):(Q.e-=U.scrollX*O,Q.f-=U.scrollY*b),J.multiply(Q,_);var Xt=U.roundPixels,Be=_.getXRound(vt,it,Xt),ls=_.getYRound(vt,it,Xt),us=_.getXRound(vt,Wt,Xt),fs=_.getYRound(vt,Wt,Xt),ds=_.getXRound(Zt,Wt,Xt),cs=_.getYRound(Zt,Wt,Xt),vs=_.getXRound(Zt,it,Xt),RT=_.getYRound(Zt,it,Xt);Z===void 0&&(Z=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,Be,ls,us,fs,ds,cs,vs,RT,j,tt,lt,rt,F,L,D,B,G,g,Z),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,m,x,y,T,C){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,P=g+p.width,M=m+p.height;C?S.multiply(C,E):E=S;var R=E.getX(g,m),A=E.getY(g,m),O=E.getX(g,M),b=E.getY(g,M),w=E.getX(P,M),I=E.getY(P,M),Y=E.getX(P,m),z=E.getY(P,m),V=this.renderer.setTextureSource(p.source);x=f.getTintAppendFloatAlpha(x,y),this.batchQuad(null,R,A,O,b,w,I,Y,z,p.u0,p.v0,p.u1,p.v1,x,x,x,x,0,p.glTexture,V)},batchFillRect:function(p,g,m,x,y,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(y,C);var S=p+m,E=g+x,P=C.getX(p,g),M=C.getY(p,g),R=C.getX(p,E),A=C.getY(p,E),O=C.getX(S,E),b=C.getY(S,E),w=C.getX(S,g),I=C.getY(S,g),Y=this.fillTint;this.batchQuad(null,P,M,R,A,O,b,w,I,0,0,1,1,Y.TL,Y.TR,Y.BL,Y.BR,2)},batchFillTriangle:function(p,g,m,x,y,T,C,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(C,E);var P=E.getX(p,g),M=E.getY(p,g),R=E.getX(m,x),A=E.getY(m,x),O=E.getX(y,T),b=E.getY(y,T),w=this.fillTint;this.batchTri(null,P,M,R,A,O,b,0,0,1,1,w.TL,w.TR,w.BL,2)},batchStrokeTriangle:function(p,g,m,x,y,T,C,S,E){var P=this.tempTriangle;P[0].x=p,P[0].y=g,P[0].width=C,P[1].x=m,P[1].y=x,P[1].width=C,P[2].x=y,P[2].y=T,P[2].width=C,P[3].x=p,P[3].y=g,P[3].width=C,this.batchStrokePath(P,C,!1,S,E)},batchFillPath:function(p,g,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(g,x);for(var y=p.length,T=this.polygonCache,C,S,E=this.fillTint.TL,P=this.fillTint.TR,M=this.fillTint.BL,R=0;R<y;++R)S=p[R],T.push(S.x,S.y);C=o(T),y=C.length;for(var A=0;A<y;A+=3){var O=C[A+0]*2,b=C[A+1]*2,w=C[A+2]*2,I=T[O+0],Y=T[O+1],z=T[b+0],V=T[b+1],W=T[w+0],F=T[w+1],L=x.getX(I,Y),D=x.getY(I,Y),B=x.getX(z,V),G=x.getY(z,V),N=x.getX(W,F),X=x.getY(W,F);this.batchTri(null,L,D,B,G,N,X,0,0,1,1,E,P,M,2)}T.length=0},batchStrokePath:function(p,g,m,x,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,C=0;C<T;C++){var S=p[C],E=p[C+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,g,C,!m&&C===T-1,x,y)}},batchLine:function(p,g,m,x,y,T,C,S,E,P,M){this.renderer.pipelines.set(this);var R=this.calcMatrix;M&&M.multiply(P,R);var A=m-p,O=x-g,b=Math.sqrt(A*A+O*O),w=y*(x-g)/b,I=y*(p-m)/b,Y=T*(x-g)/b,z=T*(p-m)/b,V=m-Y,W=x-z,F=p-w,L=g-I,D=m+Y,B=x+z,G=p+w,N=g+I,X=R.getX(V,W),U=R.getY(V,W),H=R.getX(F,L),$=R.getY(F,L),Z=R.getX(D,B),J=R.getY(D,B),Q=R.getX(G,N),_=R.getY(G,N),j=this.strokeTint,tt=j.TL,lt=j.TR,rt=j.BL,et=j.BR;if(this.batchQuad(null,Q,_,H,$,X,U,Z,J,0,0,1,1,tt,lt,rt,et,2),!(C<=2)){var q=this.prevQuad,vt=this.firstQuad;S>0&&q[4]?this.batchQuad(null,Q,_,H,$,q[0],q[1],q[2],q[3],0,0,1,1,tt,lt,rt,et,2):(vt[0]=Q,vt[1]=_,vt[2]=H,vt[3]=$,vt[4]=1),E&&vt[4]?this.batchQuad(null,X,U,Z,J,vt[0],vt[1],vt[2],vt[3],0,0,1,1,tt,lt,rt,et,2):(q[0]=X,q[1]=U,q[2]=Z,q[3]=J,q[4]=1)}}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),a=i(17),h=new n({initialize:function(l,f,c,d,v,p,g){this.texture=l,this.name=f,this.source=l.source[c],this.sourceIndex=c,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,d,v)},setSize:function(u,l,f,c){f===void 0&&(f=0),c===void 0&&(c=0),this.cutX=f,this.cutY=c,this.cutWidth=u,this.cutHeight=l,this.width=u,this.height=l,this.halfWidth=Math.floor(u*.5),this.halfHeight=Math.floor(l*.5),this.centerX=Math.floor(u/2),this.centerY=Math.floor(l/2);var d=this.data,v=d.cut;v.x=f,v.y=c,v.w=u,v.h=l,v.r=f+u,v.b=c+l,d.sourceSize.w=u,d.sourceSize.h=l,d.spriteSourceSize.w=u,d.spriteSourceSize.h=l,d.radius=.5*Math.sqrt(u*u+l*l);var p=d.drawImage;return p.x=f,p.y=c,p.width=u,p.height=l,this.updateUVs()},setTrim:function(u,l,f,c,d,v){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=u,p.sourceSize.h=l,g.x=f,g.y=c,g.w=d,g.h=v,g.r=f+d,g.b=c+v,this.x=f,this.y=c,this.width=d,this.height=v,this.halfWidth=d*.5,this.halfHeight=v*.5,this.centerX=Math.floor(d/2),this.centerY=Math.floor(v/2),this.updateUVs()},setCropUVs:function(u,l,f,c,d,v,p){var g=this.cutX,m=this.cutY,x=this.cutWidth,y=this.cutHeight,T=this.realWidth,C=this.realHeight;l=o(l,0,T),f=o(f,0,C),c=o(c,0,T-l),d=o(d,0,C-f);var S=g+l,E=m+f,P=c,M=d,R=this.data;if(R.trim){var A=R.spriteSourceSize;c=o(c,0,x-l),d=o(d,0,y-f);var O=l+c,b=f+d,w=!(A.r<l||A.b<f||A.x>O||A.y>b);if(w){var I=Math.max(A.x,l),Y=Math.max(A.y,f),z=Math.min(A.r,O)-I,V=Math.min(A.b,b)-Y;P=z,M=V,v?S=g+(x-(I-A.x)-z):S=g+(I-A.x),p?E=m+(y-(Y-A.y)-V):E=m+(Y-A.y),l=I,f=Y,c=z,d=V}else S=0,E=0,P=0,M=0}else v&&(S=g+(x-l-c)),p&&(E=m+(y-f-d));var W=this.source.width,F=this.source.height;return u.u0=Math.max(0,S/W),u.v0=Math.max(0,E/F),u.u1=Math.min(1,(S+P)/W),u.v1=Math.min(1,(E+M)/F),u.x=l,u.y=f,u.cx=S,u.cy=E,u.cw=P,u.ch=M,u.width=c,u.height=d,u.flipX=v,u.flipY=p,u},updateCropUVs:function(u,l,f){return this.setCropUVs(u,u.x,u.y,u.width,u.height,l,f)},setUVs:function(u,l,f,c,d,v){var p=this.data.drawImage;return p.width=u,p.height=l,this.u0=f,this.v0=c,this.u1=d,this.v1=v,this},updateUVs:function(){var u=this.cutX,l=this.cutY,f=this.cutWidth,c=this.cutHeight,d=this.data.drawImage;d.width=f,d.height=c;var v=this.source.width,p=this.source.height;return this.u0=u/v,this.v0=l/p,this.u1=(u+f)/v,this.v1=(l+c)/p,this},updateUVsInverted:function(){var u=this.source.width,l=this.source.height;return this.u0=(this.cutX+this.cutHeight)/u,this.v0=this.cutY/l,this.u1=this.cutX/u,this.v1=(this.cutY+this.cutWidth)/l,this},clone:function(){var u=new h(this.texture,this.name,this.sourceIndex);return u.cutX=this.cutX,u.cutY=this.cutY,u.cutWidth=this.cutWidth,u.cutHeight=this.cutHeight,u.x=this.x,u.y=this.y,u.width=this.width,u.height=this.height,u.halfWidth=this.halfWidth,u.halfHeight=this.halfHeight,u.centerX=this.centerX,u.centerY=this.centerY,u.rotated=this.rotated,u.data=a(!0,u.data,this.data),u.updateUVs(),u},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(208),o=i(0),a=i(1),h=i(79),u=new o({initialize:function(f){this.parent=f,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(l,f){return f?n.Add(this.list,l):n.Add(this.list,l,0,this.addCallback,this)},addAt:function(l,f,c){return c?n.AddAt(this.list,l,f):n.AddAt(this.list,l,f,0,this.addCallback,this)},getAt:function(l){return this.list[l]},getIndex:function(l){return this.list.indexOf(l)},sort:function(l,f){return l?(f===void 0&&(f=function(c,d){return c[l]-d[l]}),h(this.list,f),this):this},getByName:function(l){return n.GetFirst(this.list,"name",l)},getRandom:function(l,f){return n.GetRandom(this.list,l,f)},getFirst:function(l,f,c,d){return n.GetFirst(this.list,l,f,c,d)},getAll:function(l,f,c,d){return n.GetAll(this.list,l,f,c,d)},count:function(l,f){return n.CountAllMatching(this.list,l,f)},swap:function(l,f){n.Swap(this.list,l,f)},moveTo:function(l,f){return n.MoveTo(this.list,l,f)},moveAbove:function(l,f){return n.MoveAbove(this.list,l,f)},moveBelow:function(l,f){return n.MoveBelow(this.list,l,f)},remove:function(l,f){return f?n.Remove(this.list,l):n.Remove(this.list,l,this.removeCallback,this)},removeAt:function(l,f){return f?n.RemoveAt(this.list,l):n.RemoveAt(this.list,l,this.removeCallback,this)},removeBetween:function(l,f,c){return c?n.RemoveBetween(this.list,l,f):n.RemoveBetween(this.list,l,f,this.removeCallback,this)},removeAll:function(l){for(var f=this.list.length;f--;)this.remove(this.list[f],l);return this},bringToTop:function(l){return n.BringToTop(this.list,l)},sendToBack:function(l){return n.SendToBack(this.list,l)},moveUp:function(l){return n.MoveUp(this.list,l),l},moveDown:function(l){return n.MoveDown(this.list,l),l},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(l,f){return n.Replace(this.list,l,f)},exists:function(l){return this.list.indexOf(l)>-1},setAll:function(l,f,c,d){return n.SetAll(this.list,l,f,c,d),this},each:function(l,f){for(var c=[null],d=2;d<arguments.length;d++)c.push(arguments[d]);for(d=0;d<this.list.length;d++)c[0]=this.list[d],l.apply(f,c)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(112),a=i(445),h=i(446),u=i(56),l=i(180),f=new n({initialize:function(d,v,p,g){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=u.ELLIPSE,this.x=d,this.y=v,this.width=p,this.height=g},contains:function(c,d){return o(this,c,d)},getPoint:function(c,d){return a(this,c,d)},getPoints:function(c,d,v){return h(this,c,d,v)},getRandomPoint:function(c){return l(this,c)},setTo:function(c,d,v,p){return this.x=c,this.y=d,this.width=v,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(c,d){return d===void 0&&(d=c),this.x=c,this.y=d,this},setSize:function(c,d){return d===void 0&&(d=c),this.width=c,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(c){this.x=c+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(c){this.y=c+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(n.width<=0||n.height<=0)return!1;var h=(o-n.x)/n.width,u=(a-n.y)/n.height;return h*=h,u*=u,h+u<.25};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(275),o=i(0),a=i(75),h=i(9),u=i(207),l=i(2),f=i(6),c=i(7),d=i(437),v=i(149),p=i(73),g=new o({Extends:h,initialize:function(x,y,T){h.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?c(y[0])&&(T=y,y=null):c(y)&&(T=y,y=null),this.scene=x,this.children=new v,this.isParent=!0,this.type="Group",this.classType=l(T,"classType",p),this.name=l(T,"name",""),this.active=l(T,"active",!0),this.maxSize=l(T,"maxSize",-1),this.defaultKey=l(T,"defaultKey",null),this.defaultFrame=l(T,"defaultFrame",null),this.runChildUpdate=l(T,"runChildUpdate",!1),this.createCallback=l(T,"createCallback",null),this.removeCallback=l(T,"removeCallback",null),this.createMultipleCallback=l(T,"createMultipleCallback",null),this.internalCreateCallback=l(T,"internalCreateCallback",null),this.internalRemoveCallback=l(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(m,x,y,T,C,S){if(m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,m,x,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=C,E.setActive(S),this.add(E),E},createMultiple:function(m){if(this.isFull())return[];Array.isArray(m)||(m=[m]);var x=[];if(m[0].key)for(var y=0;y<m.length;y++){var T=this.createFromConfig(m[y]);x=x.concat(T)}return x},createFromConfig:function(m){if(this.isFull())return[];this.classType=l(m,"classType",this.classType);var x=l(m,"key",void 0),y=l(m,"frame",null),T=l(m,"visible",!0),C=l(m,"active",!0),S=[];if(x===void 0)return S;Array.isArray(x)||(x=[x]),Array.isArray(y)||(y=[y]);var E=l(m,"repeat",0),P=l(m,"randomKey",!1),M=l(m,"randomFrame",!1),R=l(m,"yoyo",!1),A=l(m,"quantity",!1),O=l(m,"frameQuantity",1),b=l(m,"max",0),w=d(x,y,{max:b,qty:A||O,random:P,randomB:M,repeat:E,yoyo:R});m.createCallback&&(this.createCallback=m.createCallback),m.removeCallback&&(this.removeCallback=m.removeCallback);for(var I=0;I<w.length;I++){var Y=this.create(0,0,w[I].a,w[I].b,T,C);if(!Y)break;S.push(Y)}var z=f(m,"setXY.x",0),V=f(m,"setXY.y",0),W=f(m,"setXY.stepX",0),F=f(m,"setXY.stepY",0);n.SetXY(S,z,V,W,F);var L=f(m,"setRotation.value",0),D=f(m,"setRotation.step",0);n.SetRotation(S,L,D);var B=f(m,"setScale.x",1),G=f(m,"setScale.y",B),N=f(m,"setScale.stepX",0),X=f(m,"setScale.stepY",0);n.SetScale(S,B,G,N,X);var U=f(m,"setOrigin.x",.5),H=f(m,"setOrigin.y",U),$=f(m,"setOrigin.stepX",0),Z=f(m,"setOrigin.stepY",0);n.SetOrigin(S,U,H,$,Z);var J=f(m,"setAlpha.value",1),Q=f(m,"setAlpha.step",0);n.SetAlpha(S,J,Q);var _=f(m,"setDepth.value",0),j=f(m,"setDepth.step",0);n.SetDepth(S,_,j);var tt=f(m,"setScrollFactor.x",1),lt=f(m,"setScrollFactor.y",tt),rt=f(m,"setScrollFactor.stepX",0),et=f(m,"setScrollFactor.stepY",0);n.SetScrollFactor(S,tt,lt,rt,et);var q=l(m,"hitArea",null),vt=l(m,"hitAreaCallback",null);q&&n.SetHitArea(S,q,vt);var it=l(m,"gridAlign",!1);return it&&n.GridAlign(S,it),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(m,x){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(m,x)}},add:function(m,x){return x===void 0&&(x=!1),this.isFull()?this:(this.children.set(m),this.internalCreateCallback&&this.internalCreateCallback.call(this,m),this.createCallback&&this.createCallback.call(this,m),x&&(m.addToDisplayList(this.scene.sys.displayList),m.addToUpdateList()),m.on(a.DESTROY,this.remove,this),this)},addMultiple:function(m,x){if(x===void 0&&(x=!1),Array.isArray(m))for(var y=0;y<m.length;y++)this.add(m[y],x);return this},remove:function(m,x,y){return x===void 0&&(x=!1),y===void 0&&(y=!1),this.children.contains(m)?(this.children.delete(m),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,m),this.removeCallback&&this.removeCallback.call(this,m),m.off(a.DESTROY,this.remove,this),y?m.destroy():x&&(m.removeFromDisplayList(),m.removeFromUpdateList()),this):this},clear:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(a.DESTROY,this.remove,this),x?C.destroy():m&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(m){return this.children.contains(m)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(m,x,y,T){return u(this.children.entries,m,x,y,T)},getFirst:function(m,x,y,T,C,S,E){return this.getHandler(!0,1,m,x,y,T,C,S,E)},getFirstNth:function(m,x,y,T,C,S,E,P){return this.getHandler(!0,m,x,y,T,C,S,E,P)},getLast:function(m,x,y,T,C,S,E){return this.getHandler(!1,1,m,x,y,T,C,S,E)},getLastNth:function(m,x,y,T,C,S,E,P){return this.getHandler(!1,m,x,y,T,C,S,E,P)},getHandler:function(m,x,y,T,C,S,E,P,M){y===void 0&&(y=!1),T===void 0&&(T=!1);var R,A,O=0,b=this.children.entries;if(m)for(A=0;A<b.length;A++)if(R=b[A],R.active===y){if(O++,O===x)break}else R=null;else for(A=b.length-1;A>=0;A--)if(R=b[A],R.active===y){if(O++,O===x)break}else R=null;return R?(typeof C=="number"&&(R.x=C),typeof S=="number"&&(R.y=S),R):T?this.create(C,S,E,P,M):null},get:function(m,x,y,T,C){return this.getFirst(!1,!0,m,x,y,T,C)},getFirstAlive:function(m,x,y,T,C,S){return this.getFirst(!0,m,x,y,T,C,S)},getFirstDead:function(m,x,y,T,C,S){return this.getFirst(!1,m,x,y,T,C,S)},playAnimation:function(m,x){return n.PlayAnimation(this.children.entries,m,x),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(m){m===void 0&&(m=!0);for(var x=0,y=0;y<this.children.size;y++)this.children.entries[y].active===m&&x++;return x},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var m=this.getTotalUsed(),x=this.maxSize===-1?999999999999:this.maxSize;return x-m},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},propertyValueSet:function(m,x,y,T,C){return n.PropertyValueSet(this.children.entries,m,x,y,T,C),this},propertyValueInc:function(m,x,y,T,C){return n.PropertyValueInc(this.children.entries,m,x,y,T,C),this},setX:function(m,x){return n.SetX(this.children.entries,m,x),this},setY:function(m,x){return n.SetY(this.children.entries,m,x),this},setXY:function(m,x,y,T){return n.SetXY(this.children.entries,m,x,y,T),this},incX:function(m,x){return n.IncX(this.children.entries,m,x),this},incY:function(m,x){return n.IncY(this.children.entries,m,x),this},incXY:function(m,x,y,T){return n.IncXY(this.children.entries,m,x,y,T),this},shiftPosition:function(m,x,y){return n.ShiftPosition(this.children.entries,m,x,y),this},angle:function(m,x){return n.Angle(this.children.entries,m,x),this},rotate:function(m,x){return n.Rotate(this.children.entries,m,x),this},rotateAround:function(m,x){return n.RotateAround(this.children.entries,m,x),this},rotateAroundDistance:function(m,x,y){return n.RotateAroundDistance(this.children.entries,m,x,y),this},setAlpha:function(m,x){return n.SetAlpha(this.children.entries,m,x),this},setTint:function(m,x,y,T){return n.SetTint(this.children.entries,m,x,y,T),this},setOrigin:function(m,x,y,T){return n.SetOrigin(this.children.entries,m,x,y,T),this},scaleX:function(m,x){return n.ScaleX(this.children.entries,m,x),this},scaleY:function(m,x){return n.ScaleY(this.children.entries,m,x),this},scaleXY:function(m,x,y,T){return n.ScaleXY(this.children.entries,m,x,y,T),this},setDepth:function(m,x){return n.SetDepth(this.children.entries,m,x),this},setBlendMode:function(m){return n.SetBlendMode(this.children.entries,m),this},setHitArea:function(m,x){return n.SetHitArea(this.children.entries,m,x),this},shuffle:function(){return n.Shuffle(this.children.entries),this},kill:function(m){this.children.contains(m)&&m.setActive(!1)},killAndHide:function(m){this.children.contains(m)&&(m.setActive(!1),m.setVisible(!1))},setVisible:function(m,x,y){return n.SetVisible(this.children.entries,m,x,y),this},toggleVisible:function(){return n.ToggleVisible(this.children.entries),this},destroy:function(m,x){m===void 0&&(m=!1),x===void 0&&(x=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(x,m),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(a,h,u,l,f,c){for(var d=n.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*l),v=u.pathData,p=u.pathIndexes,g=0;g<p.length;g+=3){var m=p[g]*2,x=p[g+1]*2,y=p[g+2]*2,T=v[m+0]-f,C=v[m+1]-c,S=v[x+0]-f,E=v[x+1]-c,P=v[y+0]-f,M=v[y+1]-c,R=h.getX(T,C),A=h.getY(T,C),O=h.getX(S,E),b=h.getY(S,E),w=h.getX(P,M),I=h.getY(P,M);a.batchTri(u,R,A,O,b,w,I,0,0,1,1,d,d,d,2)}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=n.x3-n.x1,u=n.y3-n.y1,l=n.x2-n.x1,f=n.y2-n.y1,c=o-n.x1,d=a-n.y1,v=h*h+u*u,p=h*l+u*f,g=h*c+u*d,m=l*l+f*f,x=l*c+f*d,y=v*m-p*p,T=y===0?0:1/y,C=(m*g-p*x)*T,S=(v*x-p*g)*T;return C>=0&&S>=0&&C+S<1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(10),a=i(3);function h(l,f,c,d){var v=l-c,p=f-d,g=v*v+p*p;return Math.sqrt(g)}var u=new n({initialize:function(f,c,d){this.vertex1=f,this.vertex2=c,this.vertex3=d,this.bounds=new o,this._inCenter=new a},getInCenter:function(l){l===void 0&&(l=!0);var f=this.vertex1,c=this.vertex2,d=this.vertex3,v,p,g,m,x,y;l?(v=f.x,p=f.y,g=c.x,m=c.y,x=d.x,y=d.y):(v=f.vx,p=f.vy,g=c.vx,m=c.vy,x=d.vx,y=d.vy);var T=h(x,y,g,m),C=h(v,p,x,y),S=h(g,m,v,p),E=T+C+S;return this._inCenter.set((v*T+g*C+x*S)/E,(p*T+m*C+y*S)/E)},contains:function(l,f,c){var d=this.vertex1,v=this.vertex2,p=this.vertex3,g=d.vx,m=d.vy,x=v.vx,y=v.vy,T=p.vx,C=p.vy;if(c){var S=c.a,E=c.b,P=c.c,M=c.d,R=c.e,A=c.f;g=d.vx*S+d.vy*P+R,m=d.vx*E+d.vy*M+A,x=v.vx*S+v.vy*P+R,y=v.vx*E+v.vy*M+A,T=p.vx*S+p.vy*P+R,C=p.vx*E+p.vy*M+A}var O=T-g,b=C-m,w=x-g,I=y-m,Y=l-g,z=f-m,V=O*O+b*b,W=O*w+b*I,F=O*Y+b*z,L=w*w+I*I,D=w*Y+I*z,B=V*L-W*W,G=B===0?0:1/B,N=(L*F-W*D)*G,X=(V*D-W*F)*G;return N>=0&&X>=0&&N+X<1},isCounterClockwise:function(l){var f=this.vertex1,c=this.vertex2,d=this.vertex3,v=(c.vx-f.vx)*(d.vy-f.vy)-(c.vy-f.vy)*(d.vx-f.vx);return l<=0?v>=0:v<0},load:function(l,f,c,d,v){return c=this.vertex1.load(l,f,c,d,v),c=this.vertex2.load(l,f,c,d,v),c=this.vertex3.load(l,f,c,d,v),c},transformCoordinatesLocal:function(l,f,c,d){return this.vertex1.transformCoordinatesLocal(l,f,c,d),this.vertex2.transformCoordinatesLocal(l,f,c,d),this.vertex3.transformCoordinatesLocal(l,f,c,d),this},updateBounds:function(){var l=this.vertex1,f=this.vertex2,c=this.vertex3,d=this.bounds;return d.x=Math.min(l.vx,f.vx,c.vx),d.y=Math.min(l.vy,f.vy,c.vy),d.width=Math.max(l.vx,f.vx,c.vx)-d.x,d.height=Math.max(l.vy,f.vy,c.vy)-d.y,this},isInView:function(l,f,c,d,v,p,g,m,x,y,T){var C=this.vertex1.update(v,p,g,m,x,y,T,d),S=this.vertex2.update(v,p,g,m,x,y,T,d),E=this.vertex3.update(v,p,g,m,x,y,T,d);if(C.ta<=0&&S.ta<=0&&E.ta<=0||f&&!this.isCounterClockwise(c))return!1;var P=this.bounds;P.x=Math.min(C.tx,S.tx,E.tx),P.y=Math.min(C.ty,S.ty,E.ty),P.width=Math.max(C.tx,S.tx,E.tx)-P.x,P.height=Math.max(C.ty,S.ty,E.ty)-P.y;var M=l.x+l.width,R=l.y+l.height;return P.width<=0||P.height<=0||l.width<=0||l.height<=0?!1:!(P.right<l.x||P.bottom<l.y||P.x>M||P.y>R)},translate:function(l,f){f===void 0&&(f=0);var c=this.vertex1,d=this.vertex2,v=this.vertex3;return c.x+=l,c.y+=f,d.x+=l,d.y+=f,v.x+=l,v.y+=f,this},x:{get:function(){return this.getInCenter().x},set:function(l){var f=this.getInCenter();this.translate(l-f.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(l){var f=this.getInCenter();this.translate(0,l-f.y)}},alpha:{get:function(){var l=this.vertex1,f=this.vertex2,c=this.vertex3;return(l.alpha+f.alpha+c.alpha)/3},set:function(l){this.vertex1.alpha=l,this.vertex2.alpha=l,this.vertex3.alpha=l}},depth:{get:function(){var l=this.vertex1,f=this.vertex2,c=this.vertex3;return(l.vz+f.vz+c.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(12),a=i(39),h=new n({Extends:a,initialize:function(l,f,c,d,v,p,g,m,x,y){p===void 0&&(p=16777215),g===void 0&&(g=1),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),a.call(this,l,f,c),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=x,this.nz=y,this.u=d,this.v=v,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(u,l){return this.u=u,this.v=l,this},transformCoordinatesLocal:function(u,l,f,c){var d=this.x,v=this.y,p=this.z,g=u.val,m=d*g[0]+v*g[4]+p*g[8]+g[12],x=d*g[1]+v*g[5]+p*g[9]+g[13],y=d*g[2]+v*g[6]+p*g[10]+g[14],T=d*g[3]+v*g[7]+p*g[11]+g[15];this.vx=m/T*l,this.vy=-(x/T)*f,c<=0?this.vz=y/T:this.vz=-(y/T)},update:function(u,l,f,c,d,v,p,g){var m=this.vx*u+this.vy*f+d,x=this.vx*l+this.vy*c+v;return p&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*g,this},load:function(u,l,f,c,d){return u[++f]=this.tx,u[++f]=this.ty,u[++f]=this.u,u[++f]=this.v,u[++f]=c,u[++f]=d,l[++f]=o.getTintAppendFloatAlpha(this.color,this.ta),f}});e.exports=h},function(e,r,i){var n={};e.exports=n;var o=i(166),a=i(32),h=i(84),u=i(41);(function(){n.create=function(l){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},l)},n.setModified=function(l,f,c,d){if(o.trigger(l,"compositeModified",l),l.isModified=f,c&&l.parent&&n.setModified(l.parent,f,c,d),d)for(var v=0;v<l.composites.length;v++){var p=l.composites[v];n.setModified(p,f,c,d)}},n.add=function(l,f){var c=[].concat(f);o.trigger(l,"beforeAdd",{object:f});for(var d=0;d<c.length;d++){var v=c[d];switch(v.type){case"body":if(v.parent!==v){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}n.addBody(l,v);break;case"constraint":n.addConstraint(l,v);break;case"composite":n.addComposite(l,v);break;case"mouseConstraint":n.addConstraint(l,v.constraint);break}}return o.trigger(l,"afterAdd",{object:f}),l},n.remove=function(l,f,c){var d=[].concat(f);o.trigger(l,"beforeRemove",{object:f});for(var v=0;v<d.length;v++){var p=d[v];switch(p.type){case"body":n.removeBody(l,p,c);break;case"constraint":n.removeConstraint(l,p,c);break;case"composite":n.removeComposite(l,p,c);break;case"mouseConstraint":n.removeConstraint(l,p.constraint);break}}return o.trigger(l,"afterRemove",{object:f}),l},n.addComposite=function(l,f){return l.composites.push(f),f.parent=l,n.setModified(l,!0,!0,!1),l},n.removeComposite=function(l,f,c){var d=l.composites.indexOf(f);if(d!==-1&&(n.removeCompositeAt(l,d),n.setModified(l,!0,!0,!1)),c)for(var v=0;v<l.composites.length;v++)n.removeComposite(l.composites[v],f,!0);return l},n.removeCompositeAt=function(l,f){return l.composites.splice(f,1),n.setModified(l,!0,!0,!1),l},n.addBody=function(l,f){return l.bodies.push(f),n.setModified(l,!0,!0,!1),l},n.removeBody=function(l,f,c){var d=l.bodies.indexOf(f);if(d!==-1&&(n.removeBodyAt(l,d),n.setModified(l,!0,!0,!1)),c)for(var v=0;v<l.composites.length;v++)n.removeBody(l.composites[v],f,!0);return l},n.removeBodyAt=function(l,f){return l.bodies.splice(f,1),n.setModified(l,!0,!0,!1),l},n.addConstraint=function(l,f){return l.constraints.push(f),n.setModified(l,!0,!0,!1),l},n.removeConstraint=function(l,f,c){var d=l.constraints.indexOf(f);if(d!==-1&&n.removeConstraintAt(l,d),c)for(var v=0;v<l.composites.length;v++)n.removeConstraint(l.composites[v],f,!0);return l},n.removeConstraintAt=function(l,f){return l.constraints.splice(f,1),n.setModified(l,!0,!0,!1),l},n.clear=function(l,f,c){if(c)for(var d=0;d<l.composites.length;d++)n.clear(l.composites[d],f,!0);return f?l.bodies=l.bodies.filter(function(v){return v.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,n.setModified(l,!0,!0,!1),l},n.allBodies=function(l){for(var f=[].concat(l.bodies),c=0;c<l.composites.length;c++)f=f.concat(n.allBodies(l.composites[c]));return f},n.allConstraints=function(l){for(var f=[].concat(l.constraints),c=0;c<l.composites.length;c++)f=f.concat(n.allConstraints(l.composites[c]));return f},n.allComposites=function(l){for(var f=[].concat(l.composites),c=0;c<l.composites.length;c++)f=f.concat(n.allComposites(l.composites[c]));return f},n.get=function(l,f,c){var d,v;switch(c){case"body":d=n.allBodies(l);break;case"constraint":d=n.allConstraints(l);break;case"composite":d=n.allComposites(l).concat(l);break}return d?(v=d.filter(function(p){return p.id.toString()===f.toString()}),v.length===0?null:v[0]):null},n.move=function(l,f,c){return n.remove(l,f),n.add(c,f),l},n.rebase=function(l){for(var f=n.allBodies(l).concat(n.allConstraints(l)).concat(n.allComposites(l)),c=0;c<f.length;c++)f[c].id=a.nextId();return n.setModified(l,!0,!0,!1),l},n.translate=function(l,f,c){for(var d=c?n.allBodies(l):l.bodies,v=0;v<d.length;v++)u.translate(d[v],f);return n.setModified(l,!0,!0,!1),l},n.rotate=function(l,f,c,d){for(var v=Math.cos(f),p=Math.sin(f),g=d?n.allBodies(l):l.bodies,m=0;m<g.length;m++){var x=g[m],y=x.position.x-c.x,T=x.position.y-c.y;u.setPosition(x,{x:c.x+(y*v-T*p),y:c.y+(y*p+T*v)}),u.rotate(x,f)}return n.setModified(l,!0,!0,!1),l},n.scale=function(l,f,c,d,v){for(var p=v?n.allBodies(l):l.bodies,g=0;g<p.length;g++){var m=p[g],x=m.position.x-d.x,y=m.position.y-d.y;u.setPosition(m,{x:d.x+x*f,y:d.y+y*c}),u.scale(m,f,c)}return n.setModified(l,!0,!0,!1),l},n.bounds=function(l){for(var f=n.allBodies(l),c=[],d=0;d<f.length;d+=1){var v=f[d];c.push(v.bounds.min,v.bounds.max)}return h.create(c)}})()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n>=0&&n<a.width&&o>=0&&o<a.height};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(29),a=i(2),h=new n({initialize:function(l){l===void 0&&(l={}),this.name=a(l,"name","layer"),this.x=a(l,"x",0),this.y=a(l,"y",0),this.width=a(l,"width",0),this.height=a(l,"height",0),this.tileWidth=a(l,"tileWidth",0),this.tileHeight=a(l,"tileHeight",0),this.baseTileWidth=a(l,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(l,"baseTileHeight",this.tileHeight),this.orientation=a(l,"orientation",o.ORTHOGONAL),this.widthInPixels=a(l,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(l,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(l,"alpha",1),this.visible=a(l,"visible",!0),this.properties=a(l,"properties",[]),this.indexes=a(l,"indexes",[]),this.collideIndexes=a(l,"collideIndexes",[]),this.callbacks=a(l,"callbacks",[]),this.bodies=a(l,"bodies",[]),this.data=a(l,"data",[]),this.tilemapLayer=a(l,"tilemapLayer",null),this.hexSideLength=a(l,"hexSideLength",0)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(29),a=i(2),h=new n({initialize:function(l){l===void 0&&(l={}),this.name=a(l,"name","map"),this.width=a(l,"width",0),this.height=a(l,"height",0),this.infinite=a(l,"infinite",!1),this.tileWidth=a(l,"tileWidth",0),this.tileHeight=a(l,"tileHeight",0),this.widthInPixels=a(l,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(l,"heightInPixels",this.height*this.tileHeight),this.format=a(l,"format",null),this.orientation=a(l,"orientation",o.ORTHOGONAL),this.renderOrder=a(l,"renderOrder","right-down"),this.version=a(l,"version","1"),this.properties=a(l,"properties",{}),this.layers=a(l,"layers",[]),this.images=a(l,"images",[]),this.objects=a(l,"objects",{}),this.collision=a(l,"collision",{}),this.tilesets=a(l,"tilesets",[]),this.imageCollections=a(l,"imageCollections",[]),this.tiles=a(l,"tiles",[]),this.hexSideLength=a(l,"hexSideLength",0)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f,c,d,v,p){(l===void 0||l<=0)&&(l=32),(f===void 0||f<=0)&&(f=32),c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v={}),p===void 0&&(p={}),this.name=h,this.firstgid=u,this.tileWidth=l,this.tileHeight=f,this.tileMargin=c,this.tileSpacing=d,this.tileProperties=v,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(a){return this.containsTileIndex(a)?this.tileProperties[a-this.firstgid]:null},getTileData:function(a){return this.containsTileIndex(a)?this.tileData[a-this.firstgid]:null},getTileCollisionGroup:function(a){var h=this.getTileData(a);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},getTileTextureCoordinates:function(a){return this.containsTileIndex(a)?this.texCoordinates[a-this.firstgid]:null},setImage:function(a){return this.image=a,this.glTexture=a.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(a,h){return a!==void 0&&(this.tileWidth=a),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(a,h){return a!==void 0&&(this.tileMargin=a),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(a,h){var u=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(a-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(u%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),u=Math.floor(u),l=Math.floor(l),this.rows=u,this.columns=l,this.total=u*l,this.texCoordinates.length=0;for(var f=this.tileMargin,c=this.tileMargin,d=0;d<this.rows;d++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:f,y:c}),f+=this.tileWidth+this.tileSpacing;f=this.tileMargin,c+=this.tileHeight+this.tileSpacing}return this}});e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return a===void 0&&(a=1e-4),Math.abs(n-o)<a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(15),h=i(1068),u=new n({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,h],initialize:function(f,c,d,v,p){a.call(this,f,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,p),this.setPosition(c,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.hasOwnProperty(o)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(a,h){var u=n(a);for(var l in h)u.hasOwnProperty(l)||(u[l]=h[l]);return u};e.exports=o},function(e,r,i){var n={};e.exports=n;var o=i(64),a=i(83),h=i(165),u=i(84),l=i(271),f=i(32);(function(){n._warming=.4,n._torqueDampen=1,n._minLength=1e-6,n.create=function(c){var d=c;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var v=d.bodyA?a.add(d.bodyA.position,d.pointA):d.pointA,p=d.bodyB?a.add(d.bodyB.position,d.pointB):d.pointB,g=a.magnitude(a.sub(v,p));d.length=typeof d.length<"u"?d.length:g,d.id=d.id||f.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return d.length===0&&d.stiffness>.1?(m.type="pin",m.anchors=!1):d.stiffness<.9&&(m.type="spring"),d.render=f.extend(m,d.render),d},n.preSolveAll=function(c){for(var d=0;d<c.length;d+=1){var v=c[d],p=v.constraintImpulse;v.isStatic||p.x===0&&p.y===0&&p.angle===0||(v.position.x+=p.x,v.position.y+=p.y,v.angle+=p.angle)}},n.solveAll=function(c,d){for(var v=0;v<c.length;v+=1){var p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||m)&&n.solve(c[v],d)}for(v=0;v<c.length;v+=1)p=c[v],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,m=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!m&&n.solve(c[v],d)},n.solve=function(c,d){var v=c.bodyA,p=c.bodyB,g=c.pointA,m=c.pointB;if(!(!v&&!p)){v&&!v.isStatic&&(a.rotate(g,v.angle-c.angleA,g),c.angleA=v.angle),p&&!p.isStatic&&(a.rotate(m,p.angle-c.angleB,m),c.angleB=p.angle);var x=g,y=m;if(v&&(x=a.add(v.position,g)),p&&(y=a.add(p.position,m)),!(!x||!y)){var T=a.sub(x,y),C=a.magnitude(T);C<n._minLength&&(C=n._minLength);var S=(C-c.length)/C,E=c.stiffness<1?c.stiffness*d:c.stiffness,P=a.mult(T,S*E),M=(v?v.inverseMass:0)+(p?p.inverseMass:0),R=(v?v.inverseInertia:0)+(p?p.inverseInertia:0),A=M+R,O,b,w,I,Y;if(c.damping){var z=a.create();w=a.div(T,C),Y=a.sub(p&&a.sub(p.position,p.positionPrev)||z,v&&a.sub(v.position,v.positionPrev)||z),I=a.dot(w,Y)}v&&!v.isStatic&&(b=v.inverseMass/M,v.constraintImpulse.x-=P.x*b,v.constraintImpulse.y-=P.y*b,v.position.x-=P.x*b,v.position.y-=P.y*b,c.damping&&(v.positionPrev.x-=c.damping*w.x*I*b,v.positionPrev.y-=c.damping*w.y*I*b),O=a.cross(g,P)/A*n._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle-=O,v.angle-=O),p&&!p.isStatic&&(b=p.inverseMass/M,p.constraintImpulse.x+=P.x*b,p.constraintImpulse.y+=P.y*b,p.position.x+=P.x*b,p.position.y+=P.y*b,c.damping&&(p.positionPrev.x+=c.damping*w.x*I*b,p.positionPrev.y+=c.damping*w.y*I*b),O=a.cross(m,P)/A*n._torqueDampen*p.inverseInertia*(1-c.angularStiffness),p.constraintImpulse.angle+=O,p.angle+=O)}}},n.postSolveAll=function(c){for(var d=0;d<c.length;d++){var v=c[d],p=v.constraintImpulse;if(!(v.isStatic||p.x===0&&p.y===0&&p.angle===0)){h.set(v,!1);for(var g=0;g<v.parts.length;g++){var m=v.parts[g];o.translate(m.vertices,p),g>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(o.rotate(m.vertices,p.angle,v.position),l.rotate(m.axes,p.angle),g>0&&a.rotateAbout(m.position,p.angle,v.position,m.position)),u.update(m.bounds,m.vertices,v.velocity)}p.angle*=n._warming,p.x*=n._warming,p.y*=n._warming}}},n.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+c.pointA.x,y:(c.bodyA?c.bodyA.position.y:0)+c.pointA.y}},n.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+c.pointB.x,y:(c.bodyB?c.bodyB.position.y:0)+c.pointB.y}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(65),a=i(66),h=i(0),u=i(11),l=i(15),f=i(10),c=i(57),d=new h({Extends:l,Mixins:[u.Depth,u.GetBounds,u.Origin,u.Transform,u.ScrollFactor,u.Visible],initialize:function(p,g,m,x,y){x===void 0&&(x=1),y===void 0&&(y=x),l.call(this,p,"Zone"),this.setPosition(g,m),this.width=x,this.height=y,this.blendMode=n.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,p,g){g===void 0&&(g=!0),this.width=v,this.height=p,this.updateDisplayOrigin();var m=this.input;return g&&m&&!m.customHitArea&&(m.hitArea.width=v,m.hitArea.height=p),this},setDisplaySize:function(v,p){return this.displayWidth=v,this.displayHeight=p,this},setCircleDropZone:function(v){return this.setDropZone(new o(0,0,v),a)},setRectangleDropZone:function(v,p){return this.setDropZone(new f(0,0,v,p),c)},setDropZone:function(v,p){return v===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(v,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,p,g){g.addToRenderList(p)},renderWebGL:function(v,p,g){g.addToRenderList(p)}});e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 2*(n.width+n.height)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=n.length-1;o>0;o--){var a=Math.floor(Math.random()*(o+1)),h=n[o];n[o]=n[a],n[a]=h}return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(36),h=i(9),u=i(37),l=i(10),f=i(25),c=i(187),d=i(3),v=new n({Extends:h,Mixins:[o.Alpha,o.Visible],initialize:function(g,m,x,y){g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new l,this.dirty=!0,this._x=g,this._y=m,this._width=x,this._height=y,this._bounds=new l,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new f,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new d(x/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,m){m===void 0&&(m=new d);var x=this.width*.5,y=this.height*.5;return m.x=p-x,m.y=g-y,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,m=g[0],x=g[1],y=g[2],T=g[3],C=m*T-x*y;if(!C)return p;var S=g[4],E=g[5],P=this.scrollX,M=this.scrollY,R=this.width,A=this.height,O=this.y,b=O+A,w=this.x,I=w+R,Y=this.culledObjects,z=p.length;C=1/C,Y.length=0;for(var V=0;V<z;++V){var W=p[V];if(!W.hasOwnProperty("width")||W.parentContainer){Y.push(W);continue}var F=W.width,L=W.height,D=W.x-P*W.scrollFactorX-F*W.originX,B=W.y-M*W.scrollFactorY-L*W.originY,G=D*m+B*y+S,N=D*x+B*T+E,X=(D+F)*m+(B+L)*y+S,U=(D+F)*x+(B+L)*T+E;X>w&&G<I&&U>O&&N<b&&Y.push(W)}return Y},getWorldPoint:function(p,g,m){m===void 0&&(m=new d);var x=this.matrix.matrix,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],P=x[5],M=y*S-T*C;if(!M)return m.x=p,m.y=g,m;M=1/M;var R=S*M,A=-T*M,O=-C*M,b=y*M,w=(C*P-S*E)*M,I=(T*E-y*P)*M,Y=Math.cos(this.rotation),z=Math.sin(this.rotation),V=this.zoomX,W=this.zoomY,F=this.scrollX,L=this.scrollY,D=p+(F*Y-L*z)*V,B=g+(F*z+L*Y)*W;return m.x=D*R+B*O+w,m.y=D*A+B*b+I,m},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var x=p[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,m=p*.5,x=g*.5,y=this.zoomX,T=this.zoomY,C=this.matrix,S=p*this.originX,E=g*this.originY,P=this.scrollX,M=this.scrollY;this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=P,this.scrollY=M;var R=P+m,A=M+x;this.midPoint.set(R,A);var O=p/y,b=g/T;this.worldView.setTo(R-O/2,A-b/2,O,b),C.applyITRS(this.x+S,this.y+E,this.rotation,y,T),C.translate(-S,-E)},clampX:function(p){var g=this._bounds,m=this.displayWidth,x=g.x+(m-this.width)/2,y=Math.max(x,x+g.width-m);return p<x?p=x:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,m=this.displayHeight,x=g.y+(m-this.height)/2,y=Math.max(x,x+g.height-m);return p<x?p=x:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=a(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=c(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,m,x,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,m,x),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new l);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,m,x){return this.x=p,this.y=g,this.width=m,this.height=x,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(u.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(334),o=i(335),a=i(336),h=i(337),u=i(338),l=i(339),f=i(340),c=i(341),d=i(342),v=i(343),p=i(344),g=i(345);e.exports={Power0:f,Power1:c.Out,Power2:h.Out,Power3:d.Out,Power4:v.Out,Linear:f,Quad:c.Out,Cubic:h.Out,Quart:d.Out,Quint:v.Out,Sine:p.Out,Expo:l.Out,Circ:a.Out,Elastic:u.Out,Back:n.Out,Bounce:o.Out,Stepped:g,"Quad.easeIn":c.In,"Cubic.easeIn":h.In,"Quart.easeIn":d.In,"Quint.easeIn":v.In,"Sine.easeIn":p.In,"Expo.easeIn":l.In,"Circ.easeIn":a.In,"Elastic.easeIn":u.In,"Back.easeIn":n.In,"Bounce.easeIn":o.In,"Quad.easeOut":c.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":d.Out,"Quint.easeOut":v.Out,"Sine.easeOut":p.Out,"Expo.easeOut":l.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":u.Out,"Back.easeOut":n.Out,"Bounce.easeOut":o.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":d.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":u.InOut,"Back.easeInOut":n.InOut,"Bounce.easeInOut":o.InOut}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return(o-n)*a+n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),o={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function a(){var h=navigator.userAgent;return/Edge\/\d+/.test(h)?o.edge=!0:/Chrome\/(\d+)/.test(h)&&!n.windowsPhone?(o.chrome=!0,o.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(h)?(o.firefox=!0,o.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(h)&&n.iOS?o.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(o.ie=!0,o.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(h)?o.opera=!0:/Safari/.test(h)&&!n.windowsPhone?o.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(o.ie=!0,o.trident=!0,o.tridentVersion=parseInt(RegExp.$1,10),o.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(o.silk=!0),o}e.exports=a()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.random()*(o-n)+n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n>0&&(n&n-1)===0&&o>0&&(o&o-1)===0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return a===void 0&&(a=0),o===0?n:(n-=a,n=o*Math.ceil(n/o),h?(a+n)/o:a+n)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f){this.x=0,this.y=0,this.z=0,this.w=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=u||0,this.z=l||0,this.w=f||0)},clone:function(){return new o(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this.w=a.w||0,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,h,u,l){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=h||0,this.z=u||0,this.w=l||0),this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this.w+=a.w||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this.w-=a.w||0,this},scale:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},length:function(){var a=this.x,h=this.y,u=this.z,l=this.w;return Math.sqrt(a*a+h*h+u*u+l*l)},lengthSq:function(){var a=this.x,h=this.y,u=this.z,l=this.w;return a*a+h*h+u*u+l*l},normalize:function(){var a=this.x,h=this.y,u=this.z,l=this.w,f=a*a+h*h+u*u+l*l;return f>0&&(f=1/Math.sqrt(f),this.x=a*f,this.y=h*f,this.z=u*f,this.w=l*f),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lerp:function(a,h){h===void 0&&(h=0);var u=this.x,l=this.y,f=this.z,c=this.w;return this.x=u+h*(a.x-u),this.y=l+h*(a.y-l),this.z=f+h*(a.z-f),this.w=c+h*(a.w-c),this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this.w*=a.w||1,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this.w/=a.w||1,this},distance:function(a){var h=a.x-this.x,u=a.y-this.y,l=a.z-this.z||0,f=a.w-this.w||0;return Math.sqrt(h*h+u*u+l*l+f*f)},distanceSq:function(a){var h=a.x-this.x,u=a.y-this.y,l=a.z-this.z||0,f=a.w-this.w||0;return h*h+u*u+l*l+f*f},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(a){var h=this.x,u=this.y,l=this.z,f=this.w,c=a.val;return this.x=c[0]*h+c[4]*u+c[8]*l+c[12]*f,this.y=c[1]*h+c[5]*u+c[9]*l+c[13]*f,this.z=c[2]*h+c[6]*u+c[10]*l+c[14]*f,this.w=c[3]*h+c[7]*u+c[11]*l+c[15]*f,this},transformQuat:function(a){var h=this.x,u=this.y,l=this.z,f=a.x,c=a.y,d=a.z,v=a.w,p=v*h+c*l-d*u,g=v*u+d*h-f*l,m=v*l+f*u-c*h,x=-f*h-c*u-d*l;return this.x=p*v+x*-f+g*-d-m*-c,this.y=g*v+x*-c+m*-f-p*-d,this.z=m*v+x*-d+p*-c-g*-f,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});o.prototype.sub=o.prototype.subtract,o.prototype.mul=o.prototype.multiply,o.prototype.div=o.prototype.divide,o.prototype.dist=o.prototype.distance,o.prototype.distSq=o.prototype.distanceSq,o.prototype.len=o.prototype.length,o.prototype.lenSq=o.prototype.lengthSq,e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(91),a=new n({initialize:function(u,l,f,c,d,v,p){c===void 0&&(c=1),d===void 0&&(d=0),v===void 0&&(v=!0),p===void 0&&(p=!1),this.renderer=u,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=d,this.autoClear=v,this.autoResize=!1,this.resize(l,f),p&&this.setAutoResize(!0)},setAutoResize:function(h){return h&&!this.autoResize?(this.renderer.on(o.RESIZE,this.resize,this),this.autoResize=!0):!h&&this.autoResize&&(this.renderer.off(o.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(h,u){var l=h*this.scale,f=u*this.scale;if(l!==this.width||f!==this.height){var c=this.renderer;c.deleteFramebuffer(this.framebuffer),c.deleteTexture(this.texture),h*=this.scale,u*=this.scale,h=Math.round(h),u=Math.round(u),h<=0&&(h=1),u<=0&&(u=1),this.texture=c.createTextureFromSource(null,h,u,this.minFilter),this.framebuffer=c.createFramebuffer(h,u,this.texture,!1),this.width=h,this.height=u}return this},bind:function(h,u,l){if(h===void 0&&(h=!1),h&&this.renderer.flush(),u&&l&&this.resize(u,l),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),h&&this.adjustViewport(),this.autoClear){var f=this.renderer.gl;f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)}},adjustViewport:function(){var h=this.renderer.gl;h.viewport(0,0,this.width,this.height),h.disable(h.SCISSOR_TEST)},clear:function(){var h=this.renderer,u=h.gl;h.pushFramebuffer(this.framebuffer),u.disable(u.SCISSOR_TEST),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),h.popFramebuffer(),h.resetScissor()},unbind:function(h){h===void 0&&(h=!1);var u=this.renderer;return h&&u.flush(),u.popFramebuffer()},destroy:function(){var h=this.renderer;h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),h.off(o.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a;if(o)typeof o=="string"?a=document.getElementById(o):typeof o=="object"&&o.nodeType===1&&(a=o);else if(n.parentElement||o===null)return n;return a||(a=document.body),a.appendChild(n),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(77),a=i(9),h=i(70),u=i(22),l=i(1),f=i(207),c=i(428),d=new n({Extends:a,initialize:function(p){a.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(u.BLUR,this.onGameBlur,this),p.events.on(u.FOCUS,this.onGameFocus,this),p.events.on(u.PRE_STEP,this.update,this),p.events.once(u.DESTROY,this.destroy,this)},add:l,addAudioSprite:function(v,p){p===void 0&&(p={});var g=this.add(v,p);g.spritemap=this.jsonCache.get(v).spritemap;for(var m in g.spritemap)if(g.spritemap.hasOwnProperty(m)){var x=o(p),y=g.spritemap[m];x.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:m,start:y.start,duration:y.end-y.start,config:x})}return g},get:function(v){return c(this.sounds,"key",v)},getAll:function(v){return f(this.sounds,"key",v)},play:function(v,p){var g=this.add(v);return g.once(h.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(v,p,g){var m=this.addAudioSprite(v);return m.once(h.COMPLETE,m.destroy,m),m.play(p,g)},remove:function(v){var p=this.sounds.indexOf(v);return p!==-1?(v.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var p=0,g=this.sounds.length-1;g>=0;g--){var m=this.sounds[g];m.key===v&&(m.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(h.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(h.STOP_ALL,this)},stopByKey:function(v){var p=0;return this.getAll(v).forEach(function(g){g.stop()&&p++}),p},unlock:l,onBlur:l,onFocus:l,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(v,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(m){m.update(v,p)})},destroy:function(){this.game.events.off(u.BLUR,this.onGameBlur,this),this.game.events.off(u.FOCUS,this.onGameFocus,this),this.game.events.off(u.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(v,p){var g=this;this.sounds.forEach(function(m,x){m&&!m.pendingRemove&&v.call(p||g,m,x,g.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(h.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(h.GLOBAL_DETUNE,this,v)}}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(70),h=i(17),u=i(1),l=new n({Extends:o,initialize:function(c,d,v){o.call(this),this.manager=c,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(console.error("addMarker "+f.name+" already exists in Sound"),!1):(f=h(!0,{name:"",start:0,duration:this.totalDuration-(f.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},f),this.markers[f.name]=f,!0)},updateMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(this.markers[f.name]=h(!0,this.markers[f.name],f),!0):(console.warn("Audio Marker: "+f.name+" missing in Sound: "+this.key),!1)},removeMarker:function(f){var c=this.markers[f];return c?(this.markers[f]=null,c):null},play:function(f,c){if(f===void 0&&(f=""),typeof f=="object"&&(c=f,f=""),typeof f!="string")return!1;if(!f)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[f])return console.warn("Marker: "+f+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[f],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=h(this.currentConfig,c),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:u,calculateRate:function(){var f=1.0005777895065548,c=this.currentConfig.detune+this.manager.detune,d=Math.pow(f,c);this.totalRate=this.currentConfig.rate*this.manager.rate*d},destroy:function(){this.pendingRemove||(this.emit(a.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(209),o=i(435),a=function(h,u){if(u===void 0&&(u=90),!n(h))return null;if(typeof u!="string"&&(u=(u%360+360)%360),u===90||u===-270||u==="rotateLeft")h=o(h),h.reverse();else if(u===-90||u===270||u==="rotateRight")h.reverse(),h=o(h);else if(Math.abs(u)===180||u==="rotate180"){for(var l=0;l<h.length;l++)h[l].reverse();h.reverse()}return h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),a=i(11),h=i(15),u=i(1043),l=i(1044),f=i(212),c=i(10),d=i(1045),v=new n({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,d],initialize:function(g,m,x,y,T,C,S){T===void 0&&(T=""),S===void 0&&(S=0),h.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=u(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(m,x),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(p,g,m,x,y,T,C){p===void 0&&(p=0),g===void 0&&(g=1),m===void 0&&(m=!1),x===void 0&&(x=-1),y===void 0&&(y=x,T=x,C=x);var S=this.text.length;g===-1&&(g=S),p<0&&(p=S+p),p=o(p,0,S-1);for(var E=o(p+g,p,S),P=this.charColors,M=p;M<E;M++){var R=P[M];if(x===-1)P[M]=null;else{var A=m?1:0;R?(R.tintEffect=A,R.tintTL=x,R.tintTR=y,R.tintBL=T,R.tintBR=C):P[M]={tintEffect:A,tintTL:x,tintTR:y,tintBL:T,tintBR:C}}}return this},setWordTint:function(p,g,m,x,y,T,C){g===void 0&&(g=1);for(var S=this.getTextBounds(),E=S.words,P=typeof p=="number",M=0,R=0;R<E.length;R++){var A=E[R];if((P&&R===p||!P&&A.word===p)&&(this.setCharacterTint(A.i,A.word.length,m,x,y,T,C),M++,M===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(u(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,m){for(var x=this.getLocalPoint(p,g,null,m),y=this.getTextBounds(),T=y.characters,C=new c,S=0;S<T.length;S++){var E=T[S];if(C.setTo(E.x,E.t,E.r-E.x,E.b),C.contains(x.x,x.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,m){if(g===void 0&&(g=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var x=this.scene.sys.cache.bitmapFont.get(p);x&&(this.font=p,this.fontData=x.data,this._fontSize=g,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),u(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=a.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=l,v.ParseXMLBitmapFont=f,e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h){if(this.entries=[],Array.isArray(h))for(var u=0;u<h.length;u++)this.set(h[u])},set:function(a){return this.entries.indexOf(a)===-1&&this.entries.push(a),this},get:function(a,h){for(var u=0;u<this.entries.length;u++){var l=this.entries[u];if(l[a]===h)return l}},getArray:function(){return this.entries.slice(0)},delete:function(a){var h=this.entries.indexOf(a);return h>-1&&this.entries.splice(h,1),this},dump:function(){console.group("Set");for(var a=0;a<this.entries.length;a++){var h=this.entries[a];console.log(h)}console.groupEnd()},each:function(a,h){var u,l=this.entries.slice(),f=l.length;if(h)for(u=0;u<f&&a.call(h,l[u],u)!==!1;u++);else for(u=0;u<f&&a(l[u],u)!==!1;u++);return this},iterate:function(a,h){var u,l=this.entries.length;if(h)for(u=0;u<l&&a.call(h,this.entries[u],u)!==!1;u++);else for(u=0;u<l&&a(this.entries[u],u)!==!1;u++);return this},iterateLocal:function(a){var h,u=[];for(h=1;h<arguments.length;h++)u.push(arguments[h]);var l=this.entries.length;for(h=0;h<l;h++){var f=this.entries[h];f[a].apply(f,u)}return this},clear:function(){return this.entries.length=0,this},contains:function(a){return this.entries.indexOf(a)>-1},union:function(a){var h=new o;return a.entries.forEach(function(u){h.set(u)}),this.entries.forEach(function(u){h.set(u)}),h},intersect:function(a){var h=new o;return this.entries.forEach(function(u){a.contains(u)&&h.set(u)}),h},difference:function(a){var h=new o;return this.entries.forEach(function(u){a.contains(u)||h.set(u)}),h},size:{get:function(){return this.entries.length},set:function(a){return a<this.entries.length?this.entries.length=a:this.entries.length}}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(15),h=i(189),u=i(92),l=i(1182),f=new n({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Pipeline,o.ScrollFactor,o.Transform,o.Visible,l],initialize:function(d,v,p,g,m,x,y){g===void 0&&(g=16777215),m===void 0&&(m=128),x===void 0&&(x=1),y===void 0&&(y=.1),a.call(this,d,"PointLight"),this.initPipeline(u.POINTLIGHT_PIPELINE),this.setPosition(v,p),this.color=h(g),this.intensity=x,this.attenuation=y,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(c){this._radius=c,this.width=c*2,this.height=c*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=o.width/2,h=o.height/2,u=Math.abs(n.x-o.x-a),l=Math.abs(n.y-o.y-h),f=a+n.radius,c=h+n.radius;if(u>f||l>c)return!1;if(u<=a||l<=h)return!0;var d=u-a,v=l-h,p=d*d,g=v*v,m=n.radius*n.radius;return p+g<=m};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.width<=0||n.height<=0||o.width<=0||o.height<=0?!1:!(n.right<o.x||n.bottom<o.y||n.x>o.right||n.y>o.bottom)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o={},a={};a.register=function(h,u,l,f,c){o[h]={plugin:u,mapping:l,settingsKey:f,configKey:c}},a.getPlugin=function(h){return o[h]},a.install=function(h){var u=h.scene.sys,l=u.settings.input,f=u.game.config;for(var c in o){var d=o[c].plugin,v=o[c].mapping,p=o[c].settingsKey,g=o[c].configKey;n(l,p,f[g])&&(h[v]=new d(h))}},a.remove=function(h){o.hasOwnProperty(h)&&delete o[h]},e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.url?n.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?n.url:o+n.url:!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u,l){return n===void 0&&(n=""),o===void 0&&(o=!0),a===void 0&&(a=""),h===void 0&&(h=""),u===void 0&&(u=0),l===void 0&&(l=!1),{responseType:n,async:o,user:a,password:h,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:l}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(243),a=i(73),h=new n({Extends:a,Mixins:[o.Acceleration,o.Angular,o.Bounce,o.Debug,o.Drag,o.Enable,o.Friction,o.Gravity,o.Immovable,o.Mass,o.Pushable,o.Size,o.Velocity],initialize:function(l,f,c,d,v){a.call(this,l,f,c,d,v),this.body=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(119),o=function(a,h,u,l){if(u===void 0&&(u=!1),n(a,h,l)){var f=l.data[h][a]||null;return f?f.index===-1?u?f:null:f:null}else return null};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=n.data,l=n.width,f=n.height,c=n.tilemapLayer,d=Math.max(0,o.left),v=Math.min(l,o.right),p=Math.max(0,o.top),g=Math.min(f,o.bottom),m,x,y;if(a===0)for(x=p;x<g;x++)for(m=d;u[x]&&m<v;m++)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(a===1)for(x=p;x<g;x++)for(m=v;u[x]&&m>=d;m--)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(a===2)for(x=g;x>=p;x--)for(m=d;u[x]&&m<v;m++)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);else if(a===3)for(x=g;x>=p;x--)for(m=v;u[x]&&m>=d;m--)y=u[x][m],!(!y||y.index===-1||!y.visible||y.alpha===0)&&h.push(y);return c.tilesDrawn=h.length,c.tilesTotal=l*f,h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=a.collideIndexes.indexOf(n);o&&h===-1?a.collideIndexes.push(n):!o&&h!==-1&&a.collideIndexes.splice(h,1)};e.exports=i},function(e,r,i){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(a,h,u){if(!h)return{i:0,layers:a.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=h.x+n(h,"startx",0)*a.tilewidth+n(h,"offsetx",0),f=h.y+n(h,"starty",0)*a.tileheight+n(h,"offsety",0);return{i:0,layers:h.layers,name:u.name+h.name+"/",opacity:u.opacity*h.opacity,visible:u.visible&&h.visible,x:u.x+l,y:u.y+f}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h;if(n.hasOwnProperty(o)){var u=typeof n[o];u==="function"?h=function(l,f,c,d,v,p){return n[o](l,f,c,d,v,p)}:h=function(){return n[o]}}else typeof a=="function"?h=a:h=function(){return a};return h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(265),o=i(13),a=i(99),h=i(80),u=i(162),l=i(583),f=i(263),c=i(6),d=i(264),v=i(266),p=i(268),g=function(m,x,y){y===void 0&&(y=n);for(var T=y.targets?y.targets:f(x),C=l(x),S=u(x,"delay",y.delay),E=u(x,"duration",y.duration),P=c(x,"easeParams",y.easeParams),M=h(c(x,"ease",y.ease),P),R=u(x,"hold",y.hold),A=u(x,"repeat",y.repeat),O=u(x,"repeatDelay",y.repeatDelay),b=a(x,"yoyo",y.yoyo),w=a(x,"flipX",y.flipX),I=a(x,"flipY",y.flipY),Y=[],z=0;z<C.length;z++)for(var V=C[z].key,W=C[z].value,F=0;F<T.length;F++){var L=d(V,W),D=p(T[F],F,V,L.getEnd,L.getStart,L.getActive,h(c(W,"ease",M),c(W,"easeParams",P)),u(W,"delay",S),u(W,"duration",E),a(W,"yoyo",b),u(W,"hold",R),u(W,"repeat",A),u(W,"repeatDelay",O),a(W,"flipX",w),a(W,"flipY",I));Y.push(D)}var B=new v(m,Y,T);B.offset=o(x,"offset",null),B.completeDelay=o(x,"completeDelay",0),B.loop=Math.round(o(x,"loop",0)),B.loopDelay=Math.round(o(x,"loopDelay",0)),B.paused=a(x,"paused",!1),B.useFrames=a(x,"useFrames",!1);for(var G=c(x,"callbackScope",B),N=[B,null],X=v.TYPES,U=0;U<X.length;U++){var H=X[U],$=c(x,H,!1);if($){var Z=c(x,H+"Scope",G),J=c(x,H+"Params",[]);B.setCallback(H,$,N.concat(J),Z)}}return B};e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(102),a=i(2),h=i(132),u=i(185),l=new n({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(f){var c=this.parent;if(f===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(f)||(f=[f]);for(var d=0;d<f.length;d++){var v=f[d];this.nextAnim===null?this.nextAnim=v:this.nextAnimsQueue.push(v)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(f){this.isPlaying&&this.stop();var c=this.animationManager,d=typeof f=="string"?f:a(f,"key",null),v=this.exists(d)?this.get(d):c.get(d);if(!v)console.warn("Missing animation: "+d);else{this.currentAnim=v;var p=v.getTotalFrames(),g=a(f,"frameRate",v.frameRate),m=a(f,"duration",v.duration);v.calculateDuration(this,p,m,g),this.delay=a(f,"delay",v.delay),this.repeat=a(f,"repeat",v.repeat),this.repeatDelay=a(f,"repeatDelay",v.repeatDelay),this.yoyo=a(f,"yoyo",v.yoyo),this.showOnStart=a(f,"showOnStart",v.showOnStart),this.hideOnComplete=a(f,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=a(f,"skipMissedFrames",v.skipMissedFrames),this.timeScale=a(f,"timeScale",this.timeScale);var x=a(f,"startFrame",0);x>v.getTotalFrames()&&(x=0);var y=v.frames[x];x===0&&!this.forward&&(y=v.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(f){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),f!==void 0&&this.setCurrentFrame(f),this.parent},resume:function(f){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),f!==void 0&&this.setCurrentFrame(f),this.parent},playAfterDelay:function(f,c){if(!this.isPlaying)this.delayCounter=c,this.play(f,!0);else{var d=this.nextAnim,v=this.nextAnimsQueue;d&&v.unshift(d),this.nextAnim=f,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(f,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(f);else{var d=this.nextAnim,v=this.nextAnimsQueue;d&&v.unshift(d),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=f,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(f,c){c===void 0&&(c=!1);var d=this.currentAnim,v=this.parent,p=typeof f=="string"?f:f.key;if(c&&this.isPlaying&&d.key===p)return v;if(d&&this.isPlaying){var g=this.animationManager.getMix(d.key,f);if(g>0)return this.playAfterDelay(f,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f)},playReverse:function(f,c){c===void 0&&(c=!1);var d=typeof f=="string"?f:f.key;return c&&this.isPlaying&&this.currentAnim.key===d?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f))},startAnimation:function(f){this.load(f);var c=this.currentAnim,d=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),d},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(f,c){var d=this.currentAnim,v=this.currentFrame,p=this.parent,g=v.textureFrame;p.emit(f,d,v,p,g),c&&p.emit(c+d.key,d,v,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var f=this.currentFrame;if(!f)return 0;var c=f.progress;return this.inReverse&&(c*=-1),c},setProgress:function(f){return this.forward||(f=1-f),this.setCurrentFrame(this.currentAnim.getFrameByProgress(f)),this.parent},setRepeat:function(f){return this.repeatCounter=f===-1?Number.MAX_VALUE:f,this.parent},globalRemove:function(f,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(f,c){f===void 0&&(f=!1),c===void 0&&(c=!1);var d=this.currentAnim,v=this.parent;return d?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),d.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!f,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(d.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(f)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(f)}return this.parent},stopAfterDelay:function(f){return this._pendingStop=1,this._pendingStopValue=f,this.parent},stopAfterRepeat:function(f){return f===void 0&&(f=1),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=f,this.parent},stopOnFrame:function(f){return this._pendingStop=3,this._pendingStopValue=f,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(f,c){var d=this.currentAnim;if(!(!this.isPlaying||!d||d.paused)){if(this.accumulator+=c*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?d.nextFrame(this):d.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(f){var c=this.parent;return this.currentFrame=f,c.texture=f.frame.texture,c.frame=f.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),f.setAlpha&&(c.alpha=f.alpha),c.setSizeToFrame(),c._originComponent&&(f.frame.customPivot?c.setOrigin(f.frame.pivotX,f.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===f&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(f){return this.anims?this.anims.get(f):null},exists:function(f){return this.anims?this.anims.has(f):!1},create:function(f){var c=f.key,d=!1;return c&&(d=this.get(c),d||(d=new u(this,c,f),this.anims||(this.anims=new o),this.anims.set(c,d))),d},generateFrameNames:function(f,c){return this.animationManager.generateFrameNames(f,c)},generateFrameNumbers:function(f,c){return this.animationManager.generateFrameNumbers(f,c)},remove:function(f){var c=this.get(f);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(f)),c},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=l},function(e,r,i){var n={};e.exports=n;var o=i(166);(function(){n._motionWakeThreshold=.18,n._motionSleepThreshold=.08,n._minBias=.9,n.update=function(a,h){for(var u=h*h*h,l=0;l<a.length;l++){var f=a[l],c=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){n.set(f,!1);continue}var d=Math.min(f.motion,c),v=Math.max(f.motion,c);f.motion=n._minBias*d+(1-n._minBias)*v,f.sleepThreshold>0&&f.motion<n._motionSleepThreshold*u?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&n.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},n.afterCollisions=function(a,h){for(var u=h*h*h,l=0;l<a.length;l++){var f=a[l];if(f.isActive){var c=f.collision,d=c.bodyA.parent,v=c.bodyB.parent;if(!(d.isSleeping&&v.isSleeping||d.isStatic||v.isStatic)&&(d.isSleeping||v.isSleeping)){var p=d.isSleeping&&!d.isStatic?d:v,g=p===d?v:d;!p.isStatic&&g.motion>n._motionWakeThreshold*u&&n.set(p,!1)}}}},n.set=function(a,h){var u=a.isSleeping;h?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,u||o.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,u&&o.trigger(a,"sleepEnd"))}})()},function(e,r,i){var n={};e.exports=n;var o=i(32);(function(){n.on=function(a,h,u){for(var l=h.split(" "),f,c=0;c<l.length;c++)f=l[c],a.events=a.events||{},a.events[f]=a.events[f]||[],a.events[f].push(u);return u},n.off=function(a,h,u){if(!h){a.events={};return}typeof h=="function"&&(u=h,h=o.keys(a.events).join(" "));for(var l=h.split(" "),f=0;f<l.length;f++){var c=a.events[l[f]],d=[];if(u&&c)for(var v=0;v<c.length;v++)c[v]!==u&&d.push(c[v]);a.events[l[f]]=d}},n.trigger=function(a,h,u){var l,f,c,d,v=a.events;if(v&&o.keys(v).length>0){u||(u={}),l=h.split(" ");for(var p=0;p<l.length;p++)if(f=l[p],c=v[f],c){d=o.clone(u,!1),d.name=f,d.source=a;for(var g=0;g<c.length;g++)c[g].apply(a,[d])}}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(175),o=i(92),a=i(74),h={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(u){u===void 0&&(u=o.MULTI_PIPELINE);var l=this.scene.sys.renderer;if(!l)return!1;var f=l.pipelines;if(this.postPipelines=[],this.pipelineData={},f){var c=f.get(u);if(c)return this.defaultPipeline=c,this.pipeline=c,!0}return!1},setPipeline:function(u,l,f){var c=this.scene.sys.renderer;if(!c)return this;var d=c.pipelines;if(d){var v=d.get(u);v&&(this.pipeline=v),l&&(this.pipelineData=f?n(l):l)}return this},setPostPipeline:function(u,l,f){var c=this.scene.sys.renderer;if(!c)return this;var d=c.pipelines;if(d){Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++){var p=d.getPostPipeline(u[v],this);p&&this.postPipelines.push(p)}l&&(this.pipelineData=f?n(l):l)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(u,l){var f=this.pipelineData;return l===void 0?delete f[u]:f[u]=l,this},getPostPipeline:function(u){for(var l=this.postPipelines,f=[],c=0;c<l.length;c++){var d=l[c];(typeof u=="string"&&d.name===u||d instanceof u)&&f.push(d)}return f.length===1?f[0]:f},resetPipeline:function(u,l){return u===void 0&&(u=!1),l===void 0&&(l=!1),this.pipeline=this.defaultPipeline,u&&(this.postPipelines=[],this.hasPostPipeline=!1),l&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(u){u===void 0&&(u=!1);for(var l=this.postPipelines,f=0;f<l.length;f++)l[f].destroy();this.postPipelines=[],this.hasPostPipeline=!1,u&&(this.pipelineData={})},removePostPipeline:function(u){for(var l=this.postPipelines,f=l.length-1;f>=0;f--){var c=l[f];(typeof u=="string"&&c.name===u||typeof u!="string"&&c instanceof u)&&(c.destroy(),a(l,f))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h,u){return u===void 0&&(u=new n),u.x=a.x+a.radius*Math.cos(h),u.y=a.y+a.radius*Math.sin(h),u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){h===void 0&&(h=new n);var u=2*Math.PI*Math.random(),l=Math.random()+Math.random(),f=l>1?2-l:l,c=f*Math.cos(u),d=f*Math.sin(u);return h.x=a.x+c*a.radius,h.y=a.y+d*a.radius,h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(130),o=i(4),a=function(h,u,l){if(l===void 0&&(l=new o),u<=0||u>=1)return l.x=h.x,l.y=h.y,l;var f=n(h)*u;return u>.5?(f-=h.width+h.height,f<=h.width?(l.x=h.right-f,l.y=h.bottom):(l.x=h.x,l.y=h.bottom-(f-h.width))):f<=h.width?(l.x=h.x+f,l.y=h.y):(l.x=h.right,l.y=h.y+(f-h.width)),l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(4),a=function(h,u,l,f){f===void 0&&(f=[]),!u&&l>0&&(u=n(h)/l);for(var c=h.x1,d=h.y1,v=h.x2,p=h.y2,g=0;g<u;g++){var m=g/u,x=c+(v-c)*m,y=d+(p-d)*m;f.push(new o(x,y))}return f};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){h===void 0&&(h=new n);var u=Math.random();return h.x=a.x1+u*(a.x2-a.x1),h.y=a.y1+u*(a.y2-a.y1),h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){return h===void 0&&(h=new n),h.x=a.x+Math.random()*a.width,h.y=a.y+Math.random()*a.height,h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o,a,h;if(typeof n!="object"||n===null)return n;o=Array.isArray(n)?[]:{};for(h in n)a=n[h],o[h]=i(a);return o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o={name:n.name,type:n.type,x:n.x,y:n.y,depth:n.depth,scale:{x:n.scaleX,y:n.scaleY},origin:{x:n.originX,y:n.originY},flipX:n.flipX,flipY:n.flipY,rotation:n.rotation,alpha:n.alpha,visible:n.visible,blendMode:n.blendMode,textureKey:"",frameKey:"",data:{}};return n.texture&&(o.textureKey=n.texture.key,o.frameKey=n.frame.name),o};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f,c,d,v){v===void 0&&(v=new n);var p=Math.sin(f),g=Math.cos(f),m=g*c,x=p*c,y=-p*d,T=g*d,C=1/(m*T+y*-x);return v.x=T*C*a+-y*C*h+(l*y-u*T)*C,v.y=m*C*h+-x*C*a+(-l*m+u*x)*C,v};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);for(var a=null,h=0;h<o;h++)a=n.shift(),n.push(a);return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);for(var a=null,h=0;h<o;h++)a=n.pop(),n.unshift(a);return a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){h===void 0&&(h=new n);var u=Math.random()*Math.PI*2,l=Math.sqrt(Math.random());return h.x=a.x+l*Math.cos(u)*a.width/2,h.y=a.y+l*Math.sin(u)*a.height/2,h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){h===void 0&&(h=new n);var u=a.x2-a.x1,l=a.y2-a.y1,f=a.x3-a.x1,c=a.y3-a.y1,d=Math.random(),v=Math.random();return d+v>=1&&(d=1-d,v=1-v),h.x=a.x1+(u*d+f*v),h.y=a.y1+(l*d+c*v),h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){var l=h+Math.atan2(n.y-a,n.x-o);return n.x=o+u*Math.cos(l),n.y=a+u*Math.sin(l),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n=Math.max(0,Math.min(1,(n-o)/(a-o))),n*n*n*(n*(n*6-15)+10)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n<=o?0:n>=a?1:(n=(n-o)/(a-o),n*n*(3-2*n))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(132),h=i(318),u=i(319),l=i(6),f=i(320),c=new o({initialize:function(v,p,g){this.manager=v,this.key=p,this.type="frame",this.frames=this.getFrames(v.textureManager,l(g,"frames",[]),l(g,"defaultTextureKey",null),l(g,"sortFrames",!0)),this.frameRate=l(g,"frameRate",null),this.duration=l(g,"duration",null),this.msPerFrame,this.skipMissedFrames=l(g,"skipMissedFrames",!0),this.delay=l(g,"delay",0),this.repeat=l(g,"repeat",0),this.repeatDelay=l(g,"repeatDelay",0),this.yoyo=l(g,"yoyo",!1),this.showOnStart=l(g,"showOnStart",!1),this.hideOnComplete=l(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(d,v,p,g){p===null&&g===null?(d.frameRate=24,d.duration=24/v*1e3):p&&g===null?(d.duration=p,d.frameRate=v/(p/1e3)):(d.frameRate=g,d.duration=v/g*1e3),d.msPerFrame=1e3/d.frameRate},addFrame:function(d){return this.addFrameAt(this.frames.length,d)},addFrameAt:function(d,v){var p=this.getFrames(this.manager.textureManager,v);if(p.length>0){if(d===0)this.frames=p.concat(this.frames);else if(d===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,d),m=this.frames.slice(d);this.frames=g.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(d){return d>=0&&d<this.frames.length},getFirstTick:function(d){d.accumulator=0,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameAt:function(d){return this.frames[d]},getFrames:function(d,v,p,g){g===void 0&&(g=!0);var m=[],x,y,T=1,C,S;if(typeof v=="string"){S=v;var E=d.get(S),P=E.getFrameNames();g&&f(P),v=[],P.forEach(function(w){v.push({key:S,frame:w})})}if(!Array.isArray(v)||v.length===0)return m;for(C=0;C<v.length;C++){var M=v[C],R=l(M,"key",p);if(R){var A=l(M,"frame",0),O=d.getFrame(R,A);y=new u(R,A,T,O),y.duration=l(M,"duration",0),y.isFirst=!x,x&&(x.nextFrame=y,y.prevFrame=x),m.push(y),x=y,T++}}if(m.length>0){y.isLast=!0,y.nextFrame=m[0],m[0].prevFrame=y;var b=1/(m.length-1);for(C=0;C<m.length;C++)m[C].progress=C*b}return m},getNextTick:function(d){d.accumulator-=d.nextTick,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameByProgress:function(d){return d=n(d,0,1),h(d,this.frames,"progress")},nextFrame:function(d){var v=d.currentFrame;v.isLast?d.yoyo?this.handleYoyoFrame(d,!1):d.repeatCounter>0?d.inReverse&&d.forward?d.forward=!1:this.repeatAnimation(d):d.complete():this.updateAndGetNextTick(d,v.nextFrame)},handleYoyoFrame:function(d,v){if(v||(v=!1),d.inReverse===!v&&d.repeatCounter>0){(d.repeatDelay===0||d.pendingRepeat)&&(d.forward=v),this.repeatAnimation(d);return}if(d.inReverse!==v&&d.repeatCounter===0){d.complete();return}d.forward=v;var p=v?d.currentFrame.nextFrame:d.currentFrame.prevFrame;this.updateAndGetNextTick(d,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(d){var v=d.currentFrame;v.isFirst?d.yoyo?this.handleYoyoFrame(d,!0):d.repeatCounter>0?d.inReverse&&!d.forward?this.repeatAnimation(d):(d.forward=!0,this.repeatAnimation(d)):d.complete():this.updateAndGetNextTick(d,v.prevFrame)},updateAndGetNextTick:function(d,v){d.setCurrentFrame(v),this.getNextTick(d)},removeFrame:function(d){var v=this.frames.indexOf(d);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(d){return this.frames.splice(d,1),this.updateFrameSequence(),this},repeatAnimation:function(d){if(d._pendingStop===2){if(d._pendingStopValue===0)return d.stop();d._pendingStopValue--}d.repeatDelay>0&&!d.pendingRepeat?(d.pendingRepeat=!0,d.accumulator-=d.nextTick,d.nextTick+=d.repeatDelay):(d.repeatCounter--,d.forward?d.setCurrentFrame(d.currentFrame.nextFrame):d.setCurrentFrame(d.currentFrame.prevFrame),d.isPlaying&&(this.getNextTick(d),d.handleRepeat()))},toJSON:function(){var d={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){d.frames.push(v.toJSON())}),d},updateFrameSequence:function(){for(var d=this.frames.length,v=1/(d-1),p,g=0;g<d;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*v,g===0?(p.isFirst=!0,d===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[d-1],p.nextFrame=this.frames[g+1])):g===d-1&&d>1?(p.isLast=!0,p.prevFrame=this.frames[d-2],p.nextFrame=this.frames[0]):d>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var d=0;d<this.frames.length;d++)this.frames[d].destroy();this.frames=[],this.manager=null}});e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o===void 0&&(o=0),a===void 0&&(a=" "),h===void 0&&(h=3),n=n.toString();var u=0;if(o+1>=n.length)switch(h){case 1:n=new Array(o+1-n.length).join(a)+n;break;case 3:var l=Math.ceil((u=o-n.length)/2),f=u-l;n=new Array(f+1).join(a)+n+new Array(l+1).join(a);break;default:n=n+new Array(o+1-n.length).join(a);break}return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(327),o=i(189),a=i(331),h=i(332),u=function(l){var f=typeof l;switch(f){case"string":return l.substr(0,3).toLowerCase()==="rgb"?h(l):n(l);case"number":return o(l);case"object":return a(l)}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103);function o(h,u,l,f){var c=(h+u*6)%6,d=Math.min(c,4-c,1);return Math.round(255*(f-f*l*Math.max(0,d)))}var a=function(h,u,l,f){u===void 0&&(u=1),l===void 0&&(l=1);var c=o(5,h,u,l),d=o(3,h,u,l),v=o(1,h,u,l);return f?f.setTo?f.setTo(c,d,v,f.alpha,!1):(f.r=c,f.g=d,f.b=v,f.color=n(c,d,v),f):{r:c,g:d,b:v,color:n(c,d,v)}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=i(330),a=function(h){var u=o(h);return new n(u.r,u.g,u.b,u.a)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n.x=o-n.width/2,n.y=a-n.height/2,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),o=i(136),a=i(31),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function u(){var f=new ArrayBuffer(4),c=new Uint8Array(f),d=new Uint32Array(f);return c[0]=161,c[1]=178,c[2]=195,c[3]=212,d[0]===3569595041?!0:d[0]===2712847316?!1:null}function l(){if(typeof importScripts=="function")return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch{h.localStorage=!1}h.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,h.fileSystem=!!window.requestFileSystem;var f=!1,c=function(){if(window.WebGLRenderingContext)try{var d=a.createWebGL(this),v=d.getContext("webgl")||d.getContext("experimental-webgl"),p=a.create2D(this),g=p.getContext("2d"),m=g.createImageData(1,1);return f=m.data instanceof Uint8ClampedArray,a.remove(d),a.remove(p),!!v}catch{return!1}return!1};return h.webGL=c(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,o.firefox&&o.firefoxVersion<21&&(h.getUserMedia=!1),!n.iOS&&(o.ie||o.firefox||o.chrome)&&(h.canvasBitBltShift=!0),(o.safari||o.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(h.littleEndian=u()),h.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&h.littleEndian!==null&&f,h}e.exports=l()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="",n=function(){var o=function(l){for(var f=["i","webkitI","msI","mozI","oI"],c=0;c<f.length;c++){var d=f[c]+"mageSmoothingEnabled";if(d in l)return d}return null},a=function(l){return i===""&&(i=o(l)),i&&(l[i]=!0),l},h=function(l){return i===""&&(i=o(l)),i&&(l[i]=!1),l},u=function(l){return i!==null?l[i]:null};return{disable:h,enable:a,getPrefix:o,isEnabled:u}};e.exports=n()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(17),a={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)};a=o(!1,a,n),e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){var l=(h-o)*.5,f=(u-a)*.5,c=n*n,d=n*c;return(2*a-2*h+l+f)*d+(-3*a+3*h-2*l-f)*c+l*n+a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.floor(Math.random()*(o-n+1)+n)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(a){return a*n.RAD_TO_DEG};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(a){return this._matrix=a,this._dirty=!0,this},reset:function(){var a=this._matrix;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=1,a[7]=0,a[8]=0,a[9]=0,a[10]=0,a[11]=0,a[12]=1,a[13]=0,a[14]=0,a[15]=0,a[16]=0,a[17]=0,a[18]=1,a[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var a=new Float32Array(this._matrix);a[4]/=255,a[9]/=255,a[14]/=255,a[19]/=255,this._data=a,this._dirty=!1}return this._data},brightness:function(a,h){a===void 0&&(a=0),h===void 0&&(h=!1);var u=a;return this.multiply([u,0,0,0,0,0,u,0,0,0,0,0,u,0,0,0,0,0,1,0],h)},saturate:function(a,h){a===void 0&&(a=0),h===void 0&&(h=!1);var u=a*2/3+1,l=(u-1)*-.5;return this.multiply([u,l,l,0,0,l,u,l,0,0,l,l,u,0,0,0,0,0,1,0],h)},desaturate:function(a){return a===void 0&&(a=!1),this.saturate(-1,a)},hue:function(a,h){a===void 0&&(a=0),h===void 0&&(h=!1),a=a/180*Math.PI;var u=Math.cos(a),l=Math.sin(a),f=.213,c=.715,d=.072;return this.multiply([f+u*(1-f)+l*-f,c+u*-c+l*-c,d+u*-d+l*(1-d),0,0,f+u*-f+l*.143,c+u*(1-c)+l*.14,d+u*-d+l*-.283,0,0,f+u*-f+l*-(1-f),c+u*-c+l*c,d+u*(1-d)+l*d,0,0,0,0,0,1,0],h)},grayscale:function(a,h){return a===void 0&&(a=1),h===void 0&&(h=!1),this.saturate(-a,h)},blackWhite:function(a){return a===void 0&&(a=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a)},contrast:function(a,h){a===void 0&&(a=0),h===void 0&&(h=!1);var u=a+1,l=-.5*(u-1);return this.multiply([u,0,0,0,l,0,u,0,0,l,0,0,u,0,l,0,0,0,1,0],h)},negative:function(a){return a===void 0&&(a=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a)},desaturateLuminance:function(a){return a===void 0&&(a=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],a)},sepia:function(a){return a===void 0&&(a=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a)},night:function(a,h){return a===void 0&&(a=.1),h===void 0&&(h=!1),this.multiply([a*-2,-a,0,0,0,-a,0,a,0,0,0,a,a*2,0,0,0,0,0,1,0],h)},lsd:function(a){return a===void 0&&(a=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a)},brown:function(a){return a===void 0&&(a=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a)},vintagePinhole:function(a){return a===void 0&&(a=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a)},kodachrome:function(a){return a===void 0&&(a=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a)},technicolor:function(a){return a===void 0&&(a=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a)},polaroid:function(a){return a===void 0&&(a=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a)},shiftToBGR:function(a){return a===void 0&&(a=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a)},multiply:function(a,h){h||this.reset();for(var u=this._matrix,l=[],f=0;f<20;f++)l[f]=u[f];return u[0]=l[0]*a[0]+l[1]*a[5]+l[2]*a[10]+l[3]*a[15],u[1]=l[0]*a[1]+l[1]*a[6]+l[2]*a[11]+l[3]*a[16],u[2]=l[0]*a[2]+l[1]*a[7]+l[2]*a[12]+l[3]*a[17],u[3]=l[0]*a[3]+l[1]*a[8]+l[2]*a[13]+l[3]*a[18],u[4]=l[0]*a[4]+l[1]*a[9]+l[2]*a[14]+l[3]*a[19]+l[4],u[5]=l[5]*a[0]+l[6]*a[5]+l[7]*a[10]+l[8]*a[15],u[6]=l[5]*a[1]+l[6]*a[6]+l[7]*a[11]+l[8]*a[16],u[7]=l[5]*a[2]+l[6]*a[7]+l[7]*a[12]+l[8]*a[17],u[8]=l[5]*a[3]+l[6]*a[8]+l[7]*a[13]+l[8]*a[18],u[9]=l[5]*a[4]+l[6]*a[9]+l[7]*a[14]+l[8]*a[19]+l[9],u[10]=l[10]*a[0]+l[11]*a[5]+l[12]*a[10]+l[13]*a[15],u[11]=l[10]*a[1]+l[11]*a[6]+l[12]*a[11]+l[13]*a[16],u[12]=l[10]*a[2]+l[11]*a[7]+l[12]*a[12]+l[13]*a[17],u[13]=l[10]*a[3]+l[11]*a[8]+l[12]*a[13]+l[13]*a[18],u[14]=l[10]*a[4]+l[11]*a[9]+l[12]*a[14]+l[13]*a[19]+l[14],u[15]=l[15]*a[0]+l[16]*a[5]+l[17]*a[10]+l[18]*a[15],u[16]=l[15]*a[1]+l[16]*a[6]+l[17]*a[11]+l[18]*a[16],u[17]=l[15]*a[2]+l[16]*a[7]+l[17]*a[12]+l[18]*a[17],u[18]=l[15]*a[3]+l[16]*a[8]+l[17]*a[13]+l[18]*a[18],u[19]=l[15]*a[4]+l[16]*a[9]+l[17]*a[14]+l[18]*a[19]+l[19],this._dirty=!0,this}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(14),a=function(h,u){if(u===void 0&&(u=new n),h.length===0)return u;for(var l=Number.MAX_VALUE,f=Number.MAX_VALUE,c=o.MIN_SAFE_INTEGER,d=o.MIN_SAFE_INTEGER,v,p,g,m=0;m<h.length;m++)v=h[m],Array.isArray(v)?(p=v[0],g=v[1]):(p=v.x,g=v.y),l=Math.min(l,p),f=Math.min(f,g),c=Math.max(c,p),d=Math.max(d,g);return u.x=l,u.y=f,u.width=c-l,u.height=d-f,u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1),a=new n({initialize:function(u,l,f){this._rgb=[0,0,0],this.onChangeCallback=o,this.dirty=!1,this.set(u,l,f)},set:function(h,u,l){return h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this._rgb=[h,u,l],this.onChange(),this},equals:function(h,u,l){var f=this._rgb;return f.r===h&&f.g===u&&f.b===l},onChange:function(){this.dirty=!0;var h=this._rgb;this.onChangeCallback.call(this,h[0],h[1],h[2])},r:{get:function(){return this._rgb[0]},set:function(h){this._rgb[0]=h,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(h){this._rgb[1]=h,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(h){this._rgb[2]=h,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){n.parentNode&&n.parentNode.removeChild(n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(144),a=i(197),h=i(20),u=i(419),l=i(420),f=i(33),c=i(1),d=i(421),v=new n({initialize:function(g,m){this.scene=g,this.game,this.renderer,this.config=m,this.settings=d.create(m),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(p){this.settings.status=o.INIT,this.sceneUpdate=c,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,a.Global,[a.CoreScene,l(this),u(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var m=this.events;m.emit(h.PRE_UPDATE,p,g),m.emit(h.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),m.emit(h.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(h.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(h.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,m=this.settings;return this.settings.active&&(m.status=o.PAUSED,m.active=!1,g.emit(h.PAUSE,this,p)),this},resume:function(p){var g=this.events,m=this.settings;return this.settings.active||(m.status=o.RUNNING,m.active=!0,g.emit(h.RESUME,this,p)),this},sleep:function(p){var g=this.events,m=this.settings;return m.status=o.SLEEPING,m.active=!1,m.visible=!1,g.emit(h.SLEEP,this,p),this},wake:function(p){var g=this.events,m=this.settings;return m.status=o.RUNNING,m.active=!0,m.visible=!0,g.emit(h.WAKE,this,p),m.isTransition&&g.emit(h.TRANSITION_WAKE,m.transitionFrom,m.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===o.SLEEPING},isActive:function(){return this.settings.status===o.RUNNING},isPaused:function(){return this.settings.status===o.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,m=this.settings;p&&(m.data=p),m.status=o.START,m.active=!0,m.visible=!0,g.emit(h.START,this),g.emit(h.READY,this,p)},shutdown:function(p){var g=this.events,m=this.settings;g.off(h.TRANSITION_INIT),g.off(h.TRANSITION_START),g.off(h.TRANSITION_COMPLETE),g.off(h.TRANSITION_OUT),m.status=o.SHUTDOWN,m.active=!1,m.visible=!1,this.renderer===f.WEBGL&&this.renderer.resetTextures(!0),g.emit(h.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=o.DESTROYED,g.active=!1,g.visible=!1,p.emit(h.DESTROY,this),p.removeAllListeners();for(var m=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<m.length;x++)this[m[x]]=null}});e.exports=v},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n&&n[0].toUpperCase()+n.slice(1)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),o=i(0),a=i(109),h=i(424),u="Texture.frame missing: ",l=new o({initialize:function(c,d,v,p,g){Array.isArray(v)||(v=[v]),this.manager=c,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var m=0;m<v.length;m++)this.source.push(new h(this,v[m],p,g))},add:function(f,c,d,v,p,g){if(this.has(f))return null;var m=new a(this,f,c,d,v,p,g);return this.frames[f]=m,this.firstFrame==="__BASE"&&(this.firstFrame=f),this.frameTotal++,m},remove:function(f){if(this.has(f)){var c=this.get(f);return c.destroy(),delete this.frames[f],!0}return!1},has:function(f){return this.frames[f]},get:function(f){f||(f=this.firstFrame);var c=this.frames[f];return c||(console.warn(u+f),c=this.frames[this.firstFrame]),c},getTextureSourceIndex:function(f){for(var c=0;c<this.source.length;c++)if(this.source[c]===f)return c;return-1},getFramesFromTextureSource:function(f,c){c===void 0&&(c=!1);var d=[];for(var v in this.frames)if(!(v==="__BASE"&&!c)){var p=this.frames[v];p.sourceIndex===f&&d.push(p)}return d},getFrameNames:function(f){f===void 0&&(f=!1);var c=Object.keys(this.frames);if(!f){var d=c.indexOf("__BASE");d!==-1&&c.splice(d,1)}return c},getSourceImage:function(f){(f==null||this.frameTotal===1)&&(f="__BASE");var c=this.frames[f];return c?c.source.image:(console.warn(u+f),this.frames.__BASE.source.image)},getDataSourceImage:function(f){(f==null||this.frameTotal===1)&&(f="__BASE");var c=this.frames[f],d;return c?d=c.sourceIndex:(console.warn(u+f),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++){var d=this.source[c];this.dataSource.push(new h(this,f[c],d.width,d.height))}},setFilter:function(f){var c;for(c=0;c<this.source.length;c++)this.source[c].setFilter(f);for(c=0;c<this.dataSource.length;c++)this.dataSource[c].setFilter(f)},destroy:function(){var f;for(f=0;f<this.source.length;f++)this.source[f].destroy();for(f=0;f<this.dataSource.length;f++)this.dataSource[f].destroy();for(var c in this.frames){var d=this.frames[c];d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var v=this.manager.game.renderer;v&&v.type===n.WEBGL&&v.resetTextures(!0),this.manager=null}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(a,h,u,l,f){l===void 0&&(l=0),f===void 0&&(f=a.length);var c=[];if(n(a,l,f))for(var d=l;d<f;d++){var v=a[d];(!h||h&&u===void 0&&v.hasOwnProperty(h)||h&&u!==void 0&&v[h]===u)&&c.push(v)}return c};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(!Array.isArray(n)||n.length<2||!Array.isArray(n[0]))return!1;for(var o=n[0].length,a=1;a<n.length;a++)if(n[a].length!==o)return!1;return!0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){o===void 0&&(o=0),a===void 0&&(a=n.length);var h=o+Math.floor(Math.random()*a);return n[h]===void 0?null:n[h]};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(438),h=new n({Extends:o,initialize:function(){o.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(u){return this._pending.push(u),this._toProcess++,u},remove:function(u){return this._destroy.push(u),this._toProcess++,u},removeAll:function(){for(var u=this._active,l=this._destroy,f=u.length;f--;)l.push(u[f]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var u=this._destroy,l=this._active,f,c;for(f=0;f<u.length;f++){c=u[f];var d=l.indexOf(c);d!==-1&&(l.splice(d,1),this.emit(a.PROCESS_QUEUE_REMOVE,c))}for(u.length=0,u=this._pending,f=0;f<u.length;f++)c=u[f],(!this.checkQueue||this.checkQueue&&l.indexOf(c)===-1)&&(l.push(c),this.emit(a.PROCESS_QUEUE_ADD,c));return u.length=0,this._toProcess=0,l},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(o,a){return parseInt(o.getAttribute(a),10)}var n=function(o,a,h,u,l){h===void 0&&(h=0),u===void 0&&(u=0);var f=a.cutX,c=a.cutY,d=a.source.width,v=a.source.height,p=a.sourceIndex,g={},m=o.getElementsByTagName("info")[0],x=o.getElementsByTagName("common")[0];g.font=m.getAttribute("face"),g.size=i(m,"size"),g.lineHeight=i(x,"lineHeight")+u,g.chars={};var y=o.getElementsByTagName("char"),T=a!==void 0&&a.trimmed;if(T)var C=a.height,S=a.width;for(var E=0;E<y.length;E++){var P=y[E],M=i(P,"id"),R=String.fromCharCode(M),A=i(P,"x"),O=i(P,"y"),b=i(P,"width"),w=i(P,"height");T&&(A<S&&(S=A),O<C&&(C=O)),T&&C!==0&&S!==0&&(A-=a.x,O-=a.y);var I=(f+A)/d,Y=(c+O)/v,z=(f+A+b)/d,V=(c+O+w)/v;if(g.chars[M]={x:A,y:O,width:b,height:w,centerX:Math.floor(b/2),centerY:Math.floor(w/2),xOffset:i(P,"xoffset"),yOffset:i(P,"yoffset"),xAdvance:i(P,"xadvance")+h,data:{},kerning:{},u0:I,v0:Y,u1:z,v1:V},l&&b!==0&&w!==0){var W=l.add(R,p,A,O,b,w);W&&W.setUVs(b,w,I,Y,z,V)}}var F=o.getElementsByTagName("kerning");for(E=0;E<F.length;E++){var L=F[E],D=i(L,"first"),B=i(L,"second"),G=i(L,"amount");g.chars[B].kerning[D]=G}return g};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1049),o=i(440),a=i(0),h=i(11),u=i(109),l=i(15),f=i(110),c=new a({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,n],initialize:function(v,p,g,m,x){l.call(this,v,"Blitter"),this.setTexture(m,x),this.setPosition(p,g),this.initPipeline(),this.children=new f,this.renderList=[],this.dirty=!1},create:function(d,v,p,g,m){g===void 0&&(g=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof u||(p=this.texture.get(p));var x=new o(this,d,v,p,g);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(d,v,p,g){for(var m=this.createMultiple(v,p,g),x=0;x<m.length;x++){var y=m[x];d.call(this,y,x)}return m},createMultiple:function(d,v,p){v===void 0&&(v=this.frame.name),p===void 0&&(p=!0),Array.isArray(v)||(v=[v]);var g=[],m=this;return v.forEach(function(x){for(var y=0;y<d;y++)g.push(m.create(0,0,x,p))}),g},childCanRender:function(d){return d.visible&&d.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(208),o=i(35),a=i(0),h=i(11),u=i(75),l=i(15),f=i(10),c=i(1052),d=i(441),v=i(3),p=new a({Extends:l,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,c],initialize:function(m,x,y,T){l.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this.tempTransformMatrix=new h.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(x,y),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new f),g.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),x=m.transformPoint(this.x,this.y);g.setTo(x.x,x.y,0,0)}if(this.list.length>0){var y=this.list,T=new f,C=!1;g.setEmpty();for(var S=0;S<y.length;S++){var E=y[S];E.getBounds&&(E.getBounds(T),C?d(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),C=!0))}}return g},addHandler:function(g){g.once(u.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(u.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,m){m===void 0&&(m=new v),this.parentContainer?this.parentContainer.pointToContainer(g,m):m=new v(g.x,g.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(g.x,g.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return n.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,m){return n.AddAt(this.list,g,m,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,m){return g?(m===void 0&&(m=function(x,y){return x[g]-y[g]}),n.StableSort(this.list,m),this):this},getByName:function(g){return n.GetFirst(this.list,"name",g)},getRandom:function(g,m){return n.GetRandom(this.list,g,m)},getFirst:function(g,m,x,y){return n.GetFirst(this.list,g,m,x,y)},getAll:function(g,m,x,y){return n.GetAll(this.list,g,m,x,y)},count:function(g,m,x,y){return n.CountAllMatching(this.list,g,m,x,y)},swap:function(g,m){return n.Swap(this.list,g,m),this},moveTo:function(g,m){return n.MoveTo(this.list,g,m),this},moveAbove:function(g,m){return n.MoveAbove(this.list,g,m),this},moveBelow:function(g,m){return n.MoveBelow(this.list,g,m),this},remove:function(g,m){var x=n.Remove(this.list,g,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++)x[y].destroy()}return this},removeAt:function(g,m){var x=n.RemoveAt(this.list,g,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(g,m,x){var y=n.RemoveBetween(this.list,g,m,this.removeHandler,this);if(x)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var m=n.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var x=0;x<m.length;x++)m[x].destroy();return this},bringToTop:function(g){return n.BringToTop(this.list,g),this},sendToBack:function(g){return n.SendToBack(this.list,g),this},moveUp:function(g){return n.MoveUp(this.list,g),this},moveDown:function(g){return n.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return n.Shuffle(this.list),this},replace:function(g,m,x){var y=n.Replace(this.list,g,m);return y&&(this.addHandler(m),this.removeHandler(g),x&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,m,x,y){return n.SetAll(this.list,g,m,x,y),this},each:function(g,m){var x=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<C;y++)x[0]=T[y],g.apply(m,x);return this},iterate:function(g,m){var x=[null],y;for(y=2;y<arguments.length;y++)x.push(arguments[y]);for(y=0;y<this.list.length;y++)x[0]=this.list[y],g.apply(m,x);return this},setScrollFactor:function(g,m,x){return m===void 0&&(m=g),x===void 0&&(x=!1),this.scrollFactorX=g,this.scrollFactorY=m,x&&(n.SetAll(this.list,"scrollFactorX",g),n.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),o=i(0),a=i(1057),h=new o({Extends:n,Mixins:[a],initialize:function(l,f,c,d,v,p,g){n.call(this,l,f,c,d,v,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(u,l){return this.cropWidth=u,this.cropHeight=l,this},setDisplayCallback:function(u){return this.displayCallback=u,this},setScrollX:function(u){return this.scrollX=u,this},setScrollY:function(u){return this.scrollY=u,this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(133),o=i(0),a=i(217),h=i(303),u=i(304),l=i(305),f=i(309),c=i(167),d=i(312),v=i(313),p=i(314),g=i(111),m=i(15),x=i(2),y=i(6),T=i(14),C=i(1063),S=new o({Extends:m,Mixins:[h,u,l,f,c,v,p,d,C],initialize:function(P,M){var R=y(M,"x",0),A=y(M,"y",0);m.call(this,P,"Graphics"),this.setPosition(R,A),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(M)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,P,M){return M===void 0&&(M=1),this.commandBuffer.push(a.LINE_STYLE,E,P,M),this._lineWidth=E,this},fillStyle:function(E,P){return P===void 0&&(P=1),this.commandBuffer.push(a.FILL_STYLE,E,P),this},fillGradientStyle:function(E,P,M,R,A,O,b,w){return A===void 0&&(A=1),O===void 0&&(O=A),b===void 0&&(b=A),w===void 0&&(w=A),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,A,O,b,w,E,P,M,R),this},lineGradientStyle:function(E,P,M,R,A,O){return O===void 0&&(O=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,E,O,P,M,R,A),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,P,M,R){return this.commandBuffer.push(a.FILL_RECT,E,P,M,R),this},strokeRect:function(E,P,M,R){var A=this._lineWidth/2,O=E-A,b=E+A;return this.beginPath(),this.moveTo(E,P),this.lineTo(E,P+R),this.strokePath(),this.beginPath(),this.moveTo(E+M,P),this.lineTo(E+M,P+R),this.strokePath(),this.beginPath(),this.moveTo(O,P),this.lineTo(b+M,P),this.strokePath(),this.beginPath(),this.moveTo(O,P+R),this.lineTo(b+M,P+R),this.strokePath(),this},fillRoundedRect:function(E,P,M,R,A){A===void 0&&(A=20);var O=A,b=A,w=A,I=A;return typeof A!="number"&&(O=x(A,"tl",20),b=x(A,"tr",20),w=x(A,"bl",20),I=x(A,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-b,P),this.arc(E+M-b,P+b,b,-T.TAU,0),this.lineTo(E+M,P+R-I),this.arc(E+M-I,P+R-I,I,0,T.TAU),this.lineTo(E+w,P+R),this.arc(E+w,P+R-w,w,T.TAU,Math.PI),this.lineTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,P,M,R,A){A===void 0&&(A=20);var O=A,b=A,w=A,I=A;return typeof A!="number"&&(O=x(A,"tl",20),b=x(A,"tr",20),w=x(A,"bl",20),I=x(A,"br",20)),this.beginPath(),this.moveTo(E+O,P),this.lineTo(E+M-b,P),this.moveTo(E+M-b,P),this.arc(E+M-b,P+b,b,-T.TAU,0),this.lineTo(E+M,P+R-I),this.moveTo(E+M,P+R-I),this.arc(E+M-I,P+R-I,I,0,T.TAU),this.lineTo(E+w,P+R),this.moveTo(E+w,P+R),this.arc(E+w,P+R-w,w,T.TAU,Math.PI),this.lineTo(E,P+O),this.moveTo(E,P+O),this.arc(E+O,P+O,O,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,P){return this.fillPoint(E.x,E.y,P)},fillPoint:function(E,P,M){return!M||M<1?M=1:(E-=M/2,P-=M/2),this.commandBuffer.push(a.FILL_RECT,E,P,M,M),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,P,M,R,A,O){return this.commandBuffer.push(a.FILL_TRIANGLE,E,P,M,R,A,O),this},strokeTriangle:function(E,P,M,R,A,O){return this.commandBuffer.push(a.STROKE_TRIANGLE,E,P,M,R,A,O),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,P,M,R){return this.beginPath(),this.moveTo(E,P),this.lineTo(M,R),this.strokePath(),this},lineTo:function(E,P){return this.commandBuffer.push(a.LINE_TO,E,P),this},moveTo:function(E,P){return this.commandBuffer.push(a.MOVE_TO,E,P),this},strokePoints:function(E,P,M,R){P===void 0&&(P=!1),M===void 0&&(M=!1),R===void 0&&(R=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<R;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.strokePath(),this},fillPoints:function(E,P,M,R){P===void 0&&(P=!1),M===void 0&&(M=!1),R===void 0&&(R=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<R;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.strokePoints(M,!0)},strokeEllipse:function(E,P,M,R,A){A===void 0&&(A=32);var O=new g(E,P,M,R),b=O.getPoints(A);return this.strokePoints(b,!0)},fillEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.fillPoints(M,!0)},fillEllipse:function(E,P,M,R,A){A===void 0&&(A=32);var O=new g(E,P,M,R),b=O.getPoints(A);return this.fillPoints(b,!0)},arc:function(E,P,M,R,A,O,b){return O===void 0&&(O=!1),b===void 0&&(b=0),this.commandBuffer.push(a.ARC,E,P,M,R,A,O,b),this},slice:function(E,P,M,R,A,O,b){return O===void 0&&(O=!1),b===void 0&&(b=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,E,P),this.commandBuffer.push(a.ARC,E,P,M,R,A,O,b),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(E,P){return this.commandBuffer.push(a.TRANSLATE,E,P),this},scaleCanvas:function(E,P){return this.commandBuffer.push(a.SCALE,E,P),this},rotateCanvas:function(E){return this.commandBuffer.push(a.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,P,M){var R=this.scene.sys,A=R.game.renderer;P===void 0&&(P=R.scale.width),M===void 0&&(M=R.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,P,M),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var O,b;if(typeof E=="string")if(R.textures.exists(E)){O=R.textures.get(E);var w=O.getSourceImage();w instanceof HTMLCanvasElement&&(b=w.getContext("2d"))}else O=R.textures.createCanvas(E,P,M),b=O.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(b=E.getContext("2d"));return b&&(this.renderCanvas(A,this,S.TargetCamera,null,b,!1),O&&O.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new n,e.exports=S},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h,u){u===void 0&&(u=new n);var l=a.width/2,f=a.height/2;return u.x=a.x+l*Math.cos(h),u.y=a.y+f*Math.sin(h),u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(0),a=i(11),h=i(176),u=i(101),l=i(9),f=i(75),c=i(110),d=i(1071),v=i(20),p=i(79),g=new o({Extends:c,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.Visible,l,d],initialize:function(x,y){c.call(this,x),l.call(this),this.scene=x,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=x.sys,this.events=x.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),y&&this.add(y),x.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(m,x){return this.data||(this.data=new u(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new u(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new u(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new u(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,y=[];x&&(y.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return y.unshift(this.displayList.getIndex(m)),y},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(f.ADDED_TO_SCENE,m,this.scene),this.events.emit(v.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(f.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(f.DESTROY,this);for(var m=this.list.length;m--;)this.list[m].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(15),h=i(450),u=i(110),l=i(452),f=i(1075),c=new n({Extends:a,Mixins:[o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,f],initialize:function(v,p,g,m){if(a.call(this,v,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(m=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new u(this),this.wells=new u(this),m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this.createEmitter(m[x])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(d,v){return this.texture=this.scene.sys.textures.get(d),this.setFrame(v)},setFrame:function(d){this.frame=this.texture.get(d);var v=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return v.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(d,v){Array.isArray(d)||(d=[d]);var p=v.frames;p.length=0;for(var g=0;g<d.length;g++){var m=d[g];this.frameNames.indexOf(m)!==-1&&p.push(this.texture.get(m))}return p.length>0?v.defaultFrame=p[0]:v.defaultFrame=this.defaultFrame,this},addEmitter:function(d){return this.emitters.add(d)},createEmitter:function(d){return this.addEmitter(new l(this,d))},removeEmitter:function(d){return this.emitters.remove(d,!0)},addGravityWell:function(d){return this.wells.add(d)},createGravityWell:function(d){return this.addGravityWell(new h(d))},emitParticle:function(d,v,p){for(var g=this.emitters.list,m=0;m<g.length;m++){var x=g[m];x.active&&x.emitParticle(d,v,p)}return this},emitParticleAt:function(d,v,p){return this.emitParticle(p,d,v)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(d,v){v*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var m=p[g];m.active&&m.preUpdate(d,v)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(133),a=i(31),h=i(0),u=i(11),l=i(33),f=i(109),c=i(15),d=i(1),v=i(92),p=i(1079),g=i(141),m=i(12),x=i(222),y=new h({Extends:c,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,p],initialize:function(C,S,E,P,M,R,A){S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=32),M===void 0&&(M=32),c.call(this,C,"RenderTexture"),this.renderer=C.sys.renderer,this.textureManager=C.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,R===void 0?(this.canvas=a.create2D(this,P,M),this.texture=C.sys.textures.addCanvas(x(),this.canvas),this.frame=this.texture.get()):(this.texture=C.sys.textures.get(R),this.frame=this.texture.get(A),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new o(0,0,P,M),this.renderTarget=null;var O=this.renderer;O?O.type===l.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(O,P,M,1,0,!1)):O.type===l.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=d,this.camera.setScene(C),this.setPosition(S,E),R===void 0&&this.setSize(P,M),this.setOrigin(0,0),this.initPipeline(v.SINGLE_PIPELINE)},setSize:function(T,C){return this.resize(T,C)},resize:function(T,C){C===void 0&&(C=T);var S=this.frame;if(T!==this.width||C!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=C,this.texture.width=T,this.texture.height=C;var E=this.renderTarget;E&&(E.resize(T,C),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(T,C),S.source.width=T,S.source.height=C,S.setSize(T,C),this.width=T,this.height=C}}else{var P=this.texture.getSourceImage();S.cutX+T>P.width&&(T=P.width-S.cutX),S.cutY+C>P.height&&(C=P.height-S.cutY),S.setSize(T,C,S.cutX,S.cutY)}this.updateDisplayOrigin();var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=T,M.hitArea.height=C),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,C,S,E,P,M){var R=this.frame,A=this.camera,O=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=R.cutWidth),M===void 0&&(M=R.cutHeight);var b=(T>>16&255)/255,w=(T>>8&255)/255,I=(T&255)/255,Y=this.renderTarget;if(A.preRender(),Y){Y.bind(!0);var z=this.pipeline;z.manager.set(z);var V=Y.width,W=Y.height,F=O.width,L=O.height,D=F/V,B=L/W;z.drawFillRect(S*D,E*B,P*D,M*B,m.getTintFromFloats(I,w,b,1),C),Y.unbind(!0)}else{var G=this.context;O.setContext(G),G.fillStyle="rgba("+b+","+w+","+I+","+C+")",G.fillRect(S+R.cutX,E+R.cutY,P,M),O.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var C=this.context;C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),C.restore()}this.dirty=!1}return this},erase:function(T,C,S){return this._eraseMode=!0,this.draw(T,C,S,1,16777215),this._eraseMode=!1,this},draw:function(T,C,S,E,P){return this.beginDraw(),this.batchDraw(T,C,S,E,P),this.endDraw(),this},drawFrame:function(T,C,S,E,P,M){return this.beginDraw(),this.batchDrawFrame(T,C,S,E,P,M),this.endDraw(),this},beginDraw:function(){var T=this.camera,C=this.renderer,S=this.renderTarget;return T.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this},batchDraw:function(T,C,S,E,P){return E===void 0&&(E=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,C,S,E,P),this},batchDrawFrame:function(T,C,S,E,P,M){S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16);var R=this.textureManager.getFrame(T,C);return R&&(this.renderTarget?this.pipeline.batchTextureFrame(R,S,E,M,P,this.camera.matrix,null):this.batchTextureFrame(R,S+this.frame.cutX,E+this.frame.cutY,P,M)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),P=C.pipelines.setUtility();P.blitFrame(E,S,1,!1,!1,T),C.resetScissor(),C.resetViewport()}else C.setContext();return this.dirty=!0,this},batchList:function(T,C,S,E,P){for(var M=0;M<T.length;M++){var R=T[M];!R||R===this||(R.renderWebGL||R.renderCanvas?this.drawGameObject(R,C,S):R.isParent||R.list?this.batchGroup(R.getChildren(),C,S):typeof R=="string"?this.batchTextureFrameKey(R,null,C,S,E,P):R instanceof f?this.batchTextureFrame(R,C,S,E,P):Array.isArray(R)&&this.batchList(R,C,S,E,P))}},batchGroup:function(T,C,S){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<T.length;E++){var P=T[E];if(P.willRender(this.camera)){var M=P.x+C,R=P.y+S;this.drawGameObject(P,M,R)}}},batchGameObjectWebGL:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,P=T.y;T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,P)},batchGameObjectCanvas:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,P=T.y;if(this._eraseMode){var M=T.blendMode;T.blendMode=n.ERASE}T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,P),this._eraseMode&&(T.blendMode=M)},batchTextureFrameKey:function(T,C,S,E,P,M){var R=this.textureManager.getFrame(T,C);R&&this.batchTextureFrame(R,S,E,P,M)},batchTextureFrame:function(T,C,S,E,P){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;var M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(T,C,S,P,E,this.camera.matrix,null);else{var R=this.context,A=T.canvasData,O=T.source.image,b=this.camera.matrix;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=E,b.setToContext(R),R.drawImage(O,A.x,A.y,A.width,A.height,C,S,A.width,A.height),R.restore()}},snapshotArea:function(T,C,S,E,P,M,R){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,T,C,S,E,M,R):this.renderer.snapshotCanvas(this.canvas,P,!1,T,C,S,E,M,R),this},snapshot:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,C,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,C,S),this},snapshotPixel:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,C):this.renderer.snapshotCanvas(this.canvas,S,!0,T,C),this},preDestroy:function(){this._saved||(a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,a=n==="x"?o:o&3|8;return a.toString(16)})};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),o=i(0),a=i(11),h=i(15),u=i(92),l=i(1085),f=i(3),c=new o({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,l],initialize:function(v,p,g,m,x,y,T,C,S){m===void 0&&(m="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),h.call(this,v,"Rope"),this.anims=new n(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new f,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,x),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(u.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(d,v){var p=this.anims.currentFrame;this.anims.update(d,v),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(d,v,p){return this.anims.play(d,v,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(d,v,p){return d===void 0&&(d=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(d,v,p))},setVertical:function(d,v,p){return d===void 0&&(d=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(d,v,p)):this},setTintFill:function(d){return d===void 0&&(d=!1),this.tintFill=d,this},setAlphas:function(d,v){var p=this.points.length;if(p<1)return this;var g=this.alphas;d===void 0?d=[1]:!Array.isArray(d)&&v===void 0&&(d=[d]);var m,x=0;if(v!==void 0)for(m=0;m<p;m++)x=m*2,g[x]=d,g[x+1]=v;else if(d.length===p)for(m=0;m<p;m++)x=m*2,g[x]=d[m],g[x+1]=d[m];else{var y=d[0];for(m=0;m<p;m++)x=m*2,d.length>x&&(y=d[x]),g[x]=y,d.length>x+1&&(y=d[x+1]),g[x+1]=y}return this},setColors:function(d){var v=this.points.length;if(v<1)return this;var p=this.colors;d===void 0?d=[16777215]:Array.isArray(d)||(d=[d]);var g,m=0;if(d.length===v)for(g=0;g<v;g++)m=g*2,p[m]=d[g],p[m+1]=d[g];else{var x=d[0];for(g=0;g<v;g++)m=g*2,d.length>m&&(x=d[m]),p[m]=x,d.length>m+1&&(x=d[m+1]),p[m+1]=x}return this},setPoints:function(d,v,p){if(d===void 0&&(d=2),typeof d=="number"){var g=d;g<2&&(g=2),d=[];var m,x,y;if(this.horizontal)for(y=-this.frame.halfWidth,x=this.frame.width/(g-1),m=0;m<g;m++)d.push({x:y+m*x,y:0});else for(y=-this.frame.halfHeight,x=this.frame.height/(g-1),m=0;m<g;m++)d.push({x:0,y:y+m*x})}var T=d.length,C=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(d.unshift({x:0,y:0}),T++),C!==T&&this.resizeArrays(T),this.points=d,this.updateUVs(),v!=null&&this.setColors(v),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var d=this.uv,v=this.points.length,p=this.frame.u0,g=this.frame.v0,m=this.frame.u1,x=this.frame.v1,y=(m-p)/(v-1),T=(x-g)/(v-1),C=0;C<v;C++){var S=C*4,E,P,M,R;this.horizontal?(this._flipX?(E=m-C*y,M=m-C*y):(E=p+C*y,M=p+C*y),this._flipY?(P=x,R=g):(P=g,R=x)):(this._flipX?(E=p,M=m):(E=m,M=p),this._flipY?(P=x-C*T,R=x-C*T):(P=g+C*T,R=g+C*T)),d[S+0]=E,d[S+1]=P,d[S+2]=M,d[S+3]=R}return this},resizeArrays:function(d){var v=this.colors,p=this.alphas;this.vertices=new Float32Array(d*4),this.uv=new Float32Array(d*4),v=new Uint32Array(d*2),p=new Float32Array(d*2);for(var g=0;g<d*2;g++)v[g]=16777215,p[g]=1;return this.colors=v,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var d=this._perp,v=this.points,p=this.vertices,g=v.length;if(this.dirty=!1,!(g<1)){for(var m,x=v[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var C=v[T],S=T*4;T<g-1?m=v[T+1]:m=C,d.x=m.y-x.y,d.y=-(m.x-x.x);var E=d.length();d.x/=E,d.y/=E,d.x*=y,d.y*=y,p[S]=C.x+d.x,p[S+1]=C.y+d.y,p[S+2]=C.x-d.x,p[S+3]=C.y-d.y,x=C}return this}},setDebug:function(d,v){return this.debugGraphic=d,!d&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(d,v,p){var g=d.debugGraphic,m=p[0],x=p[1],y=p[2],T=p[3];g.lineBetween(m,x,y,T);for(var C=4;C<v;C+=4){var S=p[C+0],E=p[C+1],P=p[C+2],M=p[C+3];g.lineBetween(m,x,S,E),g.lineBetween(y,T,P,M),g.lineBetween(y,T,S,E),g.lineBetween(S,E,P,M),m=S,x=E,y=P,T=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(d){return this._flipX=d,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(d){return this._flipY=d,this.updateUVs()}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),o=i(31),a=i(0),h=i(11),u=i(22),l=i(15),f=i(458),c=i(6),d=i(202),v=i(1088),p=i(459),g=new a({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,v],initialize:function(x,y,T,C,S){y===void 0&&(y=0),T===void 0&&(T=0),l.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=o.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),x.sys.game.events.on(u.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",n(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var y=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,y){for(var T="",C=m.replace(/ +/gi," ").split(this.splitRegExp),S=C.length,E=0;E<S;E++){var P=C[E],M="";P=P.replace(/^ *|\s*$/gi,"");var R=x.measureText(P).width;if(R<y){T+=P+`
`;continue}for(var A=y,O=P.split(" "),b=0;b<O.length;b++){var w=O[b],I=w+" ",Y=x.measureText(I).width;if(Y>A){if(b===0){for(var z=I;z.length&&(z=z.slice(0,-1),Y=x.measureText(z).width,!(Y<=A)););if(!z.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var V=w.substr(z.length);O[b]=V,M+=z}var W=O[b].length?b:b+1,F=O.slice(W).join(" ").replace(/[ \n]*$/gi,"");C[E+1]=F+" "+(C[E+1]||""),S=C.length;break}else M+=I,A-=Y}T+=M.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(m,x,y){for(var T="",C=m.split(this.splitRegExp),S=C.length-1,E=x.measureText(" ").width,P=0;P<=S;P++){for(var M=y,R=C[P].split(" "),A=R.length-1,O=0;O<=A;O++){var b=R[O],w=x.measureText(b).width,I=w;O<A&&(I+=E),I>M&&O>0&&(T+=`
`,M=y),T+=b,O<A?(T+=" ",M-=I):M-=w}P<S&&(T+=`
`)}return T},getWrappedText:function(m){m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(m);return x.split(this.splitRegExp)},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,y,T,C,S){return this.style.setShadow(m,x,y,T,C,S)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setPadding:function(m,x,y,T){if(typeof m=="object"){var C=m,S=c(C,"x",null);S!==null?(m=S,y=S):(m=c(C,"left",0),y=c(C,"right",m));var E=c(C,"y",null);E!==null?(x=E,T=E):(x=c(C,"top",0),T=c(C,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),y===void 0&&(y=m),T===void 0&&(T=x);return this.padding.left=m,this.padding.top=x,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},updateText:function(){var m=this.canvas,x=this.context,y=this.style,T=y.resolution,C=y.metrics;y.syncFont(m,x);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),P=f(this,C,E),M=this.padding,R;y.fixedWidth===0?(this.width=P.width+M.left+M.right,R=P.width):(this.width=y.fixedWidth,R=this.width-M.left-M.right,R<P.width&&(R=P.width)),y.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=y.fixedHeight;var A=this.width,O=this.height;this.updateDisplayOrigin(),A*=T,O*=T,A=Math.max(A,1),O=Math.max(O,1),m.width!==A||m.height!==O?(m.width=A,m.height=O,this.frame.setSize(A,O),y.syncFont(m,x)):x.clearRect(0,0,A,O),x.save(),x.scale(T,T),y.backgroundColor&&(x.fillStyle=y.backgroundColor,x.fillRect(0,0,A,O)),y.syncStyle(m,x),x.textBaseline="alphabetic",x.translate(M.left,M.top);for(var b,w,I=0;I<P.lines;I++){if(b=y.strokeThickness/2,w=y.strokeThickness/2+I*P.lineHeight+C.ascent,I>0&&(w+=P.lineSpacing*I),y.rtl)b=A-b;else if(y.align==="right")b+=R-P.lineWidths[I];else if(y.align==="center")b+=(R-P.lineWidths[I])/2;else if(y.align==="justify"){var Y=.85;if(P.lineWidths[I]/P.width>=Y){var z=P.width-P.lineWidths[I],V=x.measureText(" ").width,W=E[I].trim(),F=W.split(" ");z+=(E[I].length-W.length)*V;for(var L=Math.floor(z/V),D=0;L>0;)F[D]+=" ",D=(D+1)%(F.length-1||1),--L;E[I]=F.join(" ")}}this.autoRound&&(b=Math.round(b),w=Math.round(w)),y.strokeThickness&&(this.style.syncShadow(x,y.shadowStroke),x.strokeText(E[I],b,w)),y.color&&(this.style.syncShadow(x,y.shadowFill),x.fillText(E[I],b,w))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var B=this.input;return B&&!B.customHitArea&&(B.hitArea.width=this.width,B.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=h.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){this.style.rtl&&d(this.canvas),o.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(0),a=i(11),h=i(22),u=i(15),l=i(361),f=i(192),c=i(1091),d=i(3),v=8,p=new o({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,c],initialize:function(m,x,y,T,C,S,E){var P=m.sys.renderer;u.call(this,m,"TileSprite");var M=m.sys.textures.get(S),R=M.get(E);!T||!C?(T=R.width,C=R.height):(T=Math.floor(T),C=Math.floor(C)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=P,this.canvas=n.create(this,T,C),this.context=this.canvas.getContext("2d"),this.displayTexture=M,this.displayFrame=R,this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=l(R.width),this.potHeight=l(R.height),this.fillCanvas=n.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(x,y),this.setSize(T,C),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),m.sys.game.events.on(h.CONTEXT_RESTORED,function(A){if(A){var O=A.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=A.createTexture2D(0,O.LINEAR,O.LINEAR,O.REPEAT,O.REPEAT,O.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,m){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(m)},setFrame:function(g){var m=this.displayTexture.get(g);return this.potWidth=l(m.width),this.potHeight=l(m.height),this.canvas.width=0,!m.cutWidth||!m.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this.displayFrame=m,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,m){return g!==void 0&&(this.tilePositionX=g),m!==void 0&&(this.tilePositionY=m),this},setTileScale:function(g,m){return g===void 0&&(g=this.tileScaleX),m===void 0&&(m=g),this.tileScaleX=g,this.tileScaleY=m,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var m=this.fillContext,x=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),m.clearRect(0,0,y,T),x.width=y,x.height=T,m.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=m.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var m=this.context;this.scene.sys.game.config.antialias||f.disable(m);var x=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,C=this._tilePosition.y;m.clearRect(0,0,this.width,this.height),m.save(),m.scale(x,y),m.translate(-T,-C),m.fillStyle=this.fillPattern,m.fillRect(T,C,this.width/x,this.height/y),m.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),n.remove(this.canvas),n.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),a=i(11),h=i(75),u=i(22),l=i(51),f=i(15),c=i(70),d=i(222),v=i(1094),p=i(14),g=new n({Extends:f,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,v],initialize:function(x,y,T,C){f.call(this,x,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=d(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),C&&this.changeSource(C,!1);var S=x.sys.game.events;S.on(u.PAUSE,this.globalPause,this),S.on(u.RESUME,this.globalResume,this);var E=x.sys.sound;E&&E.on(c.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(m,x,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;m===void 0&&(m=T.loop);var C=this.scene.sys.sound;C&&C.mute&&this.setMute(!0),isNaN(x)||(this._markerIn=x),!isNaN(y)&&y>x&&(this._markerOut=y),T.loop=m;var S=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(m,x,y,T,C){x===void 0&&(x=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(m);return E?(this.video=E,this._cacheKey=m,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,x&&this.play(y,T,C)):this.video=null,this},addMarker:function(m,x,y){return!isNaN(x)&&x>=0&&!isNaN(y)&&(this.markers[m]=[x,y]),this},playMarker:function(m,x){var y=this.markers[m];return y&&this.play(x,y[0],y[1]),this},removeMarker:function(m){return delete this.markers[m],this},snapshot:function(m,x){return m===void 0&&(m=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,m,x)},snapshotArea:function(m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),C===void 0&&(C=y),S===void 0&&(S=T);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(C,S),E&&P.context.drawImage(E,m,x,y,T,0,0,C,S)):(P=this.scene.sys.textures.createCanvas(d(),C,S),this.snapshotTexture=P,E&&P.context.drawImage(E,m,x,y,T,0,0,C,S)),P.update()},saveSnapshotTexture:function(m){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,m):this.snapshotTexture=this.scene.sys.textures.createCanvas(m,this.width,this.height),this.snapshotTexture},loadURL:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=m,T.load(),this.video=T,this},loadMediaStream:function(m,x,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=m}catch{T.src=window.URL.createObjectURL(m)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(m){this.scene.sys.input.once(l.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(h.VIDEO_ERROR,this,m)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(m){this.stop(),this.emit(h.VIDEO_ERROR,this,m)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(h.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(h.VIDEO_PLAY,this)},completeHandler:function(){this.emit(h.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(h.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var m=this.video;if(m){var x=m.currentTime;x!==this._lastUpdate&&(this._lastUpdate=x,this.updateTexture(),x>=this._markerOut&&(m.loop?(m.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=x,this.emit(h.VIDEO_LOOP,this)):(this.emit(h.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(h.VIDEO_TIMEOUT,this))},updateTexture:function(){var m=this.video,x=m.videoWidth,y=m.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,m,x,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,x,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,x,y);else{var T=this.videoTextureSource;T.source!==m&&(T.source=m,T.width=x,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(m){var x=this.video;if(x){var y=x.duration;if(y!==1/0&&!isNaN(y)){var T=y*m;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(m){var x=this.video;if(x){if(typeof m=="string"){var y=m[0],T=parseFloat(m.substr(1));y==="+"?m=x.currentTime+T:y==="-"&&(m=x.currentTime-T)}x.currentTime=m,this._lastUpdate=m}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(h.VIDEO_SEEKED,this);var m=this.video;m&&this.updateTexture()},getProgress:function(){var m=this.video;if(m){var x=m.currentTime,y=m.duration;if(y!==1/0&&!isNaN(y))return x/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(m){m===void 0&&(m=!0),this._codeMuted=m;var x=this.video;return x&&(x.muted=this._systemMuted?!0:m),this},isMuted:function(){return this._codeMuted},globalMute:function(m,x){this._systemMuted=x;var y=this.video;y&&(y.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(m){m===void 0&&(m=!0);var x=this.video;return this._codePaused=m,x&&(m?x.paused||x.pause():m||x.paused&&!this._systemPaused&&x.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(m){return m===void 0&&(m=1),this.video&&(this.video.volume=o(m,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(m){return this.video&&(this.video.playbackRate=m),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(m){return m===void 0&&(m=!0),this.video&&(this.video.loop=m),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(m,x){return x===void 0&&(x=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,m),this._key=m,this.flipY=x,this.videoTextureSource&&this.videoTextureSource.setFlipY(x),this.videoTexture},stop:function(){var m=this.video;if(m){var x=this._callbacks;for(var y in x)m.removeEventListener(y,x[y],!0);m.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var m=this.video;if(m){for(m.parentNode&&m.parentNode.removeChild(m);m.hasChildNodes();)m.removeChild(m.firstChild);m.removeAttribute("autoplay"),m.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var m=this.scene.sys.game.events;m.off(u.PAUSE,this.globalPause,this),m.off(u.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(c.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(228),a=i(470),h=i(56),u=new n({initialize:function(f){this.type=h.POLYGON,this.area=0,this.points=[],f&&this.setTo(f)},contains:function(l,f){return o(this,l,f)},setTo:function(l){if(this.area=0,this.points=[],typeof l=="string"&&(l=l.split(" ")),!Array.isArray(l))return this;for(var f,c=Number.MAX_VALUE,d=0;d<l.length;d++)f={x:0,y:0},typeof l[d]=="number"||typeof l[d]=="string"?(f.x=parseFloat(l[d]),f.y=parseFloat(l[d+1]),d++):Array.isArray(l[d])?(f.x=l[d][0],f.y=l[d][1]):(f.x=l[d].x,f.y=l[d].y),this.points.push(f),f.y<c&&(c=f.y);return this.calculateArea(c),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var l=0,f,c,d=0;d<this.points.length-1;d++)f=this.points[d],c=this.points[d+1],l+=(c.x-f.x)*(f.y+c.y);return f=this.points[0],c=this.points[this.points.length-1],l+=(f.x-c.x)*(c.y+f.y),this.area=-l*.5,this.area},getPoints:function(l,f,c){return a(this,l,f,c)}});e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){for(var h=!1,u=-1,l=n.points.length-1;++u<n.points.length;l=u){var f=n.points[u].x,c=n.points[u].y,d=n.points[l].x,v=n.points[l].y;(c<=a&&a<v||v<=a&&a<c)&&o<(d-f)*(a-c)/(v-c)+f&&(h=!h)}return h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(15),h=i(2),u=i(17),l=i(478),f=i(1176),c=i(25),d=new n({Extends:a,Mixins:[o.ComputedSize,o.Depth,o.GetBounds,o.Mask,o.Origin,o.ScrollFactor,o.Transform,o.Visible,f],initialize:function(p,g,m,x,y,T,C,S){m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=128),T===void 0&&(T=128),a.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,x),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,C,S)},willRender:function(v){return this.renderToTexture?!0:!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,m=this.height,x=this.renderer;this.glTexture=x.createTextureFromSource(null,g,m,0),this.glTexture.flipY=p,this.framebuffer=x.createFramebuffer(g,m,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture,g,m))}return this.shader&&(x.pipelines.clear(),this.load(),this.flush(),x.pipelines.rebind()),this},setShader:function(v,p,g){if(p===void 0&&(p=[]),typeof v=="string"){var m=this.scene.sys.cache.shader;if(!m.has(v))return console.warn("Shader missing: "+v),this;this.shader=m.get(v)}else this.shader=v;var x=this.gl,y=this.renderer;this.program&&x.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);x.uniformMatrix4fv(x.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),x.uniformMatrix4fv(x.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var C=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=u(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,p,g,m){var x=-1e3,y=1e3,T=1/(v-p),C=1/(g-m),S=1/(x-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*C,E[10]=2*S,E[12]=(v+p)*T,E[13]=(m+g)*C,E[14]=(y+x)*S;var P=this.program,M=this.gl,R=this.renderer;R.setProgram(P),M.uniformMatrix4fv(M.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var v=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var m in this.uniforms){var x=this.uniforms[m],y=x.type,T=p[y];x.uniformLocation=v.getUniformLocation(g,m),y!=="sampler2D"&&(x.glMatrix=T.matrix,x.glValueLength=T.length,x.glFunc=T.func)}},setSampler2DBuffer:function(v,p,g,m,x,y){x===void 0&&(x=0),y===void 0&&(y={});var T=this.uniforms[v];return T.value=p,y.width=g,y.height=m,T.textureData=y,this._textureCount=x,this.initSampler2D(T),this},setSampler2D:function(v,p,g,m){g===void 0&&(g=0);var x=this.scene.sys.textures;if(x.exists(p)){var y=x.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,y.glTexture,y.width,y.height,g,m);var T=this.uniforms[v],C=y.source;T.textureKey=p,T.source=C.image,T.value=y.glTexture,C.isGLTexture&&(m||(m={}),m.width=C.width,m.height=C.height),m&&(T.textureData=m),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(v,p){return l(this.uniforms,v,p),this},getUniform:function(v){return h(this.uniforms,v,null)},setChannel0:function(v,p){return this.setSampler2D("iChannel0",v,0,p)},setChannel1:function(v,p){return this.setSampler2D("iChannel1",v,1,p)},setChannel2:function(v,p){return this.setSampler2D("iChannel2",v,2,p)},setChannel3:function(v,p){return this.setSampler2D("iChannel3",v,3,p)},initSampler2D:function(v){if(v.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,v.value);var g=v.textureData;if(g&&!v.value.isRenderTexture){var m=p[h(g,"magFilter","linear").toUpperCase()],x=p[h(g,"minFilter","linear").toUpperCase()],y=p[h(g,"wrapS","repeat").toUpperCase()],T=p[h(g,"wrapT","repeat").toUpperCase()],C=p[h(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=h(g,"width",512),E=h(g,"height",2),P=h(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,C,S,E,P,C,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,C,p.RGBA,p.UNSIGNED_BYTE,v.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(v.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var v=this.gl,p=this.uniforms,g,m,x,y,T,C=0;for(var S in p)g=p[S],x=g.glFunc,m=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(m===1?g.glMatrix?x.call(v,y,g.transpose,T):x.call(v,y,T):m===2?x.call(v,y,T.x,T.y):m===3?x.call(v,y,T.x,T.y,T.z):m===4?x.call(v,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+C),v.bindTexture(v.TEXTURE_2D,T),v.uniform1i(y,C),C++))},load:function(v){var p=this.gl,g=this.width,m=this.height,x=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,S=-this._displayOriginY;T[0]=v[0],T[1]=v[1],T[4]=v[2],T[5]=v[3],T[8]=v[4],T[9]=v[5],T[12]=T[0]*C+T[4]*S,T[13]=T[1]*C+T[5]*S}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,P=E.resolution;P.value.x=g,P.value.y=m,E.time.value=x.game.loop.getDuration();var M=this.pointer;if(M){var R=E.mouse,A=M.x/g,O=1-M.y/m;R.value.x=A.toFixed(2),R.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,p=this.height,g=this.program,m=this.gl,x=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,x);var C=m.getAttribLocation(g,"inPosition");C!==-1&&(m.enableVertexAttribArray(C),m.vertexAttribPointer(C,2,m.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=p,S[4]=v,S[5]=p,S[8]=v,S[9]=p,S[10]=v;var E=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),m.drawArrays(m.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var v=this.gl;v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(36),h=i(116),u=i(15),l=i(479),f=i(480),c=i(19),d=i(69),v=i(1179),p=i(79),g=i(39),m=i(117),x=new n({Extends:u,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,v],initialize:function(T,C,S,E,P,M,R,A,O,b,w,I){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),u.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new g,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var Y=T.sys.renderer;this.setPosition(C,S),this.setTexture(E,P),this.setSize(Y.width,Y.height),this.initPipeline(),this.setPerspective(Y.width,Y.height),M&&this.addVertices(M,R,A,O,b,w,I)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,S,E){return C===void 0&&(C=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(a(C),y/T,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,C,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,S,E,P,M,R,A){var O=this.scene.sys.cache.obj.get(y);return O&&f(O,this,T,C,S,E,P,M,R,A),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,S,E,P,M){var R=new m(y,T,C,S,E,P,M);return this.vertices.push(R),R},addFace:function(y,T,C){var S=new h(y,T,C);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,C,S,E,P,M){var R=l(y,T,C,S,E,P,M);return R&&(this.faces=this.faces.concat(R.faces),this.vertices=this.vertices.concat(R.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var S=c(this,C).calc,E=this.faces,P=[],M=0;M<E.length;M++){var R=E[M];R.contains(y,T,S)&&P.push(R)}return p(P,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,S=this.dirtyCache,E=y.x,P=y.y,M=y.z,R=T.x,A=T.y,O=T.z,b=C.x,w=C.y,I=C.z,Y=this.getFaceCount(),z=S[0],V=S[1],W=S[2],F=S[3],L=S[4],D=S[5],B=S[6],G=S[7],N=S[8],X=S[9];return S[0]=E,S[1]=P,S[2]=M,S[3]=R,S[4]=A,S[5]=O,S[6]=b,S[7]=w,S[8]=I,S[9]=Y,z!==E||V!==P||W!==M||F!==R||L!==A||D!==O||B!==b||G!==w||N!==I||X!==Y},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,S=this.viewMatrix,E=this.viewPosition;y[10]&&(S.identity(),S.translate(E),S.invert(),y[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=E.z,R=this.faces,A=0;A<R.length;A++)R[A].transformCoordinatesLocal(P,T,C,M);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,S=0;S<T.length;S++){var E=T[S],P=E.vertex1.tx,M=E.vertex1.ty,R=E.vertex2.tx,A=E.vertex2.ty,O=E.vertex3.tx,b=E.vertex3.ty;C.strokeTriangle(P,M,R,A,O,b)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(50),o=function(a,h){return n(a.x,a.y,h.x,h.y)<=a.radius+h.radius};e.exports=o},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(233),a=function(h,u,l){if(l===void 0&&(l=[]),o(h,u)){var f=h.x1,c=h.y1,d=h.x2,v=h.y2,p=u.x,g=u.y,m=u.radius,x=d-f,y=v-c,T=f-p,C=c-g,S=x*x+y*y,E=2*(x*T+y*C),P=T*T+C*C-m*m,M=E*E-4*S*P,R,A;if(M===0){var O=-E/(2*S);R=f+O*x,A=c+O*y,O>=0&&O<=1&&l.push(new n(R,A))}else if(M>0){var b=(-E-Math.sqrt(M))/(2*S);R=f+b*x,A=c+b*y,b>=0&&b<=1&&l.push(new n(R,A));var w=(-E+Math.sqrt(M))/(2*S);R=f+w*x,A=c+w*y,w>=0&&w<=1&&l.push(new n(R,A))}}return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=i(4),a=new o,h=function(u,l,f){if(f===void 0&&(f=a),n(l,u.x1,u.y1))return f.x=u.x1,f.y=u.y1,!0;if(n(l,u.x2,u.y2))return f.x=u.x2,f.y=u.y2,!0;var c=u.x2-u.x1,d=u.y2-u.y1,v=l.x-u.x1,p=l.y-u.y1,g=c*c+d*d,m=c,x=d;if(g>0){var y=(v*c+p*d)/g;m*=y,x*=y}f.x=u.x1+m,f.y=u.y1+x;var T=m*m+x*x;return T<=g&&m*c+x*d>=0&&n(l,f.x,f.y)};e.exports=h},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(96),a=i(488),h=function(u,l,f){if(f===void 0&&(f=[]),a(u,l))for(var c=l.getLineA(),d=l.getLineB(),v=l.getLineC(),p=l.getLineD(),g=[new n,new n,new n,new n],m=[o(c,u,g[0]),o(d,u,g[1]),o(v,u,g[2]),o(p,u,g[3])],x=0;x<4;x++)m[x]&&f.push(g[x]);return f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a===void 0&&(a=!1),h===void 0&&(h=[]);for(var u=n.x3-n.x1,l=n.y3-n.y1,f=n.x2-n.x1,c=n.y2-n.y1,d=u*u+l*l,v=u*f+l*c,p=f*f+c*c,g=d*p-v*v,m=g===0?0:1/g,x,y,T,C,S,E,P=n.x1,M=n.y1,R=0;R<o.length&&(T=o[R].x-P,C=o[R].y-M,S=u*T+l*C,E=f*T+c*C,x=(p*S-v*E)*m,y=(d*E-v*S)*m,!(x>=0&&y>=0&&x+y<1&&(h.push({x:o[R].x,y:o[R].y}),a)));R++);return h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=Math.cos(h),l=Math.sin(h),f=n.x1-o,c=n.y1-a;return n.x1=f*u-c*l+o,n.y1=f*l+c*u+a,f=n.x2-o,c=n.y2-a,n.x2=f*u-c*l+o,n.y2=f*l+c*u+a,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.height===0?NaN:n.width/n.height};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=Math.cos(h),l=Math.sin(h),f=n.x1-o,c=n.y1-a;return n.x1=f*u-c*l+o,n.y1=f*l+c*u+a,f=n.x2-o,c=n.y2-a,n.x2=f*u-c*l+o,n.y2=f*l+c*u+a,f=n.x3-o,c=n.y3-a,n.x3=f*u-c*l+o,n.y3=f*l+c*u+a,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(156),a=function(h,u){var l=h===void 0?o():n({},h);if(u)for(var f in u)u[f]!==void 0&&(l[f]=u[f]);return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=i(408),c=new n({Extends:a,initialize:function(v,p,g,m){var x="xml";if(l(p)){var y=p;p=u(y,"key"),g=u(y,"url"),m=u(y,"xhrSettings"),x=u(y,"extension",x)}var T={type:"xml",cache:v.cacheManager.xml,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};a.call(this,v,T)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=f(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});h.register("xml",function(d,v,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new c(this,d[g]));else this.addFile(new c(this,d,v,p));return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g){var m="text",x="txt",y=d.cacheManager.text;if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),g=u(T,"xhrSettings"),x=u(T,"extension",x),m=u(T,"type",m),y=u(T,"cache",y)}var C={type:m,cache:y,extension:x,responseType:"text",key:v,url:p,xhrSettings:g};a.call(this,d,C)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(e,r){var i=function(n,o,a,h,u,l,f){l===void 0&&(l=!0),f===void 0&&(f=!1);var c=[],d=[],v=n.treeMinMax;if(v.minX=o,v.minY=a,v.maxX=o+h,v.maxY=a+u,f&&(d=n.staticTree.search(v)),l&&n.useTree)c=n.tree.search(v);else if(l){var p=n.bodies,g={position:{x:o,y:a},left:o,top:a,right:o+h,bottom:a+u,isCircle:!1},m=n.intersects;p.iterate(function(x){m(x,g)&&c.push(x)})}return d.concat(c)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),o=function(a,h,u,l){var f=0,c=a.deltaAbsX()+h.deltaAbsX()+l;return a._dx===0&&h._dx===0?(a.embedded=!0,h.embedded=!0):a._dx>h._dx?(f=a.right-h.x,f>c&&!u||a.checkCollision.right===!1||h.checkCollision.left===!1?f=0:(a.touching.none=!1,a.touching.right=!0,h.touching.none=!1,h.touching.left=!0,h.physicsType===n.STATIC_BODY&&!u&&(a.blocked.none=!1,a.blocked.right=!0),a.physicsType===n.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.left=!0))):a._dx<h._dx&&(f=a.x-h.width-h.x,-f>c&&!u||a.checkCollision.left===!1||h.checkCollision.right===!1?f=0:(a.touching.none=!1,a.touching.left=!0,h.touching.none=!1,h.touching.right=!0,h.physicsType===n.STATIC_BODY&&!u&&(a.blocked.none=!1,a.blocked.left=!0),a.physicsType===n.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.right=!0))),a.overlapX=f,h.overlapX=f,f};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),o=function(a,h,u,l){var f=0,c=a.deltaAbsY()+h.deltaAbsY()+l;return a._dy===0&&h._dy===0?(a.embedded=!0,h.embedded=!0):a._dy>h._dy?(f=a.bottom-h.y,f>c&&!u||a.checkCollision.down===!1||h.checkCollision.up===!1?f=0:(a.touching.none=!1,a.touching.down=!0,h.touching.none=!1,h.touching.up=!0,h.physicsType===n.STATIC_BODY&&!u&&(a.blocked.none=!1,a.blocked.down=!0),a.physicsType===n.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.up=!0))):a._dy<h._dy&&(f=a.y-h.bottom,-f>c&&!u||a.checkCollision.up===!1||h.checkCollision.down===!1?f=0:(a.touching.none=!1,a.touching.up=!0,h.touching.none=!1,h.touching.down=!0,h.physicsType===n.STATIC_BODY&&!u&&(a.blocked.none=!1,a.blocked.up=!0),a.physicsType===n.STATIC_BODY&&!u&&(h.blocked.none=!1,h.blocked.down=!0))),a.overlapY=f,h.overlapY=f,f};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return!(o.right<=n.left||o.bottom<=n.top||o.position.x>=n.right||o.position.y>=n.bottom)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:i(1495),Collision:i(1496),Force:i(1497),Friction:i(1498),Gravity:i(1499),Mass:i(1500),Sensor:i(1501),SetBody:i(1502),Sleep:i(1503),Static:i(1520),Transform:i(1521),Velocity:i(1522)}},function(e,r){var i={};e.exports=i,function(){i.create=function(n,o){var a=n.bodyA,h=n.bodyB,u={id:i.id(a,h),bodyA:a,bodyB:h,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:a.isSensor||h.isSensor,timeCreated:o,timeUpdated:o,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(u,n,o),u},i.update=function(n,o,a){if(n.collision=o,o.collided){var h=o.supports,u=n.activeContacts,l=o.parentA,f=o.parentB;n.inverseMass=l.inverseMass+f.inverseMass,n.friction=Math.min(l.friction,f.friction),n.frictionStatic=Math.max(l.frictionStatic,f.frictionStatic),n.restitution=Math.max(l.restitution,f.restitution),n.slop=Math.max(l.slop,f.slop);for(var c=0;c<h.length;c++)u[c]=h[c].contact;var d=h.length;d<u.length&&(u.length=d),n.separation=o.depth,i.setActive(n,!0,a)}else n.isActive===!0&&i.setActive(n,!1,a)},i.setActive=function(n,o,a){o?(n.isActive=!0,n.timeUpdated=a):(n.isActive=!1,n.activeContacts.length=0)},i.id=function(n,o){return n.id<o.id?"A"+n.id+"B"+o.id:"A"+o.id+"B"+n.id}}()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),o=function(a,h,u){var l=n(a,h,!0,u),f=n(a,h-1,!0,u),c=n(a,h+1,!0,u),d=n(a-1,h,!0,u),v=n(a+1,h,!0,u),p=l&&l.collides;return p&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),f&&f.collides&&(p&&(l.faceTop=!1),f.faceBottom=!p),c&&c.collides&&(p&&(l.faceBottom=!1),c.faceTop=!p),d&&d.collides&&(p&&(l.faceLeft=!1),d.faceRight=!p),v&&v.collides&&(p&&(l.faceRight=!1),v.faceLeft=!p),l&&!l.collides&&l.resetFaces(),l};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=a.baseTileWidth,u=a.tilemapLayer,l=0;return u&&(o||(o=u.scene.cameras.main),l=u.x+o.scrollX*(1-u.scrollFactorX),h*=u.scaleX),l+n*h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=a.baseTileHeight,u=a.tilemapLayer,l=0;return u&&(o||(o=u.scene.cameras.main),l=u.y+o.scrollY*(1-u.scrollFactorY),h*=u.scaleY),l+n*h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o===void 0&&(o=!0);var u=h.baseTileWidth,l=h.tilemapLayer;return l&&(a||(a=l.scene.cameras.main),n=n-(l.x+a.scrollX*(1-l.scrollFactorX)),u*=l.scaleX),o?Math.floor(n/u):n/u};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o===void 0&&(o=!0);var u=h.baseTileHeight,l=h.tilemapLayer;return l&&(a||(a=l.scene.cameras.main),n=n-(l.y+a.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),o?Math.floor(n/u):n/u};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(85),o=i(119),a=i(252),h=i(72),u=function(l,f,c,d,v){if(d===void 0&&(d=!0),!o(f,c,v))return null;var p=v.data[c][f],g=p&&p.collides;if(l instanceof n)v.data[c][f]===null&&(v.data[c][f]=new n(v,l.index,f,c,v.tileWidth,v.tileHeight)),v.data[c][f].copy(l);else{var m=l;v.data[c][f]===null?v.data[c][f]=new n(v,m,f,c,v.tileWidth,v.tileHeight):v.data[c][f].index=m}var x=v.data[c][f],y=v.collideIndexes.indexOf(x.index)!==-1;return h(x,y),d&&g!==x.collides&&a(f,c,v),x};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=function(a){return a=a.toLowerCase(),a==="isometric"?n.ISOMETRIC:a==="staggered"?n.STAGGERED:a==="hexagonal"?n.HEXAGONAL:n.ORTHOGONAL};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(120),a=i(121),h=i(85),u=function(l,f,c,d,v){for(var p=new o({tileWidth:c,tileHeight:d}),g=new a({name:l,tileWidth:c,tileHeight:d,format:n.ARRAY_2D,layers:[p]}),m=[],x=f.length,y=0,T=0;T<f.length;T++){m[T]=[];for(var C=f[T],S=0;S<C.length;S++){var E=parseInt(C[S],10);isNaN(E)||E===-1?m[T][S]=v?null:new h(p,-1,S,T,c,d):m[T][S]=new h(p,E,S,T,c,d)}y===0&&(y=C.length)}return g.width=p.width=y,g.height=p.height=x,g.widthInPixels=p.widthInPixels=y*c,g.heightInPixels=p.heightInPixels=x*d,p.data=m,g};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(571),o=i(261),a=function(l){return{x:l.x,y:l.y}},h=["id","name","type","rotation","properties","visible","x","y","width","height"],u=function(l,f,c){f===void 0&&(f=0),c===void 0&&(c=0);var d=n(l,h);if(d.x+=f,d.y+=c,l.gid){var v=o(l.gid);d.gid=v.gid,d.flippedHorizontal=v.flippedHorizontal,d.flippedVertical=v.flippedVertical,d.flippedAntiDiagonal=v.flippedAntiDiagonal}else l.polyline?d.polyline=l.polyline.map(a):l.polygon?d.polygon=l.polygon.map(a):l.ellipse?d.ellipse=l.ellipse:l.text?d.text=l.text:l.point?d.point=!0:d.rectangle=!0;return d};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=2147483648,n=1073741824,o=536870912,a=function(h){var u=Boolean(h&i),l=Boolean(h&n),f=Boolean(h&o);h=h&~(i|n|o);var c=0,d=!1;return u&&l&&f?(c=Math.PI/2,d=!0):u&&l&&!f?(c=Math.PI,d=!1):u&&!l&&f?(c=Math.PI/2,d=!1):u&&!l&&!f?(c=0,d=!0):!u&&l&&f?(c=3*Math.PI/2,d=!1):!u&&l&&!f?(c=Math.PI,d=!0):!u&&!l&&f?(c=3*Math.PI/2,d=!0):!u&&!l&&!f&&(c=0,d=!1),{gid:h,flippedHorizontal:u,flippedVertical:l,flippedAntiDiagonal:f,rotation:c,flipped:d}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(121),a=i(564),h=i(580),u=function(l,f,c,d,v,p,g,m){c===void 0&&(c=32),d===void 0&&(d=32),v===void 0&&(v=10),p===void 0&&(p=10),m===void 0&&(m=!1);var x=null;if(Array.isArray(g)){var y=f!==void 0?f:"map";x=a(y,n.ARRAY_2D,g,c,d,m)}else if(f!==void 0){var T=l.cache.tilemap.get(f);T?x=a(f,T.format,T.data,c,d,m):console.warn("No map data found for key "+f)}return x===null&&(x=new o({tileWidth:c,tileHeight:d,width:v,height:p})),new h(l,x)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=function(a){var h=n(a,"targets",null);return h===null||(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h])),h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(u){return!!u.getActive&&typeof u.getActive=="function"}function n(u){return!!u.getStart&&typeof u.getStart=="function"}function o(u){return!!u.getEnd&&typeof u.getEnd=="function"}function a(u){return n(u)||o(u)||i(u)}var h=function(u,l){var f,c=function(E,P,M){return M},d=function(E,P,M){return M},v=null,p=typeof l;if(p==="number")c=function(){return l};else if(p==="string"){var g=l[0],m=parseFloat(l.substr(2));switch(g){case"+":c=function(E,P,M){return M+m};break;case"-":c=function(E,P,M){return M-m};break;case"*":c=function(E,P,M){return M*m};break;case"/":c=function(E,P,M){return M/m};break;default:c=function(){return parseFloat(l)}}}else if(p==="function")c=l;else if(p==="object")if(a(l))i(l)&&(v=l.getActive),o(l)&&(c=l.getEnd),n(l)&&(d=l.getStart);else if(l.hasOwnProperty("value"))f=h(u,l.value);else{var x=l.hasOwnProperty("to"),y=l.hasOwnProperty("from"),T=l.hasOwnProperty("start");if(x&&(y||T)){if(f=h(u,l.to),T){var C=h(u,l.start);f.getActive=C.getEnd}if(y){var S=h(u,l.from);f.getStart=S.getEnd}}}return f||(f={getActive:v,getEnd:c,getStart:d}),f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(267),h=i(16),u=i(5),l=i(100),f=i(14),c=new n({Extends:o,initialize:function(v,p,g){o.call(this),this.parent=v,this.parentIsTimeline=v.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=l.PENDING_ADD,this._pausedState=l.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(d){return d===void 0&&(d=0),this.data[d].current},setTimeScale:function(d){return this.timeScale=d,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===l.ACTIVE},isPaused:function(){return this.state===l.PAUSED},hasTarget:function(d){return this.targets.indexOf(d)!==-1},updateTo:function(d,v,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var m=this.data[g];m.key===d&&(m.end=v,p&&(m.start=m.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===l.ACTIVE?this.seek(0):this.state===l.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===l.PENDING_ADD?this:this.play()},calcDuration:function(){for(var d=0,v=f.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var m=p[g];m.t1=m.duration+m.hold,m.yoyo&&(m.t1+=m.duration),m.t2=m.t1+m.repeatDelay,m.totalDuration=m.delay+m.t1,m.repeat===-1?m.totalDuration+=m.t2*999999999999:m.repeat>0&&(m.totalDuration+=m.t2*m.repeat),m.totalDuration>d&&(d=m.totalDuration),m.delay<v&&(v=m.delay)}this.duration=Math.max(d,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=v},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=l.PENDING_ADD,this._pausedState=l.INIT,!1;for(var d=this.data,v=this.totalTargets,p=0;p<this.totalData;p++){var g=d[p],m=g.target,x=g.gen,y=g.key,T=g.index;g.delay=x.delay(m,y,0,T,v,this),g.duration=Math.max(x.duration(m,y,0,T,v,this),.001),g.hold=x.hold(m,y,0,T,v,this),g.repeat=x.repeat(m,y,0,T,v,this),g.repeatDelay=x.repeatDelay(m,y,0,T,v,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=l.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(a.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=l.LOOP_DELAY):(this.state=l.ACTIVE,this.dispatchTweenEvent(a.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=l.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===l.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=l.PAUSED,this)},play:function(d){d===void 0&&(d=!1);var v=this.state;return v===l.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=l.ACTIVE,this):v===l.ACTIVE||v===l.PENDING_ADD&&this._pausedState===l.PENDING_ADD?this:!this.parentIsTimeline&&(v===l.PENDING_REMOVE||v===l.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(d),this.calculatedOffset===0?this.state=l.ACTIVE:(this.countdown=this.calculatedOffset,this.state=l.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(d),this.state=l.ACTIVE,this.makeActive()),this)},resetTweenData:function(d){for(var v=this.data,p=this.totalData,g=this.totalTargets,m=0;m<p;m++){var x=v[m],y=x.target,T=x.key,C=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,d?(x.start=x.getStartValue(y,T,x.start,C,g,this),x.end=x.getEndValue(y,T,x.end,C,g,this),x.current=x.start,x.state=l.PLAYING_FORWARD):x.state=l.PENDING_RENDER,x.delay>0&&(x.elapsed=x.delay,x.state=l.DELAY),x.getActiveValue&&(y[T]=x.getActiveValue(x.target,x.key,x.start))}},resume:function(){return this.state===l.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(d,v){v===void 0&&(v=16.6),this.state===l.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,m=0;m<this.totalData;m++){var x=p[m],y=x.target,T=x.gen,C=x.key,S=x.index;x.progress=0,x.elapsed=0,x.repeatCounter=x.repeat===-1?999999999999:x.repeat,x.delay=T.delay(y,C,0,S,g,this),x.duration=Math.max(T.duration(y,C,0,S,g,this),.001),x.hold=T.hold(y,C,0,S,g,this),x.repeat=T.repeat(y,C,0,S,g,this),x.repeatDelay=T.repeatDelay(y,C,0,S,g,this),x.current=x.start,x.state=l.PLAYING_FORWARD,this.updateTweenData(this,x,0,S,g),x.delay>0&&(x.elapsed=x.delay,x.state=l.DELAY)}this.calcDuration();var E=!1;this.state===l.PAUSED&&(E=!0,this.state=l.ACTIVE),this.isSeeking=!0;do this.update(0,v);while(this.totalProgress<d);return this.isSeeking=!1,E&&(this.state=l.PAUSED),this},setCallback:function(d,v,p,g){return this.callbacks[d]={func:v,scope:g,params:p},this},complete:function(d){return d===void 0&&(d=0),d?(this.state=l.COMPLETE_DELAY,this.countdown=d):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(d){return this.state===l.ACTIVE&&d!==void 0&&this.seek(d),this.state!==l.REMOVED&&((this.state===l.PAUSED||this.state===l.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(a.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=l.PENDING_REMOVE),this},update:function(d,v){if(this.state===l.PAUSED)return!1;switch(this.useFrames&&(v=1*this.parent.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case l.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(a.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var m=this.data[g];this.updateTweenData(this,m,v)&&(p=!0)}p||this.nextState();break;case l.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.ACTIVE,this.dispatchTweenEvent(a.TWEEN_LOOP,this.callbacks.onLoop));break;case l.OFFSET_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.ACTIVE);break;case l.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===l.PENDING_REMOVE},dispatchTweenDataEvent:function(d,v,p){this.isSeeking||(this.emit(d,this,p.key,p.target,p.current,p.previous),v&&(v.params[1]=p.target,v.func.apply(v.scope,v.params)))},dispatchTweenEvent:function(d,v){this.isSeeking||(this.emit(d,this,this.targets),v&&(v.params[1]=this.targets,v.func.apply(v.scope,v.params)))},setStateFromEnd:function(d,v,p){return v.yoyo?(v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),this.dispatchTweenDataEvent(a.TWEEN_YOYO,d.callbacks.onYoyo,v),v.start=v.getStartValue(v.target,v.key,v.start,v.index,d.totalTargets,d),l.PLAYING_BACKWARD):v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.start=v.getStartValue(v.target,v.key,v.start,v.index,d.totalTargets,d),v.end=v.getEndValue(v.target,v.key,v.start,v.index,d.totalTargets,d),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(a.TWEEN_REPEAT,d.callbacks.onRepeat,v),l.PLAYING_FORWARD)):l.COMPLETE},setStateFromStart:function(d,v,p){return v.repeatCounter>0?(v.repeatCounter--,v.elapsed=p,v.progress=p/v.duration,v.flipX&&v.target.toggleFlipX(),v.flipY&&v.target.toggleFlipY(),v.end=v.getEndValue(v.target,v.key,v.start,v.index,d.totalTargets,d),v.repeatDelay>0?(v.elapsed=v.repeatDelay-p,v.current=v.start,v.target[v.key]=v.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(a.TWEEN_REPEAT,d.callbacks.onRepeat,v),l.PLAYING_FORWARD)):l.COMPLETE},updateTweenData:function(d,v,p){var g=v.target;switch(v.state){case l.PLAYING_FORWARD:case l.PLAYING_BACKWARD:if(!g){v.state=l.COMPLETE;break}var m=v.elapsed,x=v.duration,y=0;m+=p,m>x&&(y=m-x,m=x);var T=v.state===l.PLAYING_FORWARD,C=m/x;if(v.elapsed=m,v.progress=C,v.previous=v.current,C===1)T?(v.current=v.end,g[v.key]=v.end,v.hold>0?(v.elapsed=v.hold-y,v.state=l.HOLD_DELAY):v.state=this.setStateFromEnd(d,v,y)):(v.current=v.start,g[v.key]=v.start,v.state=this.setStateFromStart(d,v,y));else{var S=T?v.ease(C):v.ease(1-C);v.current=v.start+(v.end-v.start)*S,g[v.key]=v.current}this.dispatchTweenDataEvent(a.TWEEN_UPDATE,d.callbacks.onUpdate,v);break;case l.DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=l.PENDING_RENDER);break;case l.REPEAT_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.elapsed=Math.abs(v.elapsed),v.state=l.PLAYING_FORWARD,this.dispatchTweenDataEvent(a.TWEEN_REPEAT,d.callbacks.onRepeat,v));break;case l.HOLD_DELAY:v.elapsed-=p,v.elapsed<=0&&(v.state=this.setStateFromEnd(d,v,Math.abs(v.elapsed)));break;case l.PENDING_RENDER:g?(v.start=v.getStartValue(g,v.key,g[v.key],v.index,d.totalTargets,d),v.end=v.getEndValue(g,v.key,v.start,v.index,d.totalTargets,d),v.current=v.start,g[v.key]=v.start,v.state=l.PLAYING_FORWARD):v.state=l.COMPLETE;break}return v.state!==l.COMPLETE}});c.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],u.register("tween",function(d){return this.scene.sys.tweens.add(d)}),h.register("tween",function(d){return this.scene.sys.tweens.create(d)}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u,l,f,c,d,v,p,g,m,x,y){return{target:n,index:o,key:a,getActiveValue:l,getEndValue:h,getStartValue:u,ease:f,duration:0,totalDuration:0,delay:0,yoyo:v,hold:0,repeat:0,repeatDelay:0,flipX:x,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:c,duration:d,hold:p,repeat:g,repeatDelay:m},state:0}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),o=function(a){return n(a,-Math.PI,Math.PI)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),o=function(a){return n(a,-180,180)};e.exports=o},function(e,r,i){var n={};e.exports=n;var o=i(83),a=i(32);(function(){n.fromVertices=function(h){for(var u={},l=0;l<h.length;l++){var f=(l+1)%h.length,c=o.normalise({x:h[f].y-h[l].y,y:h[l].x-h[f].x}),d=c.y===0?1/0:c.x/c.y;d=d.toFixed(3).toString(),u[d]=c}return a.values(u)},n.rotate=function(h,u){if(u!==0)for(var l=Math.cos(u),f=Math.sin(u),c=0;c<h.length;c++){var d=h[c],v;v=d.x*l-d.y*f,d.y=d.x*f+d.y*l,d.x=v}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:i(1504),AFTER_REMOVE:i(1505),AFTER_UPDATE:i(1506),BEFORE_ADD:i(1507),BEFORE_REMOVE:i(1508),BEFORE_UPDATE:i(1509),COLLISION_ACTIVE:i(1510),COLLISION_END:i(1511),COLLISION_START:i(1512),DRAG_END:i(1513),DRAG:i(1514),DRAG_START:i(1515),PAUSE:i(1516),RESUME:i(1517),SLEEP_END:i(1518),SLEEP_START:i(1519)}},function(e,r,i){var n={};e.exports=n;var o=i(274),a=i(250),h=i(84);(function(){n.collisions=function(u,l){for(var f=[],c=l.pairs.table,d=l.metrics,v=0;v<u.length;v++){var p=u[v][0],g=u[v][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&n.canCollide(p.collisionFilter,g.collisionFilter)&&(d.midphaseTests+=1,h.overlaps(p.bounds,g.bounds)))for(var m=p.parts.length>1?1:0;m<p.parts.length;m++)for(var x=p.parts[m],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(x===p&&T===g||h.overlaps(x.bounds,T.bounds)){var C=a.id(x,T),S=c[C],E;S&&S.isActive?E=S.collision:E=null;var P=o.collides(x,T,E);d.narrowphaseTests+=1,P.reused&&(d.narrowReuseCount+=1),P.collided&&(f.push(P),d.narrowDetections+=1)}}}return f},n.canCollide=function(u,l){return u.group===l.group&&u.group!==0?u.group>0:(u.mask&l.category)!==0&&(l.mask&u.category)!==0}})()},function(e,r,i){var n={};e.exports=n;var o=i(64),a=i(83);(function(){n.collides=function(h,u,l){var f,c,d,v,p=!1;if(l){var g=h.parent,m=u.parent,x=g.speed*g.speed+g.angularSpeed*g.angularSpeed+m.speed*m.speed+m.angularSpeed*m.angularSpeed;p=l&&l.collided&&x<.2,v=l}else v={collided:!1,bodyA:h,bodyB:u};if(l&&p){var y=v.axisBody,T=y===h?u:h,C=[y.axes[l.axisNumber]];if(d=n._overlapAxes(y.vertices,T.vertices,C),v.reused=!0,d.overlap<=0)return v.collided=!1,v}else{if(f=n._overlapAxes(h.vertices,u.vertices,h.axes),f.overlap<=0||(c=n._overlapAxes(u.vertices,h.vertices,u.axes),c.overlap<=0))return v.collided=!1,v;f.overlap<c.overlap?(d=f,v.axisBody=h):(d=c,v.axisBody=u),v.axisNumber=d.axisNumber}v.bodyA=h.id<u.id?h:u,v.bodyB=h.id<u.id?u:h,v.collided=!0,v.depth=d.overlap,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent,h=v.bodyA,u=v.bodyB,a.dot(d.axis,a.sub(u.position,h.position))<0?v.normal={x:d.axis.x,y:d.axis.y}:v.normal={x:-d.axis.x,y:-d.axis.y},v.tangent=a.perp(v.normal),v.penetration=v.penetration||{},v.penetration.x=v.normal.x*v.depth,v.penetration.y=v.normal.y*v.depth;var S=n._findSupports(h,u,v.normal),E=[];if(o.contains(h.vertices,S[0])&&E.push(S[0]),o.contains(h.vertices,S[1])&&E.push(S[1]),E.length<2){var P=n._findSupports(u,h,a.neg(v.normal));o.contains(u.vertices,P[0])&&E.push(P[0]),E.length<2&&o.contains(u.vertices,P[1])&&E.push(P[1])}return E.length<1&&(E=[S[0]]),v.supports=E,v},n._overlapAxes=function(h,u,l){for(var f=a._temp[0],c=a._temp[1],d={overlap:Number.MAX_VALUE},v,p,g=0;g<l.length;g++){if(p=l[g],n._projectToAxis(f,h,p),n._projectToAxis(c,u,p),v=Math.min(f.max-c.min,c.max-f.min),v<=0)return d.overlap=v,d;v<d.overlap&&(d.overlap=v,d.axis=p,d.axisNumber=g)}return d},n._projectToAxis=function(h,u,l){for(var f=a.dot(u[0],l),c=f,d=1;d<u.length;d+=1){var v=a.dot(u[d],l);v>c?c=v:v<f&&(f=v)}h.min=f,h.max=c},n._findSupports=function(h,u,l){for(var f=Number.MAX_VALUE,c=a._temp[0],d=u.vertices,v=h.position,p,g,m,x,y=0;y<d.length;y++)g=d[y],c.x=g.x-v.x,c.y=g.y-v.y,p=-a.dot(l,c),p<f&&(f=p,m=g);var T=m.index-1>=0?m.index-1:d.length-1;g=d[T],c.x=g.x-v.x,c.y=g.y-v.y,f=-a.dot(l,c),x=g;var C=(m.index+1)%d.length;return g=d[C],c.x=g.x-v.x,c.y=g.y-v.y,p=-a.dot(l,c),p<f&&(x=g),[m,x]}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=[];o[n.BOTTOM_CENTER]=i(277),o[n.BOTTOM_LEFT]=i(278),o[n.BOTTOM_RIGHT]=i(279),o[n.LEFT_BOTTOM]=i(280),o[n.LEFT_CENTER]=i(281),o[n.LEFT_TOP]=i(282),o[n.RIGHT_BOTTOM]=i(283),o[n.RIGHT_CENTER]=i(284),o[n.RIGHT_TOP]=i(285),o[n.TOP_CENTER]=i(286),o[n.TOP_LEFT]=i(287),o[n.TOP_RIGHT]=i(288);var a=function(h,u,l,f,c){return o[l](h,u,f,c)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(87),a=i(88),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,o(f)+c),h(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),a=i(53),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,o(f)-c),h(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(44),a=i(54),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,o(f)+c),h(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),a=i(55),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)-c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(43),a=i(90),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)-c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),o=i(45),a=i(54),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,n(f)-c),h(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(44),a=i(55),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)+c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(44),a=i(90),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)+c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),o=i(45),a=i(53),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,n(f)+c),h(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(87),o=i(45),a=i(55),h=i(88),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,n(f)+c),a(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),o=i(45),a=i(55),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,n(f)-c),a(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),o=i(45),a=i(55),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,n(f)+c),a(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=[];o[n.BOTTOM_CENTER]=i(290),o[n.BOTTOM_LEFT]=i(291),o[n.BOTTOM_RIGHT]=i(292),o[n.CENTER]=i(293),o[n.LEFT_CENTER]=i(295),o[n.RIGHT_CENTER]=i(296),o[n.TOP_CENTER]=i(297),o[n.TOP_LEFT]=i(298),o[n.TOP_RIGHT]=i(299),o[n.LEFT_BOTTOM]=o[n.BOTTOM_LEFT],o[n.LEFT_TOP]=o[n.TOP_LEFT],o[n.RIGHT_BOTTOM]=o[n.BOTTOM_RIGHT],o[n.RIGHT_TOP]=o[n.TOP_RIGHT];var a=function(h,u,l,f,c){return o[l](h,u,f,c)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(87),a=i(55),h=i(88),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)+c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),a=i(55),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)-c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(44),a=i(55),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)+c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(294),o=i(87),a=i(89),h=function(u,l,f,c){return f===void 0&&(f=0),c===void 0&&(c=0),n(u,o(l)+f,a(l)+c),u};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(88),o=i(90),a=function(h,u,l){return n(h,u),o(h,l)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(43),a=i(90),h=i(53),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)-c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(89),o=i(44),a=i(90),h=i(54),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),h(l,o(f)+c),a(l,n(f)+d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(87),o=i(45),a=i(88),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,n(f)+c),h(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(43),o=i(45),a=i(53),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,n(f)-c),h(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(44),o=i(45),a=i(54),h=i(52),u=function(l,f,c,d){return c===void 0&&(c=0),d===void 0&&(d=0),a(l,n(f)+c),h(l,o(f)-d),l};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(169),o=i(98),a=i(14),h=i(4),u=function(l,f,c){c===void 0&&(c=new h);var d=o(f,0,a.PI2);return n(l,d,c)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(302),o=i(169),a=i(98),h=i(14),u=function(l,f,c,d){d===void 0&&(d=[]),!f&&c>0&&(f=n(l)/c);for(var v=0;v<f;v++){var p=a(v/f,0,h.PI2);d.push(o(l,p))}return d};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 2*(Math.PI*n.radius)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=2,a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h){return h===void 0&&(h=1),this.alpha=h,this},alpha:{get:function(){return this._alpha},set:function(h){var u=n(h,0,1);this._alpha=u,u===0?this.renderFlags&=~o:this.renderFlags|=o}}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o={_blendMode:n.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(a){typeof a=="string"&&(a=n[a]),a|=0,a>=-1&&(this._blendMode=a)}},setBlendMode:function(a){return this.blendMode=a,this}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(171),o=i(130),a=function(h,u,l,f){f===void 0&&(f=[]),!u&&l>0&&(u=o(h)/l);for(var c=0;c<u;c++){var d=c/u;f.push(n(h,d))}return f};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h,u){return u===void 0&&(u=new n),u.x=a.x1+(a.x2-a.x1)*h,u.y=a.y1+(a.y2-a.y1)*h,u};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=Math.cos(h),l=Math.sin(h),f=n.x-o,c=n.y-a;return n.x=f*u-c*l+o,n.y=f*l+c*u+a,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(310),o=i(311),a={mask:null,setMask:function(h){return this.mask=h,this},clearMask:function(h){return h===void 0&&(h=!1),h&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(h){return h===void 0&&(this.texture||this.shader)&&(h=this),new n(this.scene,h)},createGeometryMask:function(h){return h===void 0&&this.type==="Graphics"&&(h=this),new o(this.scene,h)}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(22),a=i(91),h=new n({initialize:function(l,f){var c=l.sys.renderer;this.renderer=c,this.bitmapMask=f,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),l.sys.game.events.on(o.CONTEXT_RESTORED,this.createMask,this),c&&c.on(a.RESIZE,this.createMask,this)},createMask:function(){var u=this.renderer;if(!(!u||!u.gl)){this.mainTexture&&this.clearMask();var l=u.width,f=u.height,c=(l&l-1)===0&&(f&f-1)===0,d=u.gl,v=c?d.REPEAT:d.CLAMP_TO_EDGE,p=d.LINEAR;this.mainTexture=u.createTexture2D(0,p,p,v,v,d.RGBA,null,l,f),this.maskTexture=u.createTexture2D(0,p,p,v,v,d.RGBA,null,l,f),this.mainFramebuffer=u.createFramebuffer(l,f,this.mainTexture,!0),this.maskFramebuffer=u.createFramebuffer(l,f,this.maskTexture,!0)}},clearMask:function(){var u=this.renderer;!u||!u.gl||!this.mainTexture||(u.deleteTexture(this.mainTexture),u.deleteTexture(this.maskTexture),u.deleteFramebuffer(this.mainFramebuffer),u.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,l,f){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,f)},postRenderWebGL:function(u,l){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,l)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(a.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u){this.geometryMask=u,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(a){return this.geometryMask=a,this},setInvertAlpha:function(a){return a===void 0&&(a=!0),this.invertAlpha=a,this},preRenderWebGL:function(a,h,u){var l=a.gl;a.flush(),a.maskStack.length===0&&(l.enable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),a.maskCount=0),a.currentCameraMask.mask!==this&&(a.currentMask.mask=this),a.maskStack.push({mask:this,camera:u}),this.applyStencil(a,u,!0),a.maskCount++},applyStencil:function(a,h,u){var l=a.gl,f=this.geometryMask,c=a.maskCount;l.colorMask(!1,!1,!1,!1),u?(l.stencilFunc(l.EQUAL,c,255),l.stencilOp(l.KEEP,l.KEEP,l.INCR)):(l.stencilFunc(l.EQUAL,c+1,255),l.stencilOp(l.KEEP,l.KEEP,l.DECR)),f.renderWebGL(a,f,h),a.flush(),l.colorMask(!0,!0,!0,!0),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),u?this.invertAlpha?l.stencilFunc(l.NOTEQUAL,c+1,255):l.stencilFunc(l.EQUAL,c+1,255):this.invertAlpha?l.stencilFunc(l.NOTEQUAL,c,255):l.stencilFunc(l.EQUAL,c,255)},postRenderWebGL:function(a){var h=a.gl;a.maskStack.pop(),a.maskCount--,a.flush();var u=a.currentMask;if(a.maskStack.length===0)u.mask=null,h.disable(h.STENCIL_TEST);else{var l=a.maskStack[a.maskStack.length-1];l.mask.applyStencil(a,l.camera,!1),a.currentCameraMask.mask!==l.mask?(u.mask=l.mask,u.camera=l.camera):u.mask=null}},preRenderCanvas:function(a,h,u){var l=this.geometryMask;a.currentContext.save(),l.renderCanvas(a,l,u,null,null,!0),a.currentContext.clip()},postRenderCanvas:function(a){a.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(n,o){return o===void 0&&(o=n),this.scrollFactorX=n,this.scrollFactorY=o,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(25),a=i(177),h=i(269),u=i(270),l=i(3),f=4,c={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(d){this._scaleX=d,this._scaleY=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},scaleX:{get:function(){return this._scaleX},set:function(d){this._scaleX=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},scaleY:{get:function(){return this._scaleY},set:function(d){this._scaleY=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},angle:{get:function(){return u(this._rotation*n.RAD_TO_DEG)},set:function(d){this.rotation=u(d)*n.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=h(d)}},setPosition:function(d,v,p,g){return d===void 0&&(d=0),v===void 0&&(v=d),p===void 0&&(p=0),g===void 0&&(g=0),this.x=d,this.y=v,this.z=p,this.w=g,this},copyPosition:function(d){return d.x!==void 0&&(this.x=d.x),d.y!==void 0&&(this.y=d.y),d.z!==void 0&&(this.z=d.z),d.w!==void 0&&(this.w=d.w),this},setRandomPosition:function(d,v,p,g){return d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=d+Math.random()*p,this.y=v+Math.random()*g,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,this},setScale:function(d,v){return d===void 0&&(d=1),v===void 0&&(v=d),this.scaleX=d,this.scaleY=v,this},setX:function(d){return d===void 0&&(d=0),this.x=d,this},setY:function(d){return d===void 0&&(d=0),this.y=d,this},setZ:function(d){return d===void 0&&(d=0),this.z=d,this},setW:function(d){return d===void 0&&(d=0),this.w=d,this},getLocalTransformMatrix:function(d){return d===void 0&&(d=new o),d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(d,v){d===void 0&&(d=new o),v===void 0&&(v=new o);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(d);for(d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)v.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),v.multiply(d,d),p=p.parentContainer;return d},getLocalPoint:function(d,v,p,g){p||(p=new l),g||(g=this.scene.sys.cameras.main);var m=g.scrollX,x=g.scrollY,y=d+m*this.scrollFactorX-m,T=v+x*this.scrollFactorY-x;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):a(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var d=0,v=this.parentContainer;v;)d+=v.rotation,v=v.parentContainer;return d}};e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=1,n={_visible:!0,visible:{get:function(){return this._visible},set:function(o){o?(this._visible=!0,this.renderFlags|=i):(this._visible=!1,this.renderFlags&=~i)}},setVisible:function(o){return this.visible=o,this}};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(130),o=i(4),a=function(h,u,l,f){if(f===void 0&&(f=[]),!u&&!l)return f;u?l=Math.round(n(h)/u):u=n(h)/l;for(var c=h.x,d=h.y,v=0,p=0;p<l;p++)switch(f.push(new o(c,d)),v){case 0:c+=u,c>=h.right&&(v=1,d+=c-h.right,c=h.right);break;case 1:d+=u,d>=h.bottom&&(v=2,c-=d-h.bottom,d=h.bottom);break;case 2:c-=u,c<=h.left&&(v=3,d-=h.left-c,c=h.left);break;case 3:d-=u,d<=h.top&&(v=0,d=h.top);break}return f};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){o===void 0&&(o=1),a===void 0&&(a=[]);var h=Math.round(n.x1),u=Math.round(n.y1),l=Math.round(n.x2),f=Math.round(n.y2),c=Math.abs(l-h),d=Math.abs(f-u),v=h<l?1:-1,p=u<f?1:-1,g=c-d;a.push({x:h,y:u});for(var m=1;!(h===l&&u===f);){var x=g<<1;x>-d&&(g-=d,h+=v),x<c&&(g+=c,u+=p),m%o===0&&a.push({x:h,y:u}),m++}return a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(o.length){if(o.length===1)return o[0]}else return NaN;var h=1,u,l;if(a){if(n<o[0][a])return o[0];for(;o[h][a]<n;)h++}else for(;o[h]<n;)h++;return h>o.length&&(h=o.length),a?(u=o[h-1][a],l=o[h][a],l-n<=n-u?o[h]:o[h-1]):(u=o[h-1],l=o[h],l-n<=n-u?l:u)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f,c){c===void 0&&(c=!1),this.textureKey=h,this.textureFrame=u,this.index=l,this.frame=f,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=c},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=/\D/g;return n.sort(function(a,h){return parseInt(a.replace(o,""),10)-parseInt(h.replace(o,""),10)}),n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(185),o=i(0),a=i(102),h=i(9),u=i(132),l=i(22),f=i(2),c=i(6),d=i(186),v=i(322),p=new o({Extends:h,initialize:function(m){h.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",m.events.once(l.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(l.DESTROY,this.destroy,this)},addMix:function(g,m,x){var y=this.anims,T=this.mixes,C=typeof g=="string"?g:g.key,S=typeof m=="string"?m:m.key;if(y.has(C)&&y.has(S)){var E=T.get(C);E||(E={}),E[S]=x,T.set(C,E)}return this},removeMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=x.get(y);if(T)if(m){var C=typeof m=="string"?m:m.key;T.hasOwnProperty(C)&&delete T[C]}else m||x.delete(y);return this},getMix:function(g,m){var x=this.mixes,y=typeof g=="string"?g:g.key,T=typeof m=="string"?m:m.key,C=x.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(g,m){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(m.key=g,this.anims.set(g,m),this.emit(u.ADD_ANIMATION,g,m),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,m){var x=[],y=this.game.cache.json.get(g);if(!y)return x;var T=this,C=c(y,"meta",null),S=c(y,"frames",null);if(C&&S){var E=c(C,"frameTags",[]);E.forEach(function(P){var M=[],R=f(P,"name",null),A=f(P,"from",0),O=f(P,"to",0),b=f(P,"direction","forward");if(R&&(!m||m&&m.indexOf(R)>-1)){for(var w=[],I=Number.MAX_SAFE_INTEGER,Y=A;Y<=O;Y++){var z=Y.toString(),V=S[z];if(V){var W=f(V,"duration",Number.MAX_SAFE_INTEGER);W<I&&(I=W),w.push({frame:z,duration:W})}}w.forEach(function(B){M.push({key:g,frame:B.frame,duration:I-B.duration})});var F=I*M.length;b==="reverse"&&(M=M.reverse());var L={key:R,frames:M,duration:F,yoyo:b==="pingpong"},D=T.create(L);D&&x.push(D)}})}return x},create:function(g){var m=g.key,x=!1;return m&&(x=this.get(m),x||(x=new n(this,m,g),this.anims.set(m,x),this.emit(u.ADD_ANIMATION,m,x))),x},fromJSON:function(g,m){m===void 0&&(m=!1),m&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var x=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)x.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&x.push(this.create(g));return x},generateFrameNames:function(g,m){var x=c(m,"prefix",""),y=c(m,"start",0),T=c(m,"end",0),C=c(m,"suffix",""),S=c(m,"zeroPad",0),E=c(m,"outputArray",[]),P=c(m,"frames",!1),M=this.textureManager.get(g);if(!M)return E;var R;if(m)for(P||(P=v(y,T)),R=0;R<P.length;R++){var A=x+d(P[R],S,"0",1)+C;M.has(A)?E.push({key:g,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+g)}else for(P=M.getFrameNames(),R=0;R<P.length;R++)E.push({key:g,frame:P[R]});return E},generateFrameNumbers:function(g,m){var x=c(m,"start",0),y=c(m,"end",-1),T=c(m,"first",!1),C=c(m,"outputArray",[]),S=c(m,"frames",!1),E=this.textureManager.get(g);if(!E)return C;T&&E.has(T)&&C.push({key:g,frame:T}),S||(y===-1&&(y=E.frameTotal-2),S=v(x,y));for(var P=0;P<S.length;P++)E.has(S[P])?C.push({key:g,frame:S[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+g);return C},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(u.PAUSE_ALL)),this},play:function(g,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)m[x].anims.play(g);return this},staggerPlay:function(g,m,x,y){x===void 0&&(x=0),y===void 0&&(y=!0),Array.isArray(m)||(m=[m]);var T=m.length;y||T--;for(var C=0;C<m.length;C++){var S=x<0?Math.abs(x)*(T-C):x*C;m[C].anims.playAfterDelay(g,S)}return this},remove:function(g){var m=this.get(g);return m&&(this.emit(u.REMOVE_ANIMATION,g,m),this.anims.delete(g),this.removeMix(g)),m},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(u.RESUME_ALL)),this},toJSON:function(g){var m={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?m.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(x,y){m.anims.push(y.toJSON())}),m},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=p},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=[],l,f=!1;if((a||h)&&(f=!0,a||(a=""),h||(h="")),o<n)for(l=n;l>=o;l--)f?u.push(a+l.toString()+h):u.push(l);else for(l=n;l<=o;l++)f?u.push(a+l.toString()+h):u.push(l);return u};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(102),a=i(9),h=i(324),u=new n({initialize:function(){this.entries=new o,this.events=new a},add:function(l,f){return this.entries.set(l,f),this.events.emit(h.ADD,this,l,f),this},has:function(l){return this.entries.has(l)},exists:function(l){return this.entries.has(l)},get:function(l){return this.entries.get(l)},remove:function(l){var f=this.get(l);return f&&(this.entries.delete(l),this.events.emit(h.REMOVE,this,l,f.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(736),REMOVE:i(737)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(323),o=i(0),a=i(22),h=new o({initialize:function(l){this.game=l,this.binary=new n,this.bitmapFont=new n,this.json=new n,this.physics=new n,this.shader=new n,this.audio=new n,this.video=new n,this.text=new n,this.html=new n,this.obj=new n,this.tilemap=new n,this.xml=new n,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(u){return this.custom.hasOwnProperty(u)||(this.custom[u]=new n),this.custom[u]},destroy:function(){for(var u=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],l=0;l<u.length;l++)this[u[l]].destroy(),this[u[l]]=null;for(var f in this.custom)this.custom[f].destroy();this.custom=null,this.game=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(133),o=i(190),a=i(18),h=i(0),u=i(11),l=i(333),f=i(37),c=i(135),d=i(10),v=i(3),p=new h({Extends:n,Mixins:[u.Flip,u.Tint,u.Pipeline],initialize:function(m,x,y,T){n.call(this,m,x,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new l.Fade(this),this.flashEffect=new l.Flash(this),this.shakeEffect=new l.Shake(this),this.panEffect=new l.Pan(this),this.rotateToEffect=new l.RotateTo(this),this.zoomEffect=new l.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(g,m){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=m):this.deadzone=new d(0,0,g,m),this._follow){var x=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(T,C),this.scrollX=T-x,this.scrollY=C-y}o(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,m,x,y,T,C){return this.fadeEffect.start(!1,g,m,x,y,!0,T,C)},fadeOut:function(g,m,x,y,T,C){return this.fadeEffect.start(!0,g,m,x,y,!0,T,C)},fadeFrom:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!1,g,m,x,y,T,C,S)},fade:function(g,m,x,y,T,C,S){return this.fadeEffect.start(!0,g,m,x,y,T,C,S)},flash:function(g,m,x,y,T,C,S){return this.flashEffect.start(g,m,x,y,T,C,S)},shake:function(g,m,x,y,T){return this.shakeEffect.start(g,m,x,y,T)},pan:function(g,m,x,y,T,C,S){return this.panEffect.start(g,m,x,y,T,C,S)},rotateTo:function(g,m,x,y,T,C,S){return this.rotateToEffect.start(g,m,x,y,T,C,S)},zoomTo:function(g,m,x,y,T,C){return this.zoomEffect.start(g,m,x,y,T,C)},preRender:function(){this.renderList.length=0;var g=this.width,m=this.height,x=g*.5,y=m*.5,T=this.zoom,C=this.matrix,S=g*this.originX,E=m*this.originY,P=this._follow,M=this.deadzone,R=this.scrollX,A=this.scrollY;M&&o(M,this.midPoint.x,this.midPoint.y);var O=!1;if(P&&!this.panEffect.isRunning){var b=P.x-this.followOffset.x,w=P.y-this.followOffset.y;M?(b<M.x?R=c(R,R-(M.x-b),this.lerp.x):b>M.right&&(R=c(R,R+(b-M.right),this.lerp.x)),w<M.y?A=c(A,A-(M.y-w),this.lerp.y):w>M.bottom&&(A=c(A,A+(w-M.bottom),this.lerp.y))):(R=c(R,b-S,this.lerp.x),A=c(A,w-E,this.lerp.y)),O=!0}this.useBounds&&(R=this.clampX(R),A=this.clampY(A)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),R=Math.round(R),A=Math.round(A)),this.scrollX=R,this.scrollY=A;var I=R+x,Y=A+y;this.midPoint.set(I,Y);var z=g/T,V=m/T,W=I-z/2,F=Y-V/2;this.roundPixels&&(W=Math.round(W),F=Math.round(F)),this.worldView.setTo(W,F,z,V),C.applyITRS(this.x+S,this.y+E,this.rotation,T,T),C.translate(-S,-E),this.shakeEffect.preRender(),O&&this.emit(f.FOLLOW_UPDATE,this,P)},setLerp:function(g,m){return g===void 0&&(g=1),m===void 0&&(m=g),this.lerp.set(g,m),this},setFollowOffset:function(g,m){return g===void 0&&(g=0),m===void 0&&(m=0),this.followOffset.set(g,m),this},startFollow:function(g,m,x,y,T,C){m===void 0&&(m=!1),x===void 0&&(x=1),y===void 0&&(y=x),T===void 0&&(T=0),C===void 0&&(C=T),this._follow=g,this.roundPixels=m,x=a(x,0,1),y=a(y,0,1),this.lerp.set(x,y),this.followOffset.set(T,C);var S=this.width/2,E=this.height/2,P=g.x-T,M=g.y-C;return this.midPoint.set(P,M),this.scrollX=P-S,this.scrollY=M-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,m){this.visible&&(this.rotateToEffect.update(g,m),this.panEffect.update(g,m),this.zoomEffect.update(g,m),this.shakeEffect.update(g,m),this.flashEffect.update(g,m),this.fadeEffect.update(g,m))},destroy:function(){this.resetFX(),n.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=function(a){var h=new n;a=a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,v,p,g){return v+v+p+p+g+g});var u=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(u){var l=parseInt(u[1],16),f=parseInt(u[2],16),c=parseInt(u[3],16);h.setTo(l,f,c)}return h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return h<<24|n<<16|o<<8|a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){h===void 0&&(h={h:0,s:0,v:0}),n/=255,o/=255,a/=255;var u=Math.min(n,o,a),l=Math.max(n,o,a),f=l-u,c=0,d=l===0?0:f/l,v=l;return l!==u&&(l===n?c=(o-a)/f+(o<a?6:0):l===o?c=(a-n)/f+2:l===a&&(c=(n-o)/f+4),c/=6),h.hasOwnProperty("_h")?(h._h=c,h._s=d,h._v=v):(h.h=c,h.s=d,h.v=v),h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>16777215?{a:n>>>24,r:n>>16&255,g:n>>8&255,b:n&255}:{a:255,r:n>>16&255,g:n>>8&255,b:n&255}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=function(a){return new n(a.r,a.g,a.b,a.a)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=function(a){var h=new n,u=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a.toLowerCase());if(u){var l=parseInt(u[1],10),f=parseInt(u[2],10),c=parseInt(u[3],10),d=u[4]!==void 0?parseFloat(u[4]):1;h.setTo(l,f,c,d*255)}return h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(764),Out:i(765),InOut:i(766)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(767),Out:i(768),InOut:i(769)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(770),Out:i(771),InOut:i(772)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(773),Out:i(774),InOut:i(775)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(776),Out:i(777),InOut:i(778)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(779),Out:i(780),InOut:i(781)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(782)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(783),Out:i(784),InOut:i(785)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(786),Out:i(787),InOut:i(788)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(789),Out:i(790),InOut:i(791)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(792),Out:i(793),InOut:i(794)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(795)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(33),a=i(347),h=i(2),u=i(6),l=i(7),f=i(193),c=i(1),d=i(197),v=i(187),p=new n({initialize:function(m){m===void 0&&(m={});var x=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=u(m,"width",1024),this.height=u(m,"height",768),this.zoom=u(m,"zoom",1),this.parent=u(m,"parent",void 0),this.scaleMode=u(m,"scaleMode",0),this.expandParent=u(m,"expandParent",!0),this.autoRound=u(m,"autoRound",!1),this.autoCenter=u(m,"autoCenter",0),this.resizeInterval=u(m,"resizeInterval",500),this.fullscreenTarget=u(m,"fullscreenTarget",null),this.minWidth=u(m,"minWidth",0),this.maxWidth=u(m,"maxWidth",0),this.minHeight=u(m,"minHeight",0),this.maxHeight=u(m,"maxHeight",0);var T=u(m,"scale",null);T&&(this.width=u(T,"width",this.width),this.height=u(T,"height",this.height),this.zoom=u(T,"zoom",this.zoom),this.parent=u(T,"parent",this.parent),this.scaleMode=u(T,"mode",this.scaleMode),this.expandParent=u(T,"expandParent",this.expandParent),this.autoRound=u(T,"autoRound",this.autoRound),this.autoCenter=u(T,"autoCenter",this.autoCenter),this.resizeInterval=u(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=u(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=u(T,"min.width",this.minWidth),this.maxWidth=u(T,"max.width",this.maxWidth),this.minHeight=u(T,"min.height",this.minHeight),this.maxHeight=u(T,"max.height",this.maxHeight)),this.renderType=u(m,"type",o.AUTO),this.canvas=u(m,"canvas",null),this.context=u(m,"context",null),this.canvasStyle=u(m,"canvasStyle",null),this.customEnvironment=u(m,"customEnvironment",!1),this.sceneConfig=u(m,"scene",null),this.seed=u(m,"seed",[(Date.now()*Math.random()).toString()]),f.RND=new f.RandomDataGenerator(this.seed),this.gameTitle=u(m,"title",""),this.gameURL=u(m,"url","https://phaser.io"),this.gameVersion=u(m,"version",""),this.autoFocus=u(m,"autoFocus",!0),this.domCreateContainer=u(m,"dom.createContainer",!1),this.domBehindCanvas=u(m,"dom.behindCanvas",!1),this.domPointerEvents=u(m,"dom.pointerEvents","none"),this.inputKeyboard=u(m,"input.keyboard",!0),this.inputKeyboardEventTarget=u(m,"input.keyboard.target",window),this.inputKeyboardCapture=u(m,"input.keyboard.capture",[]),this.inputMouse=u(m,"input.mouse",!0),this.inputMouseEventTarget=u(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=u(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=u(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=u(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=u(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=u(m,"input.touch",a.input.touch),this.inputTouchEventTarget=u(m,"input.touch.target",null),this.inputTouchCapture=u(m,"input.touch.capture",!0),this.inputActivePointers=u(m,"input.activePointers",1),this.inputSmoothFactor=u(m,"input.smoothFactor",0),this.inputWindowEvents=u(m,"input.windowEvents",!0),this.inputGamepad=u(m,"input.gamepad",!1),this.inputGamepadEventTarget=u(m,"input.gamepad.target",window),this.disableContextMenu=u(m,"disableContextMenu",!1),this.audio=u(m,"audio",{}),this.hideBanner=u(m,"banner",null)===!1,this.hidePhaser=u(m,"banner.hidePhaser",!1),this.bannerTextColor=u(m,"banner.text",y),this.bannerBackgroundColor=u(m,"banner.background",x),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=u(m,"fps",null);var C=u(m,"render",m);this.pipeline=u(C,"pipeline",null),this.antialias=u(C,"antialias",!0),this.antialiasGL=u(C,"antialiasGL",!0),this.mipmapFilter=u(C,"mipmapFilter","LINEAR"),this.desynchronized=u(C,"desynchronized",!1),this.roundPixels=u(C,"roundPixels",!1),this.pixelArt=u(C,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=u(C,"transparent",!1),this.clearBeforeRender=u(C,"clearBeforeRender",!0),this.preserveDrawingBuffer=u(C,"preserveDrawingBuffer",!1),this.premultipliedAlpha=u(C,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=u(C,"failIfMajorPerformanceCaveat",!1),this.powerPreference=u(C,"powerPreference","default"),this.batchSize=u(C,"batchSize",4096),this.maxTextures=u(C,"maxTextures",-1),this.maxLights=u(C,"maxLights",10);var S=u(m,"backgroundColor",0);this.backgroundColor=v(S),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=u(m,"callbacks.preBoot",c),this.postBoot=u(m,"callbacks.postBoot",c),this.physics=u(m,"physics",{}),this.defaultPhysicsSystem=u(this.physics,"default",!1),this.loaderBaseURL=u(m,"loader.baseURL",""),this.loaderPath=u(m,"loader.path","");var E=a.os.android?6:32;this.loaderMaxParallelDownloads=u(m,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=u(m,"loader.crossOrigin",void 0),this.loaderResponseType=u(m,"loader.responseType",""),this.loaderAsync=u(m,"loader.async",!0),this.loaderUser=u(m,"loader.user",""),this.loaderPassword=u(m,"loader.password",""),this.loaderTimeout=u(m,"loader.timeout",0),this.loaderWithCredentials=u(m,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=u(m,"plugins",null),M=d.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:l(P)&&(this.installGlobalPlugins=h(P,"global",[]),this.installScenePlugins=h(P,"scene",[]),Array.isArray(P.default)?M=P.default:Array.isArray(P.defaultMerge)&&(M=M.concat(P.defaultMerge)))),this.defaultPlugins=M;var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=u(m,"images.default",R+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=u(m,"images.missing",R+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=u(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=o.WEBGL:window.FORCE_CANVAS&&(this.renderType=o.CANVAS))}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o={supportInverseAlpha:!1,supportNewBlendModes:!1};function a(){var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",f="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;return c.onload=function(){var d=new Image;d.onload=function(){var v=n.create(d,6,1),p=v.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(c,0,0),p.drawImage(d,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;n.remove(d),o.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},d.src=l+"/wCKxvRF"+f},c.src=l+"AP804Oa6"+f,!1}function h(){var l=n.create(this,2,1),f=l.getContext("2d");f.fillStyle="rgba(10, 20, 30, 0.5)",f.fillRect(0,0,1,1);var c=f.getImageData(0,0,1,1);if(c===null)return!1;f.putImageData(c,1,0);var d=f.getImageData(1,0,1,1);return d.data[0]===c.data[0]&&d.data[1]===c.data[1]&&d.data[2]===c.data[2]&&d.data[3]===c.data[3]}function u(){return typeof importScripts!="function"&&document!==void 0&&(o.supportNewBlendModes=a(),o.supportInverseAlpha=h()),o}e.exports=u()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return Math.atan2(h-o,a-n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.atan2(o.y-n.y,o.x-n.x)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n=n%(2*Math.PI),n>=0?n:n+2*Math.PI};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.x-o.x,h=n.y-o.y;return Math.sqrt(a*a+h*h)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=n-a,l=o-h;return u*u+l*l};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return a===void 0&&(a=1e-4),n>o-a};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return a===void 0&&(a=1e-4),n<o+a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(357),o=function(a,h){return n(a)/n(h)/n(a-h)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(n===0)return 1;for(var o=n;--n;)o*=n;return o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(u,l){var f=1-u;return f*f*f*l}function n(u,l){var f=1-u;return 3*f*f*u*l}function o(u,l){return 3*(1-u)*u*u*l}function a(u,l){return u*u*u*l}var h=function(u,l,f,c,d){return i(u,l)+n(u,f)+o(u,c)+a(u,d)};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(h,u){var l=1-h;return l*l*u}function n(h,u){return 2*(1-h)*h*u}function o(h,u){return h*h*u}var a=function(h,u,l,f){return i(h,u)+n(h,l)+o(h,f)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(184),o=function(a,h,u){return h+(u-h)*n(a,0,1)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=Math.log(n)/.6931471805599453;return 1<<Math.ceil(o)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.x,h=n.y;return n.x=a*Math.cos(o)-h*Math.sin(o),n.y=a*Math.sin(o)+h*Math.cos(o),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>0?Math.ceil(n):Math.floor(n)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h){this.val=new Float32Array(9),h?this.copy(h):this.identity()},clone:function(){return new o(this)},set:function(a){return this.copy(a)},copy:function(a){var h=this.val,u=a.val;return h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[8]=u[8],this},fromMat4:function(a){var h=a.val,u=this.val;return u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[4],u[4]=h[5],u[5]=h[6],u[6]=h[8],u[7]=h[9],u[8]=h[10],this},fromArray:function(a){var h=this.val;return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],this},identity:function(){var a=this.val;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,this},transpose:function(){var a=this.val,h=a[1],u=a[2],l=a[5];return a[1]=a[3],a[2]=a[6],a[3]=h,a[5]=a[7],a[6]=u,a[7]=l,this},invert:function(){var a=this.val,h=a[0],u=a[1],l=a[2],f=a[3],c=a[4],d=a[5],v=a[6],p=a[7],g=a[8],m=g*c-d*p,x=-g*f+d*v,y=p*f-c*v,T=h*m+u*x+l*y;return T?(T=1/T,a[0]=m*T,a[1]=(-g*u+l*p)*T,a[2]=(d*u-l*c)*T,a[3]=x*T,a[4]=(g*h-l*v)*T,a[5]=(-d*h+l*f)*T,a[6]=y*T,a[7]=(-p*h+u*v)*T,a[8]=(c*h-u*f)*T,this):null},adjoint:function(){var a=this.val,h=a[0],u=a[1],l=a[2],f=a[3],c=a[4],d=a[5],v=a[6],p=a[7],g=a[8];return a[0]=c*g-d*p,a[1]=l*p-u*g,a[2]=u*d-l*c,a[3]=d*v-f*g,a[4]=h*g-l*v,a[5]=l*f-h*d,a[6]=f*p-c*v,a[7]=u*v-h*p,a[8]=h*c-u*f,this},determinant:function(){var a=this.val,h=a[0],u=a[1],l=a[2],f=a[3],c=a[4],d=a[5],v=a[6],p=a[7],g=a[8];return h*(g*c-d*p)+u*(-g*f+d*v)+l*(p*f-c*v)},multiply:function(a){var h=this.val,u=h[0],l=h[1],f=h[2],c=h[3],d=h[4],v=h[5],p=h[6],g=h[7],m=h[8],x=a.val,y=x[0],T=x[1],C=x[2],S=x[3],E=x[4],P=x[5],M=x[6],R=x[7],A=x[8];return h[0]=y*u+T*c+C*p,h[1]=y*l+T*d+C*g,h[2]=y*f+T*v+C*m,h[3]=S*u+E*c+P*p,h[4]=S*l+E*d+P*g,h[5]=S*f+E*v+P*m,h[6]=M*u+R*c+A*p,h[7]=M*l+R*d+A*g,h[8]=M*f+R*v+A*m,this},translate:function(a){var h=this.val,u=a.x,l=a.y;return h[6]=u*h[0]+l*h[3]+h[6],h[7]=u*h[1]+l*h[4]+h[7],h[8]=u*h[2]+l*h[5]+h[8],this},rotate:function(a){var h=this.val,u=h[0],l=h[1],f=h[2],c=h[3],d=h[4],v=h[5],p=Math.sin(a),g=Math.cos(a);return h[0]=g*u+p*c,h[1]=g*l+p*d,h[2]=g*f+p*v,h[3]=g*c-p*u,h[4]=g*d-p*l,h[5]=g*v-p*f,this},scale:function(a){var h=this.val,u=a.x,l=a.y;return h[0]=u*h[0],h[1]=u*h[1],h[2]=u*h[2],h[3]=l*h[3],h[4]=l*h[4],h[5]=l*h[5],this},fromQuat:function(a){var h=a.x,u=a.y,l=a.z,f=a.w,c=h+h,d=u+u,v=l+l,p=h*c,g=h*d,m=h*v,x=u*d,y=u*v,T=l*v,C=f*c,S=f*d,E=f*v,P=this.val;return P[0]=1-(x+T),P[3]=g+E,P[6]=m-S,P[1]=g-E,P[4]=1-(p+T),P[7]=y+C,P[2]=m+S,P[5]=y-C,P[8]=1-(p+x),this},normalFromMat4:function(a){var h=a.val,u=this.val,l=h[0],f=h[1],c=h[2],d=h[3],v=h[4],p=h[5],g=h[6],m=h[7],x=h[8],y=h[9],T=h[10],C=h[11],S=h[12],E=h[13],P=h[14],M=h[15],R=l*p-f*v,A=l*g-c*v,O=l*m-d*v,b=f*g-c*p,w=f*m-d*p,I=c*m-d*g,Y=x*E-y*S,z=x*P-T*S,V=x*M-C*S,W=y*P-T*E,F=y*M-C*E,L=T*M-C*P,D=R*L-A*F+O*W+b*V-w*z+I*Y;return D?(D=1/D,u[0]=(p*L-g*F+m*W)*D,u[1]=(g*V-v*L-m*z)*D,u[2]=(v*F-p*V+m*Y)*D,u[3]=(c*F-f*L-d*W)*D,u[4]=(l*L-c*V+d*z)*D,u[5]=(f*V-l*F-d*Y)*D,u[6]=(E*I-P*w+M*b)*D,u[7]=(P*O-S*I-M*A)*D,u[8]=(S*w-E*O+M*R)*D,this):null}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(364),a=i(1),h=i(39),u=1e-6,l=new Int8Array([1,2,0]),f=new Float32Array([0,0,0]),c=new h(1,0,0),d=new h(0,1,0),v=new h,p=new o,g=new n({initialize:function(x,y,T,C){this.onChangeCallback=a,this.set(x,y,T,C)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,y,T,C){return C===void 0&&(C=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=y||0,this._w=T||0),C&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return Math.sqrt(m*m+x*x+y*y+T*T)},lengthSq:function(){var m=this.x,x=this.y,y=this.z,T=this.w;return m*m+x*x+y*y+T*T},normalize:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T;return C>0&&(C=1/Math.sqrt(C),this._x=m*C,this._y=x*C,this._z=y*C,this._w=T*C),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var y=this.x,T=this.y,C=this.z,S=this.w;return this.set(y+x*(m.x-y),T+x*(m.y-T),C+x*(m.z-C),S+x*(m.w-S))},rotationTo:function(m,x){var y=m.x*x.x+m.y*x.y+m.z*x.z;return y<-.999999?(v.copy(c).cross(m).length()<u&&v.copy(d).cross(m),v.normalize(),this.setAxisAngle(v,Math.PI)):y>.999999?this.set(0,0,0,1):(v.copy(m).cross(x),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+y,this.normalize())},setAxes:function(m,x,y){var T=p.val;return T[0]=x.x,T[3]=x.y,T[6]=x.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-m.x,T[5]=-m.y,T[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x=x*.5;var y=Math.sin(x);return this.set(y*m.x,y*m.y,y*m.z,Math.cos(x))},multiply:function(m){var x=this.x,y=this.y,T=this.z,C=this.w,S=m.x,E=m.y,P=m.z,M=m.w;return this.set(x*M+C*S+y*P-T*E,y*M+C*E+T*S-x*P,T*M+C*P+x*E-y*S,C*M-x*S-y*E-T*P)},slerp:function(m,x){var y=this.x,T=this.y,C=this.z,S=this.w,E=m.x,P=m.y,M=m.z,R=m.w,A=y*E+T*P+C*M+S*R;A<0&&(A=-A,E=-E,P=-P,M=-M,R=-R);var O=1-x,b=x;if(1-A>u){var w=Math.acos(A),I=Math.sin(w);O=Math.sin((1-x)*w)/I,b=Math.sin(x*w)/I}return this.set(O*y+b*E,O*T+b*P,O*C+b*M,O*S+b*R)},invert:function(){var m=this.x,x=this.y,y=this.z,T=this.w,C=m*m+x*x+y*y+T*T,S=C?1/C:0;return this.set(-m*S,-x*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+C*S,y*E+T*S,T*E-y*S,C*E-x*S)},rotateY:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E-T*S,y*E+C*S,T*E+x*S,C*E-y*S)},rotateZ:function(m){m*=.5;var x=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(m),E=Math.cos(m);return this.set(x*E+y*S,y*E-x*S,T*E+C*S,C*E-T*S)},calculateW:function(){var m=this.x,x=this.y,y=this.z;return this.w=-Math.sqrt(1-m*m-x*x-y*y),this},setFromEuler:function(m,x){var y=m.x/2,T=m.y/2,C=m.z/2,S=Math.cos(y),E=Math.cos(T),P=Math.cos(C),M=Math.sin(y),R=Math.sin(T),A=Math.sin(C);switch(m.order){case"XYZ":{this.set(M*E*P+S*R*A,S*R*P-M*E*A,S*E*A+M*R*P,S*E*P-M*R*A,x);break}case"YXZ":{this.set(M*E*P+S*R*A,S*R*P-M*E*A,S*E*A-M*R*P,S*E*P+M*R*A,x);break}case"ZXY":{this.set(M*E*P-S*R*A,S*R*P+M*E*A,S*E*A+M*R*P,S*E*P-M*R*A,x);break}case"ZYX":{this.set(M*E*P-S*R*A,S*R*P+M*E*A,S*E*A-M*R*P,S*E*P+M*R*A,x);break}case"YZX":{this.set(M*E*P+S*R*A,S*R*P+M*E*A,S*E*A-M*R*P,S*E*P-M*R*A,x);break}case"XZY":{this.set(M*E*P-S*R*A,S*R*P-M*E*A,S*E*A+M*R*P,S*E*P+M*R*A,x);break}}return this},setFromRotationMatrix:function(m){var x=m.val,y=x[0],T=x[4],C=x[8],S=x[1],E=x[5],P=x[9],M=x[2],R=x[6],A=x[10],O=y+E+A,b;return O>0?(b=.5/Math.sqrt(O+1),this.set((R-P)*b,(C-M)*b,(S-T)*b,.25/b)):y>E&&y>A?(b=2*Math.sqrt(1+y-E-A),this.set(.25*b,(T+S)/b,(C+M)/b,(R-P)/b)):E>A?(b=2*Math.sqrt(1+E-y-A),this.set((T+S)/b,.25*b,(P+R)/b,(C-M)/b)):(b=2*Math.sqrt(1+A-y-E),this.set((C+M)/b,(P+R)/b,.25*b,(S-T)/b)),this},fromMat3:function(m){var x=m.val,y=x[0]+x[4]+x[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(x[7]-x[5])*T,this._y=(x[2]-x[6])*T,this._z=(x[3]-x[1])*T;else{var C=0;x[4]>x[0]&&(C=1),x[8]>x[C*3+C]&&(C=2);var S=l[C],E=l[S];T=Math.sqrt(x[C*3+C]-x[S*3+S]-x[E*3+E]+1),f[C]=.5*T,T=.5/T,f[S]=(x[S*3+C]+x[C*3+S])*T,f[E]=(x[E*3+C]+x[C*3+E])*T,this._x=f[0],this._y=f[1],this._z=f[2],this._w=(x[E*3+S]-x[S*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(367),o=i(31),a=i(33),h=i(191),u=function(l){var f=l.config;if((f.customEnvironment||f.canvas)&&f.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!f.customEnvironment&&!f.canvas&&f.renderType!==a.HEADLESS)if(f.renderType===a.CANVAS||f.renderType!==a.CANVAS&&!h.webGL)if(h.canvas)f.renderType=a.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else f.renderType=a.WEBGL;f.antialias||o.disableSmoothing();var c=l.scale.baseSize,d=c.width,v=c.height;if(f.canvas?(l.canvas=f.canvas,l.canvas.width=d,l.canvas.height=v):l.canvas=o.create(l,d,v,f.renderType),f.canvasStyle&&(l.canvas.style=f.canvasStyle),f.antialias||n.setCrisp(l.canvas),f.renderType!==a.HEADLESS){var p,g;p=i(368),g=i(371),f.renderType===a.WEBGL?l.renderer=new g(l):(l.renderer=new p(l),l.context=l.renderer.gameContext)}};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCrisp:function(n){var o=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return o.forEach(function(a){n.style["image-rendering"]=a}),n.style.msInterpolationMode="nearest-neighbor",n},setBicubic:function(n){return n.style["image-rendering"]="auto",n.style.msInterpolationMode="bicubic",n}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(37),o=i(369),a=i(0),h=i(33),u=i(9),l=i(91),f=i(370),c=i(104),d=i(106),v=i(25),p=new a({Extends:u,initialize:function(m){u.call(this);var x=m.config;this.config={clearBeforeRender:x.clearBeforeRender,backgroundColor:x.backgroundColor,antialias:x.antialias,roundPixels:x.roundPixels},this.game=m,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var y={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.gameContext=x.context?x.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=f(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(d.READY,this.boot,this)},boot:function(){var g=this.game,m=g.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,g.scale.on(c.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(g,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(g,m){this.width=g,this.height=m,this.emit(l.RESIZE,g,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,m=this.config,x=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(g.clearRect(0,0,x,y),m.transparent||(g.fillStyle=m.backgroundColor.rgba,g.fillRect(0,0,x,y))),g.save(),this.drawCount=0,this.emit(l.PRE_RENDER)},render:function(g,m,x){var y=m.length;this.emit(l.RENDER,g,x);var T=x.x,C=x.y,S=x.width,E=x.height,P=x.renderToTexture?x.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(T,C,S,E),P.clip()),this.currentContext=P;var M=x.mask;M&&M.preRenderCanvas(this,null,x._maskCamera),x.transparent||(P.fillStyle=x.backgroundColor.rgba,P.fillRect(T,C,S,E)),P.globalAlpha=x.alpha,P.globalCompositeOperation="source-over",this.drawCount+=y,x.renderToTexture&&x.emit(n.PRE_RENDER,x),x.matrix.copyToContext(P);for(var R=0;R<y;R++){var A=m[R];A.mask&&A.mask.preRenderCanvas(this,A,x),A.renderCanvas(this,A,x),A.mask&&A.mask.postRenderCanvas(this,A,x)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,x.flashEffect.postRenderCanvas(P),x.fadeEffect.postRenderCanvas(P),x.dirty=!1,M&&M.postRenderCanvas(this),P.restore(),x.renderToTexture&&(x.emit(n.POST_RENDER,x),x.renderToGame&&g.sys.context.drawImage(x.canvas,T,C))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(l.POST_RENDER);var m=this.snapshotState;m.callback&&(o(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(g,m,x,y,T,C,S,E,P){x===void 0&&(x=!1),this.snapshotArea(y,T,C,S,m,E,P);var M=this.snapshotState;return M.getPixel=x,o(this.canvas,M),M.callback=null,this},snapshot:function(g,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,m,x)},snapshotArea:function(g,m,x,y,T,C,S){var E=this.snapshotState;return E.callback=T,E.type=C,E.encoder=S,E.getPixel=!1,E.x=g,E.y=m,E.width=Math.min(x,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,m,x){return this.snapshotArea(g,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(g,m,x,y){var T=x.alpha*g.alpha;if(T!==0){var C=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,P=m.canvasData,M=P.x,R=P.y,A=m.cutWidth,O=m.cutHeight,b=m.customPivot,w=m.source.resolution,I=g.displayOriginX,Y=g.displayOriginY,z=-I+m.x,V=-Y+m.y;if(g.isCropped){var W=g._crop;(W.flipX!==g.flipX||W.flipY!==g.flipY)&&m.updateCropUVs(W,g.flipX,g.flipY),A=W.cw,O=W.ch,M=W.cx,R=W.cy,z=-I+W.x,V=-Y+W.y,g.flipX&&(z>=0?z=-(z+A):z<0&&(z=Math.abs(z)-A)),g.flipY&&(V>=0?V=-(V+O):V<0&&(V=Math.abs(V)-O))}var F=1,L=1;g.flipX&&(b||(z+=-m.realWidth+I*2),F=-1),g.flipY&&(b||(V+=-m.realHeight+Y*2),L=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*F,g.scaleY*L),S.copyFrom(x.matrix),y?(S.multiplyWithOffset(y,-x.scrollX*g.scrollFactorX,-x.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=x.scrollX*g.scrollFactorX,E.f-=x.scrollY*g.scrollFactorY),S.multiply(E),C.save(),S.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=T,C.imageSmoothingEnabled=!(!this.antialias||m.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,x),C.drawImage(m.source.image,M,R,A,O,z,V,A/w,O/w),g.mask&&g.mask.postRenderCanvas(this,g,x),C.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(38),a=i(2),h=function(u,l){var f=a(l,"callback"),c=a(l,"type","image/png"),d=a(l,"encoder",.92),v=Math.abs(Math.round(a(l,"x",0))),p=Math.abs(Math.round(a(l,"y",0))),g=a(l,"width",u.width),m=a(l,"height",u.height),x=a(l,"getPixel",!1);if(x){var y=u.getContext("2d"),T=y.getImageData(v,p,1,1),C=T.data;f.call(null,new o(C[0],C[1],C[2],C[3]/255))}else if(v!==0||p!==0||g!==u.width||m!==u.height){var S=n.createWebGL(this,g,m),E=S.getContext("2d");E.drawImage(u,v,p,g,m,0,0,g,m);var P=new Image;P.onerror=function(){f.call(null),n.remove(S)},P.onload=function(){f.call(null,P),n.remove(S)},P.src=S.toDataURL(c,d)}else{var M=new Image;M.onerror=function(){f.call(null)},M.onload=function(){f.call(null,M)},M.src=u.toDataURL(c,d)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(348),a=function(){var h=[],u=o.supportNewBlendModes,l="source-over";return h[n.NORMAL]=l,h[n.ADD]="lighter",h[n.MULTIPLY]=u?"multiply":l,h[n.SCREEN]=u?"screen":l,h[n.OVERLAY]=u?"overlay":l,h[n.DARKEN]=u?"darken":l,h[n.LIGHTEN]=u?"lighten":l,h[n.COLOR_DODGE]=u?"color-dodge":l,h[n.COLOR_BURN]=u?"color-burn":l,h[n.HARD_LIGHT]=u?"hard-light":l,h[n.SOFT_LIGHT]=u?"soft-light":l,h[n.DIFFERENCE]=u?"difference":l,h[n.EXCLUSION]=u?"exclusion":l,h[n.HUE]=u?"hue":l,h[n.SATURATION]=u?"saturation":l,h[n.COLOR]=u?"color":l,h[n.LUMINOSITY]=u?"luminosity":l,h[n.ERASE]="destination-out",h[n.SOURCE_IN]="source-in",h[n.SOURCE_OUT]="source-out",h[n.SOURCE_ATOP]="source-atop",h[n.DESTINATION_OVER]="destination-over",h[n.DESTINATION_IN]="destination-in",h[n.DESTINATION_OUT]="destination-out",h[n.DESTINATION_ATOP]="destination-atop",h[n.LIGHTER]="lighter",h[n.COPY]="copy",h[n.XOR]="xor",h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),o=i(37),a=i(0),h=i(33),u=i(9),l=i(91),f=i(22),c=i(138),d=i(69),v=i(1),p=i(372),g=i(141),m=i(104),x=i(106),y=i(12),T=i(383),C=new a({Extends:u,initialize:function(E){u.call(this);var P=E.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=E,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,P=this.game,M=this.canvas,R=S.backgroundColor;if(P.config.context?E=P.config.context:E=M.getContext("webgl",S.contextCreation)||M.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var A=this;this.contextLostHandler=function(D){A.contextLost=!0,A.game.events.emit(f.CONTEXT_LOST,A),D.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(f.CONTEXT_RESTORED,A)},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),M.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=E;for(var O=0;O<=27;O++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var b=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var w="WEBGL_compressed_texture_",I="WEBKIT_"+w;this.compression.ETC1=E.getExtension(w+"etc1")||E.getExtension(I+"etc1"),this.compression.PVRTC=E.getExtension(w+"pvrtc")||E.getExtension(I+"pvrtc"),this.compression.S3TC=E.getExtension(w+"s3tc")||E.getExtension(I+"s3tc"),this.supportedExtensions=b;var Y="ANGLE_instanced_arrays";this.instancedArraysExtension=b.indexOf(Y)>-1?E.getExtension(Y):null;var z="OES_vertex_array_object";this.vaoExtension=b.indexOf(z)>-1?E.getExtension(z):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(R.redGL,R.greenGL,R.blueGL,R.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=y.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var V=this.tempTextures;if(Array.isArray(V))for(var W=0;O<this.maxTextures;W++)E.deleteTexture(V[W]);else V=new Array(this.maxTextures);for(var F=0;F<this.maxTextures;F++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+F),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),V[F]=L,this.textureIndexes.push(F)}return this.tempTextures=V,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),P.textures.once(x.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,P=S.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),S.scale.on(m.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var P=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),P.viewport(0,0,S,E),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(l.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,P,M,R){R===void 0&&(R=this.drawingBufferHeight);var A=this.scissorStack,O=[S,E,P,M];return A.push(O),this.setScissor(S,E,P,M,R),this.currentScissor=O,O},setScissor:function(S,E,P,M,R){R===void 0&&(R=this.drawingBufferHeight);var A=this.gl,O=this.currentScissor,b=P>0&&M>0;if(O&&b){var w=O[0],I=O[1],Y=O[2],z=O[3];b=w!==S||I!==E||Y!==P||z!==M}b&&(this.flush(),A.scissor(S,R-E-M,P,M))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var P=E[0],M=E[1],R=E[2],A=E[3];R>0&&A>0&&S.scissor(P,this.drawingBufferHeight-M-A,R,A)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var P=this.gl,M=this.blendModes[S];return E||S!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var P=this.blendModes.push({func:S,equation:E});return P-1},updateBlendMode:function(S,E,P){return this.blendModes[S]&&(this.blendModes[S].func=E,P&&(this.blendModes[S].equation=P)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,P=0;P<E.length;P++)S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,P=this.tempTextures;if(S){for(var M=0;M<P.length;M++)E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,P[M]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,P,M){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,P,M))},setFramebuffer:function(S,E,P,M){if(E===void 0&&(E=!1),P===void 0&&(P=!1),M===void 0&&(M=!0),S===this.currentFramebuffer)return this;var R=this.gl,A=this.width,O=this.height;return S&&S.renderTexture&&M?(A=S.renderTexture.width,O=S.renderTexture.height):this.flush(),R.bindFramebuffer(R.FRAMEBUFFER,S),M&&R.viewport(0,0,A,O),E&&(S?(this.drawingBufferHeight=O,this.pushScissor(0,0,A,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,P&&this.resetTextures(),this},popFramebuffer:function(S,E,P){S===void 0&&(S=!1),E===void 0&&(E=!1),P===void 0&&(P=!0);var M=this.fboStack;M.pop();var R=M[M.length-1];return R||(R=null),this.setFramebuffer(R,S,E,P),R},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,P,M){var R=this.gl,A=R.NEAREST,O=R.NEAREST,b=R.CLAMP_TO_EDGE,w=null;E=S?S.width:E,P=S?S.height:P;var I=c(E,P);return I&&(b=R.REPEAT),M===h.ScaleModes.LINEAR&&this.config.antialias&&(A=I?this.mipmapFilter:R.LINEAR,O=R.LINEAR),!S&&typeof E=="number"&&typeof P=="number"?w=this.createTexture2D(0,A,O,b,b,R.RGBA,null,E,P):w=this.createTexture2D(0,A,O,b,b,R.RGBA,S),w},createTexture2D:function(S,E,P,M,R,A,O,b,w,I,Y,z){I=I??!0,Y===void 0&&(Y=!1),z===void 0&&(z=!1);var V=this.gl,W=V.createTexture();V.activeTexture(V.TEXTURE0);var F=V.getParameter(V.TEXTURE_BINDING_2D);return V.bindTexture(V.TEXTURE_2D,W),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,E),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,P),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,R),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,M),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,z),O==null?V.texImage2D(V.TEXTURE_2D,S,A,b,w,0,A,V.UNSIGNED_BYTE,null):(Y||(b=O.width,w=O.height),V.texImage2D(V.TEXTURE_2D,S,A,A,V.UNSIGNED_BYTE,O)),c(b,w)&&V.generateMipmap(V.TEXTURE_2D),F&&V.bindTexture(V.TEXTURE_2D,F),W.isAlphaPremultiplied=I,W.isRenderTexture=!1,W.width=b,W.height=w,W.glIndex=0,W.glIndexCounter=-1,W},createFramebuffer:function(S,E,P,M){var R=this.gl,A=R.createFramebuffer(),O=0;if(this.setFramebuffer(A),M){var b=R.createRenderbuffer();R.bindRenderbuffer(R.RENDERBUFFER,b),R.renderbufferStorage(R.RENDERBUFFER,R.DEPTH_STENCIL,S,E),R.framebufferRenderbuffer(R.FRAMEBUFFER,R.DEPTH_STENCIL_ATTACHMENT,R.RENDERBUFFER,b)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,P,0),O=R.checkFramebufferStatus(R.FRAMEBUFFER),O!==R.FRAMEBUFFER_COMPLETE){var w={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+w[O])}return A.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),A},createProgram:function(S,E){var P=this.gl,M=P.createProgram(),R=P.createShader(P.VERTEX_SHADER),A=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(R,S),P.shaderSource(A,E),P.compileShader(R),P.compileShader(A),!P.getShaderParameter(R,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(R));if(!P.getShaderParameter(A,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(A));if(P.attachShader(M,R),P.attachShader(M,A),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(S,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,S,E),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(S,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,S,E),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),n(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,P=S.y,M=S.width,R=S.height,A=S.backgroundColor;if(S.emit(o.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,P,M,R),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),A.alphaGL>0){var O=this.pipelines.setMulti();O.drawFillRect(E,P,M,R,y.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,P=this.currentCameraMask;return E.length>0?S=E[E.length-1]:P.mask&&P.mask.isStencil&&(S=P),S},postRenderCamera:function(S){var E=S.flashEffect,P=S.fadeEffect;if(E.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();E.postRenderWebGL(M,y.getTintFromFloats),P.postRenderWebGL(M,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(o.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(l.PRE_RENDER)}},render:function(S,E,P){if(!this.contextLost){var M=E.length;if(this.emit(l.RENDER,S,P),this.preRenderCamera(P),M===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var R=this.currentMask,A=0;A<M;A++){this.finalType=A===M-1;var O=E[A],b=O.mask;R=this.currentMask,R.mask&&R.mask!==b&&R.mask.postRenderWebGL(this,R.camera),b&&R.mask!==b&&b.preRenderWebGL(this,O,P),O.blendMode!==this.currentBlendMode&&this.setBlendMode(O.blendMode);var w=O.type;w!==this.currentType&&(this.newType=!0,this.currentType=w),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[A+1].type===this.currentType,O.renderWebGL(this,O,P),this.newType=!1}R=this.currentMask,R.mask&&R.mask.postRenderWebGL(this,R.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(l.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,P)},snapshotArea:function(S,E,P,M,R,A,O){var b=this.snapshotState;return b.callback=R,b.type=A,b.encoder=O,b.getPixel=!1,b.x=S,b.y=E,b.width=Math.min(P,this.gl.drawingBufferWidth),b.height=Math.min(M,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,P){return this.snapshotArea(S,E,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,P,M,R,A,O,b,w,I,Y){R===void 0&&(R=!1),A===void 0&&(A=0),O===void 0&&(O=0),b===void 0&&(b=E),w===void 0&&(w=P);var z=this.currentFramebuffer;this.snapshotArea(A,O,b,w,M,I,Y);var V=this.snapshotState;return V.getPixel=R,V.isFramebuffer=!0,V.bufferWidth=E,V.bufferHeight=P,this.setFramebuffer(S),T(this.canvas,V),this.setFramebuffer(z),V.callback=null,V.isFramebuffer=!1,this},canvasToTexture:function(S,E,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),E?this.updateCanvasTexture(S,E,M):this.createCanvasTexture(S,P,M)},createCanvasTexture:function(S,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,R=M.NEAREST,A=M.NEAREST,O=S.width,b=S.height,w=M.CLAMP_TO_EDGE,I=c(O,b);return!E&&I&&(w=M.REPEAT),this.config.antialias&&(R=I?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,R,A,w,w,M.RGBA,S,O,b,!0,!1,P)},updateCanvasTexture:function(S,E,P){P===void 0&&(P=!1);var M=this.gl,R=S.width,A=S.height;if(R>0&&A>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,S),E.width=R,E.height=A,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},createVideoTexture:function(S,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,R=M.NEAREST,A=M.NEAREST,O=S.videoWidth,b=S.videoHeight,w=M.CLAMP_TO_EDGE,I=c(O,b);return!E&&I&&(w=M.REPEAT),this.config.antialias&&(R=I?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,R,A,w,w,M.RGBA,S,O,b,!0,!0,P)},updateVideoTexture:function(S,E,P){P===void 0&&(P=!1);var M=this.gl,R=S.videoWidth,A=S.videoHeight;if(R>0&&A>0){M.activeTexture(M.TEXTURE0);var O=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,S),E.width=R,E.height=A,O&&M.bindTexture(M.TEXTURE_2D,O)}return E},setTextureFilter:function(S,E){var P=this.gl,M=[P.LINEAR,P.NEAREST][E];P.activeTexture(P.TEXTURE0);var R=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,S),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),R&&P.bindTexture(P.TEXTURE_2D,R),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,P=0;P<E.length;P++)S.deleteTexture(E[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=C},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(92),a=i(102),h=i(373),u=i(376),l=i(377),f=i(108),c=i(378),d=i(379),v=i(380),p=i(381),g=new n({initialize:function(x){this.game=x.game,this.renderer=x,this.classes=new a([[o.UTILITY_PIPELINE,p],[o.MULTI_PIPELINE,f],[o.BITMAPMASK_PIPELINE,h],[o.SINGLE_PIPELINE,v],[o.ROPE_PIPELINE,d],[o.LIGHT_PIPELINE,l],[o.POINTLIGHT_PIPELINE,c],[o.GRAPHICS_PIPELINE,u]]),this.postPipelineClasses=new a,this.pipelines=new a,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(m){var x,y,T=this,C=this.game;if(this.classes.each(function(E,P){x=T.add(E,new P({game:C})),E===o.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=x,T.fullFrame1=x.fullFrame1,T.fullFrame2=x.fullFrame2,T.halfFrame1=x.halfFrame1,T.halfFrame2=x.halfFrame2)}),this.MULTI_PIPELINE=this.get(o.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(o.BITMAPMASK_PIPELINE),m)for(y in m){var S=m[y];x=new S(C),x.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,x))}},add:function(m,x){if(x.isPostFX){console.warn(m+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(m)?console.warn("Pipeline exists: "+m):(x.name=m,x.manager=this,y.set(m,x)),x.hasBooted||x.boot(),T.width!==0&&T.height!==0&&x.resize(T.width,T.height),x},addPostPipeline:function(m,x){this.postPipelineClasses.has(m)||this.postPipelineClasses.set(m,x)},flush:function(){this.current&&this.current.flush()},has:function(m){var x=this.pipelines;return typeof m=="string"?x.has(m):!!x.contains(m)},get:function(m){var x=this.pipelines;if(typeof m=="string")return x.get(m);if(x.contains(m))return m},getPostPipeline:function(m,x){var y=this.postPipelineClasses,T;if(typeof m=="string"?T=y.get(m):typeof m=="function"?y.contains(m)&&(T=m):typeof m=="object"&&(T=y.get(m.name)),T){var C=new T(this.game);return x&&(C.gameObject=x),C}},remove:function(m,x,y){x===void 0&&(x=!0),y===void 0&&(y=!0),this.pipelines.delete(m),x&&this.classes.delete(m),y&&this.postPipelineClasses.delete(m)},set:function(m,x,y){if(!m.isPostFX)return this.isCurrent(m,y)||(this.flush(),this.current&&this.current.unbind(),this.current=m,m.bind(y)),m.updateProjectionMatrix(),m.onBind(x),m},preBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatch:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},preBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=x.length-1;y>=0;y--){var T=x[y];T.active&&T.preBatch(m)}}},postBatchCamera:function(m){if(m.hasPostPipeline){this.flush();for(var x=m.postPipelines,y=0;y<x.length;y++){var T=x[y];T.active&&T.postBatch(m)}}},isCurrent:function(m,x){var y=this.renderer,T=this.current;return T&&!x&&(x=T.currentShader),!(T!==m||x.program!==y.currentProgram)},copyFrame:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(m,x,y,T,C),this},copyToGame:function(m){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(m),this},drawFrame:function(m,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(m,x,y,T),this},blendFrames:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(m,x,y,T,C),this},blendFramesAdditive:function(m,x,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(m,x,y,T,C),this},clearFrame:function(m,x){return this.UTILITY_PIPELINE.clearFrame(m,x),this},blitFrame:function(m,x,y,T,C,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(m,x,y,T,C,S),this},copyFrameRect:function(m,x,y,T,C,S,E,P){return this.UTILITY_PIPELINE.copyFrameRect(m,x,y,T,C,S,E,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(m){return this.UTILITY_PIPELINE.bind(m)},rebind:function(m){m===void 0&&this.previous&&(m=this.previous);var x=this.renderer,y=x.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),x.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,x.width,x.height),x.currentProgram=null,x.setBlendMode(0,!0);var T=this.pipelines.entries;for(var C in T)T[C].glReset=!0;m&&(this.current=m,m.rebind()),x.resetTextures()},clear:function(){var m=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,m.currentProgram=null,m.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=i(866),h=i(867),u=i(107),l=i(58),f=new n({Extends:l,initialize:function(d){d.fragShader=o(d,"fragShader",a),d.vertShader=o(d,"vertShader",h),d.batchSize=o(d,"batchSize",1),d.vertices=o(d,"vertices",[-1,1,-1,-7,7,1]),d.attributes=o(d,"attributes",[{name:"inPosition",size:2,type:u.FLOAT}]),l.call(this,d)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(c,d){l.prototype.resize.call(this,c,d),this.set2f("uResolution",c,d)},beginMask:function(c,d,v){var p=this.gl;if(c.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(c.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==c&&(g.currentMask.mask=c,g.currentMask.camera=v)}},endMask:function(c,d){var v=this.gl,p=this.renderer,g=c.bitmapMask;if(g&&v){p.flush(),p.pushFramebuffer(c.maskFramebuffer),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,d),p.flush(),p.popFramebuffer(),p.popFramebuffer();var m=p.getCurrentStencilMask();m?(v.enable(v.STENCIL_TEST),m.mask.applyStencil(p,m.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),v.activeTexture(v.TEXTURE1),v.bindTexture(v.TEXTURE_2D,c.maskTexture),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,c.mainTexture),this.set1i("uInvertMaskAlpha",c.invertAlpha),v.drawArrays(this.topology,0,3),p.resetTextures()}}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=i(107),h=new n({initialize:function(l,f,c,d,v){this.pipeline=l,this.name=f,this.renderer=l.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(c,d),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(u){var l=0,f=0,c=[];this.vertexComponentCount=0;for(var d=0;d<u.length;d++){var v=u[d],p=v.name,g=o(v,"size",1),m=o(v,"type",a.FLOAT),x=m.enum,y=m.size,T=!!v.normalized;c.push({name:p,size:g,type:x,normalized:T,offset:f,enabled:!1,location:-1}),y===4?l+=g:l++,f+=g*y}this.vertexSize=f,this.vertexComponentCount=l,this.attributes=c},bind:function(u,l){return u===void 0&&(u=!1),l===void 0&&(l=!1),l&&this.pipeline.flush(),this.renderer.setProgram(this.program),u&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(u){u===void 0&&(u=!1);for(var l=this.gl,f=this.vertexSize,c=this.attributes,d=this.program,v=0;v<c.length;v++){var p=c[v],g=p.size,m=p.type,x=p.offset,y=p.enabled,T=p.location,C=!!p.normalized;if(u){var S=l.getAttribLocation(d,p.name);S>=0?(l.enableVertexAttribArray(S),l.vertexAttribPointer(S,g,m,C,f,x),p.enabled=!0,p.location=S):S!==-1&&l.disableVertexAttribArray(S)}else y?l.vertexAttribPointer(T,g,m,C,f,x):!y&&T>-1&&(l.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var u=this.gl,l=this.program,f=this.uniforms,c,d,v,p=u.getProgramParameter(l,u.ACTIVE_UNIFORMS);for(c=0;c<p;c++){var g=u.getActiveUniform(l,c);if(g){d=g.name,v=u.getUniformLocation(l,d),v!==null&&(f[d]={name:d,location:v,value1:null,value2:null,value3:null,value4:null});var m=d.indexOf("[");m>0&&(d=d.substr(0,m),f.hasOwnProperty(d)||(v=u.getUniformLocation(l,d),v!==null&&(f[d]={name:d,location:v,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(u){return this.uniforms.hasOwnProperty(u)},resetUniform:function(u){var l=this.uniforms[u];return l&&(l.value1=null,l.value2=null,l.value3=null,l.value4=null),this},setUniform1:function(u,l,f,c){var d=this.uniforms[l];return d?((c||d.value1!==f)&&(d.value1=f,this.renderer.setProgram(this.program),u.call(this.gl,d.location,f),this.pipeline.currentShader=this),this):this},setUniform2:function(u,l,f,c,d){var v=this.uniforms[l];return v?((d||v.value1!==f||v.value2!==c)&&(v.value1=f,v.value2=c,this.renderer.setProgram(this.program),u.call(this.gl,v.location,f,c),this.pipeline.currentShader=this),this):this},setUniform3:function(u,l,f,c,d,v){var p=this.uniforms[l];return p?((v||p.value1!==f||p.value2!==c||p.value3!==d)&&(p.value1=f,p.value2=c,p.value3=d,this.renderer.setProgram(this.program),u.call(this.gl,p.location,f,c,d),this.pipeline.currentShader=this),this):this},setUniform4:function(u,l,f,c,d,v,p){var g=this.uniforms[l];return g?((p||g.value1!==f||g.value2!==c||g.value3!==d||g.value4!==v)&&(g.value1=f,g.value2=c,g.value3=d,g.value4=v,this.renderer.setProgram(this.program),u.call(this.gl,g.location,f,c,d,v),this.pipeline.currentShader=this),this):this},set1f:function(u,l){return this.setUniform1(this.gl.uniform1f,u,l)},set2f:function(u,l,f){return this.setUniform2(this.gl.uniform2f,u,l,f)},set3f:function(u,l,f,c){return this.setUniform3(this.gl.uniform3f,u,l,f,c)},set4f:function(u,l,f,c,d){return this.setUniform4(this.gl.uniform4f,u,l,f,c,d)},set1fv:function(u,l){return this.setUniform1(this.gl.uniform1fv,u,l,!0)},set2fv:function(u,l){return this.setUniform1(this.gl.uniform2fv,u,l,!0)},set3fv:function(u,l){return this.setUniform1(this.gl.uniform3fv,u,l,!0)},set4fv:function(u,l){return this.setUniform1(this.gl.uniform4fv,u,l,!0)},set1iv:function(u,l){return this.setUniform1(this.gl.uniform1iv,u,l,!0)},set2iv:function(u,l){return this.setUniform1(this.gl.uniform2iv,u,l,!0)},set3iv:function(u,l){return this.setUniform1(this.gl.uniform3iv,u,l,!0)},set4iv:function(u,l){return this.setUniform1(this.gl.uniform4iv,u,l,!0)},set1i:function(u,l){return this.setUniform1(this.gl.uniform1i,u,l)},set2i:function(u,l,f){return this.setUniform2(this.gl.uniform2i,u,l,f)},set3i:function(u,l,f,c){return this.setUniform3(this.gl.uniform3i,u,l,f,c)},set4i:function(u,l,f,c,d){return this.setUniform4(this.gl.uniform4i,u,l,f,c,d)},setMatrix2fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix2fv,u,l,f,!0)},setMatrix3fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix3fv,u,l,f,!0)},setMatrix4fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix4fv,u,l,f,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(59),a=i(2),h=i(875),u=i(876),l=i(25),f=i(107),c=i(58),d=new n({Extends:c,initialize:function(p){p.fragShader=a(p,"fragShader",h),p.vertShader=a(p,"vertShader",u),p.attributes=a(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:f.UNSIGNED_BYTE,normalized:!0}]),c.call(this,p),this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(v,p,g,m,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var C=v+g,S=p+m,E=T.getX(v,p),P=T.getY(v,p),M=T.getX(v,S),R=T.getY(v,S),A=T.getX(C,S),O=T.getY(C,S),b=T.getX(C,p),w=T.getY(C,p),I=this.fillTint;this.batchQuad(E,P,M,R,A,O,b,w,I.TL,I.TR,I.BL,I.BR)},batchFillTriangle:function(v,p,g,m,x,y,T,C){this.renderer.pipelines.set(this);var S=this.calcMatrix;C&&C.multiply(T,S);var E=S.getX(v,p),P=S.getY(v,p),M=S.getX(g,m),R=S.getY(g,m),A=S.getX(x,y),O=S.getY(x,y),b=this.fillTint;this.batchTri(E,P,M,R,A,O,b.TL,b.TR,b.BL)},batchStrokeTriangle:function(v,p,g,m,x,y,T,C,S){var E=this.tempTriangle;E[0].x=v,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=m,E[1].width=T,E[2].x=x,E[2].y=y,E[2].width=T,E[3].x=v,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,C,S)},batchFillPath:function(v,p,g){this.renderer.pipelines.set(this);var m=this.calcMatrix;g&&g.multiply(p,m);for(var x=v.length,y=this.polygonCache,T,C,S=this.fillTint.TL,E=this.fillTint.TR,P=this.fillTint.BL,M=0;M<x;++M)C=v[M],y.push(C.x,C.y);T=o(y),x=T.length;for(var R=0;R<x;R+=3){var A=T[R+0]*2,O=T[R+1]*2,b=T[R+2]*2,w=y[A+0],I=y[A+1],Y=y[O+0],z=y[O+1],V=y[b+0],W=y[b+1],F=m.getX(w,I),L=m.getY(w,I),D=m.getX(Y,z),B=m.getY(Y,z),G=m.getX(V,W),N=m.getY(V,W);this.batchTri(F,L,D,B,G,N,S,E,P)}y.length=0},batchStrokePath:function(v,p,g,m,x){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=v.length-1,T=0;T<y;T++){var C=v[T],S=v[T+1];this.batchLine(C.x,C.y,S.x,S.y,C.width/2,S.width/2,p,T,!g&&T===y-1,m,x)}},batchLine:function(v,p,g,m,x,y,T,C,S,E,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(E,M);var R=g-v,A=m-p,O=Math.sqrt(R*R+A*A),b=x*(m-p)/O,w=x*(v-g)/O,I=y*(m-p)/O,Y=y*(v-g)/O,z=g-I,V=m-Y,W=v-b,F=p-w,L=g+I,D=m+Y,B=v+b,G=p+w,N=M.getX(z,V),X=M.getY(z,V),U=M.getX(W,F),H=M.getY(W,F),$=M.getX(L,D),Z=M.getY(L,D),J=M.getX(B,G),Q=M.getY(B,G),_=this.strokeTint,j=_.TL,tt=_.TR,lt=_.BL,rt=_.BR;if(this.batchQuad(J,Q,U,H,N,X,$,Z,j,tt,lt,rt),!(T<=2)){var et=this.prevQuad,q=this.firstQuad;C>0&&et[4]?this.batchQuad(J,Q,U,H,et[0],et[1],et[2],et[3],j,tt,lt,rt):(q[0]=J,q[1]=Q,q[2]=U,q[3]=H,q[4]=1),S&&q[4]?this.batchQuad(N,X,$,Z,q[0],q[1],q[2],q[3],j,tt,lt,rt):(et[0]=N,et[1]=X,et[2]=$,et[3]=Z,et[4]=1)}},batchVert:function(v,p,g){var m=this.vertexViewF32,x=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;m[++y]=v,m[++y]=p,x[++y]=g,this.vertexCount++},batchQuad:function(v,p,g,m,x,y,T,C,S,E,P,M){var R=!1;return this.shouldFlush(6)&&(this.flush(),R=!0),this.batchVert(v,p,S),this.batchVert(g,m,P),this.batchVert(x,y,M),this.batchVert(v,p,S),this.batchVert(x,y,M),this.batchVert(T,C,E),R},batchTri:function(v,p,g,m,x,y,T,C,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(v,p,T),this.batchVert(g,m,C),this.batchVert(x,y,S),E},destroy:function(){return c.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=i(877),h=i(108),u=i(3),l=i(58),f=10,c=new u,d=new n({Extends:h,initialize:function(p){f=p.game.renderer.config.maxLights;for(var g=o(p,"fragShader",a),m=[],x=1;x<=f;x++)m.push({name:"lights"+x,fragShader:g.replace("%LIGHT_COUNT%",x.toString())});p.shaders=m,h.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){l.prototype.boot.call(this);var v=this.gl,p=v.createTexture();v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,p),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(v,p){var g=v.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var m=g.getLights(p),x=m.length;if(x!==0){this.lightsActive=!0,this.setShader(this["lightShader"+x],!0);var y,T=this.renderer,C=T.height,S=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<x;y++){var E=m[y].light,P=E.color,M="uLights["+y+"].";S.transformPoint(E.x,E.y,c),this.set2f(M+"position",c.x-p.scrollX*E.scrollFactorX*p.zoom,C-(c.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(M+"color",P.r,P.g,P.b),this.set1f(M+"intensity",E.intensity),this.set1f(M+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(v){if(v!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(v){var g=-v,m=Math.cos(g),x=Math.sin(g);p[1]=x,p[3]=-x,p[0]=p[4]=m}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=v}},setTexture2D:function(v,p){var g=this.renderer;v===void 0&&(v=g.tempTextures[0]);var m=this.getNormalMap(p);g.isNewNormalMap(v,m)&&(this.flush(),g.setTextureZero(v),g.setNormalMap(m));var x=p?p.rotation:0;return this.setNormalMapRotation(x),this.currentUnit=0,0},setGameObject:function(v,p){p===void 0&&(p=v.frame);var g=this.renderer,m=p.glTexture,x=this.getNormalMap(v);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(m),g.setNormalMap(x)),this.setNormalMapRotation(v.rotation),this.currentUnit=0,0},getNormalMap:function(v){var p;return v?v.displayTexture?p=v.displayTexture.dataSource[v.displayFrame.sourceIndex]:v.texture?p=v.texture.dataSource[v.frame.sourceIndex]:v.tileset&&(Array.isArray(v.tileset)?p=v.tileset[0].image.dataSource[0]:p=v.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(v,p,g){this.lightsActive&&h.prototype.batchSprite.call(this,v,p,g)},batchTexture:function(v,p,g,m,x,y,T,C,S,E,P,M,R,A,O,b,w,I,Y,z,V,W,F,L,D,B,G,N,X,U,H,$){this.lightsActive&&h.prototype.batchTexture.call(this,v,p,g,m,x,y,T,C,S,E,P,M,R,A,O,b,w,I,Y,z,V,W,F,L,D,B,G,N,X,U,H,$)},batchTextureFrame:function(v,p,g,m,x,y,T){this.lightsActive&&h.prototype.batchTextureFrame.call(this,v,p,g,m,x,y,T)}});d.LIGHT_COUNT=f,e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=i(880),h=i(881),u=i(58),l=new n({Extends:u,initialize:function(c){c.vertShader=o(c,"vertShader",h),c.fragShader=o(c,"fragShader",a),c.attributes=o(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),u.call(this,c)},onRender:function(f,c){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",c.zoom)},batchPointLight:function(f,c,d,v,p,g,m,x,y,T,C,S){var E=f.color,P=f.intensity,M=f.radius,R=f.attenuation,A=E.r*P,O=E.g*P,b=E.b*P,w=c.alpha*f.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(d,v,C,S,M,R,A,O,b,w),this.batchLightVert(p,g,C,S,M,R,A,O,b,w),this.batchLightVert(m,x,C,S,M,R,A,O,b,w),this.batchLightVert(d,v,C,S,M,R,A,O,b,w),this.batchLightVert(m,x,C,S,M,R,A,O,b,w),this.batchLightVert(y,T,C,S,M,R,A,O,b,w)},batchLightVert:function(f,c,d,v,p,g,m,x,y,T){var C=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++S]=f,C[++S]=c,C[++S]=d,C[++S]=v,C[++S]=p,C[++S]=g,C[++S]=m,C[++S]=x,C[++S]=y,C[++S]=T,this.vertexCount++}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=i(108),h=new n({Extends:a,initialize:function(l){l.topology=5,l.batchSize=o(l,"batchSize",256),a.call(this,l)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=i(108),h=i(882),u=i(883),l=i(58),f=new n({Extends:a,initialize:function(d){d.fragShader=o(d,"fragShader",h),d.vertShader=o(d,"vertShader",u),d.forceZero=!0,a.call(this,d)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(884),o=i(35),a=i(0),h=i(198),u=i(885),l=i(886),f=i(2),c=i(887),d=i(382),v=i(58),p=new a({Extends:v,initialize:function(m){m.renderTarget=f(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=f(m,"vertShader",d),m.shaders=f(m,"shaders",[{name:"Copy",fragShader:l},{name:"AddBlend",fragShader:n},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:u}]),m.attributes=f(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,v.call(this,m),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var g=this.shaders,m=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(g,m,x,y,T){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),m?(C.viewport(0,0,m.width,m.height),C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture,0)):C.viewport(0,0,g.width,g.height),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(g,m,x,y,T,C){x===void 0&&(x=1),y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>m.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,m);else{var E=m.height-g.height;S.viewport(0,E,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),C){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(o.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),C&&this.renderer.setBlendMode(P),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,m,x,y,T,C,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),S&&(E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,m.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,x,y,T,C),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,g.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,m,x,y){x===void 0&&(x=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture,0)):T.viewport(0,0,g.width,g.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,m,x,y,T,C){y===void 0&&(y=1),T===void 0&&(T=!0),C===void 0&&(C=this.linearShader);var S=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,m.texture),x?(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture,0),S.viewport(0,0,x.width,x.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,m,x,y,T){this.blendFrames(g,m,x,y,T,this.addShader)},clearFrame:function(g,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,g.width,g.height),x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,y)},setUVs:function(g,m,x,y,T,C,S,E){var P=this.vertexViewF32;P[2]=g,P[3]=m,P[6]=x,P[7]=y,P[10]=T,P[11]=C,P[14]=g,P[15]=m,P[18]=T,P[19]=C,P[22]=S,P[23]=E},setTargetUVs:function(g,m){var x=m.height/g.height;x>.5?x=.5-(x-.5):x=.5+(.5-x),this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=p},function(e,r){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(38),a=i(2),h=function(u,l){var f=u.getContext("experimental-webgl"),c=a(l,"callback"),d=a(l,"type","image/png"),v=a(l,"encoder",.92),p=a(l,"x",0),g=a(l,"y",0),m=a(l,"getPixel",!1),x=a(l,"isFramebuffer",!1),y=x?a(l,"bufferWidth",1):f.drawingBufferWidth,T=x?a(l,"bufferHeight",1):f.drawingBufferHeight;if(m){var C=new Uint8Array(4),S=x?g:T-g;f.readPixels(p,S,1,1,f.RGBA,f.UNSIGNED_BYTE,C),c.call(null,new o(C[0],C[1],C[2],C[3]/255))}else{var E=a(l,"width",y),P=a(l,"height",T),M=E*P*4,R=new Uint8Array(M);f.readPixels(p,T-g-P,E,P,f.RGBA,f.UNSIGNED_BYTE,R);for(var A=n.createWebGL(this,E,P),O=A.getContext("2d"),b=O.getImageData(0,0,E,P),w=b.data,I=0;I<P;I++)for(var Y=0;Y<E;Y++){var z=((P-I-1)*E+Y)*4,V=(I*E+Y)*4;w[V+0]=R[z+0],w[V+1]=R[z+1],w[V+2]=R[z+2],w[V+3]=R[z+3]}O.putImageData(b,0,0);var W=new Image;W.onerror=function(){c.call(null),n.remove(A)},W.onload=function(){c.call(null,W),n.remove(A)},W.src=A.toDataURL(d,v)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(33),o=function(a){var h=a.config;if(!h.hideBanner){var u="WebGL";h.renderType===n.CANVAS?u="Canvas":h.renderType===n.HEADLESS&&(u="Headless");var l=h.audio,f=a.device.audio,c;if(f.webAudio&&!l.disableWebAudio?c="Web Audio":l.noAudio||!f.webAudio&&!f.audioData?c="No Audio":c="HTML5 Audio",a.device.browser.ie)window.console&&console.log("Phaser v"+n.VERSION+" / https://phaser.io");else{var d="",v=[d];if(Array.isArray(h.bannerBackgroundColor)){var p;h.bannerBackgroundColor.forEach(function(m){d=d.concat("%c "),v.push("background: "+m),p=m}),v[v.length-1]="color: "+h.bannerTextColor+"; background: "+p}else d=d.concat("%c "),v.push("color: "+h.bannerTextColor+"; background: "+h.bannerBackgroundColor);v.push("background: transparent"),h.gameTitle&&(d=d.concat(h.gameTitle),h.gameVersion&&(d=d.concat(" v"+h.gameVersion)),h.hidePhaser||(d=d.concat(" / ")));var g="";h.hidePhaser||(d=d.concat("Phaser v"+n.VERSION+g+" ("+u+" | "+c+")")),d=d.concat(" %c "+h.gameURL),v[0]=d,console.log.apply(console,v)}}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(6),a=i(1),h=i(386),u=new n({initialize:function(f,c){this.game=f,this.raf=new h,this.started=!1,this.running=!1,this.minFps=o(c,"min",5),this.targetFps=o(c,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=o(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=o(c,"deltaHistory",10),this.panicMax=o(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=o(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var l=window.performance.now();this.time=l,this.lastTime=l,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=Math.min(this._target,this.deltaHistory[f]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(l){if(this.started)return this;this.started=!0,this.running=!0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=l,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var l=window.performance.now();this.now=l;var f=l-this.lastTime;f<0&&(f=0),this.rawDelta=f;var c=this.deltaIndex,d=this.deltaHistory,v=this.deltaSmoothingMax,p=f,g=f;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=d[c],p=Math.min(p,this._min)),d[c]=p,this.deltaIndex++,this.deltaIndex>v&&(this.deltaIndex=0),g=0;for(var m=0;m<v;m++)g+=d[m];g/=v}this.delta=g,this.time+=this.rawDelta,l>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0),this.framesThisSecond++;var x=g/this._target;this.callback(l,g,x),this.lastTime=l,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(l){this.running||(l&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=a,this.raf=null,this.game=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1),a=new n({initialize:function(){this.isRunning=!1,this.callback=o,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var u=this;this.step=function l(){var f=window.performance.now();u.lastTime=u.tick,u.tick=f,u.callback(f),u.timeOutID=window.requestAnimationFrame(l)},this.stepTimeout=function l(){var f=Date.now(),c=Math.min(Math.max(u.target*2+u.tick-f,0),u.target);u.lastTime=u.tick,u.tick=f,u.callback(f),u.timeOutID=window.setTimeout(l,c)}},start:function(h,u,l){this.isRunning||(this.callback=h,this.isSetTimeOut=u,this.target=l,this.isRunning=!0,this.timeOutID=u?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=o}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(22),o=function(a){var h,u=a.events;if(document.hidden!==void 0)h="visibilitychange";else{var l=["webkit","moz","ms"];l.forEach(function(c){document[c+"Hidden"]!==void 0&&(document.hidden=function(){return document[c+"Hidden"]},h=c+"visibilitychange")})}var f=function(c){document.hidden||c.type==="pause"?u.emit(n.HIDDEN):u.emit(n.VISIBLE)};h&&document.addEventListener(h,f,!1),window.onblur=function(){u.emit(n.BLUR)},window.onfocus=function(){u.emit(n.FOCUS)},window.focus&&a.config.autoFocus&&window.focus()};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(389),o=i(31),a=i(6),h=function(u){var l=a(u,"data",[]),f=a(u,"canvas",null),c=a(u,"palette",n),d=a(u,"pixelWidth",1),v=a(u,"pixelHeight",d),p=a(u,"resizeCanvas",!0),g=a(u,"clearCanvas",!0),m=a(u,"preRender",null),x=a(u,"postRender",null),y=Math.floor(Math.abs(l[0].length*d)),T=Math.floor(Math.abs(l.length*v));f||(f=o.create2D(this,y,T),p=!1,g=!1),p&&(f.width=y,f.height=T);var C=f.getContext("2d");g&&C.clearRect(0,0,y,T),m&&m(f,C);for(var S=0;S<l.length;S++)for(var E=l[S],P=0;P<E.length;P++){var M=E[P];M!=="."&&M!==" "&&(C.fillStyle=c[M],C.fillRect(P*d,S*v,d,v))}return x&&x(f,C),f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(358),a=i(94),h=i(3),u=new n({Extends:a,initialize:function(f,c,d,v){a.call(this,"CubicBezierCurve"),Array.isArray(f)&&(v=new h(f[6],f[7]),d=new h(f[4],f[5]),c=new h(f[2],f[3]),f=new h(f[0],f[1])),this.p0=f,this.p1=c,this.p2=d,this.p3=v},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new h);var c=this.p0,d=this.p1,v=this.p2,p=this.p3;return f.set(o(l,c.x,d.x,v.x,p.x),o(l,c.y,d.y,v.y,p.y))},draw:function(l,f){f===void 0&&(f=32);var c=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var d=1;d<c.length;d++)l.lineTo(c[d].x,c[d].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});u.fromJSON=function(l){var f=l.points,c=new h(f[0],f[1]),d=new h(f[2],f[3]),v=new h(f[4],f[5]),p=new h(f[6],f[7]);return new u(c,d,v,p)},e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(94),a=i(36),h=i(6),u=i(196),l=i(3),f=new n({Extends:o,initialize:function(d,v,p,g,m,x,y,T){if(typeof d=="object"){var C=d;d=h(C,"x",0),v=h(C,"y",0),p=h(C,"xRadius",0),g=h(C,"yRadius",p),m=h(C,"startAngle",0),x=h(C,"endAngle",360),y=h(C,"clockwise",!1),T=h(C,"rotation",0)}else g===void 0&&(g=p),m===void 0&&(m=0),x===void 0&&(x=360),y===void 0&&(y=!1),T===void 0&&(T=0);o.call(this,"EllipseCurve"),this.p0=new l(d,v),this._xRadius=p,this._yRadius=g,this._startAngle=a(m),this._endAngle=a(x),this._clockwise=y,this._rotation=a(T)},getStartPoint:function(c){return c===void 0&&(c=new l),this.getPoint(0,c)},getResolution:function(c){return c*2},getPoint:function(c,d){d===void 0&&(d=new l);for(var v=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=v;for(;p>v;)p-=v;p<Number.EPSILON&&(g?p=0:p=v),this._clockwise&&!g&&(p===v?p=-v:p=p-v);var m=this._startAngle+c*p,x=this.p0.x+this._xRadius*Math.cos(m),y=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var T=Math.cos(this._rotation),C=Math.sin(this._rotation),S=x-this.p0.x,E=y-this.p0.y;x=S*T-E*C+this.p0.x,y=S*C+E*T+this.p0.y}return d.set(x,y)},setXRadius:function(c){return this.xRadius=c,this},setYRadius:function(c){return this.yRadius=c,this},setWidth:function(c){return this.xRadius=c/2,this},setHeight:function(c){return this.yRadius=c/2,this},setStartAngle:function(c){return this.startAngle=c,this},setEndAngle:function(c){return this.endAngle=c,this},setClockwise:function(c){return this.clockwise=c,this},setRotation:function(c){return this.rotation=c,this},x:{get:function(){return this.p0.x},set:function(c){this.p0.x=c}},y:{get:function(){return this.p0.y},set:function(c){this.p0.y=c}},xRadius:{get:function(){return this._xRadius},set:function(c){this._xRadius=c}},yRadius:{get:function(){return this._yRadius},set:function(c){this._yRadius=c}},startAngle:{get:function(){return u(this._startAngle)},set:function(c){this._startAngle=a(c)}},endAngle:{get:function(){return u(this._endAngle)},set:function(c){this._endAngle=a(c)}},clockwise:{get:function(){return this._clockwise},set:function(c){this._clockwise=c}},angle:{get:function(){return u(this._rotation)},set:function(c){this._rotation=a(c)}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:u(this._startAngle),endAngle:u(this._endAngle),clockwise:this._clockwise,rotation:u(this._rotation)}}});f.fromJSON=function(c){return new f(c)},e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(94),a=i(199),h=i(10),u=i(3),l=new n({Extends:o,initialize:function(c,d){o.call(this,"LineCurve"),Array.isArray(c)&&(d=new u(c[2],c[3]),c=new u(c[0],c[1])),this.p0=c,this.p1=d,this.arcLengthDivisions=1},getBounds:function(f){return f===void 0&&(f=new h),a([this.p0,this.p1],f)},getStartPoint:function(f){return f===void 0&&(f=new u),f.copy(this.p0)},getResolution:function(f){return f===void 0&&(f=1),f},getPoint:function(f,c){return c===void 0&&(c=new u),f===1?c.copy(this.p1):(c.copy(this.p1).subtract(this.p0).scale(f).add(this.p0),c)},getPointAt:function(f,c){return this.getPoint(f,c)},getTangent:function(f,c){return c===void 0&&(c=new u),c.copy(this.p1).subtract(this.p0).normalize(),c},getUtoTmapping:function(f,c,d){var v;if(c){var p=this.getLengths(d),g=p[p.length-1],m=Math.min(c,g);v=m/g}else v=f;return v},draw:function(f){return f.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),f},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});l.fromJSON=function(f){var c=f.points,d=new u(c[0],c[1]),v=new u(c[2],c[3]);return new l(d,v)},e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(3),a=new n({initialize:function(u,l){this.active=!1,this.p0=new o(u,l)},getPoint:function(h,u){return u===void 0&&(u=new o),u.copy(this.p0)},getPointAt:function(h,u){return this.getPoint(h,u)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(94),a=i(359),h=i(3),u=new n({Extends:o,initialize:function(f,c,d){o.call(this,"QuadraticBezier"),Array.isArray(f)&&(d=new h(f[4],f[5]),c=new h(f[2],f[3]),f=new h(f[0],f[1])),this.p0=f,this.p1=c,this.p2=d},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new h);var c=this.p0,d=this.p1,v=this.p2;return f.set(a(l,c.x,d.x,v.x),a(l,c.y,d.y,v.y))},draw:function(l,f){f===void 0&&(f=32);var c=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var d=1;d<c.length;d++)l.lineTo(c[d].x,c[d].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});u.fromJSON=function(l){var f=l.points,c=new h(f[0],f[1]),d=new h(f[2],f[3]),v=new h(f[4],f[5]);return new u(c,d,v)},e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(194),o=i(0),a=i(94),h=i(3),u=new o({Extends:a,initialize:function(f){f===void 0&&(f=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(f)},addPoints:function(l){for(var f=0;f<l.length;f++){var c=new h;typeof l[f]=="number"?(c.x=l[f],c.y=l[f+1],f++):Array.isArray(l[f])?(c.x=l[f][0],c.y=l[f][1]):(c.x=l[f].x,c.y=l[f].y),this.points.push(c)}return this},addPoint:function(l,f){var c=new h(l,f);return this.points.push(c),c},getStartPoint:function(l){return l===void 0&&(l=new h),l.copy(this.points[0])},getResolution:function(l){return l*this.points.length},getPoint:function(l,f){f===void 0&&(f=new h);var c=this.points,d=(c.length-1)*l,v=Math.floor(d),p=d-v,g=c[v===0?v:v-1],m=c[v],x=c[v>c.length-2?c.length-1:v+1],y=c[v>c.length-3?c.length-1:v+2];return f.set(n(p,g.x,m.x,x.x,y.x),n(p,g.y,m.y,x.y,y.y))},toJSON:function(){for(var l=[],f=0;f<this.points.length;f++)l.push(this.points[f].x),l.push(this.points[f].y);return{type:this.type,points:l}}});u.fromJSON=function(l){return new u(l.points)},e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f){(!u||u==="")&&(u=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!l||l==="")&&(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),f===void 0&&(f=null),this.key=h,this.fragmentSrc=u,this.vertexSrc=l,this.uniforms=f}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38);n.ColorSpectrum=i(909),n.ColorToRGBA=i(910),n.ComponentToHex=i(398),n.GetColor=i(103),n.GetColor32=i(328),n.HexStringToColor=i(327),n.HSLToColor=i(911),n.HSVColorWheel=i(912),n.HSVToRGB=i(188),n.HueToComponent=i(399),n.IntegerToColor=i(189),n.IntegerToRGB=i(330),n.Interpolate=i(913),n.ObjectToColor=i(331),n.RandomRGB=i(914),n.RGBStringToColor=i(332),n.RGBToHSV=i(329),n.RGBToString=i(915),n.ValueToColor=i(187),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.toString(16);return o.length===1?"0"+o:o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<.16666666666666666?n+(o-n)*6*a:a<.5?o:a<.6666666666666666?n+(o-n)*(.6666666666666666-a)*6:n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(105),o=function(a){if(document.readyState==="complete"||document.readyState==="interactive"){a();return}var h=function(){document.removeEventListener("deviceready",h,!0),document.removeEventListener("DOMContentLoaded",h,!0),window.removeEventListener("load",h,!0),a()};document.body?n.cordova?document.addEventListener("deviceready",h,!1):(document.addEventListener("DOMContentLoaded",h,!0),window.addEventListener("load",h,!0)):window.setTimeout(h,20)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){if(!n)return window.innerHeight;var o=Math.abs(window.orientation),a={w:0,h:0},h=document.createElement("div");return h.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(h),a.w=o===90?h.offsetHeight:window.innerWidth,a.h=o===90?window.innerWidth:h.offsetHeight,document.documentElement.removeChild(h),h=null,Math.abs(window.orientation)!==90?a.h:a.w};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(201),o=function(a,h){var u=window.screen,l=u?u.orientation||u.mozOrientation||u.msOrientation:!1;if(l&&typeof l.type=="string")return l.type;if(typeof l=="string")return l;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return n.ORIENTATION.LANDSCAPE}else return h>a?n.ORIENTATION.PORTRAIT:n.ORIENTATION.LANDSCAPE};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o;return n!==""&&(typeof n=="string"?o=document.getElementById(n):n&&n.nodeType===1&&(o=n)),o||(o=document.body),o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o="";try{if(window.DOMParser){var a=new DOMParser;o=a.parseFromString(n,"text/xml")}else o=new ActiveXObject("Microsoft.XMLDOM"),o.loadXML(n)}catch{o=null}return!o||!o.documentElement||o.getElementsByTagName("parsererror").length?null:o};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(203),a=i(9),h=i(51),u=i(22),l=i(410),f=i(411),c=i(412),d=i(413),v=i(25),p=i(177),g=new n({initialize:function(x,y){this.game=x,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new l(this):null,this.mouse=y.inputMouse?new f(this):null,this.touch=y.inputTouch?new d(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var C=new c(this,T);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],x.events.once(u.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(h.MANAGER_BOOT),this.game.events.on(u.PRE_RENDER,this.preRender,this),this.game.events.once(u.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(h.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(h.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(h.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input&&C.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var y=0;y<m;y++){var T=this.pointers.length,C=new c(this,T);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,x.push(C)}return x},updateInputPlugins:function(m,x){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input){var S=C.sys.input.update(m,x);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(!E.active){E.touchstart(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(o.TOUCH_START,y)},onTouchMove:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchmove(C,m),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(o.TOUCH_MOVE,y)},onTouchEnd:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchend(C,m),y.push(E);break}}this.updateInputPlugins(o.TOUCH_END,y)},onTouchCancel:function(m){for(var x=this.pointers,y=[],T=0;T<m.changedTouches.length;T++)for(var C=m.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=x[S];if(E.active&&E.identifier===C.identifier){E.touchcancel(C,m),y.push(E);break}}this.updateInputPlugins(o.TOUCH_CANCEL,y)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(o.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(o.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(o.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(o.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(h.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var y=m.input;if(!y||!y.enabled||!y.alwaysEnabled&&!m.willRender(x))return!1;var T=!0,C=m.parentContainer;if(C)do{if(!C.willRender(x)){T=!1;break}C=C.parentContainer}while(C);return T},hitTest:function(m,x,y,T){T===void 0&&(T=this._tempHitTest);var C=this._tempPoint,S=y.scrollX,E=y.scrollY;T.length=0;var P=m.x,M=m.y;y.getWorldPoint(P,M,C),m.worldX=C.x,m.worldY=C.y;for(var R={x:0,y:0},A=this._tempMatrix,O=this._tempMatrix2,b=0;b<x.length;b++){var w=x[b];if(this.inputCandidate(w,y)){var I=C.x+S*w.scrollFactorX-S,Y=C.y+E*w.scrollFactorY-E;w.parentContainer?(w.getWorldTransformMatrix(A,O),A.applyInverse(I,Y,R)):p(I,Y,w.x,w.y,w.rotation,w.scaleX,w.scaleY,R),this.pointWithinHitArea(w,R.x,R.y)&&T.push(w)}}return T},pointWithinHitArea:function(m,x,y){x+=m.displayOriginX,y+=m.displayOriginY;var T=m.input;return T&&T.hitAreaCallback(T.hitArea,x,y,m)?(T.localX=x,T.localY=y,!0):!1},pointWithinInteractiveObject:function(m,x,y){return m.hitArea?(x+=m.gameObject.displayOriginX,y+=m.gameObject.displayOriginY,m.localX=x,m.localY=y,m.hitAreaCallback(m.hitArea,x,y,m)):!1},transformPointer:function(m,x,y,T){var C=m.position,S=m.prevPosition;S.x=C.x,S.y=C.y;var E=this.scaleManager.transformX(x),P=this.scaleManager.transformY(y),M=m.smoothFactor;!T||M===0?(C.x=E,C.y=P):(C.x=E*M+S.x*(1-M),C.y=P*M+S.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(u.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),o=i(0),a=i(22),h=i(51),u=i(143),l=i(1),f=new o({initialize:function(d){this.manager=d,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=l,this.onKeyUp=l,d.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputKeyboard,this.target=c.inputKeyboardEventTarget,this.addCapture(c.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var c=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(h.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!c.enabled||!c.manager)){c.queue.push(v),c.manager.events.emit(h.MANAGER_PROCESS);var p=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;c.preventDefault&&!p&&c.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var d=this.target;d&&(d.addEventListener("keydown",this.onKeyDown,!1),d.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var c=this.target;c.removeEventListener("keydown",this.onKeyDown,!1),c.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var d=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=u[p.trim().toUpperCase()]),d.indexOf(p)===-1&&d.push(p)}this.preventDefault=d.length>0},removeCapture:function(c){typeof c=="string"&&(c=c.split(",")),Array.isArray(c)||(c=[c]);for(var d=this.captures,v=0;v<c.length;v++){var p=c[v];typeof p=="string"&&(p=u[p.toUpperCase()]),n(d,p)}this.preventDefault=d.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(191),a=i(51),h=i(1),u=new n({initialize:function(f){this.manager=f,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,f.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputMouse,this.target=l.inputMouseEventTarget,this.passive=l.inputMousePassive,this.preventDefaultDown=l.inputMousePreventDefaultDown,this.preventDefaultUp=l.inputMousePreventDefaultUp,this.preventDefaultMove=l.inputMousePreventDefaultMove,this.preventDefaultWheel=l.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},requestPointerLock:function(){if(o.pointerLock){var l=this.target;l.requestPointerLock=l.requestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock()}},releasePointerLock:function(){o.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var l=this.target;if(l){var f=this,c=this.manager,d=c.canvas,v=window&&window.focus&&c.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&(c.onMouseMove(g),f.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){v&&window.focus(),!g.defaultPrevented&&f.enabled&&c&&c.enabled&&(c.onMouseDown(g),f.preventDefaultDown&&g.target===d&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&g.target!==d&&c.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&(c.onMouseUp(g),f.preventDefaultUp&&g.target===d&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&g.target!==d&&c.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&c.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&c.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&f.enabled&&c&&c.enabled&&c.onMouseWheel(g),f.preventDefaultWheel&&g.target===d&&g.preventDefault()};var p={passive:!0};if(l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),l.addEventListener("mouseover",this.onMouseOver,p),l.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?l.addEventListener("wheel",this.onMouseWheel,{passive:!1}):l.addEventListener("wheel",this.onMouseWheel,p),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}o.pointerLock&&(this.pointerLockChange=function(g){var m=f.target;f.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,c.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("mousemove",this.onMouseMove),l.removeEventListener("mousedown",this.onMouseDown),l.removeEventListener("mouseup",this.onMouseUp),l.removeEventListener("mouseover",this.onMouseOver),l.removeEventListener("mouseout",this.onMouseOut),window&&(l=this.isTop?window.top:window,l.removeEventListener("mousedown",this.onMouseDownWindow),l.removeEventListener("mouseup",this.onMouseUpWindow)),o.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(349),o=i(0),a=i(50),h=i(124),u=i(360),l=i(3),f=i(105),c=new o({initialize:function(v,p){this.manager=v,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new l,this.prevPosition=new l,this.midPoint=new l(-1,-1),this.velocity=new l,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(d){var v=d.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(d,v){return d.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var d=this.position.x,v=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(d===p&&v===g)){var m=u(this.motionFactor,p,d),x=u(this.motionFactor,g,v);h(m,d,.1)&&(m=d),h(x,v,.1)&&(x=v),this.midPoint.set(m,x);var y=d-m,T=v-x;this.velocity.set(y,T),this.angle=n(m,x,d,v),this.distance=Math.sqrt(y*y+T*T)}},up:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=d.timeStamp,this.wasTouch=!1)},down:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),f.macOS&&d.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=d.timeStamp),this.wasTouch=!1},move:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.locked&&(this.movementX=d.movementX||d.mozMovementX||d.webkitMovementX||0,this.movementY=d.movementY||d.mozMovementY||d.webkitMovementY||0),this.moveTime=d.timeStamp,this.wasTouch=!1},wheel:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.deltaX=d.deltaX,this.deltaY=d.deltaY,this.deltaZ=d.deltaZ,this.wasTouch=!1},touchstart:function(d,v){d.pointerId&&(this.pointerId=d.pointerId),this.identifier=d.identifier,this.target=d.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(d,v){this.event=v,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(d,v){this.buttons=0,this.event=v,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(d,v){this.buttons=0,this.event=v,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?n(this.downX,this.downY,this.x,this.y):n(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(d,v){d===void 0&&(d=10),v===void 0&&(v=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,m=this.position.x,x=this.position.y,y=0;y<d;y++){var T=1/d*y;v[y]={x:u(T,p,m),y:u(T,g,x)}}return v},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(51),a=i(1),h=new n({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.onTouchOver=a,this.onTouchOut=a,l.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputTouch,this.target=u.inputTouchEventTarget,this.capture=u.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),u.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),this},startListeners:function(){var u=this,l=this.manager.canvas,f=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){f&&window.focus(),!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchStart(p),u.capture&&p.cancelable&&p.target===l&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&p.target!==l&&u.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchMove(p),u.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchEnd(p),u.capture&&p.cancelable&&p.target===l&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&p.target!==l&&u.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchCancel(p),u.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.setCanvasOut(p)};var c=this.target;if(c){var d={passive:!0},v={passive:!1};c.addEventListener("touchstart",this.onTouchStart,this.capture?v:d),c.addEventListener("touchmove",this.onTouchMove,this.capture?v:d),c.addEventListener("touchend",this.onTouchEnd,this.capture?v:d),c.addEventListener("touchcancel",this.onTouchCancel,this.capture?v:d),c.addEventListener("touchover",this.onTouchOver,this.capture?v:d),c.addEventListener("touchout",this.onTouchOut,this.capture?v:d),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v)),this.enabled=!0}},stopListeners:function(){var u=this.target;u.removeEventListener("touchstart",this.onTouchStart),u.removeEventListener("touchmove",this.onTouchMove),u.removeEventListener("touchend",this.onTouchEnd),u.removeEventListener("touchcancel",this.onTouchCancel),u.removeEventListener("touchover",this.onTouchOver),u.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(22),a=i(9),h=i(8),u=i(16),l=i(5),f=i(2),c=i(24),d=i(93),v=new n({Extends:a,initialize:function(g){a.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(o.BOOT,this.boot,this)},boot:function(){var p,g,m,x,y,T,C,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],m=f(g,"key",null),x=f(g,"plugin",null),y=f(g,"start",!1),T=f(g,"mapping",null),C=f(g,"data",null),m&&(x?this.install(m,x,y,T,C):console.warn("Missing `plugin` for key: "+m));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],m=f(g,"key",null),x=f(g,"plugin",null),T=f(g,"mapping",null),m&&(x?this.installScenePlugin(m,x,T):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(o.DESTROY,this.destroy,this)},addToScene:function(p,g,m){var x,y,T,C=this.game,S=p.scene,E=p.settings.map,P=p.settings.isBooted;for(x=0;x<g.length;x++)y=g[x],C[y]?(p[y]=C[y],E.hasOwnProperty(y)&&(S[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(S[E[y]]=C);for(var M=0;M<m.length;M++)for(T=m[M],x=0;x<T.length;x++)if(y=T[x],!!c.hasCore(y)){var R=c.getCore(y),A=R.mapping,O=new R.plugin(S,this,A);p[A]=O,R.custom?S[A]=O:E.hasOwnProperty(A)&&(S[E[A]]=O),P&&O.boot()}for(T=this.plugins,x=0;x<T.length;x++){var b=T[x];b.mapping&&(S[b.mapping]=b.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,m,x,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!c.hasCore(p))c.register(p,g,m,!0),this.scenePlugins.push(p);else if(!y&&c.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(x){var T=new g(x,this,p);x.sys[p]=T,m&&m!==""&&(x[m]=T),T.boot()}},install:function(p,g,m,x,y){if(m===void 0&&(m=!1),x===void 0&&(x=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(c.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(x!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:m,mapping:x,data:y});else if(c.registerCustom(p,g,x,y),m)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,m=0;m<g.length;m++){var x=g[m];if(x.key===p)return m}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var m=this.getEntry(g);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,g)),m?m.plugin:null},createEntry:function(p,g){var m=c.getCustom(p);if(m){var x=new m.plugin(this);m={key:g,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var m=this.getEntry(p);if(m)return m.plugin;var x=this.getClass(p);return x&&g?(m=this.createEntry(p,p),m?m.plugin:null):x||null},getClass:function(p){return c.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&d(this.plugins,g),c.removeCustom(p)},removeScenePlugin:function(p){d(this.scenePlugins,p),c.remove(p)},registerGameObject:function(p,g,m){return g&&l.register(p,g),m&&u.register(p,m),this},removeGameObject:function(p,g,m){return g===void 0&&(g=!0),m===void 0&&(m=!0),g&&l.remove(p),m&&u.remove(p),this},registerFileType:function(p,g,m){h.register(p,g),m&&m.sys.load&&(m.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(201),o=i(0),a=i(9),h=i(104),u=i(22),l=i(401),f=i(407),c=i(402),d=i(1),v=i(10),p=i(416),g=i(76),m=i(3),x=new o({Extends:a,initialize:function(T){a.call(this),this.game=T,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=n.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=n.CENTER.NO_CENTER,this.orientation=n.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(u.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==n.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===n.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(u.PRE_STEP,this.step,this),y.events.once(u.READY,this.refresh,this),y.events.once(u.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,S=y.scaleMode,E=y.zoom,P=y.autoRound;if(typeof T=="string"){var M=this.parentSize.width;M===0&&(M=window.innerWidth);var R=parseInt(T,10)/100;T=Math.floor(M*R)}if(typeof C=="string"){var A=this.parentSize.height;A===0&&(A=window.innerHeight);var O=parseInt(C,10)/100;C=Math.floor(A*O)}this.scaleMode=S,this.autoRound=P,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,P&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),E===n.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,C),this.orientation=c(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=f(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==n.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=f(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=l(!0));var C=T.width,S=T.height;return y.width!==C||y.height!==S?(y.setSize(C,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(y,T){var C=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,P=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,R=y*C,A=T*C;return S&&(R=Math.floor(R),A=Math.floor(A)),(R!==y||A!==T)&&(M.width=R+"px",M.height=A+"px"),this.refresh(E,P)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var S=this.canvas.style,E=C.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=c(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(h.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,S,E,P=this.zoom,M=this.autoRound;this.scaleMode===n.SCALE_MODE.NONE?(this.displaySize.setSize(T*P,C*P),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(y.width=S+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===n.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),y.width=S+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==n.CENTER.NO_CENTER){var T=this.canvas,C=T.style,S=T.getBoundingClientRect(),E=S.width,P=S.height,M=Math.floor((this.parentSize.width-E)/2),R=Math.floor((this.parentSize.height-P)/2);y===n.CENTER.CENTER_HORIZONTALLY?R=0:y===n.CENTER.CENTER_VERTICALLY&&(M=0),C.marginLeft=M+"px",C.marginTop=R+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(h.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var C=["webkit","moz",""];C.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){this.parent&&(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===n.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===n.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(76),h=i(3),u=new o({initialize:function(f,c,d,v){f===void 0&&(f=0),c===void 0&&(c=f),d===void 0&&(d=0),v===void 0&&(v=null),this._width=f,this._height=c,this._parent=v,this.aspectMode=d,this.aspectRatio=c===0?1:f/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(l){return l===void 0&&(l=0),this.aspectMode=l,this.setSize(this._width,this._height)},setSnap:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.snapTo.set(l,f),this.setSize(this._width,this._height)},setParent:function(l){return this._parent=l,this.setSize(this._width,this._height)},setMin:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.minWidth=n(l,0,this.maxWidth),this.minHeight=n(f,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(l,f){return l===void 0&&(l=Number.MAX_VALUE),f===void 0&&(f=l),this.maxWidth=n(l,this.minWidth,Number.MAX_VALUE),this.maxHeight=n(f,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(l,f){switch(l===void 0&&(l=0),f===void 0&&(f=l),this.aspectMode){case u.NONE:this._width=this.getNewWidth(a(l,this.snapTo.x)),this._height=this.getNewHeight(a(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case u.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(l,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case u.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(f,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case u.FIT:this.constrain(l,f,!0);break;case u.ENVELOP:this.constrain(l,f,!1);break}return this},setAspectRatio:function(l){return this.aspectRatio=l,this.setSize(this._width,this._height)},resize:function(l,f){return this._width=this.getNewWidth(a(l,this.snapTo.x)),this._height=this.getNewHeight(a(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(l,f){return f===void 0&&(f=!0),l=n(l,this.minWidth,this.maxWidth),f&&this._parent&&l>this._parent.width&&(l=Math.max(this.minWidth,this._parent.width)),l},getNewHeight:function(l,f){return f===void 0&&(f=!0),l=n(l,this.minHeight,this.maxHeight),f&&this._parent&&l>this._parent.height&&(l=Math.max(this.minHeight,this._parent.height)),l},constrain:function(l,f,c){l===void 0&&(l=0),f===void 0&&(f=l),c===void 0&&(c=!0),l=this.getNewWidth(l),f=this.getNewHeight(f);var d=this.snapTo,v=f===0?1:l/f;return c&&this.aspectRatio>v||!c&&this.aspectRatio<v?(l=a(l,d.x),f=l/this.aspectRatio,d.y>0&&(f=a(f,d.y),l=f*this.aspectRatio)):(c&&this.aspectRatio<v||!c&&this.aspectRatio>v)&&(f=a(f,d.y),l=f*this.aspectRatio,d.x>0&&(l=a(l,d.x),f=l*(1/this.aspectRatio))),this._width=l,this._height=f,this},fitTo:function(l,f){return this.constrain(l,f,!0)},envelop:function(l,f){return this.constrain(l,f,!1)},setWidth:function(l){return this.setSize(l,this._height)},setHeight:function(l){return this.setSize(this._width,l)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(l){l&&l.style&&(l.style.width=this._width+"px",l.style.height=this._height+"px")},copy:function(l){return l.setAspectMode(this.aspectMode),l.aspectRatio=this.aspectRatio,l.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(l){this.setSize(l,this._height)}},height:{get:function(){return this._height},set:function(l){this.setSize(this._width,l)}}});u.NONE=0,u.WIDTH_CONTROLS_HEIGHT=1,u.HEIGHT_CONTROLS_WIDTH=2,u.FIT=3,u.ENVELOP=4,e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(144),a=i(20),h=i(22),u=i(6),l=i(95),f=i(1),c=i(418),d=i(204),v=new n({initialize:function(g,m){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)this._pending.push({key:"default",scene:m[x],autoStart:x===0,data:{}})}g.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,m,x;for(p=0;p<this._pending.length;p++){g=this._pending[p],m=g.key,x=g.scene;var y;x instanceof c?y=this.createSceneFromInstance(m,x):typeof x=="object"?y=this.createSceneFromObject(m,x):typeof x=="function"&&(y=this.createSceneFromFunction(m,x)),m=y.sys.settings.key,this.keys[m]=y,this.scenes.push(y),this._data[m]&&(y.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var m,x;if(p){for(m=0;m<p;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0;return}for(m=0;m<this._queue.length;m++)x=this._queue[m],this[x.op](x.keyA,x.keyB);this._queue.length=0}},add:function(p,g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:m,data:x}),this.isBooted||(this._data[p]={data:x}),null;p=this.getKey(p,g);var y;return g instanceof c?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=x,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(m||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var m=this.scenes.indexOf(g),x=g.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,m=g.settings;g.sceneUpdate=f,p.init&&(p.init.call(p,m.data),m.status=o.INIT,m.isTransition&&g.events.emit(a.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var x;g.load&&(x=g.load,x.reset()),x&&p.preload?(p.preload.call(p),x.list.size===0?this.create(p):(m.status=o.LOADING,x.once(l.COMPLETE,this.loadComplete,this),x.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>o.START&&x.settings.status<=o.RUNNING&&x.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var m=this.scenes[g].sys;m.settings.visible&&m.settings.status>=o.LOADING&&m.settings.status<o.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,m=g.settings;p.create&&(m.status=o.CREATING,p.create.call(p,m.data),m.status===o.DESTROYED)||(m.isTransition&&g.events.emit(a.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(g.sceneUpdate=p.update),m.status=o.RUNNING,g.events.emit(a.CREATE,p))},createSceneFromFunction:function(p,g){var m=new g;if(m instanceof c){var x=m.sys.settings.key;if(x!==""&&(p=x),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new d(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,g){var m=g.sys.settings.key;return m===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var m=new c(g),x=m.sys.settings.key;x!==""?p=x:m.sys.settings.key=p,m.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var C=u(g,y[T],null);C&&(m[y[T]]=C)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(g.extend.hasOwnProperty(S)){var E=g.extend[S];S==="data"&&m.hasOwnProperty("data")&&typeof E=="object"?m.data.merge(E):S!=="sys"&&(m[S]=E)}}return m},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof c?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var m=[],x=this.scenes,y=0;y<x.length;y++){var T=x[y];T&&(!p||p&&T.sys.isActive())&&m.push(T)}return g?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var m=this.getScene(p);return m&&m.sys.pause(g),this},resume:function(p,g){var m=this.getScene(p);return m&&m.sys.resume(g),this},sleep:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(g),this},wake:function(p,g){var m=this.getScene(p);return m&&m.sys.wake(g),this},run:function(p,g){var m=this.getScene(p);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===p){this.queueOp("start",p,g);break}return this}m.sys.isSleeping()?m.sys.wake(g):m.sys.isPaused()?m.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var m=this.getScene(p);if(m){var x=m.sys;if(x.isActive()||x.isPaused())x.shutdown(),x.sceneUpdate=f,x.start(g);else{x.sceneUpdate=f,x.start(g);var y;if(x.load&&(y=x.load),y&&x.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:x.settings.pack})))return x.settings.status=o.LOADING,y.once(l.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(m)}return this},stop:function(p,g){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.shutdown(g),this},switch:function(p,g){var m=this.getScene(p),x=this.getScene(g);return m&&x&&m!==x&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var m=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var m=g-1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var m=g+1,x=this.getScene(p),y=this.getAt(m);this.scenes[g]=y,this.scenes[m]=x}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==-1&&x!==-1){var y=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(y):this.scenes.splice(m,0,y)}}return this},queueOp:function(p,g,m){return this._queue.push({op:p,keyA:g,keyB:m}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var m=this.getIndex(p),x=this.getIndex(g);if(m!==x&&m!==-1&&x!==-1){var y=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,y=x.settings.visible&&(x.settings.status===o.RUNNING||x.settings.status===o.PAUSED)?"[*] ":"[-] ";y+=x.settings.key+" ("+g[x.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=f,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(204),a=new n({initialize:function(u){this.sys=new o(this,u),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=i(205),a=function(h){var u=h.game.config.defaultPhysicsSystem,l=n(h.settings,"physics",!1);if(!(!u&&!l)){var f=[];if(u&&f.push(o(u+"Physics")),l)for(var c in l)c=o(c.concat("Physics")),f.indexOf(c)===-1&&f.push(c);return f}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(a){var h=a.plugins.getDefaultScenePlugins(),u=n(a.settings,"plugins",!1);return Array.isArray(u)?u:h||[]};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(144),o=i(6),a=i(127),h=i(978),u={create:function(l){return typeof l=="string"?l={key:l}:l===void 0&&(l={}),{status:n.PENDING,key:o(l,"key",""),active:o(l,"active",!1),visible:o(l,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:o(l,"pack",!1),cameras:o(l,"cameras",null),map:o(l,"map",a(h,o(l,"mapAdd",{}))),physics:o(l,"physics",{}),loader:o(l,"loader",{}),plugins:o(l,"plugins",!1),input:o(l,"input",{})}}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(423),a=i(0),h=i(38),u=i(33),l=i(9),f=i(106),c=i(22),d=i(388),v=i(6),p=i(425),g=i(206),m=new a({Extends:l,initialize:function(y){l.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=n.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(f.LOAD,this.updatePending,this),this.on(f.ERROR,this.updatePending,this);var x=this.game.config;this.addBase64("__DEFAULT",x.defaultImage),this.addBase64("__MISSING",x.missingImage),this.addBase64("__WHITE",x.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(f.LOAD),this.off(f.ERROR),this.emit(f.READY))},checkKey:function(x){return this.exists(x)?(console.error("Texture key already in use: "+x),!1):!0},remove:function(x){if(typeof x=="string")if(this.exists(x))x=this.get(x);else return console.warn("No texture found matching key: "+x),this;return this.list.hasOwnProperty(x.key)&&(x.destroy(),this.emit(f.REMOVE,x.key)),this},removeKey:function(x){return this.list.hasOwnProperty(x)&&delete this.list[x],this},addBase64:function(x,y){if(this.checkKey(x)){var T=this,C=new Image;C.onerror=function(){T.emit(f.ERROR,x)},C.onload=function(){var S=T.create(x,C);p.Image(S,0),T.emit(f.ADD,x,S),T.emit(f.LOAD,x,S)},C.src=y}return this},getBase64:function(x,y,T,C){T===void 0&&(T="image/png"),C===void 0&&(C=.92);var S="",E=this.getFrame(x,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var P=E.canvasData,M=n.create2D(this,P.width,P.height),R=M.getContext("2d");R.drawImage(E.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),S=M.toDataURL(T,C),n.remove(M)}return S},addImage:function(x,y,T){var C=null;return this.checkKey(x)&&(C=this.create(x,y),p.Image(C,0),T&&C.setDataSource(T),this.emit(f.ADD,x,C)),C},addGLTexture:function(x,y,T,C){var S=null;return this.checkKey(x)&&(T===void 0&&(T=y.width),C===void 0&&(C=y.height),S=this.create(x,y,T,C),S.add("__BASE",0,0,0,T,C),this.emit(f.ADD,x,S)),S},addRenderTexture:function(x,y){var T=null;return this.checkKey(x)&&(T=this.create(x,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(f.ADD,x,T)),T},generate:function(x,y){if(this.checkKey(x)){var T=n.create(this,1,1);return y.canvas=T,d(y),this.addCanvas(x,T)}else return null},createCanvas:function(x,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(x)){var C=n.create(this,y,T,u.CANVAS,!0);return this.addCanvas(x,C)}return null},addCanvas:function(x,y,T){T===void 0&&(T=!1);var C=null;return T?C=new o(this,x,y,y.width,y.height):this.checkKey(x)&&(C=new o(this,x,y,y.width,y.height),this.list[x]=C,this.emit(f.ADD,x,C)),C},addAtlas:function(x,y,T,C){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(x,y,T,C):this.addAtlasJSONHash(x,y,T,C)},addAtlasJSONArray:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=T.length===1,P=0;P<S.source.length;P++){var M=E?T[0]:T[P];p.JSONArray(S,P,M)}else p.JSONArray(S,0,T);C&&S.setDataSource(C),this.emit(f.ADD,x,S)}return S},addAtlasJSONHash:function(x,y,T,C){var S=null;if(this.checkKey(x)){if(S=this.create(x,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(S,E,T[E]);else p.JSONHash(S,0,T);C&&S.setDataSource(C),this.emit(f.ADD,x,S)}return S},addAtlasXML:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.AtlasXML(S,0,T),C&&S.setDataSource(C),this.emit(f.ADD,x,S)),S},addUnityAtlas:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=this.create(x,y),p.UnityYAML(S,0,T),C&&S.setDataSource(C),this.emit(f.ADD,x,S)),S},addSpriteSheet:function(x,y,T){var C=null;if(this.checkKey(x)){C=this.create(x,y);var S=C.source[0].width,E=C.source[0].height;p.SpriteSheet(C,0,0,0,S,E,T),this.emit(f.ADD,x,C)}return C},addSpriteSheetFromAtlas:function(x,y){if(!this.checkKey(x))return null;var T=v(y,"atlas",null),C=v(y,"frame",null);if(!(!T||!C)){var S=this.get(T),E=S.get(C);if(E){var P=this.create(x,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(P,E,y):p.SpriteSheet(P,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(f.ADD,x,P),P}}},create:function(x,y,T,C){var S=null;return this.checkKey(x)&&(S=new g(this,x,y,T,C),this.list[x]=S),S},exists:function(x){return this.list.hasOwnProperty(x)},get:function(x){return x===void 0&&(x="__DEFAULT"),this.list[x]?this.list[x]:x instanceof g?x:this.list.__MISSING},cloneFrame:function(x,y){if(this.list[x])return this.list[x].get(y).clone()},getFrame:function(x,y){if(this.list[x])return this.list[x].get(y)},getTextureKeys:function(){var x=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&x.push(y);return x},getPixel:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return new h(M.data[0],M.data[1],M.data[2],M.data[3])}}return null},getPixelAlpha:function(x,y,T,C){var S=this.getFrame(T,C);if(S){x-=S.x,y-=S.y;var E=S.data.cut;if(x+=E.x,y+=E.y,x>=E.x&&x<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,x,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return M.data[3]}}return null},setTexture:function(x,y,T){return this.list[y]&&(x.texture=this.list[y],x.frame=x.texture.get(T)),x},renameTexture:function(x,y){var T=this.get(x);return T&&x!==y?(T.key=y,this.list[y]=T,delete this.list[x],!0):!1},each:function(x,y){for(var T=[null],C=1;C<arguments.length;C++)T.push(arguments[C]);for(var S in this.list)T[0]=this.list[S],x.apply(y,T)},destroy:function(){for(var x in this.list)this.list[x].destroy();this.list={},this.game=null,n.remove(this._tempCanvas)}});e.exports=m},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(18),a=i(38),h=i(33),u=i(138),l=i(206),f=new n({Extends:l,initialize:function(d,v,p,g,m){l.call(this,d,v,p,g,m),this.add("__BASE",0,0,0,g,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=m,this.imageData=this.context.getImageData(0,0,g,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(c,d,v){return this.context.drawImage(v,c,d),this.update()},drawFrame:function(c,d,v,p){v===void 0&&(v=0),p===void 0&&(p=0);var g=this.manager.getFrame(c,d);if(g){var m=g.canvasData,x=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,m.x,m.y,x,y,v,p,x/T,y/T),this.update()}else return this},setPixel:function(c,d,v,p,g,m){m===void 0&&(m=255),c=Math.abs(Math.floor(c)),d=Math.abs(Math.floor(d));var x=this.getIndex(c,d);if(x>-1){var y=this.context.getImageData(c,d,1,1);y.data[0]=v,y.data[1]=p,y.data[2]=g,y.data[3]=m,this.context.putImageData(y,c,d)}return this},putData:function(c,d,v,p,g,m,x){return p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=c.width),x===void 0&&(x=c.height),this.context.putImageData(c,d,v,p,g,m,x),this},getData:function(c,d,v,p){c=o(Math.floor(c),0,this.width-1),d=o(Math.floor(d),0,this.height-1),v=o(v,1,this.width-c),p=o(p,1,this.height-d);var g=this.context.getImageData(c,d,v,p);return g},getPixel:function(c,d,v){v||(v=new a);var p=this.getIndex(c,d);if(p>-1){var g=this.data,m=g[p+0],x=g[p+1],y=g[p+2],T=g[p+3];v.setTo(m,x,y,T)}return v},getPixels:function(c,d,v,p){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=this.width),p===void 0&&(p=v),c=Math.abs(Math.round(c)),d=Math.abs(Math.round(d));for(var g=o(c,0,this.width),m=o(c+v,0,this.width),x=o(d,0,this.height),y=o(d+p,0,this.height),T=new a,C=[],S=x;S<y;S++){for(var E=[],P=g;P<m;P++)T=this.getPixel(P,S,T),E.push({x:P,y:S,color:T.color,alpha:T.alphaGL});C.push(E)}return C},getIndex:function(c,d){return c=Math.abs(Math.round(c)),d=Math.abs(Math.round(d)),c<this.width&&d<this.height?(c+d*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(c,d,v,p){return c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=this.width),p===void 0&&(p=this.height),this.context.clearRect(c,d,v,p),this.update()},setSize:function(c,d){return d===void 0&&(d=c),(c!==this.width||d!==this.height)&&(this.canvas.width=c,this.canvas.height=d,this._source.width=c,this._source.height=d,this._source.isPowerOf2=u(c,d),this.frames.__BASE.setSize(c,d,0,0),this.width=c,this.height=d,this.refresh()),this},destroy:function(){l.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=i(0),a=i(138),h=i(168),u=new o({initialize:function(f,c,d,v,p){p===void 0&&(p=!1);var g=f.manager.game;this.renderer=g.renderer,this.texture=f,this.source=c,this.image=c,this.compressionAlgorithm=null,this.resolution=1,this.width=d||c.naturalWidth||c.videoWidth||c.width||0,this.height=v||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&c instanceof WebGLTexture,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(l){var f=this.renderer;f&&(f.gl?this.isCanvas?this.glTexture=f.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=f.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=f.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=f.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),this.flipY=l,this},update:function(){var l=this.renderer.gl;l&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):l&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&n.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(427),o=i(430),a=i(432),h={create:function(u){var l=u.config.audio,f=u.device.audio;return l.noAudio||!f.webAudio&&!f.audioData?new o(u):f.webAudio&&!l.disableWebAudio?new a(u):new n(u)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(145),o=i(0),a=i(70),h=i(429),u=new o({Extends:n,initialize:function(f){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,n.call(this,f)},add:function(l,f){var c=new h(this,l,f);return this.sounds.push(c),c},unlock:function(){this.locked=!1;var l=this;if(this.game.cache.audio.entries.each(function(v,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return l.locked=!0,!1;return!0}),!!this.locked){var f=!1,c=function(){f=!0},d=function(){if(f){f=!1;return}document.body.removeEventListener("touchmove",c),document.body.removeEventListener("touchend",d);var v=[];if(l.game.cache.audio.entries.each(function(g,m){for(var x=0;x<m.length;x++){var y=m[x];y.dataset.locked==="true"&&v.push(y)}return!0}),v.length!==0){var p=v[v.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,v.forEach(function(g){g.dataset.locked="false"}),l.unlocked=!0},v.forEach(function(g){g.load()})}};this.once(a.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",c,!1),document.body.addEventListener("touchend",d,!1)}},onBlur:function(){this.forEachActiveSound(function(l){l.isPlaying&&(this.onBlurPausedSounds.push(l),l.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(l){l.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){n.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(l,f,c){return l.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:l,prop:f,value:c}),!0):!1},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this._mute},set:function(l){this._mute=l,this.forEachActiveSound(function(f){f.updateMute()}),this.emit(a.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this._volume},set:function(l){this._volume=l,this.forEachActiveSound(function(f){f.updateVolume()}),this.emit(a.GLOBAL_VOLUME,this,l)}}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(a,h,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=a.length),n(a,l,f))for(var c=l;c<f;c++){var d=a[c];if(!h||h&&u===void 0&&d.hasOwnProperty(h)||h&&u!==void 0&&d[h]===u)return d}return null};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),o=i(0),a=i(70),h=i(18),u=new o({Extends:n,initialize:function(f,c,d){if(d===void 0&&(d={}),this.tags=f.game.cache.audio.get(c),!this.tags)throw new Error('There is no audio asset with key "'+c+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,n.call(this,f,c,d)},play:function(l,f){return this.manager.isLocked(this,"play",[l,f])||!n.prototype.play.call(this,l,f)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!n.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!n.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var l=this.currentConfig.seek,f=this.currentConfig.delay,c=(this.currentMarker?this.currentMarker.start:0)+l;return this.previousTime=c,this.audio.currentTime=c,this.applyConfig(),f===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+f*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var l=0;l<this.tags.length;l++){var f=this.tags[l];if(f.dataset.used==="false")return f.dataset.used="true",this.audio=f,!0}if(!this.manager.override)return!1;var c=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&c.push(v)},this),c.sort(function(v,p){return v.loop===p.loop?p.seek/p.duration-v.seek/v.duration:v.loop?1:-1});var d=c[0];return this.audio=d.audio,d.reset(),d.audio=null,d.startTime=0,d.previousTime=0,!0},playCatchPromise:function(){var l=this.audio.play();l&&l.catch(function(f){console.warn(f)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){n.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(l){if(this.isPlaying){if(this.startTime>0){this.startTime<l-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,l-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var f=this.currentMarker?this.currentMarker.start:0,c=f+this.duration,d=this.audio.currentTime;if(this.currentConfig.loop)d>=c-this.manager.loopEndOffset?(this.audio.currentTime=f+Math.max(0,d-c),d=this.audio.currentTime):d<f&&(this.audio.currentTime+=f,d=this.audio.currentTime),d<this.previousTime&&this.emit(a.LOOPED,this);else if(d>=c){this.reset(),this.stopAndReleaseAudioTag(),this.emit(a.COMPLETE,this);return}this.previousTime=d}},destroy:function(){n.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){n.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(l){this.currentConfig.mute=l,!this.manager.isLocked(this,"mute",l)&&(this.updateMute(),this.emit(a.MUTE,this,l))}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.currentConfig.volume},set:function(l){this.currentConfig.volume=l,!this.manager.isLocked(this,"volume",l)&&(this.updateVolume(),this.emit(a.VOLUME,this,l))}},setVolume:function(l){return this.volume=l,this},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,!this.manager.isLocked(this,a.RATE,l)&&(this.calculateRate(),this.emit(a.RATE,this,l))}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,!this.manager.isLocked(this,a.DETUNE,l)&&(this.calculateRate(),this.emit(a.DETUNE,this,l))}},setDetune:function(l){return this.detune=l,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.isLocked(this,"seek",l)||this.startTime>0||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.isPlaying?(this.previousTime=l,this.audio.currentTime=l):this.isPaused&&(this.currentConfig.seek=l),this.emit(a.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,!this.manager.isLocked(this,"loop",l)&&(this.audio&&(this.audio.loop=l),this.emit(a.LOOP,this,l))}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.currentConfig.pan},set:function(l){this.currentConfig.pan=l,this.emit(a.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(145),o=i(0),a=i(9),h=i(431),u=i(1),l=new o({Extends:a,initialize:function(c){a.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(f,c){var d=new h(this,f,c);return this.sounds.push(d),d},addAudioSprite:function(f,c){var d=this.add(f,c);return d.spritemap={},d},play:function(f,c){return!1},playAudioSprite:function(f,c,d){return!1},remove:function(f){return n.prototype.remove.call(this,f)},removeByKey:function(f){return n.prototype.removeByKey.call(this,f)},pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,forEachActiveSound:function(f,c){n.prototype.forEachActiveSound.call(this,f,c)},destroy:function(){n.prototype.destroy.call(this)}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),o=i(0),a=i(9),h=i(17),u=function(){return!1},l=function(){return null},f=function(){return this},c=new o({Extends:a,initialize:function(v,p,g){g===void 0&&(g={}),a.call(this),this.manager=v,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:u,updateMarker:u,removeMarker:l,play:u,pause:u,resume:u,stop:u,destroy:function(){n.prototype.destroy.call(this)},setMute:f,setVolume:f,setRate:f,setDetune:f,setSeek:f,setLoop:f,setPan:f});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(433),o=i(145),a=i(0),h=i(70),u=i(22),l=i(434),f=new a({Extends:o,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),o.call(this,d),this.locked&&d.isBooted?this.unlock():d.events.once(u.BOOT,this.unlock,this)},createAudioContext:function(c){var d=c.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(c){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=c,this.masterMuteNode=c.createGain(),this.masterVolumeNode=c.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(c.destination),this.destination=this.masterMuteNode,this},add:function(c,d){var v=new l(this,c,d);return this.sounds.push(v),v},decodeAudio:function(c,d){var v;Array.isArray(c)?v=c:v=[{key:c,data:d}];for(var p=this.game.cache.audio,g=v.length,m=0;m<v.length;m++){var x=v[m],y=x.key,T=x.data;typeof T=="string"&&(T=n(T));var C=function(E,P){p.add(E,P),this.emit(h.DECODED,E),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,y),S=function(E,P){console.error("Error decoding audio: "+E+" - ",P?P.message:""),g--,g===0&&this.emit(h.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,C,S)}},unlock:function(){var c=this,d=document.body,v=function p(){if(c.context&&d){var g=d.removeEventListener;c.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),c.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};d&&(d.addEventListener("touchstart",v,!1),d.addEventListener("touchend",v,!1),d.addEventListener("click",v,!1),d.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var c=this.context;(c.state==="suspended"||c.state==="interrupted")&&!this.locked&&c.resume()},update:function(c,d){o.prototype.update.call(this,c,d);var v=this.context;v&&v.state==="interrupted"&&v.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var c=this;this.context.close().then(function(){c.context=null})}o.prototype.destroy.call(this)},setMute:function(c){return this.mute=c,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(c){this.masterMuteNode.gain.setValueAtTime(c?0:1,0),this.emit(h.GLOBAL_MUTE,this,c)}},setVolume:function(c){return this.volume=c,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(c){this.masterVolumeNode.gain.setValueAtTime(c,0),this.emit(h.GLOBAL_VOLUME,this,c)}}});e.exports=f},function(e,r){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),o=0;o<i.length;o++)n[i.charCodeAt(o)]=o;var a=function(h){h=h.substr(h.indexOf(",")+1);var u=h.length,l=u*.75,f=0,c,d,v,p;h[u-1]==="="&&(l--,h[u-2]==="="&&l--);for(var g=new ArrayBuffer(l),m=new Uint8Array(g),x=0;x<u;x+=4)c=n[h.charCodeAt(x)],d=n[h.charCodeAt(x+1)],v=n[h.charCodeAt(x+2)],p=n[h.charCodeAt(x+3)],m[f++]=c<<2|d>>4,m[f++]=(d&15)<<4|v>>2,m[f++]=(v&3)<<6|p&63;return g};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(146),o=i(0),a=i(70),h=new o({Extends:n,initialize:function(l,f,c){if(c===void 0&&(c={}),this.audioBuffer=l.game.cache.audio.get(f),!this.audioBuffer)throw new Error('Audio key "'+f+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=l.context.createGain(),this.volumeNode=l.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),l.context.createStereoPanner?(this.pannerNode=l.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(l.destination)):this.volumeNode.connect(l.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,n.call(this,l,f,c)},play:function(u,l){return n.prototype.play.call(this,u,l)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!n.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(a.RESUME,this),!0)},stop:function(){return n.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0):!1},createAndStartBufferSource:function(){var u=this.currentConfig.seek,l=this.currentConfig.delay,f=this.manager.context.currentTime+l,c=(this.currentMarker?this.currentMarker.start:0)+u,d=this.duration-u;this.playTime=f-u,this.startTime=f,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,f),Math.max(0,c),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var u=this.getLoopTime(),l=this.currentMarker?this.currentMarker.start:0,f=this.duration;this.loopTime=u,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,u),Math.max(0,l),Math.max(0,f))},createBufferSource:function(){var u=this,l=this.manager.context.createBufferSource();return l.buffer=this.audioBuffer,l.connect(this.muteNode),l.onended=function(f){f.target===u.source&&(u.currentConfig.loop?u.hasLooped=!0:u.hasEnded=!0)},l},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),n.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,n.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){n.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){n.prototype.calculateRate.call(this);var u=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,u),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,u)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var u=0,l=0;l<this.rateUpdates.length;l++){var f=0;l<this.rateUpdates.length-1?f=this.rateUpdates[l+1].time:f=this.manager.context.currentTime-this.playTime,u+=(f-this.rateUpdates[l].time)*this.rateUpdates[l].rate}return u},getLoopTime:function(){for(var u=0,l=0;l<this.rateUpdates.length-1;l++)u+=(this.rateUpdates[l+1].time-this.rateUpdates[l].time)*this.rateUpdates[l].rate;var f=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+f.time+(this.duration-u)/f.rate},rate:{get:function(){return this.currentConfig.rate},set:function(u){this.currentConfig.rate=u,this.calculateRate(),this.emit(a.RATE,this,u)}},setRate:function(u){return this.rate=u,this},detune:{get:function(){return this.currentConfig.detune},set:function(u){this.currentConfig.detune=u,this.calculateRate(),this.emit(a.DETUNE,this,u)}},setDetune:function(u){return this.detune=u,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(u){this.currentConfig.mute=u,this.muteNode.gain.setValueAtTime(u?0:1,0),this.emit(a.MUTE,this,u)}},setMute:function(u){return this.mute=u,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(u){this.currentConfig.volume=u,this.volumeNode.gain.setValueAtTime(u,0),this.emit(a.VOLUME,this,u)}},setVolume:function(u){return this.volume=u,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(u){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(u=Math.min(Math.max(0,u),this.duration),this.currentConfig.seek=u,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,u))}},setSeek:function(u){return this.seek=u,this},loop:{get:function(){return this.currentConfig.loop},set:function(u){this.currentConfig.loop=u,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),u&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,u)}},setLoop:function(u){return this.loop=u,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(u){this.currentConfig.pan=u,this.pannerNode&&this.pannerNode.pan.setValueAtTime(u,this.manager.context.currentTime),this.emit(a.PAN,this,u)}},setPan:function(u){return this.pan=u,this}});e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=n.length,a=n[0].length,h=new Array(a),u=0;u<a;u++){h[u]=new Array(o);for(var l=o-1;l>-1;l--)h[u][l]=n[l][u]}return h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(a,h,u){var l=a[h];a[h]=a[u],a[u]=l}function n(a,h){return a<h?-1:a>h?1:0}var o=function(a,h,u,l,f){for(u===void 0&&(u=0),l===void 0&&(l=a.length-1),f===void 0&&(f=n);l>u;){if(l-u>600){var c=l-u+1,d=h-u+1,v=Math.log(c),p=.5*Math.exp(2*v/3),g=.5*Math.sqrt(v*p*(c-p)/c)*(d-c/2<0?-1:1),m=Math.max(u,Math.floor(h-d*p/c+g)),x=Math.min(l,Math.floor(h+(c-d)*p/c+g));o(a,h,m,x,f)}var y=a[h],T=u,C=l;for(i(a,u,h),f(a[l],y)>0&&i(a,u,l);T<C;){for(i(a,T,C),T++,C--;f(a[T],y)<0;)T++;for(;f(a[C],y)>0;)C--}f(a[u],y)===0?i(a,u,C):(C++,i(a,C,l)),C<=h&&(u=C+1),h<=C&&(l=C-1)}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=i(131),a=function(u,l,f){for(var c=[],d=0;d<u.length;d++)for(var v=0;v<l.length;v++)for(var p=0;p<f;p++)c.push({a:u[d],b:l[v]});return c},h=function(u,l,f){var c=n(f,"max",0),d=n(f,"qty",1),v=n(f,"random",!1),p=n(f,"randomB",!1),g=n(f,"repeat",0),m=n(f,"yoyo",!1),x=[];if(p&&o(l),g===-1)if(c===0)g=0;else{var y=u.length*l.length*d;m&&(y*=2),g=Math.ceil(c/y)}for(var T=0;T<=g;T++){var C=a(u,l,d);v&&o(C),x=x.concat(C),m&&(C.reverse(),x=x.concat(C))}return c&&x.splice(c),x};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(13),o=function(a,h){var u=n(h,"anims",null);if(u===null)return a;if(typeof u=="string")a.anims.play(u);else if(typeof u=="object"){var l=a.anims,f=n(u,"key",void 0);if(f){var c=n(u,"startFrame",void 0),d=n(u,"delay",0),v=n(u,"repeat",0),p=n(u,"repeatDelay",0),g=n(u,"yoyo",!1),m=n(u,"play",!1),x=n(u,"delayedPlay",0),y={key:f,delay:d,repeat:v,repeatDelay:p,yoyo:g,startFrame:c};m?l.play(y):x>0?l.playAfterDelay(y,x):l.load(y)}}return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(109),a=new n({initialize:function(u,l,f,c,d){this.parent=u,this.x=l,this.y=f,this.frame=c,this.data={},this.tint=16777215,this._visible=d,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(h){return h===void 0?this.frame=this.parent.frame:h instanceof o&&h.texture===this.parent.texture?this.frame=h:this.frame=this.parent.texture.get(h),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(h,u,l){return this.x=h,this.y=u,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,l&&this.setFrame(l),this},setPosition:function(h,u){return this.x=h,this.y=u,this},setFlipX:function(h){return this.flipX=h,this},setFlipY:function(h){return this.flipY=h,this},setFlip:function(h,u){return this.flipX=h,this.flipY=u,this},setVisible:function(h){return this.visible=h,this},setAlpha:function(h){return this.alpha=h,this},setTint:function(h){return this.tint=h,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(h){this.parent.dirty|=this._visible!==h,this._visible=h}},alpha:{get:function(){return this._alpha},set:function(h){this.parent.dirty|=this._alpha>0!=h>0,this._alpha=h}}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(a,h,u){u===void 0&&(u=new n);var l=Math.min(a.x,h.x),f=Math.min(a.y,h.y),c=Math.max(a.right,h.right)-l,d=Math.max(a.bottom,h.bottom)-f;return u.setTo(l,f,c,d)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(1055),h=i(15),u=i(7),l=i(202),f=i(20),c=i(140),d=new n({Extends:h,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Origin,o.ScrollFactor,o.Transform,o.Visible,a],initialize:function(p,g,m,x,y,T){h.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,m),typeof x=="string"?x[0]==="#"?this.setElement(x.substr(1),y,T):this.createElement(x,y,T):x&&this.setElement(x,y,T),p.sys.events.on(f.SLEEP,this.handleSceneEvent,this),p.sys.events.on(f.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(v){var p=this.node,g=p.style;p&&(g.display=v.settings.visible?"block":"none")},setSkew:function(v,p){return v===void 0&&(v=0),p===void 0&&(p=v),this.skewX=v,this.skewY=p,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.addEventListener(v[p],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var p=0;p<v.length;p++)this.node.removeEventListener(v[p],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,p,g){return this.setElement(document.createElement(v),p,g)},setElement:function(v,p,g){this.removeElement();var m;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),m=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(m=v),!m)return this;if(this.node=m,p&&u(p))for(var x in p)m.style[x]=p[x];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),g&&(m.innerText=g),this.updateSize()},createFromCache:function(v,p){var g=this.cache.get(v);return g&&this.createFromHTML(g,p),this},createFromHTML:function(v,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(l(this.node),this.node=null),this},updateSize:function(){var v=this.node,p=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(v,p){if(this.node){for(var g=this.node.querySelectorAll("*"),m=0;m<g.length;m++)if(g[m][v]===p)return g[m]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preUpdate:function(){var v=this.parentContainer,p=this.node;p&&v&&!v.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(f.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(f.WAKE,this.handleSceneEvent,this)}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1056),o=i(15),a=i(25),h=new a,u=new a,l=new a,f=function(c,d,v,p){if(d.node){var g=d.node.style,m=d.scene.sys.settings;if(!g||!m.visible||o.RENDER_MASK!==d.renderFlags||d.cameraFilter!==0&&d.cameraFilter&v.id||d.parentContainer&&!d.parentContainer.willRender()){g.display="none";return}var x=d.parentContainer,y=v.alpha*d.alpha;x&&(y*=x.alpha);var T=h,C=u,S=l,E=0,P=0,M="0%",R="0%";p?(E=d.width*d.scaleX*d.originX,P=d.height*d.scaleY*d.originY,C.applyITRS(d.x-E,d.y-P,d.rotation,d.scaleX,d.scaleY),T.copyFrom(v.matrix),T.multiplyWithOffset(p,-v.scrollX*d.scrollFactorX,-v.scrollY*d.scrollFactorY),C.e=d.x-E,C.f=d.y-P,T.multiply(C,S)):(E=d.width*d.originX,P=d.height*d.originY,C.applyITRS(d.x-E,d.y-P,d.rotation,d.scaleX,d.scaleY),T.copyFrom(v.matrix),M=100*d.originX+"%",R=100*d.originY+"%",C.e-=v.scrollX*d.scrollFactorX,C.f-=v.scrollY*d.scrollFactorY,T.multiply(C,S)),d.transformOnly||(g.display="block",g.opacity=y,g.zIndex=d._depth,g.pointerEvents=d.pointerEvents,g.mixBlendMode=n[d._blendMode]),g.transform=S.getCSSMatrix()+" skew("+d.skewX+"rad, "+d.skewY+"rad) rotate3d("+d.rotate3d.x+","+d.rotate3d.y+","+d.rotate3d.z+","+d.rotate3d.w+d.rotate3dAngle+")",g.transformOrigin=M+" "+R}};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(15),h=i(1060),u=new n({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.Origin,o.ScrollFactor,o.Size,o.Texture,o.Tint,o.Transform,o.Visible,h],initialize:function(f){a.call(this,f,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(218),o=i(98),a=i(14),h=i(4),u=function(l,f,c){c===void 0&&(c=new h);var d=o(f,0,a.PI2);return n(l,d,c)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(447),o=i(218),a=i(98),h=i(14),u=function(l,f,c,d){d===void 0&&(d=[]),!f&&c>0&&(f=n(l)/c);for(var v=0;v<f;v++){var p=a(v/f,0,h.PI2);d.push(o(l,p))}return d};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.width/2,a=n.height/2,h=Math.pow(o-a,2)/Math.pow(o+a,2);return Math.PI*(o+a)*(1+3*h/(10+Math.sqrt(4-3*h)))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(217),o=i(30),a=function(h,u,l,f,c,d){var v=u.commandBuffer,p=v.length,g=c||h.currentContext;if(!(p===0||!o(h,g,u,l,f))){l.addToRenderList(u);var m=1,x=1,y=0,T=0,C=1,S=0,E=0,P=0;g.beginPath();for(var M=0;M<p;++M){var R=v[M];switch(R){case n.ARC:g.arc(v[M+1],v[M+2],v[M+3],v[M+4],v[M+5],v[M+6]),M+=7;break;case n.LINE_STYLE:C=v[M+1],y=v[M+2],m=v[M+3],S=(y&16711680)>>>16,E=(y&65280)>>>8,P=y&255,g.strokeStyle="rgba("+S+","+E+","+P+","+m+")",g.lineWidth=C,M+=3;break;case n.FILL_STYLE:T=v[M+1],x=v[M+2],S=(T&16711680)>>>16,E=(T&65280)>>>8,P=T&255,g.fillStyle="rgba("+S+","+E+","+P+","+x+")",M+=2;break;case n.BEGIN_PATH:g.beginPath();break;case n.CLOSE_PATH:g.closePath();break;case n.FILL_PATH:d||g.fill();break;case n.STROKE_PATH:d||g.stroke();break;case n.FILL_RECT:d?g.rect(v[M+1],v[M+2],v[M+3],v[M+4]):g.fillRect(v[M+1],v[M+2],v[M+3],v[M+4]),M+=4;break;case n.FILL_TRIANGLE:g.beginPath(),g.moveTo(v[M+1],v[M+2]),g.lineTo(v[M+3],v[M+4]),g.lineTo(v[M+5],v[M+6]),g.closePath(),d||g.fill(),M+=6;break;case n.STROKE_TRIANGLE:g.beginPath(),g.moveTo(v[M+1],v[M+2]),g.lineTo(v[M+3],v[M+4]),g.lineTo(v[M+5],v[M+6]),g.closePath(),d||g.stroke(),M+=6;break;case n.LINE_TO:g.lineTo(v[M+1],v[M+2]),M+=2;break;case n.MOVE_TO:g.moveTo(v[M+1],v[M+2]),M+=2;break;case n.LINE_FX_TO:g.lineTo(v[M+1],v[M+2]),M+=5;break;case n.MOVE_FX_TO:g.moveTo(v[M+1],v[M+2]),M+=5;break;case n.SAVE:g.save();break;case n.RESTORE:g.restore();break;case n.TRANSLATE:g.translate(v[M+1],v[M+2]),M+=2;break;case n.SCALE:g.scale(v[M+1],v[M+2]),M+=2;break;case n.ROTATE:g.rotate(v[M+1]),M+=1;break;case n.GRADIENT_FILL_STYLE:M+=5;break;case n.GRADIENT_LINE_STYLE:M+=6;break}}g.restore()}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(137),a=i(80),h=i(2),u=i(68),l=new n({initialize:function(c,d,v,p){p===void 0&&(p=!1),this.propertyKey=d,this.propertyValue=v,this.defaultValue=v,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(c)},loadConfig:function(f,c){f===void 0&&(f={}),c&&(this.propertyKey=c),this.propertyValue=h(f,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(f){return this.propertyValue=f,this.setMethods()},setMethods:function(){var f=this.propertyValue,c=typeof f;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,c==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(f))this.onEmit=this.randomStaticValueEmit;else if(c==="function")this.emitOnly?this.onEmit=f:this.onUpdate=f;else if(c==="object"&&this.hasBoth(f,"start","end")){this.start=f.start,this.end=f.end;var d=this.has(f,"random");if(d&&(this.onEmit=this.randomRangedValueEmit),this.has(f,"steps"))this.steps=f.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var v=this.has(f,"ease")?f.ease:"Linear";this.ease=a(v,f.easeParams),d||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(c==="object"&&this.hasBoth(f,"min","max"))this.start=f.min,this.end=f.max,this.onEmit=this.randomRangedValueEmit;else if(c==="object"&&this.has(f,"random")){var p=f.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else c==="object"&&this.hasEither(f,"onEmit","onUpdate")&&(this.has(f,"onEmit")&&(this.onEmit=f.onEmit),this.has(f,"onUpdate")&&(this.onUpdate=f.onUpdate));return this},has:function(f,c){return f.hasOwnProperty(c)},hasBoth:function(f,c,d){return f.hasOwnProperty(c)&&f.hasOwnProperty(d)},hasEither:function(f,c,d){return f.hasOwnProperty(c)||f.hasOwnProperty(d)},defaultEmit:function(f,c,d){return d},defaultUpdate:function(f,c,d,v){return v},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var f=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[f]},randomRangedValueEmit:function(f,c){var d=o(this.start,this.end);return f&&f.data[c]&&(f.data[c].min=d),d},steppedEmit:function(){var f=this.counter,c=this.counter+(this.end-this.start)/this.steps;return this.counter=u(c,this.start,this.end),f},easedValueEmit:function(f,c){if(f&&f.data[c]){var d=f.data[c];d.min=this.start,d.max=this.end}return this.start},easeValueUpdate:function(f,c,d){var v=f.data[c];return(v.max-v.min)*this.ease(d)+v.min}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=new n({initialize:function(u,l,f,c,d){if(typeof u=="object"){var v=u;u=o(v,"x",0),l=o(v,"y",0),f=o(v,"power",0),c=o(v,"epsilon",100),d=o(v,"gravity",50)}else u===void 0&&(u=0),l===void 0&&(l=0),f===void 0&&(f=0),c===void 0&&(c=100),d===void 0&&(d=50);this.x=u,this.y=l,this.active=!0,this._gravity=d,this._power=0,this._epsilon=0,this.power=f,this.epsilon=c},update:function(h,u){var l=this.x-h.x,f=this.y-h.y,c=l*l+f*f;if(c!==0){var d=Math.sqrt(c);c<this._epsilon&&(c=this._epsilon);var v=this._power*u/(c*d)*100;h.velocityX+=l*v,h.velocityY+=f*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var u=this.power;this._gravity=h,this.power=u}}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(36),a=i(50),h=new n({initialize:function(l){this.emitter=l,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(u,l){var f=this.emitter;this.frame=f.getFrame(),f.emitZone&&f.emitZone.getPoint(this),u===void 0?this.x+=f.x.onEmit(this,"x"):this.x+=u,l===void 0?this.y+=f.y.onEmit(this,"y"):this.y+=l,this.life=f.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var c=f.speedX.onEmit(this,"speedX"),d=f.speedY?f.speedY.onEmit(this,"speedY"):c;if(f.radial){var v=o(f.angle.onEmit(this,"angle"));this.velocityX=Math.cos(v)*Math.abs(c),this.velocityY=Math.sin(v)*Math.abs(d)}else if(f.moveTo){var p=f.moveToX.onEmit(this,"moveToX"),g=f.moveToY?f.moveToY.onEmit(this,"moveToY"):p,m=Math.atan2(g-this.y,p-this.x),x=a(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(m)*x,this.velocityY=Math.sin(m)*x}else this.velocityX=c,this.velocityY=d;f.acceleration&&(this.accelerationX=f.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=f.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=f.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=f.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=f.delay.onEmit(this,"delay"),this.scaleX=f.scaleX.onEmit(this,"scaleX"),this.scaleY=f.scaleY?f.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=f.rotate.onEmit(this,"rotate"),this.rotation=o(this.angle),this.bounce=f.bounce.onEmit(this,"bounce"),this.alpha=f.alpha.onEmit(this,"alpha"),this.tint=f.tint.onEmit(this,"tint")},computeVelocity:function(u,l,f,c){var d=this.velocityX,v=this.velocityY,p=this.accelerationX,g=this.accelerationY,m=this.maxVelocityX,x=this.maxVelocityY;d+=u.gravityX*f,v+=u.gravityY*f,p&&(d+=p*f),g&&(v+=g*f),d>m?d=m:d<-m&&(d=-m),v>x?v=x:v<-x&&(v=-x),this.velocityX=d,this.velocityY=v;for(var y=0;y<c.length;y++)c[y].update(this,l,f)},checkBounds:function(u){var l=u.bounds,f=-this.bounce;this.x<l.x&&u.collideLeft?(this.x=l.x,this.velocityX*=f):this.x>l.right&&u.collideRight&&(this.x=l.right,this.velocityX*=f),this.y<l.y&&u.collideTop?(this.y=l.y,this.velocityY*=f):this.y>l.bottom&&u.collideBottom&&(this.y=l.bottom,this.velocityY*=f)},update:function(u,l,f){if(this.delayCurrent>0)return this.delayCurrent-=u,!1;var c=this.emitter,d=1-this.lifeCurrent/this.life;return this.lifeT=d,this.computeVelocity(c,u,l,f),this.x+=this.velocityX*l,this.y+=this.velocityY*l,c.bounds&&this.checkBounds(c),c.deathZone&&c.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=c.scaleX.onUpdate(this,"scaleX",d,this.scaleX),c.scaleY?this.scaleY=c.scaleY.onUpdate(this,"scaleY",d,this.scaleY):this.scaleY=this.scaleX,this.angle=c.rotate.onUpdate(this,"rotate",d,this.angle),this.rotation=o(this.angle),this.alpha=c.alpha.onUpdate(this,"alpha",d,this.alpha),this.tint=c.tint.onUpdate(this,"tint",d,this.tint),this.lifeCurrent-=u,this.lifeCurrent<=0)}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(35),o=i(0),a=i(11),h=i(453),u=i(454),l=i(449),f=i(2),c=i(210),d=i(455),v=i(126),p=i(451),g=i(456),m=i(10),x=i(79),y=i(3),T=i(68),C=new o({Mixins:[a.BlendMode,a.Mask,a.ScrollFactor,a.Visible],initialize:function(E,P){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new l(P,"x",0,!0),this.y=new l(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new l(P,"accelerationX",0,!0),this.accelerationY=new l(P,"accelerationY",0,!0),this.maxVelocityX=new l(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new l(P,"maxVelocityY",1e4,!0),this.speedX=new l(P,"speedX",0,!0),this.speedY=new l(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new l(P,"moveToX",0,!0),this.moveToY=new l(P,"moveToY",0,!0),this.bounce=new l(P,"bounce",0,!0),this.scaleX=new l(P,"scaleX",1),this.scaleY=new l(P,"scaleY",1),this.tint=new l(P,"tint",16777215),this.alpha=new l(P,"alpha",1),this.lifespan=new l(P,"lifespan",1e3,!0),this.angle=new l(P,"angle",{min:0,max:360},!0),this.rotate=new l(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new l(P,"quantity",1,!0),this.delay=new l(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=n.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(S){if(!S)return this;var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],v(S,P)&&(this[P]=f(S,P));for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],v(S,P)&&this[P].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,v(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(d(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),v(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),v(S,"callbackScope")){var M=f(S,"callbackScope",null);this.emitCallbackScope=M,this.deathCallbackScope=M}return v(S,"emitZone")&&this.setEmitZone(S.emitZone),v(S,"deathZone")&&this.setDeathZone(S.deathZone),v(S,"bounds")&&this.setBounds(S.bounds),v(S,"followOffset")&&this.followOffset.setFromObject(f(S,"followOffset",0)),v(S,"frame")&&this.setFrame(S.frame),v(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],S[P]=this[P];for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],this[P]&&(S[P]=this[P].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,P,M){return E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=!1),this.follow=S,this.followOffset.set(E,P),this.trackVisible=M,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return c(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,P){E===void 0&&(E=!0),P===void 0&&(P=1),this.randomFrame=E,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var M=typeof S;if(Array.isArray(S)||M==="string"||M==="number")this.manager.setEmitterFrames(S,this);else if(M==="object"){var R=S;S=f(R,"frames",null),S&&this.manager.setEmitterFrames(S,this);var A=f(R,"cycle",!1);this.randomFrame=!A,this.frameQuantity=f(R,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,P,M){if(typeof S=="object"){var R=S;S=R.x,E=R.y,P=v(R,"w")?R.w:R.width,M=v(R,"h")?R.h:R.height}return this.bounds?this.bounds.setTo(S,E,P,M):this.bounds=new m(S,E,P,M),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=f(S,"type","random"),P=f(S,"source",null);switch(E){case"random":this.emitZone=new g(P);break;case"edge":var M=f(S,"quantity",1),R=f(S,"stepRate",0),A=f(S,"yoyo",!1),O=f(S,"seamless",!0);this.emitZone=new u(P,M,R,A,O);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=f(S,"type","onEnter"),P=f(S,"source",null);if(P&&typeof P.contains=="function"){var M=E==="onEnter";this.deathZone=new h(P,M)}}return this},reserve:function(S){for(var E=this.dead,P=0;P<S;P++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var P=this.alive,M=P.length,R=0;R<M;++R)S.call(E,P[R],this);return this},forEachDead:function(S,E){for(var P=this.dead,M=P.length,R=0;R<M;++R)S.call(E,P[R],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return x(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,P){return this.frequency=-1,this.emitParticle(S,E,P)},emitParticleAt:function(S,E,P){return this.emitParticle(P,S,E)},emitParticle:function(S,E,P){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var M=this.dead,R=this.follow?this.follow.x+this.followOffset.x:E,A=this.follow?this.follow.y+this.followOffset.y:P,O=0;O<S;O++){var b=M.pop();if(b||(b=new this.particleClass(this)),b.fire(R,A),this.particleBringToTop?this.alive.push(b):this.alive.unshift(b),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,b,this),this.atLimit())break}return b}},preUpdate:function(S,E){E*=this.timeScale;var P=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var M=this.manager.getProcessors(),R=this.alive,A=this.dead,O=0,b=[],w=R.length;for(O=0;O<w;O++){var I=R[O];I.update(E,P,M)&&b.push({index:O,particle:I})}if(w=b.length,w>0){var Y=this.deathCallback,z=this.deathCallbackScope;for(O=w-1;O>=0;O--){var V=b[O];R.splice(V.index,1),A.push(V.particle),Y&&Y.call(z,V.particle),V.particle.resetPosition()}}this.on&&(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});e.exports=C},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u){this.source=h,this.killOnEnter=u},willKill:function(a){var h=this.source.contains(a.x,a.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f,c){f===void 0&&(f=!1),c===void 0&&(c=!0),this.source=h,this.points=[],this.quantity=u,this.stepRate=l,this.yoyo=f,this.counter=-1,this.seamless=c,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var a=this.points[0],h=this.points[this.points.length-1];a.x===h.x&&a.y===h.y&&this.points.pop()}var u=this._length;return this._length=this.points.length,this._length<u&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(a){return this.source=a,this.updateSource()},getPoint:function(a){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var h=this.points[this.counter];h&&(a.x=h.x,a.y=h.y)}});e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var a=0;a<o.length;a++)if(n.hasOwnProperty(o[a]))return!0;return!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(3),a=new n({initialize:function(u){this.source=u,this._tempVec=new o},getPoint:function(h){var u=this._tempVec;this.source.getRandomPoint(u),h.x=u.x,h.y=u.y}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(73),h=new n({Extends:a,Mixins:[o.PathFollower],initialize:function(l,f,c,d,v,p){a.call(this,l,c,d,v,p),this.path=f},preUpdate:function(u,l){this.anims.update(u,l),this.pathUpdate(u)}});e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=n.canvas,u=n.context,l=n.style,f=[],c=0,d=a.length;l.maxLines>0&&l.maxLines<a.length&&(d=l.maxLines),l.syncFont(h,u);for(var v=0;v<d;v++){var p=l.strokeThickness;p+=u.measureText(a[v]).width,l.wordWrap&&(p-=u.measureText(" ").width),f[v]=Math.ceil(p),c=Math.max(c,f[v])}var g=o.fontSize+l.strokeThickness,m=g*d,x=n.lineSpacing;return d>1&&(m+=x*(d-1)),{width:c,height:m,lines:d,lineWidths:f,lineSpacing:x,lineHeight:g}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(13),a=i(6),h=i(460),u={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},l=new n({initialize:function(c,d){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(d,!1,!0);var v=a(d,"metrics",!1);v?this.metrics={ascent:a(v,"ascent",0),descent:a(v,"descent",0),fontSize:a(v,"fontSize",0)}:this.metrics=h(this)},setStyle:function(f,c,d){c===void 0&&(c=!0),d===void 0&&(d=!1),f&&f.hasOwnProperty("fontSize")&&typeof f.fontSize=="number"&&(f.fontSize=f.fontSize.toString()+"px");for(var v in u){var p=d?u[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=a(f,u[v][0],p):this[v]=o(f,u[v][0],p)}var g=a(f,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=a(f,"fill",null);return m!==null&&(this.color=m),c?this.update(!0):this.parent},syncFont:function(f,c){c.font=this._font},syncStyle:function(f,c){c.textBaseline="alphabetic",c.fillStyle=this.color,c.strokeStyle=this.stroke,c.lineWidth=this.strokeThickness,c.lineCap="round",c.lineJoin="round"},syncShadow:function(f,c){c?(f.shadowOffsetX=this.shadowOffsetX,f.shadowOffsetY=this.shadowOffsetY,f.shadowColor=this.shadowColor,f.shadowBlur=this.shadowBlur):(f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowColor=0,f.shadowBlur=0)},update:function(f){return f&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(f,c){c===void 0&&(c=!0);var d=f,v="",p="";if(typeof f!="string")d=a(f,"fontFamily","Courier"),v=a(f,"fontSize","16px"),p=a(f,"fontStyle","");else{var g=f.split(" "),m=0;p=g.length>2?g[m++]:"",v=g[m++]||"16px",d=g[m++]||"Courier"}return(d!==this.fontFamily||v!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=d,this.fontSize=v,this.fontStyle=p,c&&this.update(!0)),this.parent},setFontFamily:function(f){return this.fontFamily!==f&&(this.fontFamily=f,this.update(!0)),this.parent},setFontStyle:function(f){return this.fontStyle!==f&&(this.fontStyle=f,this.update(!0)),this.parent},setFontSize:function(f){return typeof f=="number"&&(f=f.toString()+"px"),this.fontSize!==f&&(this.fontSize=f,this.update(!0)),this.parent},setTestString:function(f){return this.testString=f,this.update(!0)},setFixedSize:function(f,c){return this.fixedWidth=f,this.fixedHeight=c,f&&(this.parent.width=f),c&&(this.parent.height=c),this.update(!1)},setBackgroundColor:function(f){return this.backgroundColor=f,this.update(!1)},setFill:function(f){return this.color=f,this.update(!1)},setColor:function(f){return this.color=f,this.update(!1)},setResolution:function(f){return this.resolution=f,this.update(!1)},setStroke:function(f,c){return c===void 0&&(c=this.strokeThickness),f===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==f||this.strokeThickness!==c)&&(this.stroke=f,this.strokeThickness=c,this.update(!0)),this.parent},setShadow:function(f,c,d,v,p,g){return f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d="#000"),v===void 0&&(v=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=f,this.shadowOffsetY=c,this.shadowColor=d,this.shadowBlur=v,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(f,c){return f===void 0&&(f=0),c===void 0&&(c=f),this.shadowOffsetX=f,this.shadowOffsetY=c,this.update(!1)},setShadowColor:function(f){return f===void 0&&(f="#000"),this.shadowColor=f,this.update(!1)},setShadowBlur:function(f){return f===void 0&&(f=0),this.shadowBlur=f,this.update(!1)},setShadowStroke:function(f){return this.shadowStroke=f,this.update(!1)},setShadowFill:function(f){return this.shadowFill=f,this.update(!1)},setWordWrapWidth:function(f,c){return c===void 0&&(c=!1),this.wordWrapWidth=f,this.wordWrapUseAdvanced=c,this.update(!1)},setWordWrapCallback:function(f,c){return c===void 0&&(c=null),this.wordWrapCallback=f,this.wordWrapCallbackScope=c,this.update(!1)},setAlign:function(f){return f===void 0&&(f="left"),this.align=f,this.update(!1)},setMaxLines:function(f){return f===void 0&&(f=0),this.maxLines=f,this.update(!1)},getTextMetrics:function(){var f=this.metrics;return{ascent:f.ascent,descent:f.descent,fontSize:f.fontSize}},toJSON:function(){var f={};for(var c in u)f[c]=this[c];return f.metrics=this.getTextMetrics(),f},destroy:function(){this.parent=void 0}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(31),o=function(a){var h=n.create(this),u=h.getContext("2d");a.syncFont(h,u);var l=u.measureText(a.testString);if("actualBoundingBoxAscent"in l){var f=l.actualBoundingBoxAscent,c=l.actualBoundingBoxDescent;return n.remove(h),{ascent:f,descent:c,fontSize:f+c}}var d=Math.ceil(l.width*a.baselineX),v=d,p=2*v;v=v*a.baselineY|0,h.width=d,h.height=p,u.fillStyle="#f00",u.fillRect(0,0,d,p),u.font=a._font,u.textBaseline="alphabetic",u.fillStyle="#000",u.fillText(a.testString,0,v);var g={ascent:0,descent:0,fontSize:0},m=u.getImageData(0,0,d,p);if(!m)return g.ascent=v,g.descent=v+6,g.fontSize=g.ascent+g.descent,n.remove(h),g;var x=m.data,y=x.length,T=d*4,C,S,E=0,P=!1;for(C=0;C<v;C++){for(S=0;S<T;S+=4)if(x[E+S]!==255){P=!0;break}if(!P)E+=T;else break}for(g.ascent=v-C,E=y-T,P=!1,C=p;C>v;C--){for(S=0;S<T;S+=4)if(x[E+S]!==255){P=!0;break}if(!P)E-=T;else break}return g.descent=C-v,g.fontSize=g.ascent+g.descent,n.remove(h),g};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1097),o=i(0),a=i(36),h=i(59),u=i(65),l=i(14),f=i(34),c=new o({Extends:f,Mixins:[n],initialize:function(v,p,g,m,x,y,T,C,S){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=0),y===void 0&&(y=360),T===void 0&&(T=!1),f.call(this,v,"Arc",new u(0,0,m)),this._startAngle=x,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(d){this._iterations=d,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(d){this.geom.radius=d;var v=d*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(d){this._startAngle=d,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(d){this._endAngle=d,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(d){this._anticlockwise=d,this.updateData()}},setRadius:function(d){return this.radius=d,this},setIterations:function(d){return d===void 0&&(d=.01),this.iterations=d,this},setStartAngle:function(d,v){return this._startAngle=d,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(d,v){return this._endAngle=d,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var d=this._iterations,v=d,p=this.geom.radius,g=a(this._startAngle),m=a(this._endAngle),x=this._anticlockwise,y=p,T=p;m-=g,x?m<-l.PI2?m=-l.PI2:m>0&&(m=-l.PI2+m%l.PI2):m>l.PI2?m=l.PI2:m<0&&(m=l.PI2+m%l.PI2);for(var C=[y+Math.cos(g)*p,T+Math.sin(g)*p],S;v<1;)S=m*v+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),v+=d;return S=m+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),C.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=h(C),this.pathData=C,this}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1100),a=i(59),h=i(10),u=i(34),l=new n({Extends:u,Mixins:[o],initialize:function(c,d,v,p,g,m){d===void 0&&(d=0),v===void 0&&(v=0),u.call(this,c,"Curve",p),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(d,v),g!==void 0&&this.setFillStyle(g,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){var f=this._curveBounds,c=this._smoothness;this.geom.getBounds(f,c),this.setSize(f.width,f.height),this.updateDisplayOrigin();for(var d=[],v=this.geom.getPoints(c),p=0;p<v.length;p++)d.push(v[p].x,v[p].y);return d.push(v[0].x,v[0].y),this.pathIndexes=a(d),this.pathData=d,this}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(59),a=i(1103),h=i(111),u=i(34),l=new n({Extends:u,Mixins:[a],initialize:function(c,d,v,p,g,m,x){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=128),u.call(this,c,"Ellipse",new h(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(d,v),this.width=p,this.height=g,m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSize:function(f,c){return this.width=f,this.height=c,this.geom.setPosition(f/2,c/2),this.geom.setSize(f,c),this.updateData()},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){for(var f=[],c=this.geom.getPoints(this._smoothness),d=0;d<c.length;d++)f.push(c[d].x,c[d].y);return f.push(c[0].x,c[0].y),this.pathIndexes=o(f),this.pathData=f,this}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(34),a=i(1106),h=new n({Extends:o,Mixins:[a],initialize:function(l,f,c,d,v,p,g,m,x,y,T){f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=128),v===void 0&&(v=128),p===void 0&&(p=32),g===void 0&&(g=32),o.call(this,l,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(f,c),this.setSize(d,v),this.setFillStyle(m,x),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showCells=!1:(this.fillColor=u,this.fillAlpha=l,this.showCells=!0),this},setAltFillStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showAltCells=!1:(this.altFillColor=u,this.altFillAlpha=l,this.showAltCells=!0),this},setOutlineStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showOutline=!1:(this.outlineFillColor=u,this.outlineFillAlpha=l,this.showOutline=!0),this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1109),o=i(0),a=i(34),h=new o({Extends:a,Mixins:[n],initialize:function(l,f,c,d,v,p,g,m){f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=48),v===void 0&&(v=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),m===void 0&&(m=13421772),a.call(this,l,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(f,c),this.setSize(d,v),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setFaces:function(u,l,f){return u===void 0&&(u=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=u,this.showLeft=l,this.showRight=f,this},setFillStyle:function(u,l,f){return this.fillTop=u,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(1112),a=i(34),h=new n({Extends:a,Mixins:[o],initialize:function(l,f,c,d,v,p,g,m,x){f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=48),v===void 0&&(v=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),m===void 0&&(m=10066329),x===void 0&&(x=13421772),a.call(this,l,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=m,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(f,c),this.setSize(d,v),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setReversed:function(u){return this.isReversed=u,this},setFaces:function(u,l,f){return u===void 0&&(u=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=u,this.showLeft=l,this.showRight=f,this},setFillStyle:function(u,l,f){return this.fillTop=u,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(34),a=i(47),h=i(1115),u=new n({Extends:o,Mixins:[h],initialize:function(f,c,d,v,p,g,m,x,y){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=0),g===void 0&&(g=128),m===void 0&&(m=0),o.call(this,f,"Line",new a(v,p,g,m));var T=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,d),this.setSize(T,C),x!==void 0&&this.setStrokeStyle(1,x,y),this.updateDisplayOrigin()},setLineWidth:function(l,f){return f===void 0&&(f=l),this._startWidth=l,this._endWidth=f,this.lineWidth=l,this},setTo:function(l,f,c,d){return this.geom.setTo(l,f,c,d),this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1118),o=i(0),a=i(59),h=i(469),u=i(227),l=i(34),f=i(472),c=new o({Extends:l,Mixins:[n],initialize:function(v,p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),l.call(this,v,"Polygon",new u(m));var T=h(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(d){d===void 0&&(d=1);for(var v=0;v<d;v++)f(this.geom);return this.updateData()},updateData:function(){for(var d=[],v=this.geom.points,p=0;p<v.length;p++)d.push(v[p].x,v[p].y);return d.push(v[0].x,v[0].y),this.pathIndexes=a(d),this.pathData=d,this}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(a,h){h===void 0&&(h=new n);for(var u=1/0,l=1/0,f=-u,c=-l,d,v=0;v<a.points.length;v++)d=a.points[v],u=Math.min(u,d.x),l=Math.min(l,d.y),f=Math.max(f,d.x),c=Math.max(c,d.y);return h.x=u,h.y=l,h.width=f-u,h.height=c-l,h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(47),a=i(471),h=function(u,l,f,c){c===void 0&&(c=[]);var d=u.points,v=a(u);!l&&f>0&&(l=v/f);for(var p=0;p<l;p++)for(var g=v*(p/l),m=0,x=0;x<d.length;x++){var y=d[x],T=d[(x+1)%d.length],C=new o(y.x,y.y,T.x,T.y),S=n(C);if(g<m||g>m+S){m+=S;continue}var E=C.getPoint((g-m)/S);c.push(E);break}return c};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(47),a=function(h){for(var u=h.points,l=0,f=0;f<u.length;f++){var c=u[f],d=u[(f+1)%u.length],v=new o(c.x,c.y,d.x,d.y);l+=n(v)}return l};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(o,a){return o[0]=a[0],o[1]=a[1],o},n=function(o){var a,h=[],u=o.points;for(a=0;a<u.length;a++)h.push([u[a].x,u[a].y]);var l=[];for(h.length>0&&l.push(i([0,0],h[0])),a=0;a<h.length-1;a++){var f=h[a],c=h[a+1],d=f[0],v=f[1],p=c[0],g=c[1];l.push([.85*d+.15*p,.85*v+.15*g]),l.push([.15*d+.85*p,.15*v+.85*g])}return h.length>1&&l.push(i([0,0],h[h.length-1])),o.setTo(l)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(10),a=i(34),h=i(1121),u=new n({Extends:a,Mixins:[h],initialize:function(f,c,d,v,p,g,m){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=128),p===void 0&&(p=128),a.call(this,f,"Rectangle",new o(0,0,v,p)),this.setPosition(c,d),this.setSize(v,p),g!==void 0&&this.setFillStyle(g,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(l,f){return this.width=l,this.height=f,this.geom.setSize(l,f),this.updateData(),this},updateData:function(){var l=[],f=this.geom,c=this._tempLine;return f.getLineA(c),l.push(c.x1,c.y1,c.x2,c.y2),f.getLineB(c),l.push(c.x2,c.y2),f.getLineC(c),l.push(c.x2,c.y2),f.getLineD(c),l.push(c.x2,c.y2),this.pathData=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1124),o=i(0),a=i(59),h=i(34),u=new o({Extends:h,Mixins:[n],initialize:function(f,c,d,v,p,g,m,x){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=5),p===void 0&&(p=32),g===void 0&&(g=64),h.call(this,f,"Star",null),this._points=v,this._innerRadius=p,this._outerRadius=g,this.setPosition(c,d),this.setSize(g*2,g*2),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},setPoints:function(l){return this._points=l,this.updateData()},setInnerRadius:function(l){return this._innerRadius=l,this.updateData()},setOuterRadius:function(l){return this._outerRadius=l,this.updateData()},points:{get:function(){return this._points},set:function(l){this._points=l,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(l){this._innerRadius=l,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(l){this._outerRadius=l,this.updateData()}},updateData:function(){var l=[],f=this._points,c=this._innerRadius,d=this._outerRadius,v=Math.PI/2*3,p=Math.PI/f,g=d,m=d;l.push(g,m+-d);for(var x=0;x<f;x++)l.push(g+Math.cos(v)*d,m+Math.sin(v)*d),v+=p,l.push(g+Math.cos(v)*c,m+Math.sin(v)*c),v+=p;return l.push(g,m+-d),this.pathIndexes=a(l),this.pathData=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(34),a=i(82),h=i(1127),u=new n({Extends:o,Mixins:[h],initialize:function(f,c,d,v,p,g,m,x,y,T,C){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=128),g===void 0&&(g=64),m===void 0&&(m=0),x===void 0&&(x=128),y===void 0&&(y=128),o.call(this,f,"Triangle",new a(v,p,g,m,x,y));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(c,d),this.setSize(S,E),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(l,f,c,d,v,p){return this.geom.setTo(l,f,c,d,v,p),this.updateData()},updateData:function(){var l=[],f=this.geom,c=this._tempLine;return f.getLineA(c),l.push(c.x1,c.y1,c.x2,c.y2),f.getLineB(c),l.push(c.x2,c.y2),f.getLineC(c),l.push(c.x2,c.y2),this.pathData=l,this}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(67),a=function(h,u,l){l===void 0&&(l=new n);var f=h.getLineA(),c=h.getLineB(),d=h.getLineC();if(u<=0||u>=1)return l.x=f.x1,l.y=f.y1,l;var v=o(f),p=o(c),g=o(d),m=v+p+g,x=m*u,y=0;return x<v?(y=x/v,l.x=f.x1+(f.x2-f.x1)*y,l.y=f.y1+(f.y2-f.y1)*y):x>v+p?(x-=v+p,y=x/g,l.x=d.x1+(d.x2-d.x1)*y,l.y=d.y1+(d.y2-d.y1)*y):(x-=v,y=x/p,l.x=c.x1+(c.x2-c.x1)*y,l.y=c.y1+(c.y2-c.y1)*y),l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=i(4),a=function(h,u,l,f){f===void 0&&(f=[]);var c=h.getLineA(),d=h.getLineB(),v=h.getLineC(),p=n(c),g=n(d),m=n(v),x=p+g+m;!u&&l>0&&(u=x/l);for(var y=0;y<u;y++){var T=x*(y/u),C=0,S=new o;T<p?(C=T/p,S.x=c.x1+(c.x2-c.x1)*C,S.y=c.y1+(c.y2-c.y1)*C):T>p+g?(T-=p+g,C=T/m,S.x=v.x1+(v.x2-v.x1)*C,S.y=v.y1+(v.y2-v.y1)*C):(T-=p,C=T/g,S.x=d.x1+(d.x2-d.x1)*C,S.y=d.y1+(d.y2-d.y1)*C),f.push(S)}return f};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(!n||typeof n=="number")return!1;if(n.hasOwnProperty(o))return n[o]=a,!0;if(o.indexOf(".")!==-1){for(var h=o.split("."),u=n,l=n,f=0;f<h.length;f++)if(u.hasOwnProperty(h[f]))l=u,u=u[h[f]];else return!1;return l[h[h.length-1]]=a,!0}return!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),o=i(117),a=function(h,u,l,f,c,d,v){if(f===void 0&&(f=!1),d===void 0&&(d=16777215),v===void 0&&(v=1),h.length!==u.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,m,x,y,T,C,S,E,P,M,R,A=f?3:2,O=Array.isArray(d),b=Array.isArray(v);if(Array.isArray(l)&&l.length>0)for(g=0;g<l.length;g++){var w=l[g],I=l[g]*2,Y=l[g]*A;m=h[Y],x=h[Y+1],y=f?h[Y+2]:0,T=u[I],C=u[I+1],S=O?d[w]:d,E=b?v[w]:v,P=0,M=0,R=0,c&&(P=c[Y],M=c[Y+1],R=f?c[Y+2]:0),p.vertices.push(new o(m,x,y,T,C,S,E,P,M,R))}else{var z=0,V=0;for(g=0;g<h.length;g+=A)m=h[g],x=h[g+1],y=f?h[g+2]:0,T=u[z],C=u[z+1],S=O?d[V]:d,E=b?v[V]:v,P=0,M=0,R=0,c&&(P=c[g],M=c[g+1],R=f?c[g+2]:0),p.vertices.push(new o(m,x,y,T,C,S,E,P,M,R)),z+=2,V++}for(g=0;g<p.vertices.length;g+=3){var W=p.vertices[g],F=p.vertices[g+1],L=p.vertices[g+2];p.faces.push(new n(W,F,L))}return p};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),o=i(69),a=i(39),h=i(117),u=new a,l=new a,f=new o,c=function(d,v,p,g,m,x,y,T,C,S){p===void 0&&(p=1),g===void 0&&(g=0),m===void 0&&(m=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},P=d.materials;u.set(g,m,x),l.set(y,T,C),f.fromRotationXYTranslation(l,u,S);for(var M=0;M<d.models.length;M++)for(var R=d.models[M],A=R.vertices,O=R.textureCoords,b=R.faces,w=0;w<b.length;w++){var I=b[w],Y=I.vertices[0],z=I.vertices[1],V=I.vertices[2],W=A[Y.vertexIndex],F=A[z.vertexIndex],L=A[V.vertexIndex],D=Y.textureCoordsIndex,B=z.textureCoordsIndex,G=V.textureCoordsIndex,N=D===-1?{u:0,v:1}:O[D],X=B===-1?{u:0,v:0}:O[B],U=G===-1?{u:1,v:1}:O[G],H=16777215;I.material!==""&&P[I.material]&&(H=P[I.material]);var $=new h(W.x*p,W.y*p,W.z*p,N.u,N.v,H).transformMat4(f),Z=new h(F.x*p,F.y*p,F.z*p,X.u,X.v,H).transformMat4(f),J=new h(L.x*p,L.y*p,L.z*p,U.u,U.v,H).transformMat4(f);E.verts.push($,Z,J),E.faces.push(new n($,Z,J))}return v&&(v.faces=v.faces.concat(E.faces),v.vertices=v.vertices.concat(E.verts)),E};e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=i(0),a=i(11),h=i(200),u=i(12),l=new o({Extends:n,Mixins:[a.ScrollFactor,a.Visible],initialize:function(c,d,v,p,g,m,x){n.call(this,c,d,v),this.color=new h(p,g,m),this.intensity=x,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(f){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setColor:function(f){var c=u.getFloatsFromUintRGB(f);return this.color.set(c[0],c[1],c[2]),this},setIntensity:function(f){return this.intensity=f,this},setRadius:function(f){return this.radius=f,this}});l.RENDER_MASK=15,e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(151),o=i(0),a=i(50),h=i(481),u=i(150),l=i(200),f=i(74),c=i(79),d=i(12),v=new o({initialize:function(){this.lights=[],this.ambientColor=new l(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,m,x,y,T){return this.systems.displayList.add(new u(this.scene,p,g,m,x,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,m=p.worldView,x=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&n(T,m)&&x.push({light:T,distance:a(T.x,T.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(c(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=d.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,m,x,y){p===void 0&&(p=0),g===void 0&&(g=0),m===void 0&&(m=128),x===void 0&&(x=16777215),y===void 0&&(y=1);var T=d.getFloatsFromUintRGB(x),C=new h(p,g,m,T[0],T[1],T[2],y);return this.lights.push(C),C},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&f(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(56),o=i(17),a={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=function(a,h,u){var l=a.x1,f=a.y1,c=a.x2,d=a.y2,v=h.x1,p=h.y1,g=h.x2,m=h.y2,x=c-l,y=d-f,T=g-v,C=m-p,S=C*x-T*y;if(x===0||S===0)return!1;var E=(x*(p-f)+y*(l-v))/(T*y-C*x),P=(v+T*E-l)/x;return P<0||E<0||E>1?null:(u===void 0&&(u=new n),u.set(l+x*P,f+y*P,P))};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=i(485),a=i(47),h=new a,u=new n,l=function(f,c,d){d===void 0&&(d=new n);var v=!1;d.set(),u.set();for(var p=c[0],g=1;g<c.length;g++){var m=c[g];h.setTo(p.x,p.y,m.x,m.y),p=m,o(f,h,u)&&(!v||u.z<d.z)&&(d.copy(u),v=!0)}return v?d:null};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=i(140),a=i(486),h=new n,u=function(l,f,c){c===void 0&&(c=new o),Array.isArray(f)||(f=[f]);var d=!1;c.set(),h.set();for(var v=0;v<f.length;v++)a(l,f[v].points,h)&&(!d||h.z<c.z)&&(c.set(h.x,h.y,h.z,v),d=!0);return d?c:null};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.x1,h=n.y1,u=n.x2,l=n.y2,f=o.x,c=o.y,d=o.right,v=o.bottom,p=0;if(a>=f&&a<=d&&h>=c&&h<=v||u>=f&&u<=d&&l>=c&&l<=v)return!0;if(a<f&&u>=f){if(p=h+(l-h)*(f-a)/(u-a),p>c&&p<=v)return!0}else if(a>d&&u<=d&&(p=h+(l-h)*(d-a)/(u-a),p>=c&&p<=v))return!0;if(h<c&&l>=c){if(p=a+(u-a)*(c-h)/(l-h),p>=f&&p<=d)return!0}else if(h>v&&l<=v&&(p=a+(u-a)*(v-h)/(l-h),p>=f&&p<=d))return!0;return!1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(96),o=i(57),a=i(235),h=i(490),u=function(l,f){if(f.left>l.right||f.right<l.left||f.top>l.bottom||f.bottom<l.top)return!1;var c=f.getLineA(),d=f.getLineB(),v=f.getLineC();if(o(l,c.x1,c.y1)||o(l,c.x2,c.y2)||o(l,d.x1,d.y1)||o(l,d.x2,d.y2)||o(l,v.x1,v.y1)||o(l,v.x2,v.y2))return!0;var p=l.getLineA(),g=l.getLineB(),m=l.getLineC(),x=l.getLineD();if(n(c,p)||n(c,g)||n(c,m)||n(c,x)||n(d,p)||n(d,g)||n(d,m)||n(d,x)||n(v,p)||n(v,g)||n(v,m)||n(v,x))return!0;var y=h(l),T=a(f,y,!0);return T.length>0};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=[]),o.push({x:n.x,y:n.y}),o.push({x:n.right,y:n.y}),o.push({x:n.right,y:n.bottom}),o.push({x:n.x,y:n.bottom}),o};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(233),o=i(115),a=function(h,u){return h.left>u.right||h.right<u.left||h.top>u.bottom||h.bottom<u.top?!1:!!(o(h,u.x,u.y)||n(h.getLineA(),u)||n(h.getLineB(),u)||n(h.getLineC(),u))};e.exports=a},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(493),a=i(96),h=function(u,l,f){if(f===void 0&&(f=[]),o(u,l))for(var c=u.getLineA(),d=u.getLineB(),v=u.getLineC(),p=[new n,new n,new n],g=[a(c,l,p[0]),a(d,l,p[1]),a(v,l,p[2])],m=0;m<3;m++)g[m]&&f.push(p[m]);return f};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(96),o=function(a,h){return!!(a.contains(h.x1,h.y1)||a.contains(h.x2,h.y2)||n(a.getLineA(),h)||n(a.getLineB(),h)||n(a.getLineC(),h))};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(235),o=i(495),a=i(96),h=function(u,l){if(u.left>l.right||u.right<l.left||u.top>l.bottom||u.bottom<l.top)return!1;var f=u.getLineA(),c=u.getLineB(),d=u.getLineC(),v=l.getLineA(),p=l.getLineB(),g=l.getLineC();if(a(f,v)||a(f,p)||a(f,g)||a(c,v)||a(c,p)||a(c,g)||a(d,v)||a(d,p)||a(d,g))return!0;var m=o(u),x=n(l,m,!0);return x.length>0||(m=o(l),x=n(u,m,!0),x.length>0)};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=[]),o.push({x:n.x1,y:n.y1}),o.push({x:n.x2,y:n.y2}),o.push({x:n.x3,y:n.y3}),o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){a===void 0&&(a=1);var h=o.x1,u=o.y1,l=o.x2,f=o.y2,c=n.x,d=n.y,v=(l-h)*(l-h)+(f-u)*(f-u);if(v===0)return!1;var p=((c-h)*(l-h)+(d-u)*(f-u))/v;if(p<0)return Math.sqrt((h-c)*(h-c)+(u-d)*(u-d))<=a;if(p>=0&&p<=1){var g=((u-d)*(l-h)-(h-c)*(f-u))/v;return Math.abs(g)*Math.sqrt(v)<=a}else return Math.sqrt((l-c)*(l-c)+(f-d)*(f-d))<=a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(68),a=i(97),h=function(u){var l=a(u)-n.TAU;return o(l,-Math.PI,Math.PI)};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=!0,n="untitled",o="",a="";function h(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function u(y){return y.models.length===0&&y.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),o="",y.models[y.models.length-1]}function l(y,T){var C=y.length>=2?y[1]:n;T.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),o=""}function f(y){y.length===2&&(o=y[1])}function c(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;u(T).vertices.push({x:S,y:E,z:P})}function d(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),i&&(E=1-E),u(T).textureCoords.push({u:S,v:E,w:P})}function v(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;u(T).vertexNormals.push({x:S,y:E,z:P})}function p(y,T){var C=y.length-1;if(!(C<3)){for(var S={group:o,material:a,vertices:[]},E=0;E<C;E++){var P=y[E+1],M=P.split("/"),R=M.length;if(!(R<1||R>3)){var A=0,O=0,b=0;A=parseInt(M[0],10),R>1&&M[1]!==""&&(O=parseInt(M[1],10)),R>2&&(b=parseInt(M[2],10)),A!==0&&(A<0&&(A=u(T).vertices.length+1+A),O-=1,A-=1,b-=1,S.vertices.push({textureCoordsIndex:O,vertexIndex:A,vertexNormalIndex:b}))}}u(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function m(y){y.length>=2&&(a=y[1])}var x=function(y,T){T===void 0&&(T=!0),i=T;var C={materials:{},materialLibraries:[],models:[]};o="",a="";for(var S=y.split(`
`),E=0;E<S.length;E++){var P=h(S[E]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":l(M,C);break;case"g":f(M);break;case"v":c(M,C);break;case"vt":d(M,C);break;case"vn":v(M,C);break;case"f":p(M,C);break;case"mtllib":g(M,C);break;case"usemtl":m(M);break}}return C};e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103),o=function(a){for(var h={},u=a.split(`
`),l="",f=0;f<u.length;f++){var c=u[f].trim();if(!(c.indexOf("#")===0||c==="")){var d=c.replace(/\s\s+/g," ").trim().split(" ");switch(d[0].toLowerCase()){case"newmtl":{l=d[1];break}case"kd":{var v=Math.floor(d[1]*255),p=d.length>=2?Math.floor(d[2]*255):v,g=d.length>=3?Math.floor(d[3]*255):v;h[l]=n(v,p,g);break}}}}return h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x*n.x+n.y*n.y};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10);n.Area=i(1267),n.Ceil=i(1268),n.CeilAll=i(1269),n.CenterOn=i(190),n.Clone=i(1270),n.Contains=i(57),n.ContainsPoint=i(1271),n.ContainsRect=i(503),n.CopyFrom=i(1272),n.Decompose=i(490),n.Equals=i(1273),n.FitInside=i(1274),n.FitOutside=i(1275),n.Floor=i(1276),n.FloorAll=i(1277),n.FromPoints=i(199),n.FromXY=i(1278),n.GetAspectRatio=i(237),n.GetCenter=i(1279),n.GetPoint=i(171),n.GetPoints=i(306),n.GetSize=i(1280),n.Inflate=i(1281),n.Intersection=i(1282),n.MarchingAnts=i(316),n.MergePoints=i(1283),n.MergeRect=i(1284),n.MergeXY=i(1285),n.Offset=i(1286),n.OffsetPoint=i(1287),n.Overlaps=i(1288),n.Perimeter=i(130),n.PerimeterPoint=i(1289),n.Random=i(174),n.RandomOutside=i(1290),n.SameDimensions=i(1291),n.Scale=i(1292),n.Union=i(441),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.width*o.height>n.width*n.height?!1:o.x>n.x&&o.x<n.right&&o.right>n.x&&o.right<n.right&&o.y>n.y&&o.y<n.bottom&&o.bottom>n.y&&o.bottom<n.bottom};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){return h===void 0&&(h=new n),h.x=(a.x1+a.x2+a.x3)/3,h.y=(a.y1+a.y2+a.y3)/3,h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n.x1+=o,n.y1+=a,n.x2+=o,n.y2+=a,n.x3+=o,n.y3+=a,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4);function o(h,u,l,f){var c=h-l,d=u-f,v=c*c+d*d;return Math.sqrt(v)}var a=function(h,u){u===void 0&&(u=new n);var l=h.x1,f=h.y1,c=h.x2,d=h.y2,v=h.x3,p=h.y3,g=o(v,p,c,d),m=o(l,f,v,p),x=o(c,d,l,f),y=g+m+x;return u.x=(l*g+c*m+v*x)/y,u.y=(f*g+d*m+p*x)/y,u};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return function(a,h,u,l){var f=n.getPixelAlpha(h,u,l.texture.key,l.frame.name);return f&&f>=o}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return{gameObject:n,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:o,hitAreaCallback:a,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u){this.pad=h,this.events=h.events,this.index=u,this.value=0,this.threshold=.1},update:function(a){this.value=a},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(239),a=new n({initialize:function(u,l){this.pad=u,this.events=u.manager,this.index=l,this.value=0,this.threshold=1,this.pressed=!1},update:function(h){this.value=h;var u=this.pad,l=this.index;h>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(o.BUTTON_DOWN,u,this,h),this.pad.emit(o.GAMEPAD_BUTTON_DOWN,l,h,this)):this.pressed&&(this.pressed=!1,this.events.emit(o.BUTTON_UP,u,this,h),this.pad.emit(o.GAMEPAD_BUTTON_UP,l,h,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(509),o=i(510),a=i(0),h=i(9),u=i(3),l=new a({Extends:h,initialize:function(c,d){h.call(this),this.manager=c,this.pad=d,this.id=d.id,this.index=d.index;for(var v=[],p=0;p<d.buttons.length;p++)v.push(new o(this,p));this.buttons=v;var g=[];for(p=0;p<d.axes.length;p++)g.push(new n(this,p));this.axes=g,this.vibration=d.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:m,this._LCRight=v[15]?v[15]:m,this._LCTop=v[12]?v[12]:m,this._LCBottom=v[13]?v[13]:m,this._RCLeft=v[2]?v[2]:m,this._RCRight=v[1]?v[1]:m,this._RCTop=v[3]?v[3]:m,this._RCBottom=v[0]?v[0]:m,this._FBLeftTop=v[4]?v[4]:m,this._FBLeftBottom=v[6]?v[6]:m,this._FBRightTop=v[5]?v[5]:m,this._FBRightBottom=v[7]?v[7]:m;var x={value:0};this._HAxisLeft=g[0]?g[0]:x,this._VAxisLeft=g[1]?g[1]:x,this._HAxisRight=g[2]?g[2]:x,this._VAxisRight=g[3]?g[3]:x,this.leftStick=new u,this.rightStick=new u,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(f){return this.axes[f].getValue()},setAxisThreshold:function(f){for(var c=0;c<this.axes.length;c++)this.axes[c].threshold=f},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(f){return this.buttons[f].value},isButtonDown:function(f){return this.buttons[f].pressed},update:function(f){if(!(f.timestamp<this._created)){var c,d=this.buttons,v=f.buttons,p=d.length;for(c=0;c<p;c++)d[c].update(v[c].value);var g=this.axes,m=f.axes;for(p=g.length,c=0;c<p;c++)g[c].update(m[c]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var f;for(f=0;f<this.buttons.length;f++)this.buttons[f].destroy();for(f=0;f<this.axes.length;f++)this.axes[f].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(154),h=new n({Extends:o,initialize:function(l,f){o.call(this),this.plugin=l,this.keyCode=f,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(u){return this.emitOnRepeat=u,this},onDown:function(u){this.originalEvent=u,this.enabled&&(this.altKey=u.altKey,this.ctrlKey=u.ctrlKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.location=u.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,u):(this.isDown=!0,this.isUp=!1,this.timeDown=u.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,u)))},onUp:function(u){this.originalEvent=u,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=u.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,u))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(154),a=i(2),h=i(514),u=i(516),l=new n({initialize:function(c,d,v){if(v===void 0&&(v={}),d.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var p=0;p<d.length;p++){var g=d[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(v,"resetOnWrongKey",!0),this.maxKeyDelay=a(v,"maxKeyDelay",0),this.resetOnMatch=a(v,"resetOnMatch",!1),this.deleteOnMatch=a(v,"deleteOnMatch",!1);var m=this,x=function(y){if(!(m.matched||!m.enabled)){var T=h(y,m);T&&(m.manager.emit(o.COMBO_MATCH,m,y),m.resetOnMatch?u(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=x,this.manager.on(o.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(o.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(515),o=function(a,h){if(h.matched)return!0;var u=!1,l=!1;if(a.keyCode===h.current)if(h.index>0&&h.maxKeyDelay>0){var f=h.timeLastMatched+h.maxKeyDelay;a.timeStamp<=f&&(l=!0,u=n(a,h))}else l=!0,u=n(a,h);return!l&&h.resetOnWrongKey&&(h.index=0,h.current=h.keyCodes[0]),u&&(h.timeLastMatched=a.timeStamp,h.matched=!0,h.timeMatched=a.timeStamp),u};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.timeLastMatched=n.timeStamp,o.index++,o.index===o.size?!0:(o.current=o.keyCodes[o.index],!1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.current=n.keyCodes[0],n.index=0,n.timeLastMatched=0,n.matched=!1,n.timeMatched=0,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(240),o=function(a,h){var u=n(h,a.xhrSettings),l=new XMLHttpRequest;if(l.open("GET",a.src,u.async,u.user,u.password),l.responseType=a.xhrSettings.responseType,l.timeout=u.timeout,u.headers)for(var f in u.headers)l.setRequestHeader(f,u.headers[f]);return u.header&&u.headerValue&&l.setRequestHeader(u.header,u.headerValue),u.requestedWith&&l.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&l.overrideMimeType(u.overrideMimeType),u.withCredentials&&(l.withCredentials=!0),l.onload=a.onLoad.bind(a,l),l.onerror=a.onError.bind(a,l),l.onprogress=a.onProgress.bind(a),l.send(),l};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(519),f=i(7),c=new n({Extends:a,initialize:function(v,p,g,m,x){if(f(p)){var y=p;p=u(y,"key"),m=u(y,"xhrSettings"),x=u(y,"context",x)}var T={type:"audio",cache:v.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:m,config:{context:x}};a.call(this,v,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var d=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){d.data=v,d.onProcessComplete()},function(v){console.error("Error decoding audio: "+d.key+" - ",v?v.message:null),d.onProcessError()}),this.config.context=null}});c.create=function(d,v,p,g,m){var x=d.systems.game,y=x.config.audio,T=x.device.audio;f(v)&&(p=u(v,"url",[]),g=u(v,"config",{}));var C=c.getAudioURL(x,p);return C?T.webAudio&&!y.disableWebAudio?new c(d,v,C,m,x.sound.context):new l(d,v,C,g):null},c.getAudioURL=function(d,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=u(v[p],"url",v[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var m=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=u(v[p],"type",m?m[1]:"").toLowerCase(),d.device.audio[m])return{url:g,type:m}}return null},h.register("audio",function(d,v,p,g){var m=this.systems.game,x=m.config.audio,y=m.device.audio;if(x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(d))for(var C=0;C<d.length;C++)T=c.create(this,d[C]),T&&this.addFile(T);else T=c.create(this,d,v,p,g),T&&this.addFile(T);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(95),a=i(23),h=i(2),u=i(155),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g){if(l(v)){var m=v;v=h(m,"key"),g=h(m,"config",g)}var x={type:"audio",cache:d.cacheManager.audio,extension:p.type,key:v,url:p.url,config:g};a.call(this,d,x),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var c=0;c<this.data.length;c++){var d=this.data[c];d.oncanplaythrough=null,d.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(c){var d=c.target;d.oncanplaythrough=null,d.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var c=this.config&&this.config.instances||1;this.filesTotal=c,this.filesLoaded=0,this.percentComplete=0;for(var d=0;d<c;d++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+d).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(d=0;d<this.data.length;d++)v=this.data[d],v.src=u(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g){var m="js";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};a.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(522),o=i(157),a=i(0),h=i(62),u=i(524),l=i(525),f=new a({initialize:function(d){this.world=d,this.scene=d.scene,this.sys=d.scene.sys},collider:function(c,d,v,p,g){return this.world.addCollider(c,d,v,p,g)},overlap:function(c,d,v,p,g){return this.world.addOverlap(c,d,v,p,g)},existing:function(c,d){var v=d?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(c,v),c},staticImage:function(c,d,v,p){var g=new n(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,h.STATIC_BODY),g},image:function(c,d,v,p){var g=new n(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.world.enableBody(g,h.DYNAMIC_BODY),g},staticSprite:function(c,d,v,p){var g=new o(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,h.STATIC_BODY),g},sprite:function(c,d,v,p){var g=new o(this.scene,c,d,v,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,h.DYNAMIC_BODY),g},staticGroup:function(c,d){return this.sys.updateList.add(new l(this.world,this.world.scene,c,d))},group:function(c,d){return this.sys.updateList.add(new u(this.world,this.world.scene,c,d))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(243),a=i(125),h=new n({Extends:a,Mixins:[o.Acceleration,o.Angular,o.Bounce,o.Debug,o.Drag,o.Enable,o.Friction,o.Gravity,o.Immovable,o.Mass,o.Pushable,o.Size,o.Velocity],initialize:function(l,f,c,d,v){a.call(this,l,f,c,d,v),this.body=null}});e.exports=h},function(e,r,i){var n=i(244),o=i(65),a=i(231),h=i(151),u=function(l,f,c,d,v,p){var g=n(l,f-d,c-d,2*d,2*d,v,p);if(g.length===0)return g;for(var m=new o(f,c,d),x=new o,y=[],T=0;T<g.length;T++){var C=g[T];C.isCircle?(x.setTo(C.center.x,C.center.y,C.halfWidth),a(m,x)&&y.push(C)):h(m,C)&&y.push(C)}return y};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(157),o=i(0),a=i(62),h=i(2),u=i(113),l=i(7),f=new o({Extends:u,initialize:function(d,v,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(l(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&l(p[0])){g=p[0];var m=this;p.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=d,g.classType=h(g,"classType",n),this.physicsType=a.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:h(g,"collideWorldBounds",!1),setBoundsRectangle:h(g,"customBoundsRectangle",null),setAccelerationX:h(g,"accelerationX",0),setAccelerationY:h(g,"accelerationY",0),setAllowDrag:h(g,"allowDrag",!0),setAllowGravity:h(g,"allowGravity",!0),setAllowRotation:h(g,"allowRotation",!0),setBounceX:h(g,"bounceX",0),setBounceY:h(g,"bounceY",0),setDragX:h(g,"dragX",0),setDragY:h(g,"dragY",0),setEnable:h(g,"enable",!0),setGravityX:h(g,"gravityX",0),setGravityY:h(g,"gravityY",0),setFrictionX:h(g,"frictionX",0),setFrictionY:h(g,"frictionY",0),setMaxVelocityX:h(g,"maxVelocityX",1e4),setMaxVelocityY:h(g,"maxVelocityY",1e4),setVelocityX:h(g,"velocityX",0),setVelocityY:h(g,"velocityY",0),setAngularVelocity:h(g,"angularVelocity",0),setAngularAcceleration:h(g,"angularAcceleration",0),setAngularDrag:h(g,"angularDrag",0),setMass:h(g,"mass",1),setImmovable:h(g,"immovable",!1)},u.call(this,v,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,a.DYNAMIC_BODY);var d=c.body;for(var v in this.defaults)d[v](this.defaults[v])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,d,v){v===void 0&&(v=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(c+g*v,d+g*v);return this},setVelocityX:function(c,d){d===void 0&&(d=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.x=c+p*d;return this},setVelocityY:function(c,d){d===void 0&&(d=0);for(var v=this.getChildren(),p=0;p<v.length;p++)v[p].body.velocity.y=c+p*d;return this}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(157),o=i(0),a=i(62),h=i(2),u=i(113),l=i(7),f=new o({Extends:u,initialize:function(d,v,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:n}:l(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=h(g,"classType",n)):Array.isArray(p)&&l(p[0])?(g=p,p=null,g.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=h(m,"classType",n)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=d,this.physicsType=a.STATIC_BODY,u.call(this,v,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,a.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,d=0;d<c.length;d++)c[d].body.reset();return this}});e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(350),o=i(527),a=i(18),h=i(0),u=i(528),l=i(62),f=i(50),c=i(9),d=i(245),v=i(124),p=i(354),g=i(355),m=i(246),x=i(247),y=i(529),T=i(6),C=i(14),S=i(211),E=i(530),P=i(10),M=i(531),R=i(532),A=i(537),O=i(538),b=i(149),w=i(539),I=i(248),Y=i(25),z=i(3),V=i(68),W=new h({Extends:c,initialize:function(L,D){c.call(this),this.scene=L,this.bodies=new b,this.staticBodies=new b,this.pendingDestroy=new b,this.colliders=new S,this.gravity=new z(T(D,"gravity.x",0),T(D,"gravity.y",0)),this.bounds=new P(T(D,"x",0),T(D,"y",0),T(D,"width",L.sys.scale.width),T(D,"height",L.sys.scale.height)),this.checkCollision={up:T(D,"checkCollision.up",!0),down:T(D,"checkCollision.down",!0),left:T(D,"checkCollision.left",!0),right:T(D,"checkCollision.right",!0)},this.fps=T(D,"fps",60),this.fixedStep=T(D,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(D,"timeScale",1),this.OVERLAP_BIAS=T(D,"overlapBias",4),this.TILE_BIAS=T(D,"tileBias",16),this.forceX=T(D,"forceX",!1),this.isPaused=T(D,"isPaused",!1),this._total=0,this.drawDebug=T(D,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(D,"debugShowBody",!0),debugShowStaticBody:T(D,"debugShowStaticBody",!0),debugShowVelocity:T(D,"debugShowVelocity",!0),bodyDebugColor:T(D,"debugBodyColor",16711935),staticBodyDebugColor:T(D,"debugStaticBodyColor",255),velocityDebugColor:T(D,"debugVelocityColor",65280)},this.maxEntries=T(D,"maxEntries",16),this.useTree=T(D,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new Y,this._tempMatrix2=new Y,this.drawDebug&&this.createDebugGraphic()},enable:function(F,L){L===void 0&&(L=l.DYNAMIC_BODY),Array.isArray(F)||(F=[F]);for(var D=0;D<F.length;D++){var B=F[D];if(B.isParent)for(var G=B.getChildren(),N=0;N<G.length;N++){var X=G[N];X.isParent?this.enable(X,L):this.enableBody(X,L)}else this.enableBody(B,L)}},enableBody:function(F,L){return L===void 0&&(L=l.DYNAMIC_BODY),F.body||(L===l.DYNAMIC_BODY?F.body=new o(this,F):L===l.STATIC_BODY&&(F.body=new w(this,F))),this.add(F.body),F},add:function(F){return F.physicsType===l.DYNAMIC_BODY?this.bodies.set(F):F.physicsType===l.STATIC_BODY&&(this.staticBodies.set(F),this.staticTree.insert(F)),F.enable=!0,F},disable:function(F){Array.isArray(F)||(F=[F]);for(var L=0;L<F.length;L++){var D=F[L];if(D.isParent)for(var B=D.getChildren(),G=0;G<B.length;G++){var N=B[G];N.isParent?this.disable(N):this.disableBody(N.body)}else this.disableBody(D.body)}},disableBody:function(F){this.remove(F),F.enable=!1},remove:function(F){F.physicsType===l.DYNAMIC_BODY?(this.tree.remove(F),this.bodies.delete(F)):F.physicsType===l.STATIC_BODY&&(this.staticBodies.delete(F),this.staticTree.remove(F))},createDebugGraphic:function(){var F=this.scene.sys.add.graphics({x:0,y:0});return F.setDepth(Number.MAX_VALUE),this.debugGraphic=F,this.drawDebug=!0,F},setBounds:function(F,L,D,B,G,N,X,U){return this.bounds.setTo(F,L,D,B),G!==void 0&&this.setBoundsCollision(G,N,X,U),this},setBoundsCollision:function(F,L,D,B){return F===void 0&&(F=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),B===void 0&&(B=!0),this.checkCollision.left=F,this.checkCollision.right=L,this.checkCollision.up=D,this.checkCollision.down=B,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(F,L,D,B,G){D===void 0&&(D=null),B===void 0&&(B=null),G===void 0&&(G=D);var N=new u(this,!1,F,L,D,B,G);return this.colliders.add(N),N},addOverlap:function(F,L,D,B,G){D===void 0&&(D=null),B===void 0&&(B=null),G===void 0&&(G=D);var N=new u(this,!0,F,L,D,B,G);return this.colliders.add(N),N},removeCollider:function(F){return this.colliders.remove(F),this},setFPS:function(F){return this.fps=F,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(F,L){if(!(this.isPaused||this.bodies.size===0)){var D,B=this._frameTime,G=this._frameTimeMS*this.timeScale;this._elapsed+=L;var N,X=this.bodies.entries,U=this._elapsed>=G;for(this.fixedStep||(B=L*.001,U=!0,this._elapsed=0),D=0;D<X.length;D++)N=X[D],N.enable&&N.preUpdate(U,B);if(U){this._elapsed-=G,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(X));var H=this.colliders.update();for(D=0;D<H.length;D++){var $=H[D];$.active&&$.update()}this.emit(d.WORLD_STEP,B)}for(;this._elapsed>=G;)this._elapsed-=G,this.step(B)}},step:function(F){var L,D,B=this.bodies.entries,G=B.length;for(L=0;L<G;L++)D=B[L],D.enable&&D.update(F);this.useTree&&(this.tree.clear(),this.tree.load(B));var N=this.colliders.update();for(L=0;L<N.length;L++){var X=N[L];X.active&&X.update()}this.emit(d.WORLD_STEP,F),this.stepsLastFrame++},postUpdate:function(){var F,L,D=this.bodies.entries,B=D.length,G=this.bodies,N=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,F=0;F<B;F++)L=D[F],L.enable&&L.postUpdate();if(this.drawDebug){var X=this.debugGraphic;for(X.clear(),F=0;F<B;F++)L=D[F],L.willDrawDebug()&&L.drawDebug(X);for(D=N.entries,B=D.length,F=0;F<B;F++)L=D[F],L.willDrawDebug()&&L.drawDebug(X)}var U=this.pendingDestroy;if(U.size>0){var H=this.tree,$=this.staticTree;for(D=U.entries,B=D.length,F=0;F<B;F++)L=D[F],L.physicsType===l.DYNAMIC_BODY?(H.remove(L),G.delete(L)):L.physicsType===l.STATIC_BODY&&($.remove(L),N.delete(L)),L.world=void 0,L.gameObject=void 0;U.clear()}},updateMotion:function(F,L){F.allowRotation&&this.computeAngularVelocity(F,L),this.computeVelocity(F,L)},computeAngularVelocity:function(F,L){var D=F.angularVelocity,B=F.angularAcceleration,G=F.angularDrag,N=F.maxAngular;B?D+=B*L:F.allowDrag&&G&&(G*=L,p(D-G,0,.1)?D-=G:g(D+G,0,.1)?D+=G:D=0),D=a(D,-N,N);var X=D-F.angularVelocity;F.angularVelocity+=X,F.rotation+=F.angularVelocity*L},computeVelocity:function(F,L){var D=F.velocity.x,B=F.acceleration.x,G=F.drag.x,N=F.maxVelocity.x,X=F.velocity.y,U=F.acceleration.y,H=F.drag.y,$=F.maxVelocity.y,Z=F.speed,J=F.maxSpeed,Q=F.allowDrag,_=F.useDamping;F.allowGravity&&(D+=(this.gravity.x+F.gravity.x)*L,X+=(this.gravity.y+F.gravity.y)*L),B?D+=B*L:Q&&G&&(_?(G=Math.pow(G,L),D*=G,Z=Math.sqrt(D*D+X*X),v(Z,0,.001)&&(D=0)):(G*=L,p(D-G,0,.01)?D-=G:g(D+G,0,.01)?D+=G:D=0)),U?X+=U*L:Q&&H&&(_?(H=Math.pow(H,L),X*=H,Z=Math.sqrt(D*D+X*X),v(Z,0,.001)&&(X=0)):(H*=L,p(X-H,0,.01)?X-=H:g(X+H,0,.01)?X+=H:X=0)),D=a(D,-N,N),X=a(X,-$,$),F.velocity.set(D,X),J>-1&&Z>J&&(F.velocity.normalize().scale(J),Z=J),F.speed=Z},separate:function(F,L,D,B,G,N){if(!N&&!F.enable||!L.enable||F.checkCollision.none||L.checkCollision.none||!this.intersects(F,L)||D&&D.call(B,F.gameObject,L.gameObject)===!1)return!1;if(F.isCircle&&L.isCircle)return this.separateCircle(F,L,G);if(F.isCircle!==L.isCircle){var X=F.isCircle?L:F,U=F.isCircle?F:L,H={x:X.x,y:X.y,right:X.right,bottom:X.bottom},$=U.center;if(($.y<H.y||$.y>H.bottom)&&($.x<H.x||$.x>H.right))return this.separateCircle(F,L,G)}var Z=!1,J=!1;G?(Z=A(F,L,G,this.OVERLAP_BIAS),J=O(F,L,G,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+F.gravity.y)<Math.abs(this.gravity.x+F.gravity.x)?(Z=A(F,L,G,this.OVERLAP_BIAS),this.intersects(F,L)&&(J=O(F,L,G,this.OVERLAP_BIAS))):(J=O(F,L,G,this.OVERLAP_BIAS),this.intersects(F,L)&&(Z=A(F,L,G,this.OVERLAP_BIAS)));var Q=Z||J;return Q&&(G?(F.onOverlap||L.onOverlap)&&this.emit(d.OVERLAP,F.gameObject,L.gameObject,F,L):(F.onCollide||L.onCollide)&&this.emit(d.COLLIDE,F.gameObject,L.gameObject,F,L)),Q},separateCircle:function(F,L,D,B){m(F,L,!1,B),x(F,L,!1,B);var G=0;if(F.isCircle!==L.isCircle){var N={x:L.isCircle?F.position.x:L.position.x,y:L.isCircle?F.position.y:L.position.y,right:L.isCircle?F.right:L.right,bottom:L.isCircle?F.bottom:L.bottom},X={x:F.isCircle?F.center.x:L.center.x,y:F.isCircle?F.center.y:L.center.y,radius:F.isCircle?F.halfWidth:L.halfWidth};X.y<N.y?X.x<N.x?G=f(X.x,X.y,N.x,N.y)-X.radius:X.x>N.right&&(G=f(X.x,X.y,N.right,N.y)-X.radius):X.y>N.bottom&&(X.x<N.x?G=f(X.x,X.y,N.x,N.bottom)-X.radius:X.x>N.right&&(G=f(X.x,X.y,N.right,N.bottom)-X.radius)),G*=-1}else G=F.halfWidth+L.halfWidth-f(F.center.x,F.center.y,L.center.x,L.center.y);if(F.overlapR=G,L.overlapR=G,D||G===0||F.immovable&&L.immovable||F.customSeparateX||L.customSeparateX)return G!==0&&(F.onOverlap||L.onOverlap)&&this.emit(d.OVERLAP,F.gameObject,L.gameObject,F,L),G!==0;var U=F.center.x-L.center.x,H=F.center.y-L.center.y,$=Math.sqrt(Math.pow(U,2)+Math.pow(H,2)),Z=(L.center.x-F.center.x)/$||0,J=(L.center.y-F.center.y)/$||0,Q=2*(F.velocity.x*Z+F.velocity.y*J-L.velocity.x*Z-L.velocity.y*J)/(F.mass+L.mass);(F.immovable||L.immovable)&&(Q*=2),F.immovable||(F.velocity.x=F.velocity.x-Q/F.mass*Z,F.velocity.y=F.velocity.y-Q/F.mass*J),L.immovable||(L.velocity.x=L.velocity.x+Q/L.mass*Z,L.velocity.y=L.velocity.y+Q/L.mass*J),!F.immovable&&!L.immovable&&(G/=2);var _=n(F.center,L.center),j=(G+C.EPSILON)*Math.cos(_),tt=(G+C.EPSILON)*Math.sin(_);return F.immovable||(F.x-=j,F.y-=tt,F.updateCenter()),L.immovable||(L.x+=j,L.y+=tt,L.updateCenter()),F.velocity.x*=F.bounce.x,F.velocity.y*=F.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(F.onCollide||L.onCollide)&&this.emit(d.COLLIDE,F.gameObject,L.gameObject,F,L),!0},intersects:function(F,L){return F===L?!1:!F.isCircle&&!L.isCircle?!(F.right<=L.position.x||F.bottom<=L.position.y||F.position.x>=L.right||F.position.y>=L.bottom):F.isCircle?L.isCircle?f(F.center.x,F.center.y,L.center.x,L.center.y)<=F.halfWidth+L.halfWidth:this.circleBodyIntersects(F,L):this.circleBodyIntersects(L,F)},circleBodyIntersects:function(F,L){var D=a(F.center.x,L.left,L.right),B=a(F.center.y,L.top,L.bottom),G=(F.center.x-D)*(F.center.x-D),N=(F.center.y-B)*(F.center.y-B);return G+N<=F.halfWidth*F.halfWidth},overlap:function(F,L,D,B,G){return D===void 0&&(D=null),B===void 0&&(B=null),G===void 0&&(G=D),this.collideObjects(F,L,D,B,G,!0)},collide:function(F,L,D,B,G){return D===void 0&&(D=null),B===void 0&&(B=null),G===void 0&&(G=D),this.collideObjects(F,L,D,B,G,!1)},collideObjects:function(F,L,D,B,G,N){var X,U;F.isParent&&F.physicsType===void 0&&(F=F.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var H=Array.isArray(F),$=Array.isArray(L);if(this._total=0,!H&&!$)this.collideHandler(F,L,D,B,G,N);else if(!H&&$)for(X=0;X<L.length;X++)this.collideHandler(F,L[X],D,B,G,N);else if(H&&!$)if(L)for(X=0;X<F.length;X++)this.collideHandler(F[X],L,D,B,G,N);else for(X=0;X<F.length;X++){var Z=F[X];for(U=X+1;U<F.length;U++)X!==U&&this.collideHandler(Z,F[U],D,B,G,N)}else for(X=0;X<F.length;X++)for(U=0;U<L.length;U++)this.collideHandler(F[X],L[U],D,B,G,N);return this._total>0},collideHandler:function(F,L,D,B,G,N){if(L===void 0&&F.isParent)return this.collideGroupVsGroup(F,F,D,B,G,N);if(!F||!L)return!1;if(F.body){if(L.body)return this.collideSpriteVsSprite(F,L,D,B,G,N);if(L.isParent)return this.collideSpriteVsGroup(F,L,D,B,G,N);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(F,L,D,B,G,N)}else if(F.isParent){if(L.body)return this.collideSpriteVsGroup(L,F,D,B,G,N);if(L.isParent)return this.collideGroupVsGroup(F,L,D,B,G,N);if(L.isTilemap)return this.collideGroupVsTilemapLayer(F,L,D,B,G,N)}else if(F.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,F,D,B,G,N);if(L.isParent)return this.collideGroupVsTilemapLayer(L,F,D,B,G,N)}},collideSpriteVsSprite:function(F,L,D,B,G,N){return!F.body||!L.body?!1:(this.separate(F.body,L.body,B,G,N)&&(D&&D.call(G,F,L),this._total++),!0)},collideSpriteVsGroup:function(F,L,D,B,G,N){var X=F.body;if(!(L.length===0||!X||!X.enable||X.checkCollision.none)){var U,H,$;if(this.useTree||L.physicsType===l.STATIC_BODY){var Z=this.treeMinMax;Z.minX=X.left,Z.minY=X.top,Z.maxX=X.right,Z.maxY=X.bottom;var J=L.physicsType===l.DYNAMIC_BODY?this.tree.search(Z):this.staticTree.search(Z);for(H=J.length,U=0;U<H;U++)$=J[U],!(X===$||!$.enable||$.checkCollision.none||!L.contains($.gameObject))&&this.separate(X,$,B,G,N,!0)&&(D&&D.call(G,X.gameObject,$.gameObject),this._total++)}else{var Q=L.getChildren(),_=L.children.entries.indexOf(F);for(H=Q.length,U=0;U<H;U++)$=Q[U].body,!(!$||U===_||!$.enable)&&this.separate(X,$,B,G,N)&&(D&&D.call(G,X.gameObject,$.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(F,L,D,B,G,N){var X=F.getChildren();if(X.length===0)return!1;for(var U=!1,H=0;H<X.length;H++)X[H].body&&this.collideSpriteVsTilemapLayer(X[H],L,D,B,G,N)&&(U=!0);return U},collideTiles:function(F,L,D,B,G){return!F.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(F,L,D,B,G,!1,!1)},overlapTiles:function(F,L,D,B,G){return!F.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(F,L,D,B,G,!0,!1)},collideSpriteVsTilemapLayer:function(F,L,D,B,G,N){var X=F.body;if(!X.enable||X.checkCollision.none)return!1;var U=X.position.x,H=X.position.y,$=X.width,Z=X.height,J=L.layer;if(J.tileWidth>J.baseTileWidth){var Q=(J.tileWidth-J.baseTileWidth)*L.scaleX;U-=Q,$+=Q}if(J.tileHeight>J.baseTileHeight){var _=(J.tileHeight-J.baseTileHeight)*L.scaleY;Z+=_}var j=y(U,H,$,Z,null,L.scene.cameras.main,L.layer);return j.length===0?!1:this.collideSpriteVsTilesHandler(F,j,D,B,G,N,!0)},collideSpriteVsTilesHandler:function(F,L,D,B,G,N,X){for(var U=F.body,H,$={left:0,right:0,top:0,bottom:0},Z,J=!1,Q=0;Q<L.length;Q++){H=L[Q],Z=H.tilemapLayer;var _=Z.tileToWorldXY(H.x,H.y);$.left=_.x,$.top=_.y,H.baseHeight!==H.height&&($.top-=(H.height-H.baseHeight)*Z.scaleY),$.right=$.left+H.width*Z.scaleX,$.bottom=$.top+H.height*Z.scaleY,I($,U)&&(!B||B.call(G,F,H))&&E(H,F)&&(N||R(Q,U,H,$,Z,this.TILE_BIAS,X))&&(this._total++,J=!0,D&&D.call(G,F,H),N&&U.onOverlap?this.emit(d.TILE_OVERLAP,F,H,U):U.onCollide&&this.emit(d.TILE_COLLIDE,F,H,U))}return J},collideGroupVsGroup:function(F,L,D,B,G,N){if(!(F.length===0||L.length===0))for(var X=F.getChildren(),U=0;U<X.length;U++)this.collideSpriteVsGroup(X[U],L,D,B,G,N)},wrap:function(F,L){F.body?this.wrapObject(F,L):F.getChildren?this.wrapArray(F.getChildren(),L):Array.isArray(F)?this.wrapArray(F,L):this.wrapObject(F,L)},wrapArray:function(F,L){for(var D=0;D<F.length;D++)this.wrapObject(F[D],L)},wrapObject:function(F,L){L===void 0&&(L=0),F.x=V(F.x,this.bounds.left-L,this.bounds.right+L),F.y=V(F.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=W},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(62),a=i(245),h=i(196),u=i(10),l=i(57),f=i(3),c=new n({initialize:function(v,p){var g=p.displayWidth?p.displayWidth:64,m=p.displayHeight?p.displayHeight:64;this.world=v,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new f,this.position=new f(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=m,this.sourceWidth=g,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(m/2),this.center=new f(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new f,this.newVelocity=new f,this.deltaMax=new f,this.acceleration=new f,this.allowDrag=!0,this.drag=new f,this.allowGravity=!0,this.gravity=new f,this.bounce=new f,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new f(1e4,1e4),this.maxSpeed=-1,this.friction=new f(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=o.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=o.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new u},updateBounds:function(){var d=this.gameObject,v=this.transform;if(d.parentContainer){var p=d.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=p.tx,v.y=p.ty,v.rotation=h(p.rotation),v.scaleX=p.scaleX,v.scaleY=p.scaleY,v.displayOriginX=d.displayOriginX,v.displayOriginY=d.displayOriginY}else v.x=d.x,v.y=d.y,v.rotation=d.angle,v.scaleX=d.scaleX,v.scaleY=d.scaleY,v.displayOriginX=d.displayOriginX,v.displayOriginY=d.displayOriginY;var g=!1;if(this.syncBounds){var m=d.getBounds(this._bounds);this.width=m.width,this.height=m.height,g=!0}else{var x=Math.abs(v.scaleX),y=Math.abs(v.scaleY);(this._sx!==x||this._sy!==y)&&(this.width=this.sourceWidth*x,this.height=this.sourceHeight*y,this._sx=x,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var d=this.transform;this.position.x=d.x+d.scaleX*(this.offset.x-d.displayOriginX),this.position.y=d.y+d.scaleY*(this.offset.y-d.displayOriginY),this.updateCenter()},resetFlags:function(d){d===void 0&&(d=!1);var v=this.wasTouching,p=this.touching,g=this.blocked;d?(v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1):(v.none=p.none,v.up=p.up,v.down=p.down,v.left=p.left,v.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(d,v){d&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),d&&this.update(v)},update:function(d){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,d);var v=this.velocity.x,p=this.velocity.y;this.newVelocity.set(v*d,p*d),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,v),this.speed=Math.sqrt(v*v+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(a.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var d=this.position.x-this.prevFrame.x,v=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&d!==0&&(d<0&&d<-p?d=-p:d>0&&d>p&&(d=p)),g!==0&&v!==0&&(v<0&&v<-g?v=-g:v>0&&v>g&&(v=g)),this.gameObject.x+=d,this.gameObject.y+=v}d<0?this.facing=o.FACING_LEFT:d>0&&(this.facing=o.FACING_RIGHT),v<0?this.facing=o.FACING_UP:v>0&&(this.facing=o.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=d,this._ty=v},setBoundsRectangle:function(d){return this.customBoundsRectangle=d||this.world.bounds,this},checkWorldBounds:function(){var d=this.position,v=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,x=!1;return d.x<v.x&&p.left?(d.x=v.x,this.velocity.x*=g,this.blocked.left=!0,x=!0):this.right>v.right&&p.right&&(d.x=v.right-this.width,this.velocity.x*=g,this.blocked.right=!0,x=!0),d.y<v.y&&p.up?(d.y=v.y,this.velocity.y*=m,this.blocked.up=!0,x=!0):this.bottom>v.bottom&&p.down&&(d.y=v.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,x=!0),x&&(this.blocked.none=!1,this.updateCenter()),x},setOffset:function(d,v){return v===void 0&&(v=d),this.offset.set(d,v),this},setSize:function(d,v,p){p===void 0&&(p=!0);var g=this.gameObject;if(!d&&g.frame&&(d=g.frame.realWidth),!v&&g.frame&&(v=g.frame.realHeight),this.sourceWidth=d,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var m=(g.width-d)/2,x=(g.height-v)/2;this.offset.set(m,x)}return this.isCircle=!1,this.radius=0,this},setCircle:function(d,v,p){return v===void 0&&(v=this.offset.x),p===void 0&&(p=this.offset.y),d>0?(this.isCircle=!0,this.radius=d,this.sourceWidth=d*2,this.sourceHeight=d*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,p),this.updateCenter()):this.isCircle=!1,this},reset:function(d,v){this.stop();var p=this.gameObject;p.setPosition(d,v),p.getTopLeft?p.getTopLeft(this.position):this.position.set(d,v),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(d){return d.x=this.x,d.y=this.y,d.right=this.right,d.bottom=this.bottom,d},hitTest:function(d,v){if(!this.isCircle)return l(this,d,v);if(this.radius>0&&d>=this.left&&d<=this.right&&v>=this.top&&v<=this.bottom){var p=(this.center.x-d)*(this.center.x-d),g=(this.center.y-v)*(this.center.y-v);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(d){var v=this.position,p=v.x+this.halfWidth,g=v.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor),this.isCircle?d.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&d.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&d.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&d.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&d.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(d.lineStyle(d.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),d.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(d,v,p,g){d===void 0&&(d=!0),this.collideWorldBounds=d;var m=v!==void 0,x=p!==void 0;return(m||x)&&(this.worldBounce||(this.worldBounce=new f),m&&(this.worldBounce.x=v),x&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(d,v){return this.velocity.set(d,v),d=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(d*d+v*v),this},setVelocityX:function(d){this.velocity.x=d;var v=d,p=this.velocity.y;return this.speed=Math.sqrt(v*v+p*p),this},setVelocityY:function(d){this.velocity.y=d;var v=this.velocity.x,p=d;return this.speed=Math.sqrt(v*v+p*p),this},setMaxVelocity:function(d,v){return this.maxVelocity.set(d,v),this},setMaxVelocityX:function(d){return this.maxVelocity.x=d,this},setMaxVelocityY:function(d){return this.maxVelocity.y=d,this},setMaxSpeed:function(d){return this.maxSpeed=d,this},setBounce:function(d,v){return this.bounce.set(d,v),this},setBounceX:function(d){return this.bounce.x=d,this},setBounceY:function(d){return this.bounce.y=d,this},setAcceleration:function(d,v){return this.acceleration.set(d,v),this},setAccelerationX:function(d){return this.acceleration.x=d,this},setAccelerationY:function(d){return this.acceleration.y=d,this},setAllowDrag:function(d){return d===void 0&&(d=!0),this.allowDrag=d,this},setAllowGravity:function(d){return d===void 0&&(d=!0),this.allowGravity=d,this},setAllowRotation:function(d){return d===void 0&&(d=!0),this.allowRotation=d,this},setDrag:function(d,v){return this.drag.set(d,v),this},setDamping:function(d){return this.useDamping=d,this},setDragX:function(d){return this.drag.x=d,this},setDragY:function(d){return this.drag.y=d,this},setGravity:function(d,v){return this.gravity.set(d,v),this},setGravityX:function(d){return this.gravity.x=d,this},setGravityY:function(d){return this.gravity.y=d,this},setFriction:function(d,v){return this.friction.set(d,v),this},setFrictionX:function(d){return this.friction.x=d,this},setFrictionY:function(d){return this.friction.y=d,this},setAngularVelocity:function(d){return this.angularVelocity=d,this},setAngularAcceleration:function(d){return this.angularAcceleration=d,this},setAngularDrag:function(d){return this.angularDrag=d,this},setMass:function(d){return this.mass=d,this},setImmovable:function(d){return d===void 0&&(d=!0),this.immovable=d,this},setEnable:function(d){return d===void 0&&(d=!0),this.enable=d,this},processX:function(d,v,p,g){this.x+=d,this.updateCenter(),v!==null&&(this.velocity.x=v);var m=this.blocked;p&&(m.left=!0),g&&(m.right=!0)},processY:function(d,v,p,g){this.y+=d,this.updateCenter(),v!==null&&(this.velocity.y=v);var m=this.blocked;p&&(m.up=!0),g&&(m.down=!0)},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f,c,d,v){this.world=h,this.name="",this.active=!0,this.overlapOnly=u,this.object1=l,this.object2=f,this.collideCallback=c,this.processCallback=d,this.callbackContext=v},setName:function(a){return this.name=a,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(3),a=new o,h=new o,u=function(l,f,c,d,v,p,g){var m=g.tilemapLayer.tilemap._convert.WorldToTileXY;m(l,f,!0,a,p,g);var x=a.x,y=a.y;m(l+c,f+d,!1,h,p,g);var T=Math.ceil(h.x),C=Math.ceil(h.y);return n(x,y,T-x,C-y,v,g)};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.collisionCallback?!n.collisionCallback.call(n.collisionCallbackContext,o,n):n.layer.callbacks[n.index]?!n.layer.callbacks[n.index].callback.call(n.layer.callbacks[n.index].callbackContext,o,n):!0};e.exports=i},function(e,r,i){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(436);function o(C){if(!(this instanceof o))return new o(C);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}o.prototype={all:function(){return this._all(this.data,[])},search:function(C){var S=this.data,E=[],P=this.toBBox;if(!x(C,S))return E;for(var M=[],R,A,O,b;S;){for(R=0,A=S.children.length;R<A;R++)O=S.children[R],b=S.leaf?P(O):O,x(C,b)&&(S.leaf?E.push(O):m(C,b)?this._all(O,E):M.push(O));S=M.pop()}return E},collides:function(C){var S=this.data,E=this.toBBox;if(!x(C,S))return!1;for(var P=[],M,R,A,O;S;){for(M=0,R=S.children.length;M<R;M++)if(A=S.children[M],O=S.leaf?E(A):A,x(C,O)){if(S.leaf||m(C,O))return!0;P.push(A)}S=P.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var S=0,E=C.length;S<E;S++)this.insert(C[S]);return this}var P=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var M=this.data;this.data=P,P=M}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,S){if(!C)return this;for(var E=this.data,P=this.toBBox(C),M=[],R=[],A,O,b,w;E||M.length;){if(E||(E=M.pop(),O=M[M.length-1],A=R.pop(),w=!0),E.leaf&&(b=a(C,E.children,S),b!==-1))return E.children.splice(b,1),M.push(E),this._condense(M),this;!w&&!E.leaf&&m(E,P)?(M.push(E),R.push(A),A=0,O=E,E=E.children[0]):O?(A++,E=O.children[A],w=!1):E=null}return this},toBBox:function(C){return C},compareMinX:f,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,S){for(var E=[];C;)C.leaf?S.push.apply(S,C.children):E.push.apply(E,C.children),C=E.pop();return S},_build:function(C,S,E,P){var M=E-S+1,R=this._maxEntries,A;if(M<=R)return A=y(C.slice(S,E+1)),h(A,this.toBBox),A;P||(P=Math.ceil(Math.log(M)/Math.log(R)),R=Math.ceil(M/Math.pow(R,P-1))),A=y([]),A.leaf=!1,A.height=P;var O=Math.ceil(M/R),b=O*Math.ceil(Math.sqrt(R)),w,I,Y,z;for(T(C,S,E,b,this.compareMinX),w=S;w<=E;w+=b)for(Y=Math.min(w+b-1,E),T(C,w,Y,O,this.compareMinY),I=w;I<=Y;I+=O)z=Math.min(I+O-1,Y),A.children.push(this._build(C,I,z,P-1));return h(A,this.toBBox),A},_chooseSubtree:function(C,S,E,P){for(var M,R,A,O,b,w,I,Y;P.push(S),!(S.leaf||P.length-1===E);){for(I=Y=1/0,M=0,R=S.children.length;M<R;M++)A=S.children[M],b=d(A),w=p(C,A)-b,w<Y?(Y=w,I=b<I?b:I,O=A):w===Y&&b<I&&(I=b,O=A);S=O||S.children[0]}return S},_insert:function(C,S,E){var P=this.toBBox,M=E?C:P(C),R=[],A=this._chooseSubtree(M,this.data,S,R);for(A.children.push(C),l(A,M);S>=0&&R[S].children.length>this._maxEntries;)this._split(R,S),S--;this._adjustParentBBoxes(M,R,S)},_split:function(C,S){var E=C[S],P=E.children.length,M=this._minEntries;this._chooseSplitAxis(E,M,P);var R=this._chooseSplitIndex(E,M,P),A=y(E.children.splice(R,E.children.length-R));A.height=E.height,A.leaf=E.leaf,h(E,this.toBBox),h(A,this.toBBox),S?C[S-1].children.push(A):this._splitRoot(E,A)},_splitRoot:function(C,S){this.data=y([C,S]),this.data.height=C.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},_chooseSplitIndex:function(C,S,E){var P,M,R,A,O,b,w,I;for(b=w=1/0,P=S;P<=E-S;P++)M=u(C,0,P,this.toBBox),R=u(C,P,E,this.toBBox),A=g(M,R),O=d(M)+d(R),A<b?(b=A,I=P,w=O<w?O:w):A===b&&O<w&&(w=O,I=P);return I},_chooseSplitAxis:function(C,S,E){var P=C.leaf?this.compareMinX:f,M=C.leaf?this.compareMinY:c,R=this._allDistMargin(C,S,E,P),A=this._allDistMargin(C,S,E,M);R<A&&C.children.sort(P)},_allDistMargin:function(C,S,E,P){C.children.sort(P);var M=this.toBBox,R=u(C,0,S,M),A=u(C,E-S,E,M),O=v(R)+v(A),b,w;for(b=S;b<E-S;b++)w=C.children[b],l(R,C.leaf?M(w):w),O+=v(R);for(b=E-S-1;b>=S;b--)w=C.children[b],l(A,C.leaf?M(w):w),O+=v(A);return O},_adjustParentBBoxes:function(C,S,E){for(var P=E;P>=0;P--)l(S[P],C)},_condense:function(C){for(var S=C.length-1,E;S>=0;S--)C[S].children.length===0?S>0?(E=C[S-1].children,E.splice(E.indexOf(C[S]),1)):this.clear():h(C[S],this.toBBox)},compareMinX:function(C,S){return C.left-S.left},compareMinY:function(C,S){return C.top-S.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function a(C,S,E){if(!E)return S.indexOf(C);for(var P=0;P<S.length;P++)if(E(C,S[P]))return P;return-1}function h(C,S){u(C,0,C.children.length,S,C)}function u(C,S,E,P,M){M||(M=y(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var R=S,A;R<E;R++)A=C.children[R],l(M,C.leaf?P(A):A);return M}function l(C,S){return C.minX=Math.min(C.minX,S.minX),C.minY=Math.min(C.minY,S.minY),C.maxX=Math.max(C.maxX,S.maxX),C.maxY=Math.max(C.maxY,S.maxY),C}function f(C,S){return C.minX-S.minX}function c(C,S){return C.minY-S.minY}function d(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function v(C){return C.maxX-C.minX+(C.maxY-C.minY)}function p(C,S){return(Math.max(S.maxX,C.maxX)-Math.min(S.minX,C.minX))*(Math.max(S.maxY,C.maxY)-Math.min(S.minY,C.minY))}function g(C,S){var E=Math.max(C.minX,S.minX),P=Math.max(C.minY,S.minY),M=Math.min(C.maxX,S.maxX),R=Math.min(C.maxY,S.maxY);return Math.max(0,M-E)*Math.max(0,R-P)}function m(C,S){return C.minX<=S.minX&&C.minY<=S.minY&&S.maxX<=C.maxX&&S.maxY<=C.maxY}function x(C,S){return S.minX<=C.maxX&&S.minY<=C.maxY&&S.maxX>=C.minX&&S.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(C,S,E,P,M){for(var R=[S,E],A;R.length;)E=R.pop(),S=R.pop(),!(E-S<=P)&&(A=S+Math.ceil((E-S)/P/2)*P,n(C,A,S,E,M),R.push(S,A,A,E))}e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(533),o=i(535),a=i(248),h=function(u,l,f,c,d,v,p){var g=c.left,m=c.top,x=c.right,y=c.bottom,T=f.faceLeft||f.faceRight,C=f.faceTop||f.faceBottom;if(p||(T=!0,C=!0),!T&&!C)return!1;var S=0,E=0,P=0,M=1;if(l.deltaAbsX()>l.deltaAbsY()?P=-1:l.deltaAbsX()<l.deltaAbsY()&&(M=-1),l.deltaX()!==0&&l.deltaY()!==0&&T&&C&&(P=Math.min(Math.abs(l.position.x-x),Math.abs(l.right-g)),M=Math.min(Math.abs(l.position.y-y),Math.abs(l.bottom-m))),P<M){if(T&&(S=n(l,f,g,x,v,p),S!==0&&!a(c,l)))return!0;C&&(E=o(l,f,m,y,v,p))}else{if(C&&(E=o(l,f,m,y,v,p),E!==0&&!a(c,l)))return!0;T&&(S=n(l,f,g,x,v,p))}return S!==0||E!==0};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(534),o=function(a,h,u,l,f,c){var d=0,v=h.faceLeft,p=h.faceRight,g=h.collideLeft,m=h.collideRight;return c||(v=!0,p=!0,g=!0,m=!0),a.deltaX()<0&&m&&a.checkCollision.left?p&&a.x<l&&(d=a.x-l,d<-f&&(d=0)):a.deltaX()>0&&g&&a.checkCollision.right&&v&&a.right>u&&(d=a.right-u,d>f&&(d=0)),d!==0&&(a.customSeparateX?a.overlapX=d:n(a,d)),d};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o<0?(n.blocked.none=!1,n.blocked.left=!0):o>0&&(n.blocked.none=!1,n.blocked.right=!0),n.position.x-=o,n.bounce.x===0?n.velocity.x=0:n.velocity.x=-n.velocity.x*n.bounce.x};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(536),o=function(a,h,u,l,f,c){var d=0,v=h.faceTop,p=h.faceBottom,g=h.collideUp,m=h.collideDown;return c||(v=!0,p=!0,g=!0,m=!0),a.deltaY()<0&&m&&a.checkCollision.up?p&&a.y<l&&(d=a.y-l,d<-f&&(d=0)):a.deltaY()>0&&g&&a.checkCollision.down&&v&&a.bottom>u&&(d=a.bottom-u,d>f&&(d=0)),d!==0&&(a.customSeparateY?a.overlapY=d:n(a,d)),d};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o<0?(n.blocked.none=!1,n.blocked.up=!0):o>0&&(n.blocked.none=!1,n.blocked.down=!0),n.position.y-=o,n.bounce.y===0?n.velocity.y=0:n.velocity.y=-n.velocity.y*n.bounce.y};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(246),o=i(1389),a=function(h,u,l,f){var c=n(h,u,l,f),d=h.immovable,v=u.immovable;if(l||c===0||d&&v||h.customSeparateX||u.customSeparateX)return c!==0||h.embedded&&u.embedded;var p=o.Set(h,u,c);return!d&&!v?p>0?!0:o.Check():(d?o.RunImmovableBody1(p):v&&o.RunImmovableBody2(p),!0)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(247),o=i(1390),a=function(h,u,l,f){var c=n(h,u,l,f),d=h.immovable,v=u.immovable;if(l||c===0||d&&v||h.customSeparateY||u.customSeparateY)return c!==0||h.embedded&&u.embedded;var p=o.Set(h,u,c);return!d&&!v?p>0?!0:o.Check():(d?o.RunImmovableBody1(p):v&&o.RunImmovableBody2(p),!0)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=i(0),a=i(62),h=i(57),u=i(3),l=new o({initialize:function(c,d){var v=d.displayWidth?d.displayWidth:64,p=d.displayHeight?d.displayHeight:64;this.world=c,this.gameObject=d,this.debugShowBody=c.defaults.debugShowStaticBody,this.debugBodyColor=c.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(d.x-v*d.originX,d.y-p*d.originY),this.width=v,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=u.ZERO,this.allowGravity=!1,this.gravity=u.ZERO,this.bounce=u.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=a.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(f,c){return f&&f!==this.gameObject&&(this.gameObject.body=null,f.body=this,this.gameObject=f),c&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var f=this.gameObject;return f.getTopLeft(this.position),this.width=f.displayWidth,this.height=f.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(f,c){return c===void 0&&(c=f),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f,c),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(f,c,d){d===void 0&&(d=!0);var v=this.gameObject;if(!f&&v.frame&&(f=v.frame.realWidth),!c&&v.frame&&(c=v.frame.realHeight),this.world.staticTree.remove(this),this.width=f,this.height=c,this.halfWidth=Math.floor(f/2),this.halfHeight=Math.floor(c/2),d&&v.getCenter){var p=v.displayWidth/2,g=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(f,c,d){return c===void 0&&(c=this.offset.x),d===void 0&&(d=this.offset.y),f>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=f,this.width=f*2,this.height=f*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,d),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(f,c){var d=this.gameObject;f===void 0&&(f=d.x),c===void 0&&(c=d.y),this.world.staticTree.remove(this),d.setPosition(f,c),d.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,c){return this.isCircle?n(this,f,c):h(this,f,c)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(f){var c=this.position,d=c.x+this.halfWidth,v=c.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?f.strokeCircle(d,v,this.width/2):f.strokeRect(c.x,c.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(f){return f<=0&&(f=.1),this.mass=f,this},x:{get:function(){return this.position.x},set:function(f){this.world.staticTree.remove(this),this.position.x=f,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(f){this.world.staticTree.remove(this),this.position.y=f,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=l},function(e,r,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var n=i(0),o=new n({initialize:function(h){this.pluginManager=h,this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=new n,a=function(h,u,l,f){var c=l.tilemapLayer,d=c.cullPaddingX,v=c.cullPaddingY,p=c.tilemap.tileToWorldXY(h,u,o,f,c);return p.x>f.worldView.x+c.scaleX*l.tileWidth*(-d-.5)&&p.x<f.worldView.right+c.scaleX*l.tileWidth*(d-.5)&&p.y>f.worldView.y+c.scaleY*l.tileHeight*(-v-1)&&p.y<f.worldView.bottom+c.scaleY*l.tileHeight*(v-.5)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(a,h,u,l,f,c,d){for(var v=n(u,l,f,c,null,d),p=0;p<v.length;p++)v[p]&&v[p].index===a&&(v[p].index=h)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(139),a=i(76),h=new n,u=function(l,f){var c=l.tilemapLayer.tilemap,d=l.tilemapLayer,v=Math.floor(c.tileWidth*d.scaleX),p=Math.floor(c.tileHeight*d.scaleY),g=a(f.worldView.x-d.x,v,0,!0)-d.cullPaddingX,m=o(f.worldView.right-d.x,v,0,!0)+d.cullPaddingX,x=a(f.worldView.y-d.y,p,0,!0)-d.cullPaddingY,y=o(f.worldView.bottom-d.y,p,0,!0)+d.cullPaddingY;return h.setTo(g,x,m-g,y-x)};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(543),o=i(159),a=function(h,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var c=h.tilemapLayer,d=n(h,u);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(d.left=0,d.right=h.width,d.top=0,d.bottom=h.height),o(h,d,f,l),l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(546),o=i(159),a=function(h,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var c=h.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var d=n(h,u);o(h,d,f,l)}return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(139),o=i(76),a=function(h,u){var l=h.tilemapLayer.tilemap,f=h.tilemapLayer,c=Math.floor(l.tileWidth*f.scaleX),d=Math.floor(l.tileHeight*f.scaleY),v=h.hexSideLength,p=(d-v)/2+v,g=o(u.worldView.x-f.x,c,0,!0)-f.cullPaddingX,m=n(u.worldView.right-f.x,c,0,!0)+f.cullPaddingX,x=o(u.worldView.y-f.y,p,0,!0)-f.cullPaddingY,y=n(u.worldView.bottom-f.y,p,0,!0)+f.cullPaddingY;return{left:g,right:m,top:x,bottom:y}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(541),o=function(a,h,u,l){u===void 0&&(u=[]),l===void 0&&(l=0),u.length=0;var f=a.tilemapLayer,c=a.data,d=a.width,v=a.height,p=0,g=d,m=0,x=v;if(!f.skipCull){var y,T,C;if(l===0){for(T=m;T<x;T++)for(y=p;c[T]&&y<g;y++)if(n(y,T,a,h)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}else if(l===1){for(T=m;T<x;T++)for(y=g;c[T]&&y>=p;y--)if(n(y,T,a,h)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}else if(l===2){for(T=x;T>=m;T--)for(y=p;c[T]&&y<g;y++)if(n(y,T,a,h)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}else if(l===3){for(T=x;T>=m;T--)for(y=g;c[T]&&y>=p;y--)if(n(y,T,a,h)){if(C=c[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}}return f.tilesDrawn=u.length,f.tilesTotal=d*v,u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(549),o=i(159),a=function(h,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var c=h.tilemapLayer;if(!c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1){var d=n(h,u);o(h,d,f,l)}return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(139),o=i(76),a=function(h,u){var l=h.tilemapLayer.tilemap,f=h.tilemapLayer,c=Math.floor(l.tileWidth*f.scaleX),d=Math.floor(l.tileHeight*f.scaleY),v=o(u.worldView.x-f.x,c,0,!0)-f.cullPaddingX,p=n(u.worldView.right-f.x,c,0,!0)+f.cullPaddingX,g=o(u.worldView.y-f.y,d/2,0,!0)-f.cullPaddingY,m=n(u.worldView.bottom-f.y,d/2,0,!0)+f.cullPaddingY;return{left:v,right:p,top:g,bottom:m}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f){u||(u=new n);var c=f.baseTileWidth,d=f.baseTileHeight,v=f.tilemapLayer,p=0,g=0;v&&(l||(l=v.scene.cameras.main),p=v.x+l.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+l.scrollY*(1-v.scrollFactorY),d*=v.scaleY);var m=f.hexSideLength,x=(d-m)/2+m,y=p+a*c+h%2*(c/2),T=g+h*x;return u.set(y,T)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f){u||(u=new n);var c=f.baseTileWidth,d=f.baseTileHeight,v=f.tilemapLayer,p=0,g=0;v&&(l||(l=v.scene.cameras.main),p=v.x+l.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+l.scrollY*(1-v.scrollFactorY),d*=v.scaleY);var m=p+(a-h)*(c/2),x=g+(a+h)*(d/2);return u.set(m,x)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f){u||(u=new n);var c=f.baseTileWidth,d=f.baseTileHeight,v=f.tilemapLayer,p=0,g=0;v&&(l||(l=v.scene.cameras.main),p=v.x+l.scrollX*(1-v.scrollFactorX),c*=v.scaleX,g=v.y+l.scrollY*(1-v.scrollFactorY),d*=v.scaleY);var m=p+a*c+h%2*(c/2),x=g+h*(d/2);return u.set(m,x)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(253),o=i(254),a=i(3),h=function(u,l,f,c,d){return f||(f=new a(0,0)),f.x=n(u,c,d),f.y=o(l,c,d),f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=a.baseTileHeight,u=a.tilemapLayer,l=0;u&&(o===void 0&&(o=u.scene.cameras.main),l=u.y+o.scrollY*(1-u.scrollFactorY),h*=u.scaleY);var f=u.tilemap.hexSideLength,c=(h-f)/2+f;return l+n*c};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=a.baseTileHeight,u=a.tilemapLayer,l=0;return u&&(o===void 0&&(o=u.scene.cameras.main),l=u.y+o.scrollY*(1-u.scrollFactorY),h*=u.scaleY),l+n*(h/2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f,c){l||(l=new n);var d=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(f||(f=p.scene.cameras.main),h=h-(p.y+f.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,a=a-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=c.hexSideLength,m=(v-g)/2+g,x=u?Math.floor(h/m):h/m,y=u?Math.floor((a-x%2*.5*d)/d):(a-x%2*.5*d)/d;return l.set(y,x)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f,c){l||(l=new n);var d=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(f||(f=p.scene.cameras.main),h=h-(p.y+f.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,a=a-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=u?Math.floor((a/(d/2)+h/(v/2))/2):(a/(d/2)+h/(v/2))/2,m=u?Math.floor((h/(v/2)-a/(d/2))/2):(h/(v/2)-a/(d/2))/2;return l.set(g,m)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f,c){l||(l=new n);var d=c.baseTileWidth,v=c.baseTileHeight,p=c.tilemapLayer;p&&(f||(f=p.scene.cameras.main),h=h-(p.y+f.scrollY*(1-p.scrollFactorY)),v*=p.scaleY,a=a-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=u?Math.floor(h/(v/2)):h/(v/2),m=u?Math.floor((a+g%2*.5*d)/d):(a+g%2*.5*d)/d;return l.set(m,g)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(255),o=i(256),a=i(3),h=function(u,l,f,c,d,v){return f===void 0&&(f=!0),c||(c=new a(0,0)),c.x=n(u,f,d,v),c.y=o(l,f,d,v),c};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=h.baseTileHeight,l=h.tilemapLayer;l&&(a||(a=l.scene.cameras.main),n=n-(l.y+a.scrollY*(1-l.scrollFactorY)),u*=l.scaleY);var f=h.hexSideLength,c=(u-f)/2+f;return o?Math.floor(n/c):n/c};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=h.baseTileHeight,l=h.tilemapLayer;return l&&(a||(a=l.scene.cameras.main),n=n-(l.y+a.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),o?Math.floor(n/(u/2)):n/(u/2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(119),o=function(a,h,u){if(n(a,h,u)){var l=u.data[h][a];return l!==null&&l.index>-1}else return!1};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(85),o=i(119),a=i(252),h=function(u,l,f,c,d){if(f===void 0&&(f=!0),c===void 0&&(c=!0),!o(u,l,d))return null;var v=d.data[l][u];if(v)d.data[l][u]=f?null:new n(d,-1,u,l,d.tileWidth,d.tileHeight);else return null;return c&&v&&v.collides&&a(u,l,d),v};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(259),a=i(565),h=i(566),u=i(577),l=function(f,c,d,v,p,g){var m;switch(c){case n.ARRAY_2D:m=o(f,d,v,p,g);break;case n.CSV:m=a(f,d,v,p,g);break;case n.TILED_JSON:m=h(f,d,g);break;case n.WELTMEISTER:m=u(f,d,g);break;default:console.warn("Unrecognized tilemap data format: "+c),m=null}return m};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(259),a=function(h,u,l,f,c){var d=u.trim().split(`
`).map(function(p){return p.split(",")}),v=o(h,d,l,f,c);return v.format=n.CSV,v};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(567),o=i(568),a=i(29),h=i(40),u=i(258),l=i(121),f=i(569),c=i(570),d=i(573),v=i(575),p=function(g,m,x){var y=new l({width:m.width,height:m.height,name:g,tileWidth:m.tilewidth,tileHeight:m.tileheight,orientation:u(m.orientation),format:h.TILED_JSON,version:m.version,properties:m.properties,renderOrder:m.renderorder,infinite:m.infinite});y.orientation===a.HEXAGONAL&&(y.hexSideLength=m.hexsidelength),y.layers=d(m,x),y.images=f(m);var T=v(m);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=c(m),y.tiles=o(y),n(y),y};e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=function(a){for(var h,u,l,f,c,d=0;d<a.layers.length;d++){h=a.layers[d],f=null;for(var v=0;v<h.data.length;v++){c=h.data[v];for(var p=0;p<c.length;p++)u=c[p],!(u===null||u.index<0)&&(l=a.tiles[u.index][2],f=a.tilesets[l],u.width=f.tileWidth,u.height=f.tileHeight,f.tileProperties&&f.tileProperties[u.index-f.firstgid]&&(u.properties=n(u.properties,f.tileProperties[u.index-f.firstgid])))}}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),o=function(a){var h,u,l=[];for(h=0;h<a.imageCollections.length;h++)for(var f=a.imageCollections[h],c=f.images,d=0;d<c.length;d++){var v=c[d];u=new n(v.image,v.gid,f.imageWidth,f.imageHeight,0,0),u.updateTileData(f.imageWidth,f.imageHeight),a.tilesets.push(u)}for(h=0;h<a.tilesets.length;h++){u=a.tilesets[h];for(var p=u.tileMargin,g=u.tileMargin,m=0,x=0,y=0,T=u.firstgid;T<u.firstgid+u.total&&(l[T]=[p,g,h],p+=u.tileWidth+u.tileSpacing,m++,!(m===u.total||(x++,x===u.columns&&(p=u.tileMargin,g+=u.tileHeight+u.tileSpacing,x=0,y++,y===u.rows))));T++);}return l};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=i(161),a=function(h){for(var u=[],l=[],f=o(h);f.i<f.layers.length||l.length>0;){if(f.i>=f.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=l.pop();continue}var c=f.layers[f.i];if(f.i++,c.type!=="imagelayer"){if(c.type==="group"){var d=o(h,c,f);l.push(f),f=d}continue}var v=n(c,"offsetx",0)+n(c,"startx",0),p=n(c,"offsety",0)+n(c,"starty",0);u.push({name:f.name+c.name,image:c.image,x:f.x+v+c.x,y:f.y+p+c.y,alpha:f.opacity*c.opacity,visible:f.visible&&c.visible,properties:n(c,"properties",{})})}return u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=i(260),a=i(572),h=i(161),u=function(l){for(var f=[],c=[],d=h(l);d.i<d.layers.length||c.length>0;){if(d.i>=d.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=c.pop();continue}var v=d.layers[d.i];if(d.i++,v.opacity*=d.opacity,v.visible=d.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var p=h(l,v,d);c.push(d),d=p}continue}v.name=d.name+v.name;for(var g=d.x+n(v,"startx",0)+n(v,"offsetx",0),m=d.y+n(v,"starty",0)+n(v,"offsety",0),x=[],y=0;y<v.objects.length;y++){var T=o(v.objects[y],g,m);x.push(T)}var C=new a(v);C.objects=x,f.push(C)}return f};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(126),o=function(a,h){for(var u={},l=0;l<h.length;l++){var f=h[l];n(a,f)&&(u[f]=a[f])}return u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=new n({initialize:function(u){u===void 0&&(u={}),this.name=o(u,"name","object layer"),this.opacity=o(u,"opacity",1),this.properties=o(u,"properties",{}),this.propertyTypes=o(u,"propertytypes",{}),this.type=o(u,"type","objectgroup"),this.visible=o(u,"visible",!0),this.objects=o(u,"objects",[])}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(574),o=i(29),a=i(161),h=i(258),u=i(2),l=i(120),f=i(261),c=i(85),d=function(v,p){for(var g=u(v,"infinite",!1),m=[],x=[],y=a(v);y.i<y.layers.length||x.length>0;){if(y.i>=y.layers.length){if(x.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=x.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var C=a(v,T,y);x.push(y),y=C}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=n(T.chunks[S].data);T.data&&(T.data=n(T.data)),delete T.encoding}var E,P,M,R,A=[],O=0;if(g){var b=u(T,"startx",0)+T.x,w=u(T,"starty",0)+T.y;E=new l({name:y.name+T.name,x:y.x+u(T,"offsetx",0)+b*v.tilewidth,y:y.y+u(T,"offsety",0)+w*v.tileheight,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:u(T,"properties",[]),orientation:h(v.orientation)}),E.orientation===o.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var I=0;I<T.height;I++){A.push([null]);for(var Y=0;Y<T.width;Y++)A[I][Y]=null}for(I=0,U=T.chunks.length;I<U;I++)for(var z=T.chunks[I],V=z.x-b,W=z.y-w,F=0,L=0,D=z.data.length;L<D;L++){var B=O+V,G=F+W;P=f(z.data[L]),P.gid>0?(M=new c(E,P.gid,B,G,v.tilewidth,v.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,A[G][B]=M):(R=p?null:new c(E,-1,B,G,v.tilewidth,v.tileheight),A[G][B]=R),O++,O===z.width&&(F++,O=0)}}else{E=new l({name:y.name+T.name,x:y.x+u(T,"offsetx",0)+T.x,y:y.y+u(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:u(T,"properties",[]),orientation:h(v.orientation)}),E.orientation===o.HEXAGONAL&&(E.hexSideLength=v.hexsidelength);for(var N=[],X=0,U=T.data.length;X<U;X++)P=f(T.data[X]),P.gid>0?(M=new c(E,P.gid,O,A.length,v.tilewidth,v.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,N.push(M)):(R=p?null:new c(E,-1,O,A.length,v.tilewidth,v.tileheight),N.push(R)),O++,O===T.width&&(A.push(N),O=0,N=[])}E.data=A,m.push(E)}return m};e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=window.atob(n),a=o.length,h=new Array(a/4),u=0;u<a;u+=4)h[u/4]=(o.charCodeAt(u)|o.charCodeAt(u+1)<<8|o.charCodeAt(u+2)<<16|o.charCodeAt(u+3)<<24)>>>0;return h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),o=i(576),a=i(260),h=i(1453),u=function(l){for(var f=[],c=[],d=null,v,p=0;p<l.tilesets.length;p++){var g=l.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var m=new n(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(l.version>1){var x=void 0,y=void 0;if(Array.isArray(g.tiles)){x=x||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var C=g.tiles[T];if(C.properties){var S={};C.properties.forEach(function(I){S[I.name]=I.value}),y[C.id]=S}if(C.objectgroup&&((x[C.id]||(x[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var E=C.objectgroup.objects.map(function(I){return a(I)});x[C.id].objectgroup.objects=E}C.animation&&((x[C.id]||(x[C.id]={})).animation=C.animation),C.type&&((x[C.id]||(x[C.id]={})).type=C.type)}}Array.isArray(g.wangsets)&&(x=x||{},y=y||{},h(g.wangsets,x)),x&&(m.tileData=x,m.tileProperties=y)}else if(g.tileproperties&&(m.tileProperties=g.tileproperties),g.tiles){m.tileData=g.tiles;for(v in m.tileData){var P=m.tileData[v].objectgroup;if(P&&P.objects){var M=P.objects.map(function(I){return a(I)});m.tileData[v].objectgroup.objects=M}}}m.updateTileData(g.imagewidth,g.imageheight),f.push(m)}else{var R=new o(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),A=0;for(T=0;T<g.tiles.length;T++){C=g.tiles[T];var O=C.image,b=parseInt(C.id,10),w=g.firstgid+b;R.addImage(w,O),A=Math.max(b,A)}R.maxId=A,c.push(R)}d&&(d.lastgid=g.firstgid-1),d=g}return{tilesets:f,imageCollections:c}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h,u,l,f,c,d,v){(l===void 0||l<=0)&&(l=32),(f===void 0||f<=0)&&(f=32),c===void 0&&(c=0),d===void 0&&(d=0),this.name=h,this.firstgid=u|0,this.imageWidth=l|0,this.imageHeight=f|0,this.imageMargin=c|0,this.imageSpacing=d|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},addImage:function(a,h){return this.images.push({gid:a,image:h}),this.total++,this}});e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(40),o=i(121),a=i(578),h=i(579),u=function(l,f,c){if(f.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+l),null;for(var d=0,v=0,p=0;p<f.layer.length;p++)f.layer[p].width>d&&(d=f.layer[p].width),f.layer[p].height>v&&(v=f.layer[p].height);var g=new o({width:d,height:v,name:l,tileWidth:f.layer[0].tilesize,tileHeight:f.layer[0].tilesize,format:n.WELTMEISTER});return g.layers=a(f,c),g.tilesets=h(f),g};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(120),o=i(85),a=function(h,u){for(var l=[],f=0;f<h.layer.length;f++){for(var c=h.layer[f],d=new n({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),v=[],p=[],g=0;g<c.data.length;g++){for(var m=0;m<c.data[g].length;m++){var x=c.data[g][m]-1,y;x>-1?y=new o(d,x,m,g,c.tilesize,c.tilesize):y=u?null:new o(d,-1,m,g,c.tilesize,c.tilesize),v.push(y)}p.push(v),v=[]}d.data=p,l.push(d)}return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(122),o=function(a){for(var h=[],u=[],l=0;l<a.layer.length;l++){var f=a.layer[l],c=f.tilesetName;c!==""&&u.indexOf(c)===-1&&(u.push(c),h.push(new n(c,0,f.tilesize,f.tilesize,0,0)))}return h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(36),a=i(40),h=i(2),u=i(120),l=i(29),f=i(362),c=i(74),d=i(73),v=i(85),p=i(251),g=i(581),m=i(122),x=new n({initialize:function(T,C){this.scene=T,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(S),WorldToTileX:p.GetWorldToTileXFunction(S),WorldToTileY:p.GetWorldToTileYFunction(S),TileToWorldXY:p.GetTileToWorldXYFunction(S),TileToWorldX:p.GetTileToWorldXFunction(S),TileToWorldY:p.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,C,S,E,P,M,R){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,C,S,E,P,M,R)},createDynamicLayer:function(y,T,C,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},createStaticLayer:function(y,T,C,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,C,S,E,P,M){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var R=this.scene.sys.textures.get(T),A=this.getTilesetIndex(y);if(A===null&&this.format===a.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var O=this.tilesets[A];return O?(O.setTileSize(C,S),O.setSpacing(E,P),O.setImage(R),O):(C===void 0&&(C=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=0),O=new m(y,M,C,S,E,P),O.setImage(R),this.tilesets.push(O),O)},copy:function(y,T,C,S,E,P,M,R){return R=this.getLayer(R),R!==null?(p.Copy(y,T,C,S,E,P,M,R),this):null},createBlankLayer:function(y,T,C,S,E,P,M,R){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.width),P===void 0&&(P=this.height),M===void 0&&(M=this.tileWidth),R===void 0&&(R=this.tileHeight);var A=this.getLayerIndex(y);if(A!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var O=new u({name:y,tileWidth:M,tileHeight:R,width:E,height:P,orientation:this.orientation}),b,w=0;w<P;w++){b=[];for(var I=0;I<E;I++)b.push(new v(O,-1,I,w,M,R,this.tileWidth,this.tileHeight));O.data.push(b)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var Y=new g(this.scene,this,this.currentLayerIndex,T,C,S);return Y.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(Y),Y},createLayer:function(y,T,C,S){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[E];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,C===void 0&&(C=P.x),S===void 0&&(S=P.y);var M=new g(this.scene,this,E,T,C,S);return M.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(M),M},createFromObjects:function(y,T){var C=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),C;Array.isArray(T)||(T=[T]);for(var E=S.objects,P=0;P<T.length;P++){for(var M=T[P],R=h(M,"id",null),A=h(M,"gid",null),O=h(M,"name",null),b,w=[],I=0;I<E.length;I++)b=E[I],(R===null&&A===null&&O===null||R!==null&&b.id===R||A!==null&&b.gid===A||O!==null&&b.name===O)&&w.push(b);for(var Y=h(M,"classType",d),z=h(M,"scene",this.scene),V=h(M,"container",null),W=h(M,"key",null),F=h(M,"frame",null),L=0;L<w.length;L++){b=w[L];var D=new Y(z);D.setName(b.name),D.setPosition(b.x,b.y),D.setTexture(W,F),b.width&&(D.displayWidth=b.width),b.height&&(D.displayHeight=b.height);var B={x:D.originX*b.width,y:(D.originY-1)*b.height};if(b.rotation){var G=o(b.rotation);f(B,G),D.rotation=G}if(D.x+=B.x,D.y+=B.y,(b.flippedHorizontal!==void 0||b.flippedVertical!==void 0)&&D.setFlip(b.flippedHorizontal,b.flippedVertical),b.visible||(D.visible=!1),Array.isArray(b.properties))b.properties.forEach(function(X){var U=X.name;D[U]!==void 0?D[U]=X.value:D.setData(U,X.value)});else for(var N in b.properties)D[N]!==void 0?D[N]=b.properties[N]:D.setData(N,b.properties[N]);V?V.add(D):z.add.existing(D),C.push(D)}}return C},createFromTiles:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:p.CreateFromTiles(y,T,C,S,E,P)},fill:function(y,T,C,S,E,P,M){return P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(p.Fill(y,T,C,S,E,P,M),this)},filterObjects:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,C)},filterTiles:function(y,T,C,S,E,P,M,R){return R=this.getLayer(R),R===null?null:p.FilterTiles(y,T,C,S,E,P,M,R)},findByIndex:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.FindByIndex(y,T,C,S)},findObject:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,C)||null},findTile:function(y,T,C,S,E,P,M,R){return R=this.getLayer(R),R===null?null:p.FindTile(y,T,C,S,E,P,M,R)},forEachTile:function(y,T,C,S,E,P,M,R){return R=this.getLayer(R),R===null?null:(p.ForEachTile(y,T,C,S,E,P,M,R),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var C=0;C<y.length;C++)if(y[C].name===T)return C;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTileAt(y,T,C,S)},getTileAtWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,C,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:p.GetTilesWithin(y,T,C,S,E,P)},getTilesWithinShape:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTilesWithinShape(y,T,C,S)},getTilesWithinWorldXY:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithinWorldXY(y,T,C,S,E,P,M)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,C){return C=this.getLayer(C),C===null?null:p.HasTileAt(y,T,C)},hasTileAtWorldXY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.HasTileAtWorldXY(y,T,C,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,C,S,E)},putTileAtWorldXY:function(y,T,C,S,E,P){return S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:p.PutTileAtWorldXY(y,T,C,S,E,P)},putTilesAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,C,S,E),this)},randomize:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:(p.Randomize(y,T,C,S,E,P),this)},calculateFacesAt:function(y,T,C){return C=this.getLayer(C),C===null?null:(p.CalculateFacesAt(y,T,C),this)},calculateFacesWithin:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,C,S,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){c(this.layers,T);for(var C=T;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),c(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,C){T===void 0&&(T=-1),C===void 0&&(C=!0);var S=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var P=y[E];S.push(this.removeTileAt(P.x,P.y,!0,C,P.tilemapLayer)),T>-1&&this.putTileAt(T,P.x,P.y,C,P.tilemapLayer)}return S},removeTileAt:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,C,S,E)},removeTileAtWorldXY:function(y,T,C,S,E,P){return C===void 0&&(C=!0),S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:p.RemoveTileAtWorldXY(y,T,C,S,E,P)},renderDebug:function(y,T,C){return C=this.getLayer(C),C===null?null:(this.orientation===l.ORTHOGONAL&&p.RenderDebug(y,T,C),this)},renderDebugFull:function(y,T){for(var C=this.layers,S=0;S<C.length;S++)p.RenderDebug(y,T,C[S]);return this},replaceByIndex:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(p.ReplaceByIndex(y,T,C,S,E,P,M),this)},setCollision:function(y,T,C,S,E){return T===void 0&&(T=!0),C===void 0&&(C=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(p.SetCollision(y,T,C,S,E),this)},setCollisionBetween:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,C,S,E),this)},setCollisionByProperty:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByProperty(y,T,C,S),this)},setCollisionByExclusion:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByExclusion(y,T,C,S),this)},setCollisionFromCollisionGroup:function(y,T,C){return y===void 0&&(y=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionFromCollisionGroup(y,T,C),this)},setTileIndexCallback:function(y,T,C,S){return S=this.getLayer(S),S===null?null:(p.SetTileIndexCallback(y,T,C,S),this)},setTileLocationCallback:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(p.SetTileLocationCallback(y,T,C,S,E,P,M),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=T;for(var S=this.layers[C].data,E=this.layers[C].width,P=this.layers[C].height,M=0;M<P;M++)for(var R=0;R<E;R++){var A=S[M][R];A!==null&&A.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=T;for(var S=C.data,E=C.width,P=C.height,M=0;M<P;M++)for(var R=0;R<E;R++){var A=S[M][R];A!==null&&A.setSize(y,T)}return this},shuffle:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,C,S,E),this)},swapByIndex:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(p.SwapByIndex(y,T,C,S,E,P,M),this)},tileToWorldX:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,T,C)},tileToWorldY:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,T,C)},tileToWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,C,S,E)},weightedRandomize:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:(p.WeightedRandomize(T,C,S,E,y,P),this)},worldToTileX:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,C,S)},worldToTileY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,C,S)},worldToTileXY:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(y,T,C,S,E,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(11),a=i(15),h=i(251),u=i(1456),l=new n({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Origin,o.Pipeline,o.Transform,o.Visible,o.ScrollFactor,u],initialize:function(c,d,v,p,g,m){a.call(this,c,"TilemapLayer"),this.isTilemap=!0,this.tilemap=d,this.layerIndex=v,this.layer=d.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,m),this.setOrigin(),this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(f){var c=[],d=[],v=this.tilemap;Array.isArray(f)||(f=[f]);for(var p=0;p<f.length;p++){var g=f[p];if(typeof g=="string"&&(g=v.getTileset(g)),g){d.push(g);for(var m=g.firstgid,x=0;x<g.total;x++)c[m+x]=g}}this.gidMap=c,this.tileset=d},setRenderOrder:function(f){var c=["right-down","left-down","right-up","left-up"];return typeof f=="string"&&(f=c.indexOf(f)),f>=0&&f<4&&(this._renderOrder=f),this},calculateFacesAt:function(f,c){return h.CalculateFacesAt(f,c,this.layer),this},calculateFacesWithin:function(f,c,d,v){return h.CalculateFacesWithin(f,c,d,v,this.layer),this},createFromTiles:function(f,c,d,v,p){return h.CreateFromTiles(f,c,d,v,p,this.layer)},cull:function(f){return this.cullCallback(this.layer,f,this.culledTiles,this._renderOrder)},copy:function(f,c,d,v,p,g,m){return h.Copy(f,c,d,v,p,g,m,this.layer),this},fill:function(f,c,d,v,p,g){return h.Fill(f,c,d,v,p,g,this.layer),this},filterTiles:function(f,c,d,v,p,g,m){return h.FilterTiles(f,c,d,v,p,g,m,this.layer)},findByIndex:function(f,c,d){return h.FindByIndex(f,c,d,this.layer)},findTile:function(f,c,d,v,p,g,m){return h.FindTile(f,c,d,v,p,g,m,this.layer)},forEachTile:function(f,c,d,v,p,g,m){return h.ForEachTile(f,c,d,v,p,g,m,this.layer),this},getTileAt:function(f,c,d){return h.GetTileAt(f,c,d,this.layer)},getTileAtWorldXY:function(f,c,d,v){return h.GetTileAtWorldXY(f,c,d,v,this.layer)},getTilesWithin:function(f,c,d,v,p){return h.GetTilesWithin(f,c,d,v,p,this.layer)},getTilesWithinShape:function(f,c,d){return h.GetTilesWithinShape(f,c,d,this.layer)},getTilesWithinWorldXY:function(f,c,d,v,p,g){return h.GetTilesWithinWorldXY(f,c,d,v,p,g,this.layer)},hasTileAt:function(f,c){return h.HasTileAt(f,c,this.layer)},hasTileAtWorldXY:function(f,c,d){return h.HasTileAtWorldXY(f,c,d,this.layer)},putTileAt:function(f,c,d,v){return h.PutTileAt(f,c,d,v,this.layer)},putTileAtWorldXY:function(f,c,d,v,p){return h.PutTileAtWorldXY(f,c,d,v,p,this.layer)},putTilesAt:function(f,c,d,v){return h.PutTilesAt(f,c,d,v,this.layer),this},randomize:function(f,c,d,v,p){return h.Randomize(f,c,d,v,p,this.layer),this},removeTileAt:function(f,c,d,v){return h.RemoveTileAt(f,c,d,v,this.layer)},removeTileAtWorldXY:function(f,c,d,v,p){return h.RemoveTileAtWorldXY(f,c,d,v,p,this.layer)},renderDebug:function(f,c){return h.RenderDebug(f,c,this.layer),this},replaceByIndex:function(f,c,d,v,p,g){return h.ReplaceByIndex(f,c,d,v,p,g,this.layer),this},setSkipCull:function(f){return f===void 0&&(f=!0),this.skipCull=f,this},setCullPadding:function(f,c){return f===void 0&&(f=1),c===void 0&&(c=1),this.cullPaddingX=f,this.cullPaddingY=c,this},setCollision:function(f,c,d,v){return h.SetCollision(f,c,d,this.layer,v),this},setCollisionBetween:function(f,c,d,v){return h.SetCollisionBetween(f,c,d,v,this.layer),this},setCollisionByProperty:function(f,c,d){return h.SetCollisionByProperty(f,c,d,this.layer),this},setCollisionByExclusion:function(f,c,d){return h.SetCollisionByExclusion(f,c,d,this.layer),this},setCollisionFromCollisionGroup:function(f,c){return h.SetCollisionFromCollisionGroup(f,c,this.layer),this},setTileIndexCallback:function(f,c,d){return h.SetTileIndexCallback(f,c,d,this.layer),this},setTileLocationCallback:function(f,c,d,v,p,g){return h.SetTileLocationCallback(f,c,d,v,p,g,this.layer),this},shuffle:function(f,c,d,v){return h.Shuffle(f,c,d,v,this.layer),this},swapByIndex:function(f,c,d,v,p,g){return h.SwapByIndex(f,c,d,v,p,g,this.layer),this},tileToWorldX:function(f,c){return this.tilemap.tileToWorldX(f,c,this)},tileToWorldY:function(f,c){return this.tilemap.tileToWorldY(f,c,this)},tileToWorldXY:function(f,c,d,v){return this.tilemap.tileToWorldXY(f,c,d,v,this)},weightedRandomize:function(f,c,d,v,p){return h.WeightedRandomize(c,d,v,p,f,this.layer),this},worldToTileX:function(f,c,d){return this.tilemap.worldToTileX(f,c,d,this)},worldToTileY:function(f,c,d){return this.tilemap.worldToTileY(f,c,d,this)},worldToTileXY:function(f,c,d,v,p){return this.tilemap.worldToTileXY(f,c,d,v,p,this)},destroy:function(f){f===void 0&&(f=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),f&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this))}});e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(2),a=new n({initialize:function(u){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(u)},reset:function(h){return this.delay=o(h,"delay",0),this.repeat=o(h,"repeat",0),this.loop=o(h,"loop",!1),this.callback=o(h,"callback",void 0),this.callbackScope=o(h,"callbackScope",this.callback),this.args=o(h,"args",[]),this.timeScale=o(h,"timeScale",1),this.startAt=o(h,"startAt",0),this.paused=o(h,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var h=this.delay+this.delay*this.repeat,u=this.elapsed+this.delay*(this.repeat-this.repeatCount);return u/h}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(h){h===void 0&&(h=!1),this.elapsed=this.delay,this.hasDispatched=!h,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1465),o=function(a){var h,u=[];if(a.hasOwnProperty("props"))for(h in a.props)h.substr(0,1)!=="_"&&u.push({key:h,value:a.props[h]});else for(h in a)n.indexOf(h)===-1&&h.substr(0,1)!=="_"&&u.push({key:h,value:a[h]});return u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=function(a){var h=n(a,"tweens",null);return h===null?[]:(typeof h=="function"&&(h=h.call()),Array.isArray(h)||(h=[h]),h)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(265),o=i(13),a=i(99),h=i(80),u=i(162),l=i(6),f=i(264),c=i(266),d=i(268),v=function(p,g,m){m===void 0&&(m=n);var x=l(g,"from",0),y=l(g,"to",1),T=[{value:x}],C=u(g,"delay",m.delay),S=u(g,"duration",m.duration),E=l(g,"easeParams",m.easeParams),P=h(l(g,"ease",m.ease),E),M=u(g,"hold",m.hold),R=u(g,"repeat",m.repeat),A=u(g,"repeatDelay",m.repeatDelay),O=a(g,"yoyo",m.yoyo),b=[],w=f("value",y),I=d(T[0],0,"value",w.getEnd,w.getStart,w.getActive,P,C,S,O,M,R,A,!1,!1);I.start=x,I.current=x,I.to=y,b.push(I);var Y=new c(p,b,T);Y.offset=o(g,"offset",null),Y.completeDelay=o(g,"completeDelay",0),Y.loop=Math.round(o(g,"loop",0)),Y.loopDelay=Math.round(o(g,"loopDelay",0)),Y.paused=a(g,"paused",!1),Y.useFrames=a(g,"useFrames",!1);for(var z=l(g,"callbackScope",Y),V=[Y,null],W=c.TYPES,F=0;F<W.length;F++){var L=W[F],D=l(g,L,!1);if(D){var B=l(g,L+"Scope",z),G=l(g,L+"Params",[]);Y.setCallback(L,D,V.concat(G),B)}}return Y};e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(80),o=i(6),a=i(14),h=function(u,l){l===void 0&&(l={});var f,c=o(l,"start",0),d=o(l,"ease",null),v=o(l,"grid",null),p=o(l,"from",0),g=p==="first",m=p==="center",x=p==="last",y=typeof p=="number",T=Array.isArray(u),C=parseFloat(T?u[0]:u),S=T?parseFloat(u[1]):0,E=Math.max(C,S);if(T&&(c+=C),v){var P=v[0],M=v[1],R=0,A=0,O=0,b=0,w=[];x?(R=P-1,A=M-1):y?(R=p%P,A=Math.floor(p/P)):m&&(R=(P-1)/2,A=(M-1)/2);for(var I=a.MIN_SAFE_INTEGER,Y=0;Y<M;Y++){w[Y]=[];for(var z=0;z<P;z++){O=R-z,b=A-Y;var V=Math.sqrt(O*O+b*b);V>I&&(I=V),w[Y][z]=V}}}var W=d?n(d):null;return v?f=function(F,L,D,B){var G=0,N=B%P,X=Math.floor(B/P);N>=0&&N<P&&X>=0&&X<M&&(G=w[X][N]);var U;if(T){var H=S-C;W?U=G/I*H*W(G/I):U=G/I*H}else W?U=G*C*W(G/I):U=G*C;return U+c}:f=function(F,L,D,B,G){G--;var N;g?N=B:m?N=Math.abs(G/2-B):x?N=G-B:y&&(N=Math.abs(p-B));var X;if(T){var U;m?U=(S-C)/G*(N*2):U=(S-C)/G*N,W?X=U*W(N/G):X=U}else W?X=G*E*W(N/G):X=N*C;return X+c},f};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=i(265),a=i(13),h=i(99),u=i(80),l=i(162),f=i(263),c=i(584),d=i(6),v=i(588),p=i(163),g=function(m,x){var y=new v(m);y.completeDelay=a(x,"completeDelay",0),y.loop=Math.round(a(x,"loop",0)),y.loopDelay=Math.round(a(x,"loopDelay",0)),y.paused=h(x,"paused",!1),y.useFrames=h(x,"useFrames",!1);var T=d(x,"callbackScope",y),C=[y],S=d(x,"onStart",!1);if(S){var E=d(x,"onStartScope",T),P=d(x,"onStartParams",[]);y.setCallback("onStart",S,C.concat(P),E)}var M=d(x,"onUpdate",!1);if(M){var R=d(x,"onUpdateScope",T),A=d(x,"onUpdateParams",[]);y.setCallback("onUpdate",M,C.concat(A),R)}var O=d(x,"onLoop",!1);if(O){var b=d(x,"onLoopScope",T),w=d(x,"onLoopParams",[]);y.setCallback("onLoop",O,C.concat(w),b)}var I=d(x,"onYoyo",!1);if(I){var Y=d(x,"onYoyoScope",T),z=d(x,"onYoyoParams",[]);y.setCallback("onYoyo",I,C.concat(null,z),Y)}var V=d(x,"onComplete",!1);if(V){var W=d(x,"onCompleteScope",T),F=d(x,"onCompleteParams",[]);y.setCallback("onComplete",V,C.concat(F),W)}var L=c(x);if(L.length===0)return y.paused=!0,y;var D=n(o);D.targets=f(x);var B=a(x,"totalDuration",0);B>0?D.duration=Math.floor(B/L.length):D.duration=l(x,"duration",D.duration),D.delay=l(x,"delay",D.delay),D.easeParams=d(x,"easeParams",D.easeParams),D.ease=u(d(x,"ease",D.ease),D.easeParams),D.hold=l(x,"hold",D.hold),D.repeat=l(x,"repeat",D.repeat),D.repeatDelay=l(x,"repeatDelay",D.repeatDelay),D.yoyo=h(x,"yoyo",D.yoyo),D.flipX=h(x,"flipX",D.flipX),D.flipY=h(x,"flipY",D.flipY);for(var G=0;G<L.length;G++)y.queue(p(y,L[G],D));return y};e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(267),h=i(163),u=i(100),l=new n({Extends:o,initialize:function(c){o.call(this),this.manager=c,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING_ADD,this._pausedState=u.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(f,c){this.emit(f,this),c&&c.func.apply(c.scope,c.params)},setTimeScale:function(f){return this.timeScale=f,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===u.ACTIVE},add:function(f){return this.queue(h(this,f))},queue:function(f){return this.isPlaying()||(f.parent=this,f.parentIsTimeline=!0,this.data.push(f),this.totalData=this.data.length),this},hasOffset:function(f){return f.offset!==null},isOffsetAbsolute:function(f){return typeof f=="number"},isOffsetRelative:function(f){var c=typeof f;if(c==="string"){var d=f[0];if(d==="-"||d==="+")return!0}return!1},getRelativeOffset:function(f,c){var d=f[0],v=parseFloat(f.substr(2)),p=c;switch(d){case"+":p+=v;break;case"-":p-=v;break}return Math.max(0,p)},calcDuration:function(){for(var f=0,c=0,d=0,v=0;v<this.totalData;v++){var p=this.data[v];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(d=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,f)):p.calculatedOffset=d,f=p.totalDuration+p.calculatedOffset,c+=p.totalDuration,d+=p.totalDuration}this.duration=c,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=u.PAUSED,!1):!0},resetTweens:function(f){for(var c=0;c<this.totalData;c++){var d=this.data[c];d.play(f)}},setCallback:function(f,c,d,v){return l.TYPES.indexOf(f)!==-1&&(this.callbacks[f]={func:c,scope:v,params:d}),this},makeActive:function(f){return this.manager.makeActive(f)},play:function(){if(this.state!==u.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=u.ACTIVE;this.dispatchTimelineEvent(a.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=u.LOOP_DELAY):(this.state=u.ACTIVE,this.dispatchTimelineEvent(a.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=u.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(a.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(f,c){if(this.state!==u.PAUSED){switch(this.useFrames&&(c=1*this.manager.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case u.ACTIVE:for(var d=this.totalData,v=0;v<this.totalData;v++){var p=this.data[v];p.update(f,c)&&d--}this.dispatchTimelineEvent(a.TIMELINE_UPDATE,this.callbacks.onUpdate),d===0&&this.nextState();break;case u.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=u.ACTIVE,this.dispatchTimelineEvent(a.TIMELINE_LOOP,this.callbacks.onLoop));break;case u.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(a.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===u.PENDING_REMOVE}},stop:function(){this.state=u.PENDING_REMOVE},pause:function(){if(this.state!==u.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=u.PAUSED,this.emit(a.TIMELINE_PAUSE,this),this},resume:function(){return this.state===u.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(a.TIMELINE_RESUME,this)),this},hasTarget:function(f){for(var c=0;c<this.data.length;c++)if(this.data[c].hasTarget(f))return!0;return!1},destroy:function(){for(var f=0;f<this.data.length;f++)this.data[f].stop()}});l.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=l},function(e,r,i){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),a=i(32),h=i(2),u=i(64),l={parseBody:function(f,c,d,v){v===void 0&&(v={});for(var p=h(d,"fixtures",[]),g=[],m=0;m<p.length;m++)for(var x=this.parseFixture(p[m]),y=0;y<x.length;y++)g.push(x[y]);var T=a.clone(d,!0);a.extend(T,v,!0),delete T.fixtures,delete T.type;var C=o.create(T);return o.setParts(C,g),o.setPosition(C,{x:f,y:c}),C},parseFixture:function(f){var c=a.extend({},!1,f);delete c.circle,delete c.vertices;var d;if(f.circle){var v=h(f.circle,"x"),p=h(f.circle,"y"),g=h(f.circle,"radius");d=[n.circle(v,p,g,c)]}else f.vertices&&(d=this.parseVertices(f.vertices,c));return d},parseVertices:function(f,c){c===void 0&&(c={});for(var d=[],v=0;v<f.length;v++)u.clockwiseSort(f[v]),d.push(o.create(a.extend({position:u.centre(f[v]),vertices:f[v]},c)));return n.flagCoincidentParts(d)}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),a={parseBody:function(h,u,l,f){f===void 0&&(f={});var c,d=l.vertices;if(d.length===1)f.vertices=d[0],c=o.create(f),n.flagCoincidentParts(c.parts);else{for(var v=[],p=0;p<d.length;p++){var g=o.create({vertices:d[p]});v.push(g)}n.flagCoincidentParts(v),f.parts=v,c=o.create(f)}return c.label=l.label,o.setPosition(c,{x:h,y:u}),c}};e.exports=a},function(e,r,i){var n={};e.exports=n;var o=i(118),a=i(128),h=i(32),u=i(41),l=i(86);(function(){n.stack=function(f,c,d,v,p,g,m){for(var x=o.create({label:"Stack"}),y=f,T=c,C,S=0,E=0;E<v;E++){for(var P=0,M=0;M<d;M++){var R=m(y,T,M,E,C,S);if(R){var A=R.bounds.max.y-R.bounds.min.y,O=R.bounds.max.x-R.bounds.min.x;A>P&&(P=A),u.translate(R,{x:O*.5,y:A*.5}),y=R.bounds.max.x+p,o.addBody(x,R),C=R,S+=1}else y+=p}T+=P+g,y=f}return x},n.chain=function(f,c,d,v,p,g){for(var m=f.bodies,x=1;x<m.length;x++){var y=m[x-1],T=m[x],C=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,P=T.bounds.max.x-T.bounds.min.x,M={bodyA:y,pointA:{x:S*c,y:C*d},bodyB:T,pointB:{x:P*v,y:E*p}},R=h.extend(M,g);o.addConstraint(f,a.create(R))}return f.label+=" Chain",f},n.mesh=function(f,c,d,v,p){var g=f.bodies,m,x,y,T,C;for(m=0;m<d;m++){for(x=1;x<c;x++)y=g[x-1+m*c],T=g[x+m*c],o.addConstraint(f,a.create(h.extend({bodyA:y,bodyB:T},p)));if(m>0)for(x=0;x<c;x++)y=g[x+(m-1)*c],T=g[x+m*c],o.addConstraint(f,a.create(h.extend({bodyA:y,bodyB:T},p))),v&&x>0&&(C=g[x-1+(m-1)*c],o.addConstraint(f,a.create(h.extend({bodyA:C,bodyB:T},p)))),v&&x<c-1&&(C=g[x+1+(m-1)*c],o.addConstraint(f,a.create(h.extend({bodyA:C,bodyB:T},p))))}return f.label+=" Mesh",f},n.pyramid=function(f,c,d,v,p,g,m){return n.stack(f,c,d,v,p,g,function(x,y,T,C,S,E){var P=Math.min(v,Math.ceil(d/2)),M=S?S.bounds.max.x-S.bounds.min.x:0;if(!(C>P)){C=P-C;var R=C,A=d-1-C;if(!(T<R||T>A)){E===1&&u.translate(S,{x:(T+(d%2===1?1:-1))*M,y:0});var O=S?T*M:0;return m(f+O+T*p,y,T,C,S,E)}}})},n.newtonsCradle=function(f,c,d,v,p){for(var g=o.create({label:"Newtons Cradle"}),m=0;m<d;m++){var x=1.9,y=l.circle(f+m*(v*x),c+p,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=a.create({pointA:{x:f+m*(v*x),y:c},bodyB:y});o.addBody(g,y),o.addConstraint(g,T)}return g},n.car=function(f,c,d,v,p){var g=u.nextGroup(!0),m=20,x=-d*.5+m,y=d*.5-m,T=0,C=o.create({label:"Car"}),S=l.rectangle(f,c,d,v,{collisionFilter:{group:g},chamfer:{radius:v*.5},density:2e-4}),E=l.circle(f+x,c+T,p,{collisionFilter:{group:g},friction:.8}),P=l.circle(f+y,c+T,p,{collisionFilter:{group:g},friction:.8}),M=a.create({bodyB:S,pointB:{x,y:T},bodyA:E,stiffness:1,length:0}),R=a.create({bodyB:S,pointB:{x:y,y:T},bodyA:P,stiffness:1,length:0});return o.addBody(C,S),o.addBody(C,E),o.addBody(C,P),o.addConstraint(C,M),o.addConstraint(C,R),C},n.softBody=function(f,c,d,v,p,g,m,x,y,T){y=h.extend({inertia:1/0},y),T=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var C=n.stack(f,c,d,v,p,g,function(S,E){return l.circle(S,E,x,y)});return n.mesh(C,d,v,m,T),C.label="Soft Body",C}})()},function(e,r,i){var n={};e.exports=n,i(84);var o=i(32);(function(){n.pathToVertices=function(a,h){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,l,f,c,d,v,p,g,m,x,y=[],T,C,S=0,E=0,P=0;h=h||15;var M=function(A,O,b){var w=b%2===1&&b>1;if(!m||A!=m.x||O!=m.y){m&&w?(T=m.x,C=m.y):(T=0,C=0);var I={x:T+A,y:C+O};(w||!m)&&(m=I),y.push(I),E=T+A,P=C+O}},R=function(A){var O=A.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":E=A.x,P=A.y;break;case"H":E=A.x;break;case"V":P=A.y;break}M(E,P,A.pathSegType)}};for(n._svgPathToAbsolute(a),f=a.getTotalLength(),v=[],u=0;u<a.pathSegList.numberOfItems;u+=1)v.push(a.pathSegList.getItem(u));for(p=v.concat();S<f;){if(x=a.getPathSegAtLength(S),d=v[x],d!=g){for(;p.length&&p[0]!=d;)R(p.shift());g=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=a.getPointAtLength(S),M(c.x,c.y,0);break}S+=h}for(u=0,l=p.length;u<l;++u)R(p[u]);return y},n._svgPathToAbsolute=function(a){for(var h,u,l,f,c,d,v=a.pathSegList,p=0,g=0,m=v.numberOfItems,x=0;x<m;++x){var y=v.getItem(x),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(p=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(l=p+y.x1),"x2"in y&&(c=p+y.x2),"y1"in y&&(f=g+y.y1),"y2"in y&&(d=g+y.y2),"x"in y&&(p+=y.x),"y"in y&&(g+=y.y),T){case"m":v.replaceItem(a.createSVGPathSegMovetoAbs(p,g),x);break;case"l":v.replaceItem(a.createSVGPathSegLinetoAbs(p,g),x);break;case"h":v.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(p),x);break;case"v":v.replaceItem(a.createSVGPathSegLinetoVerticalAbs(g),x);break;case"c":v.replaceItem(a.createSVGPathSegCurvetoCubicAbs(p,g,l,f,c,d),x);break;case"s":v.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(p,g,c,d),x);break;case"q":v.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(p,g,l,f),x);break;case"t":v.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),x);break;case"a":v.replaceItem(a.createSVGPathSegArcAbs(p,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),x);break;case"z":case"Z":p=h,g=u;break}(T=="M"||T=="m")&&(h=p,u=g)}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),a=i(0),h=i(249),u=i(9),l=i(2),f=i(126),c=i(64),d=new a({Extends:u,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function(p,g,m){u.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var x=l(m,"body",null),y=l(m,"addToWorld",!0);if(x)this.setBody(x,y);else{var T=g.getCollisionGroup(),C=l(T,"objects",[]);C.length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}},setFromTileRectangle:function(v){v===void 0&&(v={}),f(v,"isStatic")||(v.isStatic=!0),f(v,"addToWorld")||(v.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,m=p.y+p.height/2,x=n.rectangle(g,m,p.width,p.height,v);return this.setBody(x,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),f(v,"isStatic")||(v.isStatic=!0),f(v,"addToWorld")||(v.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,m=this.tile.getLeft(),x=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=l(y,"objects",[]),C=[],S=0;S<T.length;S++){var E=T[S],P=m+E.x*p,M=x+E.y*g,R=E.width*p,A=E.height*g,O=null;if(E.rectangle)O=n.rectangle(P+R/2,M+A/2,R,A,v);else if(E.ellipse)O=n.circle(P+R/2,M+A/2,R/2,v);else if(E.polygon||E.polyline){var b=E.polygon?E.polygon:E.polyline,w=b.map(function(z){return{x:z.x*p,y:z.y*g}}),I=c.create(w),Y=c.centre(I);P+=Y.x,M+=Y.y,O=n.fromVertices(P,M,I,v)}O&&C.push(O)}return C.length===1?this.setBody(C[0],v.addToWorld):C.length>1&&(v.parts=C,this.setBody(o.create(v),v.addToWorld)),this},setBody:function(v,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1399);n.Body=i(41),n.Composite=i(118),n.World=i(596),n.Detector=i(273),n.Grid=i(597),n.Pairs=i(598),n.Pair=i(250),n.Query=i(1400),n.Resolver=i(599),n.SAT=i(274),n.Constraint=i(128),n.Common=i(32),n.Engine=i(1401),n.Events=i(166),n.Sleeping=i(165),n.Plugin=i(595),n.Bodies=i(86),n.Composites=i(591),n.Axes=i(271),n.Bounds=i(84),n.Svg=i(592),n.Vector=i(83),n.Vertices=i(64),n.World.add=n.Composite.add,n.World.remove=n.Composite.remove,n.World.addComposite=n.Composite.addComposite,n.World.addBody=n.Composite.addBody,n.World.addConstraint=n.Composite.addConstraint,n.World.clear=n.Composite.clear,e.exports=n},function(e,r,i){var n={};e.exports=n;var o=i(32);(function(){n._registry={},n.register=function(a){if(n.isPlugin(a)||o.warn("Plugin.register:",n.toString(a),"does not implement all required fields."),a.name in n._registry){var h=n._registry[a.name],u=n.versionParse(a.version).number,l=n.versionParse(h.version).number;u>l?(o.warn("Plugin.register:",n.toString(h),"was upgraded to",n.toString(a)),n._registry[a.name]=a):u<l?o.warn("Plugin.register:",n.toString(h),"can not be downgraded to",n.toString(a)):a!==h&&o.warn("Plugin.register:",n.toString(a),"is already registered to different plugin object")}else n._registry[a.name]=a;return a},n.resolve=function(a){return n._registry[n.dependencyParse(a).name]},n.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},n.isPlugin=function(a){return a&&a.name&&a.version&&a.install},n.isUsed=function(a,h){return a.used.indexOf(h)>-1},n.isFor=function(a,h){var u=a.for&&n.dependencyParse(a.for);return!a.for||h.name===u.name&&n.versionSatisfies(h.version,u.range)},n.use=function(a,h){if(a.uses=(a.uses||[]).concat(h||[]),a.uses.length===0){o.warn("Plugin.use:",n.toString(a),"does not specify any dependencies to install.");return}for(var u=n.dependencies(a),l=o.topologicalSort(u),f=[],c=0;c<l.length;c+=1)if(l[c]!==a.name){var d=n.resolve(l[c]);if(!d){f.push(" "+l[c]);continue}n.isUsed(a,d.name)||(n.isFor(d,a)||(o.warn("Plugin.use:",n.toString(d),"is for",d.for,"but installed on",n.toString(a)+"."),d._warned=!0),d.install?d.install(a):(o.warn("Plugin.use:",n.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(f.push(" "+n.toString(d)),delete d._warned):f.push(" "+n.toString(d)),a.used.push(d.name))}f.length>0&&!d.silent&&o.info(f.join("  "))},n.dependencies=function(a,h){var u=n.dependencyParse(a),l=u.name;if(h=h||{},!(l in h)){a=n.resolve(a)||a,h[l]=o.map(a.uses||[],function(c){n.isPlugin(c)&&n.register(c);var d=n.dependencyParse(c),v=n.resolve(c);return v&&!n.versionSatisfies(v.version,d.range)?(o.warn("Plugin.dependencies:",n.toString(v),"does not satisfy",n.toString(d),"used by",n.toString(u)+"."),v._warned=!0,a._warned=!0):v||(o.warn("Plugin.dependencies:",n.toString(c),"used by",n.toString(u),"could not be resolved."),a._warned=!0),d.name});for(var f=0;f<h[l].length;f+=1)n.dependencies(h[l][f],h);return h}},n.dependencyParse=function(a){if(o.isString(a)){var h=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return h.test(a)||o.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},n.versionParse=function(a){var h=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;h.test(a)||o.warn("Plugin.versionParse:",a,"is not a valid version or range.");var u=a.split("-");a=u[0];var l=isNaN(Number(a[0])),f=l?a.substr(1):a,c=o.map(f.split("."),function(d){return Number(d)});return{isRange:l,version:f,range:a,operator:l?a[0]:"",parts:c,prerelease:u[1],number:c[0]*1e8+c[1]*1e4+c[2]}},n.versionSatisfies=function(a,h){h=h||"*";var u=n.versionParse(h),l=u.parts,f=n.versionParse(a),c=f.parts;if(u.isRange){if(u.operator==="*"||a==="*")return!0;if(u.operator==="~")return c[0]===l[0]&&c[1]===l[1]&&c[2]>=l[2];if(u.operator==="^")return l[0]>0?c[0]===l[0]&&f.number>=u.number:l[1]>0?c[1]===l[1]&&c[2]>=l[2]:c[2]===l[2]}return a===h||a==="*"}})()},function(e,r,i){var n={};e.exports=n;var o=i(118);i(128);var a=i(32);(function(){n.create=function(h){var u=o.create(),l={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return a.extend(u,l,h)}})()},function(e,r,i){var n={};e.exports=n;var o=i(250),a=i(273),h=i(32);(function(){n.create=function(u){var l={controller:n,detector:a.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return h.extend(l,u)},n.update=function(u,l,f,c){var d,v,p,g=f.world,m=u.buckets,x,y,T=!1,C=f.metrics;for(C.broadphaseTests=0,d=0;d<l.length;d++){var S=l[d];if(!(S.isSleeping&&!c)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var E=n._getRegion(u,S);if(!S.region||E.id!==S.region.id||c){C.broadphaseTests+=1,(!S.region||c)&&(S.region=E);var P=n._regionUnion(E,S.region);for(v=P.startCol;v<=P.endCol;v++)for(p=P.startRow;p<=P.endRow;p++){y=n._getBucketId(v,p),x=m[y];var M=v>=E.startCol&&v<=E.endCol&&p>=E.startRow&&p<=E.endRow,R=v>=S.region.startCol&&v<=S.region.endCol&&p>=S.region.startRow&&p<=S.region.endRow;!M&&R&&R&&x&&n._bucketRemoveBody(u,x,S),(S.region===E||M&&!R||c)&&(x||(x=n._createBucket(m,y)),n._bucketAddBody(u,x,S))}S.region=E,T=!0}}}T&&(u.pairsList=n._createActivePairsList(u))},n.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},n._regionUnion=function(u,l){var f=Math.min(u.startCol,l.startCol),c=Math.max(u.endCol,l.endCol),d=Math.min(u.startRow,l.startRow),v=Math.max(u.endRow,l.endRow);return n._createRegion(f,c,d,v)},n._getRegion=function(u,l){var f=l.bounds,c=Math.floor(f.min.x/u.bucketWidth),d=Math.floor(f.max.x/u.bucketWidth),v=Math.floor(f.min.y/u.bucketHeight),p=Math.floor(f.max.y/u.bucketHeight);return n._createRegion(c,d,v,p)},n._createRegion=function(u,l,f,c){return{id:u+","+l+","+f+","+c,startCol:u,endCol:l,startRow:f,endRow:c}},n._getBucketId=function(u,l){return"C"+u+"R"+l},n._createBucket=function(u,l){var f=u[l]=[];return f},n._bucketAddBody=function(u,l,f){for(var c=0;c<l.length;c++){var d=l[c];if(!(f.id===d.id||f.isStatic&&d.isStatic)){var v=o.id(f,d),p=u.pairs[v];p?p[2]+=1:u.pairs[v]=[f,d,1]}}l.push(f)},n._bucketRemoveBody=function(u,l,f){l.splice(l.indexOf(f),1);for(var c=0;c<l.length;c++){var d=l[c],v=o.id(f,d),p=u.pairs[v];p&&(p[2]-=1)}},n._createActivePairsList=function(u){var l,f,c=[];l=h.keys(u.pairs);for(var d=0;d<l.length;d++)f=u.pairs[l[d]],f[2]>0?c.push(f):delete u.pairs[l[d]];return c}})()},function(e,r,i){var n={};e.exports=n;var o=i(250),a=i(32);(function(){n._pairMaxIdleLife=1e3,n.create=function(h){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},h)},n.update=function(h,u,l){var f=h.list,c=h.table,d=h.collisionStart,v=h.collisionEnd,p=h.collisionActive,g,m,x,y;for(d.length=0,v.length=0,p.length=0,y=0;y<f.length;y++)f[y].confirmedActive=!1;for(y=0;y<u.length;y++)g=u[y],g.collided&&(m=o.id(g.bodyA,g.bodyB),x=c[m],x?(x.isActive?p.push(x):d.push(x),o.update(x,g,l),x.confirmedActive=!0):(x=o.create(g,l),c[m]=x,d.push(x),f.push(x)));for(y=0;y<f.length;y++)x=f[y],x.isActive&&!x.confirmedActive&&(o.setActive(x,!1,l),v.push(x))},n.removeOld=function(h,u){var l=h.list,f=h.table,c=[],d,v,p,g;for(g=0;g<l.length;g++){if(d=l[g],v=d.collision,v.bodyA.isSleeping||v.bodyB.isSleeping){d.timeUpdated=u;continue}u-d.timeUpdated>n._pairMaxIdleLife&&c.push(g)}for(g=0;g<c.length;g++)p=c[g]-g,d=l[p],delete f[d.id],l.splice(p,1)},n.clear=function(h){return h.table={},h.list.length=0,h.collisionStart.length=0,h.collisionActive.length=0,h.collisionEnd.length=0,h}})()},function(e,r,i){var n={};e.exports=n;var o=i(64),a=i(83),h=i(32),u=i(84);(function(){n._restingThresh=4,n._restingThreshTangent=6,n._positionDampen=.9,n._positionWarming=.8,n._frictionNormalMultiplier=5,n.preSolvePosition=function(l){var f,c,d;for(f=0;f<l.length;f++)c=l[f],c.isActive&&(d=c.activeContacts.length,c.collision.parentA.totalContacts+=d,c.collision.parentB.totalContacts+=d)},n.solvePosition=function(l,f,c){var d,v,p,g,m,x,y,T,C,S,E,P,M,R,A,O,b=c*n._positionDampen;for(d=0;d<f.length;d++){var w=f[d];w.previousPositionImpulse.x=w.positionImpulse.x,w.previousPositionImpulse.y=w.positionImpulse.y}for(d=0;d<l.length;d++)g=l[d],!(!g.isActive||g.isSensor)&&(m=g.collision,x=m.parentA,y=m.parentB,T=m.normal,E=x.previousPositionImpulse,P=y.previousPositionImpulse,S=m.penetration,R=P.x-E.x+S.x,A=P.y-E.y+S.y,v=T.x,p=T.y,C=v*R+p*A,g.separation=C,O=(C-g.slop)*b,(x.isStatic||y.isStatic)&&(O*=2),x.isStatic||x.isSleeping||(M=O/x.totalContacts,x.positionImpulse.x+=v*M,x.positionImpulse.y+=p*M),y.isStatic||y.isSleeping||(M=O/y.totalContacts,y.positionImpulse.x-=v*M,y.positionImpulse.y-=p*M))},n.postSolvePosition=function(l){for(var f=0;f<l.length;f++){var c=l[f];if(c.totalContacts=0,c.positionImpulse.x!==0||c.positionImpulse.y!==0){for(var d=0;d<c.parts.length;d++){var v=c.parts[d];o.translate(v.vertices,c.positionImpulse),u.update(v.bounds,v.vertices,c.velocity),v.position.x+=c.positionImpulse.x,v.position.y+=c.positionImpulse.y}c.positionPrev.x+=c.positionImpulse.x,c.positionPrev.y+=c.positionImpulse.y,a.dot(c.positionImpulse,c.velocity)<0?(c.positionImpulse.x=0,c.positionImpulse.y=0):(c.positionImpulse.x*=n._positionWarming,c.positionImpulse.y*=n._positionWarming)}}},n.preSolveVelocity=function(l){var f,c,d,v,p,g,m,x,y,T,C,S,E,P,M=a._temp[0],R=a._temp[1];for(f=0;f<l.length;f++)if(d=l[f],!(!d.isActive||d.isSensor))for(v=d.activeContacts,p=d.collision,g=p.parentA,m=p.parentB,x=p.normal,y=p.tangent,c=0;c<v.length;c++)T=v[c],C=T.vertex,S=T.normalImpulse,E=T.tangentImpulse,(S!==0||E!==0)&&(M.x=x.x*S+y.x*E,M.y=x.y*S+y.y*E,g.isStatic||g.isSleeping||(P=a.sub(C,g.position,R),g.positionPrev.x+=M.x*g.inverseMass,g.positionPrev.y+=M.y*g.inverseMass,g.anglePrev+=a.cross(P,M)*g.inverseInertia),m.isStatic||m.isSleeping||(P=a.sub(C,m.position,R),m.positionPrev.x-=M.x*m.inverseMass,m.positionPrev.y-=M.y*m.inverseMass,m.anglePrev-=a.cross(P,M)*m.inverseInertia))},n.solveVelocity=function(l,f){for(var c=f*f,d=a._temp[0],v=a._temp[1],p=a._temp[2],g=a._temp[3],m=a._temp[4],x=a._temp[5],y=0;y<l.length;y++){var T=l[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,S=C.parentA,E=C.parentB,P=C.normal,M=C.tangent,R=T.activeContacts,A=1/R.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var O=0;O<R.length;O++){var b=R[O],w=b.vertex,I=a.sub(w,S.position,v),Y=a.sub(w,E.position,p),z=a.add(S.velocity,a.mult(a.perp(I),S.angularVelocity),g),V=a.add(E.velocity,a.mult(a.perp(Y),E.angularVelocity),m),W=a.sub(z,V,x),F=a.dot(P,W),L=a.dot(M,W),D=Math.abs(L),B=h.sign(L),G=(1+T.restitution)*F,N=h.clamp(T.separation+F,0,1)*n._frictionNormalMultiplier,X=L,U=1/0;D>T.friction*T.frictionStatic*N*c&&(U=D,X=h.clamp(T.friction*B*c,-U,U));var H=a.cross(I,P),$=a.cross(Y,P),Z=A/(S.inverseMass+E.inverseMass+S.inverseInertia*H*H+E.inverseInertia*$*$);if(G*=Z,X*=Z,F<0&&F*F>n._restingThresh*c)b.normalImpulse=0;else{var J=b.normalImpulse;b.normalImpulse=Math.min(b.normalImpulse+G,0),G=b.normalImpulse-J}if(L*L>n._restingThreshTangent*c)b.tangentImpulse=0;else{var Q=b.tangentImpulse;b.tangentImpulse=h.clamp(b.tangentImpulse+X,-U,U),X=b.tangentImpulse-Q}d.x=P.x*G+M.x*X,d.y=P.y*G+M.y*X,S.isStatic||S.isSleeping||(S.positionPrev.x+=d.x*S.inverseMass,S.positionPrev.y+=d.y*S.inverseMass,S.anglePrev+=a.cross(I,d)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=d.x*E.inverseMass,E.positionPrev.y-=d.y*E.inverseMass,E.anglePrev-=a.cross(Y,d)*E.inverseInertia)}}}}})()},function(e,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}e.exports=i},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(276),o=function(a,h,u,l){for(var f=a[0],c=1;c<a.length;c++){var d=a[c];n(d,f,h,u,l),f=d}return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f){return n(a,"angle",h,u,l,f)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){for(var h=0;h<n.length;h++){var u=n[h];o.call(a,u)}return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){a===void 0&&(a=0);for(var h=a;h<n.length;h++){var u=n[h],l=!0;for(var f in o)u[f]!==o[f]&&(l=!1);if(l)return u}return null};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){a===void 0&&(a=0);for(var h=a;h<n.length;h++){var u=n[h],l=!0;for(var f in o)u[f]!==o[f]&&(l=!1);if(l)return u}return null};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(289),o=i(123),a=i(2),h=i(1),u=i(129),l=new u({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1),f=function(c,d){d===void 0&&(d={});var v=d.hasOwnProperty("width"),p=d.hasOwnProperty("height"),g=a(d,"width",-1),m=a(d,"height",-1),x=a(d,"cellWidth",1),y=a(d,"cellHeight",x),T=a(d,"position",o.TOP_LEFT),C=a(d,"x",0),S=a(d,"y",0),E=0,P=0,M=g*x,R=m*y;l.setPosition(C,S),l.setSize(x,y);for(var A=0;A<c.length;A++)if(n(c[A],l,T),v&&g===-1)l.x+=x;else if(p&&m===-1)l.y+=y;else if(p&&!v){if(P+=y,l.y+=y,P===R&&(P=0,E+=x,l.y=S,l.x+=x,E===M))break}else if(E+=x,l.x+=x,E===M&&(E=0,P+=y,l.x=C,l.y+=y,P===R))break;return c};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=2,a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(h,u,l,f){return h===void 0&&(h=1),u===void 0?this.alpha=h:(this._alphaTL=n(h,0,1),this._alphaTR=n(u,0,1),this._alphaBL=n(l,0,1),this._alphaBR=n(f,0,1)),this},alpha:{get:function(){return this._alpha},set:function(h){var u=n(h,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,this._alphaBR=u,u===0?this.renderFlags&=~o:this.renderFlags|=o}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(h){var u=n(h,0,1);this._alphaTL=u,u!==0&&(this.renderFlags|=o)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(h){var u=n(h,0,1);this._alphaTR=u,u!==0&&(this.renderFlags|=o)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(h){var u=n(h,0,1);this._alphaBL=u,u!==0&&(this.renderFlags|=o)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(h){var u=n(h,0,1);this._alphaBR=u,u!==0&&(this.renderFlags|=o)}}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,o){return this.width=n,this.height=o,this},setDisplaySize:function(n,o){return this.displayWidth=n,this.displayHeight=o,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={texture:null,frame:null,isCropped:!1,setCrop:function(n,o,a,h){if(n===void 0)this.isCropped=!1;else if(this.frame){if(typeof n=="number")this.frame.setCropUVs(this._crop,n,o,a,h,this.flipX,this.flipY);else{var u=n;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(n){return this.flipX=n,this},setFlipY:function(n){return this.flipY=n,this},setFlip:function(n,o){return this.flipX=n,this.flipY=o,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(308),a=i(3),h={prepareBoundsOutput:function(u,l){if(l===void 0&&(l=!1),this.rotation!==0&&o(u,this.x,this.y,this.rotation),l&&this.parentContainer){var f=this.parentContainer.getBoundsTransformMatrix();f.transformPoint(u.x,u.y,u)}return u},getCenter:function(u){return u===void 0&&(u=new a),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,u},getTopLeft:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getTopCenter:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getTopRight:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getLeftCenter:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,l)},getRightCenter:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,l)},getBottomLeft:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBottomCenter:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBottomRight:function(u,l){return u||(u=new a),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBounds:function(u){u===void 0&&(u=new n);var l,f,c,d,v,p,g,m;if(this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(u),x.transformPoint(u.x,u.y,u),l=u.x,f=u.y,this.getTopRight(u),x.transformPoint(u.x,u.y,u),c=u.x,d=u.y,this.getBottomLeft(u),x.transformPoint(u.x,u.y,u),v=u.x,p=u.y,this.getBottomRight(u),x.transformPoint(u.x,u.y,u),g=u.x,m=u.y}else this.getTopLeft(u),l=u.x,f=u.y,this.getTopRight(u),c=u.x,d=u.y,this.getBottomLeft(u),v=u.x,p=u.y,this.getBottomRight(u),g=u.x,m=u.y;return u.x=Math.min(l,c,v,g),u.y=Math.min(f,d,p,m),u.width=Math.max(l,c,v,g)-u.x,u.height=Math.max(f,d,p,m)-u.y,u}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(n){this._displayOriginX=n,this.originX=n/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(n){this._displayOriginY=n,this.originY=n/this.height}},setOrigin:function(n,o){return n===void 0&&(n=.5),o===void 0&&(o=n),this.originX=n,this.originY=o,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(n,o){return n===void 0&&(n=0),o===void 0&&(o=n),this.displayOriginX=n,this.displayOriginY=o,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(36),o=i(99),a=i(6),h=i(100),u=i(3),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(f,c){c===void 0&&(c=this.pathConfig);var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this.path=f,c&&this.startFollow(c),this},setRotateToPath:function(f,c){return c===void 0&&(c=0),this.rotateToPath=f,this.pathRotationOffset=c,this},isFollowing:function(){var f=this.pathTween;return f&&f.isPlaying()},startFollow:function(f,c){f===void 0&&(f={}),c===void 0&&(c=0);var d=this.pathTween;d&&d.isPlaying()&&d.stop(),typeof f=="number"&&(f={duration:f}),f.from=a(f,"from",0),f.to=a(f,"to",1);var v=o(f,"positionOnPath",!1);this.rotateToPath=o(f,"rotateToPath",!1),this.pathRotationOffset=a(f,"rotationOffset",0);var p=a(f,"startAt",c);if(p&&(f.onStart=function(m){var x=m.data[0];x.progress=p,x.elapsed=x.duration*p;var y=x.ease(x.progress);x.current=x.start+(x.end-x.start)*y,x.target[x.key]=x.current}),this.pathOffset||(this.pathOffset=new u(this.x,this.y)),this.pathVector||(this.pathVector=new u),this.pathDelta||(this.pathDelta=new u),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(f),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+n(this.pathRotationOffset)}return this.pathConfig=f,this},pauseFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.pause(),this},resumeFollow:function(){var f=this.pathTween;return f&&f.isPaused()&&f.resume(),this},stopFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this},pathUpdate:function(){var f=this.pathTween;if(f){var c=f.data[0],d=this.pathDelta,v=this.pathVector;if(d.copy(v).negate(),c.state===h.COMPLETE){this.path.getPoint(1,v),d.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(c.state!==h.PLAYING_FORWARD&&c.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(f.getValue(),v),d.add(v),v.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(v.x,v.y);var m=this.x-p,x=this.y-g;if(m===0&&x===0)return;if(c.state!==this._prevDirection){this._prevDirection=c.state;return}this.rotateToPath&&(this.rotation=Math.atan2(x,m)+n(this.pathRotationOffset))}}};e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(n){this.scaleX=n/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(n){this.scaleY=n/this.frame.realHeight}},setSizeToFrame:function(n){return n===void 0&&(n=this.frame),this.width=n.realWidth,this.height=n.realHeight,this},setSize:function(n,o){return this.width=n,this.height=o,this},setDisplaySize:function(n,o){return this.displayWidth=n,this.displayHeight=o,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,n={texture:null,frame:null,isCropped:!1,setTexture:function(o,a){return this.texture=this.scene.sys.textures.get(o),this.setFrame(a)},setFrame:function(o,a,h){return a===void 0&&(a=!0),h===void 0&&(h=!0),this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,n={texture:null,frame:null,isCropped:!1,setCrop:function(o,a,h,u){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,a,h,u,this.flipX,this.flipY);else{var l=o;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(o,a){return this.texture=this.scene.sys.textures.get(o),this.setFrame(a)},setFrame:function(o,a,h){return a===void 0&&(a=!0),h===void 0&&(h=!0),this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&a&&this.setSizeToFrame(),this._originComponent&&h&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(n,o,a,h){return n===void 0&&(n=16777215),o===void 0&&(o=n,a=n,h=n),this.tintTopLeft=n,this.tintTopRight=o,this.tintBottomLeft=a,this.tintBottomRight=h,this.tintFill=!1,this},setTintFill:function(n,o,a,h){return this.setTint(n,o,a,h),this.tintFill=!0,this},tint:{set:function(n){this.setTint(n,n,n,n)}},isTinted:{get:function(){var n=16777215;return this.tintFill||this.tintTopLeft!==n||this.tintTopRight!==n||this.tintBottomLeft!==n||this.tintBottomRight!==n}}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,r){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f){return n(a,"alpha",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f){return n(a,"x",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f,c,d){return u==null&&(u=h),n(a,"x",h,l,c,d),n(a,"y",u,f,c,d)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f){return n(a,"y",h,u,l,f)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a===void 0&&(a=0),h===void 0&&(h=6.28);for(var u=a,l=(h-a)/n.length,f=0;f<n.length;f++)n[f].x=o.x+o.radius*Math.cos(u),n[f].y=o.y+o.radius*Math.sin(u),u+=l;return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a===void 0&&(a=0),h===void 0&&(h=6.28);for(var u=a,l=(h-a)/n.length,f=o.width/2,c=o.height/2,d=0;d<n.length;d++)n[d].x=o.x+f*Math.cos(u),n[d].y=o.y+c*Math.sin(u),u+=l;return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(172),o=function(a,h){for(var u=n(h,a.length),l=0;l<a.length;l++){var f=a[l],c=u[l];f.x=c.x,f.y=c.y}return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(316),o=i(178),a=i(179),h=function(u,l,f){f===void 0&&(f=0);var c=n(l,!1,u.length);f>0?o(c,f):f<0&&a(c,Math.abs(f));for(var d=0;d<u.length;d++)u[d].x=c[d].x,u[d].y=c[d].y;return u};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(317),o=function(a,h,u){var l=n({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},u),f=n({x1:h.x2,y1:h.y2,x2:h.x3,y2:h.y3},u),c=n({x1:h.x3,y1:h.y3,x2:h.x1,y2:h.y1},u);l.pop(),f.pop(),c.pop(),l=l.concat(f,c);for(var d=l.length/a.length,v=0,p=0;p<a.length;p++){var g=a[p],m=l[Math.floor(v)];g.x=m.x,g.y=m.y,v+=d}return a};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){for(var h=0;h<n.length;h++){var u=n[h];u.anims&&u.anims.play(o,a)}return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(170),o=function(a,h){for(var u=0;u<a.length;u++)n(h,a[u]);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(180),o=function(a,h){for(var u=0;u<a.length;u++)n(h,a[u]);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(173),o=function(a,h){for(var u=0;u<a.length;u++)n(h,a[u]);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(174),o=function(a,h){for(var u=0;u<a.length;u++)n(h,a[u]);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(181),o=function(a,h){for(var u=0;u<a.length;u++)n(h,a[u]);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f){return n(a,"rotation",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(182),o=i(50),a=function(h,u,l){for(var f=u.x,c=u.y,d=0;d<h.length;d++){var v=h[d];n(v,f,c,l,Math.max(1,o(v.x,v.y,f,c)))}return h};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(182),o=function(a,h,u,l){var f=h.x,c=h.y;if(l===0)return a;for(var d=0;d<a.length;d++)n(a[d],f,c,u,l);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f){return n(a,"scaleX",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f,c,d){return u==null&&(u=h),n(a,"scaleX",h,l,c,d),n(a,"scaleY",u,f,c,d)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(46),o=function(a,h,u,l,f){return n(a,"scaleY",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"alpha",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l){return n(a,"blendMode",h,0,u,l)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"depth",h,u,l,f)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){for(var h=0;h<n.length;h++)n[h].setInteractive(o,a);return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f,c,d){return u==null&&(u=h),n(a,"originX",h,l,c,d),n(a,"originY",u,f,c,d),a.forEach(function(v){v.updateDisplayOrigin()}),a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"rotation",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f,c,d){return u==null&&(u=h),n(a,"scaleX",h,l,c,d),n(a,"scaleY",u,f,c,d)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"scaleX",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"scaleY",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f,c,d){return u==null&&(u=h),n(a,"scrollFactorX",h,l,c,d),n(a,"scrollFactorY",u,f,c,d)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"scrollFactorX",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"scrollFactorY",h,u,l,f)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){for(var l=0;l<n.length;l++)n[l].setTint(o,a,h,u);return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l){return n(a,"visible",h,0,u,l)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"x",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f,c,d){return u==null&&(u=h),n(a,"x",h,l,c,d),n(a,"y",u,f,c,d)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(27),o=function(a,h,u,l,f){return n(a,"y",h,u,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l,f){l===void 0&&(l=0),f===void 0&&(f=new n);var c,d;if(a.length>1){var v,p,g,m;if(l===0){var x=a.length-1;for(c=a[x].x,d=a[x].y,v=x-1;v>=0;v--)m=a[v],p=m.x,g=m.y,m.x=c,m.y=d,c=p,d=g;a[x].x=h,a[x].y=u}else{for(c=a[0].x,d=a[0].y,v=1;v<a.length;v++)m=a[v],p=m.x,g=m.y,m.x=c,m.y=d,c=p,d=g;a[0].x=h,a[0].y=u}}else c=a[0].x,d=a[0].y,a[0].x=h,a[0].y=u;return f.x=c,f.y=d,f};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(131),o=function(a){return n(a)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(183),o=function(a,h,u,l,f){f===void 0&&(f=!1);var c=Math.abs(l-u)/a.length,d;if(f)for(d=0;d<a.length;d++)a[d][h]+=n(d*c,u,l);else for(d=0;d<a.length;d++)a[d][h]=n(d*c,u,l);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(184),o=function(a,h,u,l,f){f===void 0&&(f=!1);var c=Math.abs(l-u)/a.length,d;if(f)for(d=0;d<a.length;d++)a[d][h]+=n(d*c,u,l);else for(d=0;d<a.length;d++)a[d][h]=n(d*c,u,l);return a};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){u===void 0&&(u=!1);var l=Math.abs(h-a)/n.length,f;if(u)for(f=0;f<n.length;f++)n[f][o]+=f*l+a;else for(f=0;f<n.length;f++)n[f][o]=f*l+a;return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=0;o<n.length;o++)n[o].visible=!n[o].visible;return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(68),o=function(a,h,u){u===void 0&&(u=0);for(var l=0;l<a.length;l++){var f=a[l];f.x=n(f.x,h.left-u,h.right+u),f.y=n(f.y,h.top-u,h.bottom+u)}return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:i(739),Scene2D:i(742)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(6),a=new n({initialize:function(u){this.camera=o(u,"camera",null),this.left=o(u,"left",null),this.right=o(u,"right",null),this.up=o(u,"up",null),this.down=o(u,"down",null),this.zoomIn=o(u,"zoomIn",null),this.zoomOut=o(u,"zoomOut",null),this.zoomSpeed=o(u,"zoomSpeed",.01),this.minZoom=o(u,"minZoom",.001),this.maxZoom=o(u,"maxZoom",1e3),this.speedX=0,this.speedY=0;var l=o(u,"speed",null);typeof l=="number"?(this.speedX=l,this.speedY=l):(this.speedX=o(u,"speed.x",0),this.speedY=o(u,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var u=this.camera;this.up&&this.up.isDown?u.scrollY-=this.speedY*h|0:this.down&&this.down.isDown&&(u.scrollY+=this.speedY*h|0),this.left&&this.left.isDown?u.scrollX-=this.speedX*h|0:this.right&&this.right.isDown&&(u.scrollX+=this.speedX*h|0),this.zoomIn&&this.zoomIn.isDown?(u.zoom-=this.zoomSpeed,u.zoom<this.minZoom&&(u.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(u.zoom+=this.zoomSpeed,u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(6),a=new n({initialize:function(u){this.camera=o(u,"camera",null),this.left=o(u,"left",null),this.right=o(u,"right",null),this.up=o(u,"up",null),this.down=o(u,"down",null),this.zoomIn=o(u,"zoomIn",null),this.zoomOut=o(u,"zoomOut",null),this.zoomSpeed=o(u,"zoomSpeed",.01),this.minZoom=o(u,"minZoom",.001),this.maxZoom=o(u,"maxZoom",1e3),this.accelX=0,this.accelY=0;var l=o(u,"acceleration",null);typeof l=="number"?(this.accelX=l,this.accelY=l):(this.accelX=o(u,"acceleration.x",0),this.accelY=o(u,"acceleration.y",0)),this.dragX=0,this.dragY=0;var f=o(u,"drag",null);typeof f=="number"?(this.dragX=f,this.dragY=f):(this.dragX=o(u,"drag.x",0),this.dragY=o(u,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=o(u,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=o(u,"maxSpeed.x",0),this.maxSpeedY=o(u,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(h){return this.camera=h,this},update:function(h){if(this.active){h===void 0&&(h=1);var u=this.camera;this._speedX>0?(this._speedX-=this.dragX*h,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*h,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*h,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*h,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(u.scrollX-=this._speedX*h|0),this._speedY!==0&&(u.scrollY-=this._speedY*h|0),this._zoom!==0&&(u.zoom+=this._zoom,u.zoom<this.minZoom?u.zoom=this.minZoom:u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(37),h=new o({initialize:function(l){this.camera=l,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,l,f,c,d,v,p,g){if(u===void 0&&(u=!0),l===void 0&&(l=1e3),f===void 0&&(f=0),c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=l,this.direction=u,this.progress=0,this.red=f,this.green=c,this.blue=d,this.alpha=u?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var m=u?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(m,this.camera,this,l,f,c,d),this.camera},update:function(u,l){this.isRunning&&(this._elapsed+=l,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(u){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(u,l){if(!this.isRunning&&!this.isComplete)return!1;var f=this.camera,c=this.red/255,d=this.green/255,v=this.blue/255;return u.drawFillRect(f.x,f.y,f.width,f.height,l(v,d,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var u=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(u,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(37),h=new o({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,l,f,c,d,v,p){return u===void 0&&(u=250),l===void 0&&(l=255),f===void 0&&(f=255),c===void 0&&(c=255),d===void 0&&(d=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=u,this.progress=0,this.red=l,this.green=f,this.blue=c,this.alpha=1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(a.FLASH_START,this.camera,this,u,l,f,c),this.camera)},update:function(u,l){this.isRunning&&(this._elapsed+=l,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(u){if(!this.isRunning)return!1;var l=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(u,l){if(!this.isRunning)return!1;var f=this.camera,c=this.red/255,d=this.green/255,v=this.blue/255;return u.drawFillRect(f.x,f.y,f.width,f.height,l(v,d,c,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(134),h=i(37),u=i(3),l=new o({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new u,this.current=new u,this.destination=new u,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(f,c,d,v,p,g,m){d===void 0&&(d=1e3),v===void 0&&(v=a.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(f,c),x.getScroll(f,c,this.current),typeof v=="string"&&a.hasOwnProperty(v)?this.ease=a[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=m,this.camera.emit(h.PAN_START,this.camera,this,d,f,c)),x},update:function(f,c){if(this.isRunning){this._elapsed+=c;var d=n(this._elapsed/this.duration,0,1);this.progress=d;var v=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);v.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;v.setScroll(g,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,d,g,m)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,d,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1.70158),n*n*((o+1)*n-o)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1.70158),--n*n*((o+1)*n+o)+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1.70158);var a=o*1.525;return(n*=2)<1?.5*(n*n*((a+1)*n-a)):.5*((n-=2)*n*((a+1)*n+a)+2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n=1-n,n<.36363636363636365?1-7.5625*n*n:n<.7272727272727273?1-(7.5625*(n-=.5454545454545454)*n+.75):n<.9090909090909091?1-(7.5625*(n-=.8181818181818182)*n+.9375):1-(7.5625*(n-=.9545454545454546)*n+.984375)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n<.36363636363636365?7.5625*n*n:n<.7272727272727273?7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?7.5625*(n-=.8181818181818182)*n+.9375:7.5625*(n-=.9545454545454546)*n+.984375};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=!1;return n<.5?(n=1-n*2,o=!0):n=n*2-1,n<.36363636363636365?n=7.5625*n*n:n<.7272727272727273?n=7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?n=7.5625*(n-=.8181818181818182)*n+.9375:n=7.5625*(n-=.9545454545454546)*n+.984375,o?(1-n)*.5:n*.5+.5};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1-Math.sqrt(1-n*n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.sqrt(1- --n*n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return--n*n*n+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(o===void 0&&(o=.1),a===void 0&&(a=.1),n===0)return 0;if(n===1)return 1;var h=a/4;return o<1?o=1:h=a*Math.asin(1/o)/(2*Math.PI),-(o*Math.pow(2,10*(n-=1))*Math.sin((n-h)*(2*Math.PI)/a))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(o===void 0&&(o=.1),a===void 0&&(a=.1),n===0)return 0;if(n===1)return 1;var h=a/4;return o<1?o=1:h=a*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*n)*Math.sin((n-h)*(2*Math.PI)/a)+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(o===void 0&&(o=.1),a===void 0&&(a=.1),n===0)return 0;if(n===1)return 1;var h=a/4;return o<1?o=1:h=a*Math.asin(1/o)/(2*Math.PI),(n*=2)<1?-.5*(o*Math.pow(2,10*(n-=1))*Math.sin((n-h)*(2*Math.PI)/a)):o*Math.pow(2,-10*(n-=1))*Math.sin((n-h)*(2*Math.PI)/a)*.5+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.pow(2,10*(n-1))-.001};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1-Math.pow(2,-10*n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*Math.pow(2,10*(n-1)):.5*(2-Math.pow(2,-10*(n-1)))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*(2-n)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n*n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return 1- --n*n*n*n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n*n*n*n*n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return--n*n*n*n*n+1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:1-Math.cos(n*Math.PI/2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:Math.sin(n*Math.PI/2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===0?0:n===1?1:.5*(1-Math.cos(Math.PI*n))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1),n<=0?0:n>=1?1:((o*n|0)+1)*(1/o)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(37),h=i(3),u=new o({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(l,f,c,d,v){return l===void 0&&(l=100),f===void 0&&(f=.05),c===void 0&&(c=!1),d===void 0&&(d=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,typeof f=="number"?this.intensity.set(f):this.intensity.set(f.x,f.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=d,this._onUpdateScope=v,this.camera.emit(a.SHAKE_START,this.camera,this,l,f),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(l,f){if(this.isRunning)if(this._elapsed+=f,this.progress=n(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var c=this.intensity,d=this.camera.width,v=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*c.x*d*2-c.x*d)*p,this._offsetY=(Math.random()*c.y*v*2-c.y*v)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=u},function(e,r,i){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var n=i(18),o=i(0),a=i(37),h=i(134),u=new o({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(l,f,c,d,v,p,g){c===void 0&&(c=1e3),d===void 0&&(d=h.Linear),v===void 0&&(v=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),f===void 0&&(f=!1),this.shortestPath=f;var m=l;l<0?(m=-1*l,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m=m-Math.floor(m/x)*x;var y=this.camera;if(!v&&this.isRunning)return y;if(this.isRunning=!0,this.duration=c,this.progress=0,this.source=y.rotation,this.destination=m,typeof d=="string"&&h.hasOwnProperty(d)?this.ease=h[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,C=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+x)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+x)-this.destination,T<C?this.clockwise=!0:T>C&&(this.clockwise=!1)}return this.camera.emit(a.ROTATE_START,this.camera,this,c,m),y},update:function(l,f){if(this.isRunning){this._elapsed+=f;var c=n(this._elapsed/this.duration,0,1);this.progress=c;var d=this.camera;if(this._elapsed<this.duration){var v=this.ease(c);this.current=d.rotation;var p=0,g=360*Math.PI/180,m=this.destination,x=this.current;this.clockwise===!1&&(m=this.current,x=this.destination),m>=x?p=Math.abs(m-x):p=Math.abs(m+g)-x;var y=0;this.clockwise?y=d.rotation+p*v:y=d.rotation-p*v,d.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,c,y)}else d.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,c,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(134),h=i(37),u=new o({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,f,c,d,v,p){f===void 0&&(f=1e3),c===void 0&&(c=a.Linear),d===void 0&&(d=!1),v===void 0&&(v=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source=g.zoom,this.destination=l,typeof c=="string"&&a.hasOwnProperty(c)?this.ease=a[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=p,this.camera.emit(h.ZOOM_START,this.camera,this,f,l)),g},update:function(l,f){this.isRunning&&(this._elapsed+=f,this.progress=n(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(326),o=i(0),a=i(2),h=i(24),u=i(57),l=i(104),f=i(20),c=new o({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(f.BOOT,this.boot,this),v.sys.events.on(f.START,this.start,this)},boot:function(){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new n(0,0,d.scale.width,d.scale.height).setScene(this.scene),d.game.scale.on(l.RESIZE,this.onResize,this),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){if(!this.main){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(f.UPDATE,this.update,this),v.once(f.SHUTDOWN,this.shutdown,this)},add:function(d,v,p,g,m,x){d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var y=new n(d,v,p,g);return y.setName(x),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),m&&(this.main=y),y},addExisting:function(d,v){v===void 0&&(v=!1);var p=this.cameras.indexOf(d);return p===-1?(d.id=this.getNextID(),d.setRoundPixels(this.roundPixels),this.cameras.push(d),v&&(this.main=d),d):null},getNextID:function(){for(var d=this.cameras,v=1,p=0;p<32;p++){for(var g=!1,m=0;m<d.length;m++){var x=d[m];if(x&&x.id===v){g=!0;continue}}if(g)v=v<<1;else return v}return 0},getTotal:function(d){d===void 0&&(d=!1);for(var v=0,p=this.cameras,g=0;g<p.length;g++){var m=p[g];(!d||d&&m.visible)&&v++}return v},fromJSON:function(d){Array.isArray(d)||(d=[d]);for(var v=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<d.length;g++){var m=d[g],x=a(m,"x",0),y=a(m,"y",0),T=a(m,"width",v),C=a(m,"height",p),S=this.add(x,y,T,C);S.name=a(m,"name",""),S.zoom=a(m,"zoom",1),S.rotation=a(m,"rotation",0),S.scrollX=a(m,"scrollX",0),S.scrollY=a(m,"scrollY",0),S.roundPixels=a(m,"roundPixels",!1),S.visible=a(m,"visible",!0);var E=a(m,"backgroundColor",!1);E&&S.setBackgroundColor(E);var P=a(m,"bounds",null);if(P){var M=a(P,"x",0),R=a(P,"y",0),A=a(P,"width",v),O=a(P,"height",p);S.setBounds(M,R,A,O)}}return this},getCamera:function(d){for(var v=this.cameras,p=0;p<v.length;p++)if(v[p].name===d)return v[p];return null},getCamerasBelowPointer:function(d){for(var v=this.cameras,p=d.x,g=d.y,m=[],x=0;x<v.length;x++){var y=v[x];y.visible&&y.inputEnabled&&u(y,p,g)&&m.unshift(y)}return m},remove:function(d,v){v===void 0&&(v=!0),Array.isArray(d)||(d=[d]);for(var p=0,g=this.cameras,m=0;m<d.length;m++){var x=g.indexOf(d[m]);x!==-1&&(v?g[x].destroy():g[x].renderList=[],g.splice(x,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(d,v){for(var p=this.scene,g=this.cameras,m=0;m<this.cameras.length;m++){var x=g[m];if(x.visible&&x.alpha>0){x.preRender();var y=this.getVisibleChildren(v.getChildren(),x);d.render(p,y,x)}}},getVisibleChildren:function(d,v){for(var p=[],g=0;g<d.length;g++){var m=d[g];m.willRender(v)&&p.push(m)}return p},resetAll:function(){for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(d,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(d,v)},onResize:function(d,v,p,g,m){for(var x=0;x<this.cameras.length;x++){var y=this.cameras[x];y._x===0&&y._y===0&&y._width===g&&y._height===m&&y.setSize(v.width,v.height)}},resize:function(d,v){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(d,v)},shutdown:function(){this.main=void 0;for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();this.cameras=[];var v=this.systems.events;v.off(f.UPDATE,this.update,this),v.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});h.register("CameraManager",c,"cameras"),e.exports=c},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(e,r){var i=e.exports={},n,o;function a(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=a}catch{n=a}try{typeof clearTimeout=="function"?o=clearTimeout:o=h}catch{o=h}})();function u(y){if(n===setTimeout)return setTimeout(y,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(y,0);try{return n(y,0)}catch{try{return n.call(null,y,0)}catch{return n.call(this,y,0)}}}function l(y){if(o===clearTimeout)return clearTimeout(y);if((o===h||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(y);try{return o(y)}catch{try{return o.call(null,y)}catch{return o.call(this,y)}}}var f=[],c=!1,d,v=-1;function p(){!c||!d||(c=!1,d.length?f=d.concat(f):v=-1,f.length&&g())}function g(){if(!c){var y=u(p);c=!0;for(var T=f.length;T;){for(d=f,f=[];++v<T;)d&&d[v].run();v=-1,T=f.length}d=null,c=!1,l(y)}}i.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)T[C-1]=arguments[C];f.push(new m(y,T)),f.length===1&&!c&&u(g)};function m(y,T){this.fun=y,this.array=T}m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function x(){}i.on=x,i.addListener=x,i.once=x,i.off=x,i.removeListener=x,i.removeAllListeners=x,i.emit=x,i.prependListener=x,i.prependOnceListener=x,i.listeners=function(y){return[]},i.binding=function(y){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(y){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(136),o={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function a(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(o.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(o.mspointer=!0),navigator.getGamepads&&(o.gamepads=!0),"onwheel"in window||n.ie&&"WheelEvent"in window?o.wheelEvent="wheel":"onmousewheel"in window?o.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(o.wheelEvent="DOMMouseScroll")),o}e.exports=a()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(136),o={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function a(){if(typeof importScripts=="function")return o;o.audioData=!!window.Audio,o.webAudio=!!(window.AudioContext||window.webkitAudioContext);var h=document.createElement("audio"),u=!!h.canPlayType;try{if(u&&(h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(o.ogg=!0),(h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||h.canPlayType("audio/opus;").replace(/^no$/,""))&&(o.opus=!0),h.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(o.mp3=!0),h.canPlayType("audio/wav").replace(/^no$/,"")&&(o.wav=!0),(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/aac;").replace(/^no$/,""))&&(o.m4a=!0),h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(o.webm=!0),h.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(n.edge)o.dolby=!0;else if(n.safari&&n.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var l=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10);(l===10&&f>=11||l>10)&&(o.dolby=!0)}}}catch{}return o}e.exports=a()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function n(){if(typeof importScripts=="function")return i;var o=document.createElement("video"),a=!!o.canPlayType;try{a&&(o.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),o.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),o.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),o.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch{}return i}e.exports=n()},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={available:!1,cancel:"",keyboard:!1,request:""};function n(){if(typeof importScripts=="function")return i;var o,a="Fullscreen",h="FullScreen",u=["request"+a,"request"+h,"webkitRequest"+a,"webkitRequest"+h,"msRequest"+a,"msRequest"+h,"mozRequest"+h,"mozRequest"+a];for(o=0;o<u.length;o++)if(document.documentElement[u[o]]){i.available=!0,i.request=u[o];break}var l=["cancel"+h,"exit"+a,"webkitCancel"+h,"webkitExit"+a,"msCancel"+h,"msExit"+a,"mozCancel"+h,"mozExit"+a];if(i.available){for(o=0;o<l.length;o++)if(document[l[o]]){i.cancel=l[o];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}e.exports=n()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.atan2(o.x-n.x,o.y-n.y)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return Math.atan2(a-n,h-o)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(a){return a>Math.PI&&(a-=n.PI2),Math.abs(((a+n.TAU)%n.PI2-n.PI2)%n.PI2)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(137),o=function(){return n(-Math.PI,Math.PI)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(137),o=function(){return n(-180,180)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(351),o=function(a){return n(a+Math.PI)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=function(a,h,u){return u===void 0&&(u=.05),a===h||(Math.abs(h-a)<=u||Math.abs(h-a)>=n.PI2-u?a=h:(Math.abs(h-a)>Math.PI&&(h<a?h+=n.PI2:h-=n.PI2),h>a?a+=u:h<a&&(a-=u))),a};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=o-n;if(a===0)return 0;var h=Math.floor((a- -180)/360);return a-h*360};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.x-o.x,h=n.y-o.y;return a*a+h*h};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return Math.max(Math.abs(n-a),Math.abs(o-h))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(a-n,u)+Math.pow(h-o,u))};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return Math.abs(n-a)+Math.abs(o-h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1e-4),Math.ceil(n-o)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1e-4),Math.floor(n+o)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(356),o=function(a,h){for(var u=0,l=a.length-1,f=0;f<=l;f++)u+=Math.pow(1-h,l-f)*Math.pow(h,f)*a[f]*n(l,f);return u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(194),o=function(a,h){var u=a.length-1,l=u*h,f=Math.floor(l);return a[0]===a[u]?(h<0&&(f=Math.floor(l=u*(1+h))),n(l-f,a[(f-1+u)%u],a[f],a[(f+1)%u],a[(f+2)%u])):h<0?a[0]-(n(-l,a[0],a[0],a[1],a[1])-a[0]):h>1?a[u]-(n(l-u,a[u],a[u],a[u-1],a[u-1])-a[u]):n(l-f,a[f?f-1:0],a[f],a[u<f+1?u:f+1],a[u<f+2?u:f+2])};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(135),o=function(a,h){var u=a.length-1,l=u*h,f=Math.floor(l);return h<0?n(a[0],a[1],l):h>1?n(a[u],a[u-1],u-l):n(a[f],a[f+1>u?u:f+1],l-f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(183),o=function(a,h,u){return h+(u-h)*n(a,0,1)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n>0&&(n&n-1)===0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){return a===void 0&&(a=0),o===0?n:(n-=a,n=o*Math.round(n/o),h?(a+n)/o:a+n)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=new n({initialize:function(h){h===void 0&&(h=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],h&&this.init(h)},rnd:function(){var a=2091639*this.s0+this.c*23283064365386963e-26;return this.c=a|0,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},hash:function(a){var h,u=this.n;a=a.toString();for(var l=0;l<a.length;l++)u+=a.charCodeAt(l),h=.02519603282416938*u,u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296;return this.n=u,(u>>>0)*23283064365386963e-26},init:function(a){typeof a=="string"?this.state(a):this.sow(a)},sow:function(a){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!a)for(var h=0;h<a.length&&a[h]!=null;h++){var u=a[h];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(a,h){return Math.floor(this.realInRange(0,h-a+1)+a)},between:function(a,h){return Math.floor(this.realInRange(0,h-a+1)+a)},realInRange:function(a,h){return this.frac()*(h-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",h="";for(h=a="";a++<36;h+=~a%5|a*3&4?(a^15?8^this.frac()*(a^20?16:4):4).toString(16):"-");return h},pick:function(a){return a[this.integerInRange(0,a.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(a){return a[~~(Math.pow(this.frac(),2)*(a.length-1)+.5)]},timestamp:function(a,h){return this.realInRange(a||9466848e5,h||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(a){return typeof a=="string"&&a.match(/^!rnd/)&&(a=a.split(","),this.c=parseFloat(a[1]),this.s0=parseFloat(a[2]),this.s1=parseFloat(a[3]),this.s2=parseFloat(a[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(a){for(var h=a.length-1,u=h;u>0;u--){var l=Math.floor(this.frac()*(u+1)),f=a[l];a[l]=a[u],a[u]=f}return a}});e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=0,a=0;a<n.length;a++)o+=+n[a];return o/n.length};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){o===void 0&&(o=0),a===void 0&&(a=10);var h=Math.pow(a,-o);return Math.ceil(n*h)/h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return Math.abs(n-o)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(69),h=i(1),u=new a,l=new o({initialize:function f(c,d,v,p){c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=f.DefaultOrder),this._x=c,this._y=d,this._z=v,this._order=p,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(f){this._order=f,this.onChangeCallback(this)}},set:function(f,c,d,v){return v===void 0&&(v=this._order),this._x=f,this._y=c,this._z=d,this._order=v,this.onChangeCallback(this),this},copy:function(f){return this.set(f.x,f.y,f.z,f.order)},setFromQuaternion:function(f,c,d){return c===void 0&&(c=this._order),d===void 0&&(d=!1),u.fromQuat(f),this.setFromRotationMatrix(u,c,d)},setFromRotationMatrix:function(f,c,d){c===void 0&&(c=this._order),d===void 0&&(d=!1);var v=f.val,p=v[0],g=v[4],m=v[8],x=v[1],y=v[5],T=v[9],C=v[2],S=v[6],E=v[10],P=0,M=0,R=0,A=.99999;switch(c){case"XYZ":{M=Math.asin(n(m,-1,1)),Math.abs(m)<A?(P=Math.atan2(-T,E),R=Math.atan2(-g,p)):P=Math.atan2(S,y);break}case"YXZ":{P=Math.asin(-n(T,-1,1)),Math.abs(T)<A?(M=Math.atan2(m,E),R=Math.atan2(x,y)):M=Math.atan2(-C,p);break}case"ZXY":{P=Math.asin(n(S,-1,1)),Math.abs(S)<A?(M=Math.atan2(-C,E),R=Math.atan2(-g,y)):R=Math.atan2(x,p);break}case"ZYX":{M=Math.asin(-n(C,-1,1)),Math.abs(C)<A?(P=Math.atan2(S,E),R=Math.atan2(x,p)):R=Math.atan2(-g,y);break}case"YZX":{R=Math.asin(n(x,-1,1)),Math.abs(x)<A?(P=Math.atan2(-T,y),M=Math.atan2(-C,p)):M=Math.atan2(m,E);break}case"XZY":{R=Math.asin(-n(g,-1,1)),Math.abs(g)<A?(P=Math.atan2(S,y),M=Math.atan2(m,p)):P=Math.atan2(-T,E);break}}return this._x=P,this._y=M,this._z=R,this._order=c,d&&this.onChangeCallback(this),this}});l.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],l.DefaultOrder="XYZ",e.exports=l},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){o===void 0&&(o=0),a===void 0&&(a=10);var h=Math.pow(a,-o);return Math.floor(n*h)/h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n/o/1e3};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n==parseFloat(n)?!(n%2):void 0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n===parseFloat(n)?!(n%2):void 0};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return Math.min(n+o,a)};e.exports=i},function(e,r){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.length;if(o===0)return 0;n.sort(function(h,u){return h-u});var a=Math.floor(o/2);return o%2===0?(n[a]+n[a-1])/2:n[a]};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return Math.max(n-o,a)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a===void 0&&(a=o+1);var u=(n-o)/(a-o);return u>1?h!==void 0?(u=(h-n)/(h-a),u<0&&(u=0)):u=1:u<0&&(u=0),u};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);var a=Math.random()*2*Math.PI;return n.x=Math.cos(a)*o,n.y=Math.sin(a)*o,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=1);var a=Math.random()*2*Math.PI,h=Math.random()*2-1,u=Math.sqrt(1-h*h)*o;return n.x=Math.cos(a)*u,n.y=Math.sin(a)*u,n.z=h*o,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o=1),n.x=(Math.random()*2-1)*o,n.y=(Math.random()*2-1)*o,n.z=(Math.random()*2-1)*o,n.w=(Math.random()*2-1)*o,n};e.exports=i},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){return n.x=o+u*Math.cos(h),n.y=a+u*Math.sin(h),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){o===void 0&&(o=0),a===void 0&&(a=10);var h=Math.pow(a,-o);return Math.round(n*h)/h};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o===void 0&&(o=1),a===void 0&&(a=1),h===void 0&&(h=1),h*=Math.PI/n;for(var u=[],l=[],f=0;f<n;f++)a-=o*h,o+=a*h,u[f]=a,l[f]=o;return{sin:l,cos:u,length:n}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3),o=function(a,h,u,l){l===void 0&&(l=new n);var f=0,c=0,d=h*u;return a>0&&a<=d&&(a>h-1?(c=Math.floor(a/h),f=a-c*h):f=a),l.set(f,c)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return Math.abs(n-o)<=a};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(39),o=i(69),a=i(365),h=new o,u=new a,l=new n,f=function(c,d,v){return u.setAxisAngle(d,v),h.fromRotationTranslation(u,l.set(0,0,0)),c.transformMat4(h)};e.exports=f},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,r){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,r){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,r){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:i(388),Palettes:i(889)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(390),a=i(391),h=i(5),u=i(392),l=i(393),f=i(394),c=i(10),d=i(395),v=i(3),p=i(14),g=new n({initialize:function(x,y){x===void 0&&(x=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof x=="object"?this.fromJSON(x):this.startPoint.set(x,y)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,y){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,y)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new u(x,m)),this},cubicBezierTo:function(m,x,y,T,C,S){var E=this.getEndPoint(),P,M,R;return m instanceof v?(P=m,M=x,R=y):(P=new v(y,T),M=new v(C,S),R=new v(m,x)),this.add(new o(E,P,M,R))},quadraticBezierTo:function(m,x,y,T){var C=this.getEndPoint(),S,E;return m instanceof v?(S=m,E=x):(S=new v(y,T),E=new v(m,x)),this.add(new f(C,S,E))},draw:function(m,x){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];T.active&&T.draw(m,x)}return m},ellipseTo:function(m,x,y,T,C,S){var E=new a(0,0,m,x,y,T,C,S),P=this.getEndPoint(this._tmpVec2A),M=E.getStartPoint(this._tmpVec2B);return P.subtract(M),E.x=P.x,E.y=P.y,this.add(E)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var y=m.curves[x];switch(y.type){case"LineCurve":this.add(u.fromJSON(y));break;case"EllipseCurve":this.add(a.fromJSON(y));break;case"SplineCurve":this.add(d.fromJSON(y));break;case"CubicBezierCurve":this.add(o.fromJSON(y));break;case"QuadraticBezierCurve":this.add(f.fromJSON(y));break}}return this},getBounds:function(m,x){m===void 0&&(m=new c),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var y=new c,T=p.MIN_SAFE_INTEGER,C=p.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];E.active&&(E.getBounds(y,x),m.x=Math.min(m.x,y.x),m.y=Math.min(m.y,y.y),T=Math.max(T,y.right),C=Math.max(C,y.bottom))}return m.right=T,m.bottom=C,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,y=0;y<this.curves.length;y++)x+=this.curves[y].getLength(),m.push(x);return this.cacheLengths=m,m},getEndPoint:function(m){return m===void 0&&(m=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],P=E.getLength(),M=P===0?0:1-S/P;return E.getPointAt(M,x)}C++}return null},getPoints:function(m){m===void 0&&(m=12);for(var x=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(C.active)for(var S=C.getResolution(m),E=C.getPoints(S),P=0;P<E.length;P++){var M=E[P];y&&y.equals(M)||(x.push(M),y=M)}}return this.autoClose&&x.length>1&&!x[x.length-1].equals(x[0])&&x.push(x[0]),x},getRandomPoint:function(m){return m===void 0&&(m=new v),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],y=0;y<=m;y++)x.push(this.getPoint(y/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new v),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new v);for(var y=m*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],P=E.getLength(),M=P===0?0:1-S/P;return E.getTangentAt(M,x)}C++}return null},lineTo:function(m,x){m instanceof v?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,x);var y=this.getEndPoint(this._tmpVec2A);return this.add(new u([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new d(m))},moveTo:function(m,x){return m instanceof v?this.add(new l(m.x,m.y)):this.add(new l(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",function(m,x){return new g(m,x)}),e.exports=g},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(101),a=i(24),h=i(20),u=new n({Extends:o,initialize:function(f){o.call(this,f,f.sys.events),this.scene=f,this.systems=f.sys,f.sys.events.once(h.BOOT,this.boot,this),f.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){o.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",u,"data"),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=i(17),a={In:i(900),To:i(901)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(42),o=i(43),a=i(44),h=i(45),u=function(l,f){f===void 0&&(f={});var c=o(l),d=h(l);return f.x=c,f.y=d,f.width=a(l)-c,f.height=n(l)-d,f};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.width*n.originX};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.height*n.originY};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===void 0&&(o="none"),n.style.msTouchAction=o,n.style["ms-touch-action"]=o,n.style["touch-action"]=o,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o="none");var a=["-webkit-","-khtml-","-moz-","-ms-",""];return a.forEach(function(h){n.style[h+"user-select"]=o}),n.style["-webkit-touch-callout"]=o,n.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(103),o=function(a){a===void 0&&(a=1024);var h=[],u=255,l,f=255,c=0,d=0;for(l=0;l<=u;l++)h.push({r:f,g:l,b:d,color:n(f,l,d)});for(c=255,l=u;l>=0;l--)h.push({r:l,g:c,b:d,color:n(l,c,d)});for(f=0,l=0;l<=u;l++,c--)h.push({r:f,g:c,b:l,color:n(f,c,l)});for(c=0,d=255,l=0;l<=u;l++,d--,f++)h.push({r:f,g:c,b:d,color:n(f,c,d)});if(a===1024)return h;var v=[],p=0,g=1024/a;for(l=0;l<a;l++)v.push(h[Math.floor(p)]),p+=g;return v};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o={r:n>>16&255,g:n>>8&255,b:n&255,a:255};return n>16777215&&(o.a=n>>>24),o};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(38),o=i(399),a=function(h,u,l){var f=l,c=l,d=l;if(u!==0){var v=l<.5?l*(1+u):l+u-l*u,p=2*l-v;f=o(p,v,h+1/3),c=o(p,v,h),d=o(p,v,h-1/3)}var g=new n;return g.setGLTo(f,c,d,1)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(188),o=function(a,h){a===void 0&&(a=1),h===void 0&&(h=1);for(var u=[],l=0;l<=359;l++)u.push(n(l/359,a,h));return u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(135),o=function(u,l,f,c,d,v,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var m=g/p;return{r:n(u,c,m),g:n(l,d,m),b:n(f,v,m)}},a=function(u,l,f,c){return f===void 0&&(f=100),c===void 0&&(c=0),o(u.r,u.g,u.b,l.r,l.g,l.b,f,c)},h=function(u,l,f,c,d,v){return d===void 0&&(d=100),v===void 0&&(v=0),o(u.r,u.g,u.b,l,f,c,d,v)};e.exports={RGBWithRGB:o,ColorWithRGB:h,ColorWithColor:a}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(195),o=i(38),a=function(h,u){return h===void 0&&(h=0),u===void 0&&(u=255),new o(n(h,u),n(h,u),n(h,u))};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(398),o=function(a,h,u,l,f){return l===void 0&&(l=255),f===void 0&&(f="#"),f==="#"?"#"+((1<<24)+(a<<16)+(h<<8)+u).toString(16).slice(1,7):"0x"+n(l)+n(a)+n(h)+n(u)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:i(919)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(24),h=new n({Extends:o,initialize:function(){o.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",h,"events"),e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),o=i(321),a=i(325),h=i(31),u=i(0),l=i(346),f=i(921),c=i(366),d=i(101),v=i(384),p=i(347),g=i(400),m=i(9),x=i(22),y=i(409),T=i(24),C=i(414),S=i(415),E=i(417),P=i(106),M=i(422),R=i(385),A=i(387),O=i(426),b=new u({initialize:function(I){this.config=new l(I),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new o(this),this.textures=new M(this),this.cache=new a(this),this.registry=new d(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new S(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new R(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),f(this),v(this),n(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(x.BOOT)},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var w=this.events;w.on(x.HIDDEN,this.onHidden,this),w.on(x.VISIBLE,this.onVisible,this),w.on(x.BLUR,this.onBlur,this),w.on(x.FOCUS,this.onFocus,this)},step:function(w,I){if(this.pendingDestroy)return this.runDestroy();var Y=this.events;Y.emit(x.PRE_STEP,w,I),Y.emit(x.STEP,w,I),this.scene.update(w,I),Y.emit(x.POST_STEP,w,I);var z=this.renderer;z.preRender(),Y.emit(x.PRE_RENDER,z,w,I),this.scene.render(z),z.postRender(),Y.emit(x.POST_RENDER,z,w,I)},headlessStep:function(w,I){if(this.pendingDestroy)return this.runDestroy();var Y=this.events;Y.emit(x.PRE_STEP,w,I),Y.emit(x.STEP,w,I),this.scene.update(w,I),Y.emit(x.POST_STEP,w,I),Y.emit(x.PRE_RENDER),Y.emit(x.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(w,I){I===void 0&&(I=!1),this.pendingDestroy=!0,this.removeCanvas=w,this.noReturn=I},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=b},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(142),o=function(a){var h=a.config;if(!(!h.parent||!h.domCreateContainer)){var u=document.createElement("div");u.style.cssText=["display: block;","width: "+a.scale.width+"px;","height: "+a.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+h.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),a.domContainer=u,n(u,h.parent)}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(!a.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var h=n.source[o];n.add("__BASE",o,0,0,h.width,h.height);for(var u=a.getElementsByTagName("SubTexture"),l,f=0;f<u.length;f++){var c=u[f].attributes,d=c.name.value,v=parseInt(c.x.value,10),p=parseInt(c.y.value,10),g=parseInt(c.width.value,10),m=parseInt(c.height.value,10);if(l=n.add(d,o,v,p,g,m),c.frameX){var x=Math.abs(parseInt(c.frameX.value,10)),y=Math.abs(parseInt(c.frameY.value,10)),T=parseInt(c.frameWidth.value,10),C=parseInt(c.frameHeight.value,10);l.setTrim(g,m,x,y,T,C)}}return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.source[o];return n.add("__BASE",o,0,0,a.width,a.height),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.source[o];return n.add("__BASE",o,0,0,a.width,a.height),n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(a,h,u){if(!u.frames&&!u.textures){console.warn("Invalid Texture Atlas JSON Array");return}var l=a.source[h];a.add("__BASE",h,0,0,l.width,l.height);for(var f=Array.isArray(u.textures)?u.textures[h].frames:u.frames,c,d=0;d<f.length;d++){var v=f[d];c=a.add(v.filename,h,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=n(v)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?a.customData[g]=u[g].slice(0):a.customData[g]=u[g]);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(a,h,u){if(!u.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var l=a.source[h];a.add("__BASE",h,0,0,l.width,l.height);var f=u.frames,c;for(var d in f)if(f.hasOwnProperty(d)){var v=f[d];c=a.add(d,h,v.frame.x,v.frame.y,v.frame.w,v.frame.h),v.trimmed&&c.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(c.rotated=!0,c.updateUVsInverted());var p=v.anchor||v.pivot;p&&(c.customPivot=!0,c.pivotX=p.x,c.pivotY=p.y),c.customData=n(v)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?a.customData[g]=u[g].slice(0):a.customData[g]=u[g]);return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(a,h,u,l,f,c,d){var v=n(d,"frameWidth",null),p=n(d,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=a.source[h];a.add("__BASE",h,0,0,g.width,g.height);var m=n(d,"startFrame",0),x=n(d,"endFrame",-1),y=n(d,"margin",0),T=n(d,"spacing",0),C=Math.floor((f-y+T)/(v+T)),S=Math.floor((c-y+T)/(p+T)),E=C*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",a.key),(m>E||m<-E)&&(m=0),m<0&&(m=E+m),x!==-1&&(E=m+(x+1));for(var P=y,M=y,R=0,A=0,O=0;O<E;O++){R=0,A=0;var b=P+v,w=M+p;b>f&&(R=b-f),w>c&&(A=w-c),a.add(O,h,u+P,l+M,v-R,p-A),P+=v+T,P+v>f&&(P=y,M+=p+T)}return a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(2),o=function(a,h,u){var l=n(u,"frameWidth",null),f=n(u,"frameHeight",l);if(!l)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=a.source[0];a.add("__BASE",0,0,0,c.width,c.height),n(u,"startFrame",0),n(u,"endFrame",-1);for(var d=n(u,"margin",0),v=n(u,"spacing",0),p=h.cutX,g=h.cutY,m=h.cutWidth,x=h.cutHeight,y=h.realWidth,T=h.realHeight,C=Math.floor((y-d+v)/(l+v)),S=Math.floor((T-d+v)/(f+v)),E=h.x,P=l-E,M=l-(y-m-E),R=h.y,A=f-R,O=f-(T-x-R),b,w=d,I=d,Y=0,z=h.sourceIndex,V=0;V<S;V++){for(var W=V===0,F=V===S-1,L=0;L<C;L++){var D=L===0,B=L===C-1;if(b=a.add(Y,z,p+w,g+I,l,f),D||W||B||F){var G=D?E:0,N=W?R:0,X=0,U=0;D&&(X+=l-P),B&&(X+=l-M),W&&(U+=f-A),F&&(U+=f-O);var H=l-X,$=f-U;b.cutWidth=H,b.cutHeight=$,b.setTrim(l,f,G,N,H,$)}w+=v,D?w+=P:B?w+=M:w+=l,Y++}w=d,I+=v,W?I+=A:F?I+=O:I+=f}return a};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=0,n=function(a,h,u,l){var f=i-l.y-l.height;a.add(u,h,l.x,f,l.width,l.height)},o=function(a,h,u){var l=a.source[h];a.add("__BASE",h,0,0,l.width,l.height),i=l.height;for(var f=u.split(`
`),c=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",v="",p={x:0,y:0,width:0,height:0},g=0;g<f.length;g++){var m=f[g].match(c);if(m){var x=m[1]==="- ",y=m[2],T=m[3];if(x&&(v!==d&&(n(a,h,v,p),d=v),p={x:0,y:0,width:0,height:0}),y==="name"){v=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return v!==d&&n(a,h,v,p),a};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,r){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};n.Shader=i(229),n.Mesh=i(230),n.PointLight=i(150),n.Factories.Shader=i(1184),n.Factories.Mesh=i(1185),n.Factories.PointLight=i(1186),n.Creators.Shader=i(1187),n.Creators.Mesh=i(1188),n.Creators.PointLight=i(1189),n.Light=i(481),n.LightsManager=i(482),n.LightsPlugin=i(1190),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(110),a=i(24),h=i(75),u=i(20),l=i(79),f=new n({Extends:o,initialize:function(d){o.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,this.events=d.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.events.once(u.DESTROY,this.destroy,this)},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(h.ADDED_TO_SCENE,c,this.scene),this.events.emit(u.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(h.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,c,this.scene)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(l(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,d){return c._depth-d._depth},getChildren:function(){return this.list},shutdown:function(){for(var c=this.list,d=c.length;d--;)c[d].destroy(!0);c.length=0,this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",f,"displayList"),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(186),o=i(209),a=function(h){var u="";if(!o(h))return u;for(var l=0;l<h.length;l++){for(var f=0;f<h[l].length;f++){var c=h[l][f].toString();c!=="undefined"?u+=n(c,2):u+="?",f<h[l].length-1&&(u+=" |")}if(l<h.length-1){u+=`
`;for(var d=0;d<h[l].length;d++)u+="---",d<h[l].length-1&&(u+="+");u+=`
`}}return u};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.reverse()};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){for(var o=0;o<n.length;o++)n[o].reverse();return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),o=function(a){return n(a,180)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),o=function(a){return n(a,90)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(147),o=function(a){return n(a,-90)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(178),o=i(179),a=function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),l!==0&&(l<0?n(h,Math.abs(l)):o(h,l)),u!==0)for(var f=0;f<h.length;f++){var c=h[f];u<0?n(c,Math.abs(u)):o(c,u)}return h};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){if(u===void 0&&(u=n),a>0){var l=a-n.length;if(l<=0)return null}if(!Array.isArray(o))return n.indexOf(o)===-1?(n.push(o),h&&h.call(u,o),o):null;for(var f=o.length-1;f>=0;)n.indexOf(o[f])!==-1&&o.splice(f,1),f--;if(f=o.length,f===0)return null;a>0&&f>l&&(o.splice(l),f=l);for(var c=0;c<f;c++){var d=o[c];n.push(d),h&&h.call(u,d)}return o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u,l){if(a===void 0&&(a=0),l===void 0&&(l=n),h>0){var f=h-n.length;if(f<=0)return null}if(!Array.isArray(o))return n.indexOf(o)===-1?(n.splice(a,0,o),u&&u.call(l,o),o):null;for(var c=o.length-1;c>=0;)n.indexOf(o[c])!==-1&&o.pop(),c--;if(c=o.length,c===0)return null;h>0&&c>f&&(o.splice(f),c=f);for(var d=c-1;d>=0;d--){var v=o[d];n.splice(a,0,v),u&&u.call(l,v)}return o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.indexOf(o);return a!==-1&&a<n.length&&(n.splice(a,1),n.push(o)),o};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(a,h,u,l,f){l===void 0&&(l=0),f===void 0&&(f=a.length);var c=0;if(n(a,l,f))for(var d=l;d<f;d++){var v=a[d];v[h]===u&&c++}return c};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h,u=[null];for(h=3;h<arguments.length;h++)u.push(arguments[h]);for(h=0;h<n.length;h++)u[0]=n[h],o.apply(a,u);return n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(a,h,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=a.length),n(a,l,f)){var c,d=[null];for(c=5;c<arguments.length;c++)d.push(arguments[c]);for(c=l;c<f;c++)d[0]=a[c],h.apply(u,d)}return a};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.indexOf(o);if(a>0){var h=n[a-1],u=n.indexOf(h);n[a]=h,n[u]=o}return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=n.indexOf(o);if(h===-1||a<0||a>=n.length)throw new Error("Supplied index out of bounds");return h!==a&&(n.splice(h,1),n.splice(a,0,o)),o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.indexOf(o);if(a!==-1&&a<n.length-1){var h=n[a+1],u=n.indexOf(h);n[a]=h,n[u]=o}return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(o===a)return n;var h=n.indexOf(o),u=n.indexOf(a);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h>u||(n.splice(h,1),u===n.length-1?n.push(o):n.splice(u,0,o)),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(o===a)return n;var h=n.indexOf(o),u=n.indexOf(a);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h<u||(n.splice(h,1),u===0?n.unshift(o):n.splice(u,0,o)),n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(363),o=function(a,h,u){a===void 0&&(a=0),h===void 0&&(h=null),u===void 0&&(u=1),h===null&&(h=a,a=0);for(var l=[],f=Math.max(n((h-a)/(u||1)),0),c=0;c<f;c++)l.push(a),a+=u;return l};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),o=function(a,h,u,l){if(l===void 0&&(l=a),h<0||h>a.length-1)throw new Error("Index out of bounds");var f=n(a,h);return u&&u.call(l,f),f};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(a,h,u,l,f){if(h===void 0&&(h=0),u===void 0&&(u=a.length),f===void 0&&(f=a),n(a,h,u)){var c=u-h,d=a.splice(h,c);if(l)for(var v=0;v<d.length;v++){var p=d[v];l.call(f,p)}return d}else return[]};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(74),o=function(a,h,u){h===void 0&&(h=0),u===void 0&&(u=a.length);var l=h+Math.floor(Math.random()*u);return n(a,l)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=n.indexOf(o),u=n.indexOf(a);return h!==-1&&u===-1?(n[h]=a,!0):!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.indexOf(o);return a!==-1&&a>0&&(n.splice(a,1),n.unshift(o)),o};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(78),o=function(a,h,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=a.length),n(a,l,f))for(var c=l;c<f;c++){var d=a[c];d.hasOwnProperty(h)&&(d[h]=u)}return a};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){if(o===a)return n;var h=n.indexOf(o),u=n.indexOf(a);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return n[h]=a,n[u]=o,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(211),a=i(24),h=i(20),u=new n({Extends:o,initialize:function(f){o.call(this),this.checkQueue=!0,this.scene=f,this.systems=f.sys,f.sys.events.once(h.BOOT,this.boot,this),f.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(h.PRE_UPDATE,this.update,this),l.on(h.UPDATE,this.sceneUpdate,this),l.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(l,f){for(var c=this._active,d=c.length,v=0;v<d;v++){var p=c[v];p.active&&p.preUpdate.call(p,l,f)}},shutdown:function(){for(var l=this._active.length;l--;)this._active[l].destroy(!0);for(l=this._pending.length;l--;)this._pending[l].destroy(!0);for(l=this._destroy.length;l--;)this._destroy[l].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var f=this.systems.events;f.off(h.PRE_UPDATE,this.update,this),f.off(h.UPDATE,this.sceneUpdate,this),f.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",u,"updateList"),e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){if(a===void 0&&(a=!1),h===void 0)return h={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},h;var u=n.text,l=u.length,f=n.maxWidth,c=n.wordWrapCharCode,d=Number.MAX_VALUE,v=Number.MAX_VALUE,p=0,g=0,m=n.fontData.chars,x=n.fontData.lineHeight,y=n.letterSpacing,T=0,C=0,S=0,E=null,P=n._align,M=0,R=0,A=n.fontSize/n.fontData.size,O=A*n.scaleX,b=A*n.scaleY,w=null,I=0,Y=[],z=Number.MAX_VALUE,V=0,W=0,F=0,L,D=[],B=[],G=null;if(f>0){for(L=0;L<l;L++){if(S=u.charCodeAt(L),S===10){G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*b,w:G.w*O,h:G.h*b,cr:!0}),G=null),T=0,C+=x,w=null;continue}if(E=m[S],!!E){if(w!==null)var N=E.kerning[I];S===c?G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*b,w:G.w*O,h:G.h*b,cr:!1}),G=null):(G===null&&(G={word:"",i:L,x:T,y:C,w:0,h:x,cr:!1}),G.word=G.word.concat(u[L]),G.w+=E.xOffset+E.xAdvance+(N!==void 0?N:0)),T+=E.xAdvance+y,w=E,I=S}}G!==null&&D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*b,w:G.w*O,h:G.h*b,cr:!1}),T=0,C=0,w=null,I=0;var X,U=0,H=[];for(L=0;L<D.length;L++){var $=D[L],Z=$.x,J=$.x+$.w;if(X){var Q=Z-(X.x+X.w);U=Z-(Q+X.w),X=null}var _=Z-U,j=J-U;_>f||j>f?(H.push($.i-1),$.cr?(H.push($.i+$.word.length),U=0,X=null):X=$):$.cr&&(H.push($.i+$.word.length),U=0,X=null)}var tt=function(Wt,Xt,Be){return Wt.substr(0,Xt)+Be+Wt.substr(Xt+1)};for(L=H.length-1;L>=0;L--)u=tt(u,H[L],`
`);h.wrappedText=u,l=u.length,D=[],G=null}var lt=0;for(L=0;L<l;L++){if(S=u.charCodeAt(L),S===10){G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*b,w:G.w*O,h:G.h*b}),G=null),T=0,C+=x,w=null,Y[W]=F,F>V&&(V=F),F<z&&(z=F),W++,F=0;continue}if(E=m[S],!!E){if(M=T,R=C,w!==null){var rt=E.kerning[I];M+=rt!==void 0?rt:0}d>M&&(d=M),v>R&&(v=R);var et=M+E.xAdvance,q=R+x;p<et&&(p=et),g<q&&(g=q);var vt=E.xOffset+E.xAdvance+(rt!==void 0?rt:0);S===c?G!==null&&(D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*b,w:G.w*O,h:G.h*b}),G=null):(G===null&&(G={word:"",i:lt,x:T,y:C,w:0,h:x}),G.word=G.word.concat(u[L]),G.w+=vt),B.push({i:lt,char:u[L],code:S,x:(E.xOffset+T)*A,y:(E.yOffset+C)*A,w:E.width*A,h:E.height*A,t:C*A,r:et*A,b:x*A,line:W,glyph:E}),T+=E.xAdvance+y,w=E,I=S,F=et*A,lt++}}if(G!==null&&D.push({word:G.word,i:G.i,x:G.x*O,y:G.y*b,w:G.w*O,h:G.h*b}),Y[W]=F,F>V&&(V=F),F<z&&(z=F),P>0)for(var it=0;it<B.length;it++){var ot=B[it];if(P===1){var De=(V-Y[ot.line])/2;ot.x+=De,ot.r+=De}else if(P===2){var Ie=V-Y[ot.line];ot.x+=Ie,ot.r+=Ie}}var Dt=h.local,mt=h.global,Zt=h.lines;return Dt.x=d*A,Dt.y=v*A,Dt.width=p*A,Dt.height=g*A,mt.x=n.x-n._displayOriginX+d*O,mt.y=n.y-n._displayOriginY+v*b,mt.width=p*O,mt.height=g*b,Zt.shortest=z,Zt.longest=V,Zt.lengths=Y,o&&(Dt.x=Math.ceil(Dt.x),Dt.y=Math.ceil(Dt.y),Dt.width=Math.ceil(Dt.width),Dt.height=Math.ceil(Dt.height),mt.x=Math.ceil(mt.x),mt.y=Math.ceil(mt.y),mt.width=Math.ceil(mt.width),mt.height=Math.ceil(mt.height),Zt.shortest=Math.ceil(z),Zt.longest=Math.ceil(V)),a&&(n._displayOriginX=n.originX*Dt.width,n._displayOriginY=n.originY*Dt.height,mt.x=n.x-n._displayOriginX*n.scaleX,mt.y=n.y-n._displayOriginY*n.scaleY,o&&(mt.x=Math.ceil(mt.x),mt.y=Math.ceil(mt.y))),h.words=D,h.characters=B,h.lines.height=x,h.scale=A,h.scaleX=n.scaleX,h.scaleY=n.scaleY,h};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(212),o=function(a,h,u,l,f,c,d){var v=a.sys.textures.get(u),p=v.get(l),g=a.sys.cache.xml.get(f);if(p&&g){var m=n(g,p,c,d,v);return a.sys.cache.bitmapFont.add(h,{data:m,texture:u,frame:l,fromAtlas:!0}),!0}else return!1};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1046),o=i(1048),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1047),o=i(19),a=i(12),h=function(u,l,f,c){var d=l._text,v=d.length;if(v!==0){f.addToRenderList(l);var p=u.pipelines.set(l.pipeline,l),g=o(l,f,c).calc,m=f.roundPixels,x=f.alpha,y=l.charColors,T=l.tintFill,C=a.getTintAppendFloatAlpha,S=C(l.tintTopLeft,x*l._alphaTL),E=C(l.tintTopRight,x*l._alphaTR),P=C(l.tintBottomLeft,x*l._alphaBL),M=C(l.tintBottomRight,x*l._alphaBR),R=l.frame.glTexture,A=p.setGameObject(l),O=l.getTextBounds(!1),b,w,I,Y=O.characters,z=l.dropShadowX,V=l.dropShadowY,W=z!==0||V!==0;if(u.pipelines.preBatch(l),W){var F=l.dropShadowColor,L=l.dropShadowAlpha,D=C(F,x*L*l._alphaTL),B=C(F,x*L*l._alphaTR),G=C(F,x*L*l._alphaBL),N=C(F,x*L*l._alphaBR);for(b=0;b<Y.length;b++)w=Y[b],I=w.glyph,!(w.code===32||I.width===0||I.height===0)&&n(p,l,w,I,z,V,g,m,D,B,G,N,1,R,A)}for(b=0;b<Y.length;b++)if(w=Y[b],I=w.glyph,!(w.code===32||I.width===0||I.height===0))if(y[w.i]){var X=y[w.i],U=X.tintEffect,H=C(X.tintTL,x*l._alphaTL),$=C(X.tintTR,x*l._alphaTR),Z=C(X.tintBL,x*l._alphaBL),J=C(X.tintBR,x*l._alphaBR);n(p,l,w,I,0,0,g,m,H,$,Z,J,U,R,A)}else n(p,l,w,I,0,0,g,m,S,E,P,M,T,R,A);u.pipelines.postBatch(l)}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u,l,f,c,d,v,p,g,m,x,y){var T=a.x-o.displayOriginX+u,C=a.y-o.displayOriginY+l,S=T+a.w,E=C+a.h,P=f.getXRound(T,C,c),M=f.getYRound(T,C,c),R=f.getXRound(T,E,c),A=f.getYRound(T,E,c),O=f.getXRound(S,E,c),b=f.getYRound(S,E,c),w=f.getXRound(S,C,c),I=f.getYRound(S,C,c);n.batchQuad(o,P,M,R,A,O,b,w,I,h.u0,h.v0,h.u1,h.v1,d,v,p,g,m,x,y)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(30),o=function(a,h,u,l){var f=h._text,c=f.length,d=a.currentContext;if(!(c===0||!n(a,d,h,u,l))){u.addToRenderList(h);var v=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.fontData.chars,g=h.fontData.lineHeight,m=h._letterSpacing,x=0,y=0,T=0,C=null,S=0,E=0,P=0,M=0,R=0,A=0,O=null,b=0,w=v.source.image,I=v.cutX,Y=v.cutY,z=h._fontSize/h.fontData.size,V=h._align,W=0,F=0,L=h.getTextBounds(!1);h.maxWidth>0&&(f=L.wrappedText,c=f.length);var D=h._bounds.lines;V===1?F=(D.longest-D.lengths[0])/2:V===2&&(F=D.longest-D.lengths[0]),d.translate(-h.displayOriginX,-h.displayOriginY);for(var B=u.roundPixels,G=0;G<c;G++){if(T=f.charCodeAt(G),T===10){W++,V===1?F=(D.longest-D.lengths[W])/2:V===2&&(F=D.longest-D.lengths[W]),x=0,y+=g,O=null;continue}if(C=p[T],!!C){if(S=I+C.x,E=Y+C.y,P=C.width,M=C.height,R=C.xOffset+x,A=C.yOffset+y,O!==null){var N=C.kerning[b];R+=N!==void 0?N:0}R*=z,A*=z,R+=F,x+=C.xAdvance+m,O=C,b=T,!(P===0||M===0||T===32)&&(B&&(R=Math.round(R),A=Math.round(A)),d.save(),d.translate(R,A),d.scale(z,z),d.drawImage(w,S,E,P,M,0,0,P,M),d.restore())}}d.restore()}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1050),o=i(1051),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=i(12),a=new n,h=function(u,l,f,c){var d=l.getRenderList();if(d.length!==0){var v=f.alpha*l.alpha;if(v!==0){f.addToRenderList(l);var p=u.pipelines.set(this.pipeline,l),g=f.scrollX*l.scrollFactorX,m=f.scrollY*l.scrollFactorY,x=a.copyFrom(f.matrix);c&&(x.multiplyWithOffset(c,-g,-m),g=0,m=0);var y=l.x-g,T=l.y-m,C=-1,S=!1,E=f.roundPixels;u.pipelines.preBatch(l);for(var P=0;P<d.length;P++){var M=d[P],R=M.frame,A=M.alpha*v;if(A!==0){var O=R.width,b=R.height,w=y+M.x+R.x,I=T+M.y+R.y;M.flipX&&(O*=-1,w+=R.width),M.flipY&&(b*=-1,I+=R.height);var Y=w+O,z=I+b,V=x.getX(w,I),W=x.getY(w,I),F=x.getX(Y,z),L=x.getY(Y,z),D=o.getTintAppendFloatAlpha(M.tint,A);if(R.sourceIndex!==C){var B=p.setGameObject(l,R);C=R.sourceIndex}E&&(V=Math.round(V),W=Math.round(W),F=Math.round(F),L=Math.round(L)),p.batchQuad(l,V,W,V,L,F,L,F,W,R.u0,R.v0,R.u1,R.v1,D,D,D,D,S,R.glTexture,B)&&(C=-1)}}u.pipelines.postBatch(l)}}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u=o.getRenderList();if(u.length!==0){var l=n.currentContext,f=a.alpha*o.alpha;if(f!==0){a.addToRenderList(o),l.globalCompositeOperation=n.blendModes[o.blendMode],l.imageSmoothingEnabled=!(!n.antialias||o.frame.source.scaleMode);var c=o.x-a.scrollX*o.scrollFactorX,d=o.y-a.scrollY*o.scrollFactorY;l.save(),h&&h.copyToContext(l);for(var v=a.roundPixels,p=0;p<u.length;p++){var g=u[p],m=g.flipX||g.flipY,x=g.frame,y=x.canvasData,T=x.x,C=x.y,S=1,E=1,P=g.alpha*f;P!==0&&(l.globalAlpha=P,m?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(E=-1,C-=y.height),l.save(),l.translate(g.x+c,g.y+d),l.scale(S,E),l.drawImage(x.source.image,y.x,y.y,y.width,y.height,T,C,y.width,y.height),l.restore()):(v&&(T=Math.round(T),C=Math.round(C)),l.drawImage(x.source.image,y.x,y.y,y.width,y.height,T+g.x+c,C+g.y+d,y.width,y.height)))}l.restore()}}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1053),o=i(1054),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a.addToRenderList(o);var u=o.list,l=u.length;if(l!==0){var f=o.localTransform;h?(f.loadIdentity(),f.multiply(h),f.translate(o.x,o.y),f.rotate(o.rotation),f.scale(o.scaleX,o.scaleY)):f.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),n.pipelines.preBatch(o);var c=o.blendMode!==-1;c||n.setBlendMode(0);for(var d=o.alpha,v=o.scrollFactorX,p=o.scrollFactorY,g=0;g<l;g++){var m=u[g];if(m.willRender(a)){var x,y,T,C;if(m.alphaTopLeft!==void 0)x=m.alphaTopLeft,y=m.alphaTopRight,T=m.alphaBottomLeft,C=m.alphaBottomRight;else{var S=m.alpha;x=S,y=S,T=S,C=S}var E=m.scrollFactorX,P=m.scrollFactorY;!c&&m.blendMode!==n.currentBlendMode&&n.setBlendMode(m.blendMode);var M=m.mask;M&&M.preRenderWebGL(n,m,a);var R=m.type;R!==n.currentType&&(n.newType=!0,n.currentType=R),n.nextTypeMatch=g<l-1?u[g+1].type===n.currentType:!1,m.setScrollFactor(E*v,P*p),m.setAlpha(x*d,y*d,T*d,C*d),m.renderWebGL(n,m,a,f),m.setAlpha(x,y,T,C),m.setScrollFactor(E,P),M&&M.postRenderWebGL(n,a),n.newType=!1}}n.pipelines.postBatch(o)}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a.addToRenderList(o);var u=o.list;if(u.length!==0){var l=o.localTransform;h?(l.loadIdentity(),l.multiply(h),l.translate(o.x,o.y),l.rotate(o.rotation),l.scale(o.scaleX,o.scaleY)):l.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var f=o.blendMode!==-1;f||n.setBlendMode(0);var c=o._alpha,d=o.scrollFactorX,v=o.scrollFactorY;o.mask&&o.mask.preRenderCanvas(n,null,a);for(var p=0;p<u.length;p++){var g=u[p];if(g.willRender(a)){var m=g.alpha,x=g.scrollFactorX,y=g.scrollFactorY;!f&&g.blendMode!==n.currentBlendMode&&n.setBlendMode(g.blendMode),g.setScrollFactor(x*d,y*v),g.setAlpha(m*c),g.renderCanvas(n,g,a,l),g.setAlpha(m),g.setScrollFactor(x,y)}}o.mask&&o.mask.postRenderCanvas(n)}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(443),o=i(443),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1058),o=i(1059),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(25),a=i(12),h=new o,u=function(l,f,c,d){var v=f.text,p=v.length;if(p!==0){c.addToRenderList(f);var g=l.pipelines.set(f.pipeline,f),m=n(f,c,d),x=m.sprite,y=m.calc,T=h,C=f.cropWidth>0||f.cropHeight>0;C&&(g.flush(),l.pushScissor(y.tx,y.ty,f.cropWidth*y.scaleX,f.cropHeight*y.scaleY));var S=f.frame,E=S.glTexture,P=f.tintFill,M=a.getTintAppendFloatAlpha(f.tintTopLeft,c.alpha*f._alphaTL),R=a.getTintAppendFloatAlpha(f.tintTopRight,c.alpha*f._alphaTR),A=a.getTintAppendFloatAlpha(f.tintBottomLeft,c.alpha*f._alphaBL),O=a.getTintAppendFloatAlpha(f.tintBottomRight,c.alpha*f._alphaBR),b=g.setGameObject(f),w=0,I=0,Y=0,z=0,V=f.letterSpacing,W,F=0,L=0,D,B=f.scrollX,G=f.scrollY,N=f.fontData,X=N.chars,U=N.lineHeight,H=f.fontSize/N.size,$=0,Z=f._align,J=0,Q=0,_=f.getTextBounds(!1);f.maxWidth>0&&(v=_.wrappedText,p=v.length);var j=f._bounds.lines;Z===1?Q=(j.longest-j.lengths[0])/2:Z===2&&(Q=j.longest-j.lengths[0]);var tt=c.roundPixels,lt=f.displayCallback,rt=f.callbackData;l.pipelines.preBatch(f);for(var et=0;et<p;et++){if(Y=v.charCodeAt(et),Y===10){J++,Z===1?Q=(j.longest-j.lengths[J])/2:Z===2&&(Q=j.longest-j.lengths[J]),w=0,I+=U,D=null;continue}if(W=X[Y],!!W){F=W.width,L=W.height;var q=W.xOffset+w-B,vt=W.yOffset+I-G;if(D!==null){var it=W.kerning[z];q+=it!==void 0?it:0}if(w+=W.xAdvance+V,D=W,z=Y,!(F===0||L===0||Y===32)){if(H=f.fontSize/f.fontData.size,$=0,lt){rt.color=0,rt.tint.topLeft=M,rt.tint.topRight=R,rt.tint.bottomLeft=A,rt.tint.bottomRight=O,rt.index=et,rt.charCode=Y,rt.x=q,rt.y=vt,rt.scale=H,rt.rotation=$,rt.data=W.data;var ot=lt(rt);q=ot.x,vt=ot.y,H=ot.scale,$=ot.rotation,ot.color?(M=ot.color,R=ot.color,A=ot.color,O=ot.color):(M=ot.tint.topLeft,R=ot.tint.topRight,A=ot.tint.bottomLeft,O=ot.tint.bottomRight),M=a.getTintAppendFloatAlpha(M,c.alpha*f._alphaTL),R=a.getTintAppendFloatAlpha(R,c.alpha*f._alphaTR),A=a.getTintAppendFloatAlpha(A,c.alpha*f._alphaBL),O=a.getTintAppendFloatAlpha(O,c.alpha*f._alphaBR)}q*=H,vt*=H,q-=f.displayOriginX,vt-=f.displayOriginY,q+=Q,T.applyITRS(q,vt,$,H,H),y.multiply(T,x);var De=W.u0,Ie=W.v0,Dt=W.u1,mt=W.v1,Zt=F,Wt=L,Xt=x.e,Be=x.f,ls=Wt*x.c+x.e,us=Wt*x.d+x.f,fs=Zt*x.a+Wt*x.c+x.e,ds=Zt*x.b+Wt*x.d+x.f,cs=Zt*x.a+x.e,vs=Zt*x.b+x.f;tt&&(Xt=Math.round(Xt),Be=Math.round(Be),ls=Math.round(ls),us=Math.round(us),fs=Math.round(fs),ds=Math.round(ds),cs=Math.round(cs),vs=Math.round(vs)),g.batchQuad(f,Xt,Be,ls,us,fs,ds,cs,vs,De,Ie,Dt,mt,M,R,A,O,P,E,b)}}}C&&(g.flush(),l.popScissor()),l.pipelines.postBatch(f)}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(30),o=function(a,h,u,l){var f=h._text,c=f.length,d=a.currentContext;if(!(c===0||!n(a,d,h,u,l))){u.addToRenderList(h);var v=h.fromAtlas?h.frame:h.texture.frames.__BASE,p=h.displayCallback,g=h.callbackData,m=h.fontData.chars,x=h.fontData.lineHeight,y=h._letterSpacing,T=0,C=0,S=0,E=null,P=0,M=0,R=0,A=0,O=0,b=0,w=null,I=0,Y=h.frame.source.image,z=v.cutX,V=v.cutY,W=0,F=0,L=h._fontSize/h.fontData.size,D=h._align,B=0,G=0;h.getTextBounds(!1);var N=h._bounds.lines;D===1?G=(N.longest-N.lengths[0])/2:D===2&&(G=N.longest-N.lengths[0]),d.translate(-h.displayOriginX,-h.displayOriginY);var X=u.roundPixels;h.cropWidth>0&&h.cropHeight>0&&(d.beginPath(),d.rect(0,0,h.cropWidth,h.cropHeight),d.clip());for(var U=0;U<c;U++){if(F=L,W=0,S=f.charCodeAt(U),S===10){B++,D===1?G=(N.longest-N.lengths[B])/2:D===2&&(G=N.longest-N.lengths[B]),T=0,C+=x,w=null;continue}if(E=m[S],!!E){if(P=z+E.x,M=V+E.y,R=E.width,A=E.height,O=E.xOffset+T-h.scrollX,b=E.yOffset+C-h.scrollY,w!==null){var H=E.kerning[I];O+=H!==void 0?H:0}if(p){g.index=U,g.charCode=S,g.x=O,g.y=b,g.scale=F,g.rotation=W,g.data=E.data;var $=p(g);O=$.x,b=$.y,F=$.scale,W=$.rotation}O*=F,b*=F,O+=G,T+=E.xAdvance+y,w=E,I=S,!(R===0||A===0||S===32)&&(X&&(O=Math.round(O),b=Math.round(b)),d.save(),d.translate(O,b),d.rotate(W),d.scale(F,F),d.drawImage(Y,P,M,R,A,0,0,R,A),d.restore())}}d.restore()}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1061),o=i(1062),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(a,h,u,l){a.pipelines.clear();var f=n(h,u,l).calc;h.render.call(h,a,u,f),a.pipelines.rebind()};e.exports=o},function(e,r){},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1064),o=i(448),o=i(448),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(217),o=i(19),a=i(25),h=i(12),u=function(v,p,g){this.x=v,this.y=p,this.width=g},l=function(v,p,g){this.points=[],this.pointsLength=1,this.points[0]=new u(v,p,g)},f=[],c=new a,d=function(v,p,g,m){if(p.commandBuffer.length!==0){g.addToRenderList(p);var x=v.pipelines.set(p.pipeline,p);v.pipelines.preBatch(p);for(var y=o(p,g,m).calc,T=c.loadIdentity(),C=p.commandBuffer,S=g.alpha*p.alpha,E=1,P=x.fillTint,M=x.strokeTint,R=0,A=0,O=0,b=.01,w=Math.PI*2,I,Y=[],z=0,V=!0,W=null,F=h.getTintAppendFloatAlpha,L=0;L<C.length;L++)switch(I=C[L],I){case n.BEGIN_PATH:{Y.length=0,W=null,V=!0;break}case n.CLOSE_PATH:{V=!1,W&&W.points.length&&W.points.push(W.points[0]);break}case n.FILL_PATH:{for(z=0;z<Y.length;z++)x.batchFillPath(Y[z].points,T,y);break}case n.STROKE_PATH:{for(z=0;z<Y.length;z++)x.batchStrokePath(Y[z].points,E,V,T,y);break}case n.LINE_STYLE:{E=C[++L];var D=C[++L],B=C[++L]*S,G=F(D,B);M.TL=G,M.TR=G,M.BL=G,M.BR=G;break}case n.FILL_STYLE:{var N=C[++L],X=C[++L]*S,U=F(N,X);P.TL=U,P.TR=U,P.BL=U,P.BR=U;break}case n.GRADIENT_FILL_STYLE:{var H=C[++L]*S,$=C[++L]*S,Z=C[++L]*S,J=C[++L]*S;P.TL=F(C[++L],H),P.TR=F(C[++L],$),P.BL=F(C[++L],Z),P.BR=F(C[++L],J);break}case n.GRADIENT_LINE_STYLE:{E=C[++L];var Q=C[++L]*S;M.TL=F(C[++L],Q),M.TR=F(C[++L],Q),M.BL=F(C[++L],Q),M.BR=F(C[++L],Q);break}case n.ARC:{var _=0,j=C[++L],tt=C[++L],lt=C[++L],rt=C[++L],et=C[++L],q=C[++L],vt=C[++L];for(et-=rt,q?et<-w?et=-w:et>0&&(et=-w+et%w):et>w?et=w:et<0&&(et=w+et%w),W===null&&(W=new l(j+Math.cos(rt)*lt,tt+Math.sin(rt)*lt,E),Y.push(W),_+=b);_<1+vt;)O=et*_+rt,R=j+Math.cos(O)*lt,A=tt+Math.sin(O)*lt,W.points.push(new u(R,A,E)),_+=b;O=et+rt,R=j+Math.cos(O)*lt,A=tt+Math.sin(O)*lt,W.points.push(new u(R,A,E));break}case n.FILL_RECT:{x.batchFillRect(C[++L],C[++L],C[++L],C[++L],T,y);break}case n.FILL_TRIANGLE:{x.batchFillTriangle(C[++L],C[++L],C[++L],C[++L],C[++L],C[++L],T,y);break}case n.STROKE_TRIANGLE:{x.batchStrokeTriangle(C[++L],C[++L],C[++L],C[++L],C[++L],C[++L],E,T,y);break}case n.LINE_TO:{W!==null?W.points.push(new u(C[++L],C[++L],E)):(W=new l(C[++L],C[++L],E),Y.push(W));break}case n.MOVE_TO:{W=new l(C[++L],C[++L],E),Y.push(W);break}case n.SAVE:{f.push(T.copyToArray());break}case n.RESTORE:{T.copyFromArray(f.pop());break}case n.TRANSLATE:{j=C[++L],tt=C[++L],T.translate(j,tt);break}case n.SCALE:{j=C[++L],tt=C[++L],T.scale(j,tt);break}case n.ROTATE:{T.rotate(C[++L]);break}}v.pipelines.postBatch(p)}};e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1066),o=i(1067),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a.addToRenderList(o),o.pipeline.batchSprite(o,a,h)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a.addToRenderList(o),n.batchSprite(o,o.frame,a,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1069),o=i(1070),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a.addToRenderList(o),this.pipeline.batchSprite(o,a,h)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a.addToRenderList(o),n.batchSprite(o,o.frame,a,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1072),o=i(1073),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=o.list,u=h.length;if(u!==0){o.depthSort(),n.pipelines.preBatch(o);var l=o.blendMode!==-1;l||n.setBlendMode(0);for(var f=o.alpha,c=0;c<u;c++){var d=h[c];if(d.willRender(a)){var v,p,g,m;if(d.alphaTopLeft!==void 0)v=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,m=d.alphaBottomRight;else{var x=d.alpha;v=x,p=x,g=x,m=x}!l&&d.blendMode!==n.currentBlendMode&&n.setBlendMode(d.blendMode);var y=d.mask;y&&y.preRenderWebGL(n,d,a);var T=d.type;T!==n.currentType&&(n.newType=!0,n.currentType=T),n.nextTypeMatch=c<u-1?h[c+1].type===n.currentType:!1,d.setAlpha(v*f,p*f,g*f,m*f),d.renderWebGL(n,d,a),d.setAlpha(v,p,g,m),y&&y.postRenderWebGL(n,a),n.newType=!1}}n.pipelines.postBatch(o)}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=o.list;if(h.length!==0){o.depthSort();var u=o.blendMode!==-1;u||n.setBlendMode(0);var l=o._alpha;o.mask&&o.mask.preRenderCanvas(n,null,a);for(var f=0;f<h.length;f++){var c=h[f];if(c.willRender(a)){var d=c.alpha;!u&&c.blendMode!==n.currentBlendMode&&n.setBlendMode(c.blendMode),c.setAlpha(d*l),c.renderCanvas(n,c,a),c.setAlpha(d)}}o.mask&&o.mask.postRenderCanvas(n)}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1076),o=i(1077),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=i(12),a=new n,h=new n,u=new n,l=new n,f=function(c,d,v,p){var g=d.emitters.list,m=g.length;if(m!==0){var x=c.pipelines.set(d.pipeline),y=a,T=h,C=u,S=l;p?(S.loadIdentity(),S.multiply(p),S.translate(d.x,d.y),S.rotate(d.rotation),S.scale(d.scaleX,d.scaleY)):S.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var E=v.roundPixels,P=d.defaultFrame.glTexture,M=o.getTintAppendFloatAlpha,R=x.setGameObject(d,d.defaultFrame);c.pipelines.preBatch(d);for(var A=0;A<m;A++){var O=g[A],b=O.alive,w=b.length;if(!(!O.visible||w===0)){v.addToRenderList(O);var I=O.scrollFactorX,Y=O.scrollFactorY;c.setBlendMode(O.blendMode),O.mask&&(O.mask.preRenderWebGL(c,O,v),c.pipelines.set(d.pipeline));for(var z=0,V=0;V<w;V++){var W=b[V],F=W.alpha*v.alpha;if(!(F<=0)){C.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),y.copyFrom(v.matrix),y.multiplyWithOffset(S,-v.scrollX*I,-v.scrollY*Y),C.e=W.x,C.f=W.y,y.multiply(C,T);var L=W.frame,D=-L.halfWidth,B=-L.halfHeight,G=D+L.width,N=B+L.height,X=T.getXRound(D,B,E),U=T.getYRound(D,B,E),H=T.getXRound(D,N,E),$=T.getYRound(D,N,E),Z=T.getXRound(G,N,E),J=T.getYRound(G,N,E),Q=T.getXRound(G,B,E),_=T.getYRound(G,B,E),j=M(W.tint,F);x.batchQuad(O,X,U,H,$,Z,J,Q,_,L.u0,L.v0,L.u1,L.v1,j,j,j,j,z,P,R)}}O.mask&&O.mask.postRenderWebGL(c,v)}}c.pipelines.postBatch(d)}};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=new n,a=new n,h=new n,u=new n,l=function(f,c,d,v){var p=c.emitters.list,g=p.length;if(g!==0){var m=o.copyFrom(d.matrix),x=a,y=h,T=u;v?(T.loadIdentity(),T.multiply(v),T.translate(c.x,c.y),T.rotate(c.rotation),T.scale(c.scaleX,c.scaleY)):T.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);for(var C=f.currentContext,S=d.roundPixels,E=0;E<g;E++){var P=p[E],M=P.alive,R=M.length;if(!(!P.visible||R===0)){d.addToRenderList(P);var A=P.scrollFactorX,O=P.scrollFactorY;C.save(),C.globalCompositeOperation=f.blendModes[P.blendMode];for(var b=0;b<R;b++){var w=M[b],I=w.alpha*d.alpha;if(!(I<=0)){y.applyITRS(w.x,w.y,w.rotation,w.scaleX,w.scaleY),m.copyFrom(d.matrix),m.multiplyWithOffset(T,-d.scrollX*A,-d.scrollY*O),y.e=w.x,y.f=w.y,m.multiply(y,x);var Y=w.frame,z=Y.canvasData,V=-Y.halfWidth,W=-Y.halfHeight;C.globalAlpha=I,C.save(),x.setToContext(C),S&&(V=Math.round(V),W=Math.round(W)),C.imageSmoothingEnabled=!(!f.antialias||Y.source.scaleMode),C.drawImage(Y.source.image,z.x,z.y,z.width,z.height,V,W,z.width,z.height),C.restore()}}C.restore()}}}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1080),o=i(1081),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(a,h,u,l){u.addToRenderList(h);var f=u.alpha,c=h.renderTarget,d=c.width,v=c.height,p=n.getTintAppendFloatAlpha,g=a.pipelines.set(h.pipeline),m=g.setTexture2D(c.texture);a.pipelines.preBatch(h),g.batchTexture(h,c.texture,d,v,h.x,h.y,d,v,h.scaleX,h.scaleY,h.rotation,h.flipX,!h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,d,v,p(h.tintTopLeft,f*h._alphaTL),p(h.tintTopRight,f*h._alphaTR),p(h.tintBottomLeft,f*h._alphaBL),p(h.tintBottomRight,f*h._alphaBR),h.tintFill,0,0,u,l,!0,m),a.resetTextures(),a.pipelines.postBatch(h)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){a.addToRenderList(o),n.batchSprite(o,o.frame,a,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1083),o=i(17),a={Parse:i(1084)};a=o(!1,a,n),e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=function(a,h){var u=h.width,l=h.height,f=Math.floor(u/2),c=Math.floor(l/2),d=n(h,"chars","");if(d!==""){var v=n(h,"image",""),p=a.sys.textures.getFrame(v),g=p.cutX,m=p.cutY,x=p.source.width,y=p.source.height,T=n(h,"offset.x",0),C=n(h,"offset.y",0),S=n(h,"spacing.x",0),E=n(h,"spacing.y",0),P=n(h,"lineSpacing",0),M=n(h,"charsPerRow",null);M===null&&(M=x/u,M>d.length&&(M=d.length));for(var R=T,A=C,O={retroFont:!0,font:v,size:u,lineHeight:l+P,chars:{}},b=0,w=0;w<d.length;w++){var I=d.charCodeAt(w),Y=(g+R)/x,z=(m+A)/y,V=(g+R+u)/x,W=(m+A+l)/y;O.chars[I]={x:R,y:A,width:u,height:l,centerX:f,centerY:c,xOffset:0,yOffset:0,xAdvance:u,data:{},kerning:{},u0:Y,v0:z,u1:V,v1:W},b++,b===M?(b=0,R=T,A+=l+E):R+=u+S}var F={data:O,frame:null,texture:v};return F}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1086),o=i(1087),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),a=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline,u),d=n(u,l,f).calc,v=u.vertices,p=u.uv,g=u.colors,m=u.alphas,x=u.alpha,y=o.getTintAppendFloatAlpha,T=l.roundPixels,C=v.length,S=Math.floor(C*.5);c.flush(),h.pipelines.preBatch(u);var E=c.setGameObject(u),P=c.vertexViewF32,M=c.vertexViewU32,R=c.vertexCount*c.currentShader.vertexComponentCount-1,A=0,O=u.tintFill;u.dirty&&u.updateVertices();for(var b=u.debugCallback,w=[],I=0;I<C;I+=2){var Y=v[I+0],z=v[I+1],V=Y*d.a+z*d.c+d.e,W=Y*d.b+z*d.d+d.f;T&&(V=Math.round(V),W=Math.round(W)),P[++R]=V,P[++R]=W,P[++R]=p[I+0],P[++R]=p[I+1],P[++R]=E,P[++R]=O,M[++R]=y(g[A],l.alpha*(m[A]*x)),A++,b&&(w[I+0]=V,w[I+1]=W)}b&&b.call(u,u,C,w),c.vertexCount+=S,h.pipelines.postBatch(u)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1089),o=i(1090),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(a,h,u,l){if(!(h.width===0||h.height===0)){u.addToRenderList(h);var f=h.frame,c=f.width,d=f.height,v=n.getTintAppendFloatAlpha,p=a.pipelines.set(h.pipeline,h),g=p.setTexture2D(f.glTexture,h);a.pipelines.preBatch(h),p.batchTexture(h,f.glTexture,c,d,h.x,h.y,c/h.style.resolution,d/h.style.resolution,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.displayOriginX,h.displayOriginY,0,0,c,d,v(h.tintTopLeft,u.alpha*h._alphaTL),v(h.tintTopRight,u.alpha*h._alphaTR),v(h.tintBottomLeft,u.alpha*h._alphaBL),v(h.tintBottomRight,u.alpha*h._alphaBR),h.tintFill,0,0,u,l,!1,g),a.pipelines.postBatch(h)}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o.width===0||o.height===0||(a.addToRenderList(o),n.batchSprite(o,o.frame,a,h))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1092),o=i(1093),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(a,h,u,l){h.updateCanvas();var f=h.width,c=h.height;if(!(f===0||c===0)){u.addToRenderList(h),a.pipelines.preBatch(h);var d=n.getTintAppendFloatAlpha,v=a.pipelines.set(h.pipeline,h),p=v.setTexture2D(h.fillPattern,h);v.batchTexture(h,h.fillPattern,h.displayFrame.width*h.tileScaleX,h.displayFrame.height*h.tileScaleY,h.x,h.y,f,c,h.scaleX,h.scaleY,h.rotation,h.flipX,h.flipY,h.scrollFactorX,h.scrollFactorY,h.originX*f,h.originY*c,0,0,f,c,d(h.tintTopLeft,u.alpha*h._alphaTL),d(h.tintTopRight,u.alpha*h._alphaTR),d(h.tintBottomLeft,u.alpha*h._alphaBL),d(h.tintBottomRight,u.alpha*h._alphaBR),h.tintFill,h.tilePositionX%h.displayFrame.width/h.displayFrame.width,h.tilePositionY%h.displayFrame.height/h.displayFrame.height,u,l,!1,p),a.pipelines.postBatch(h)}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o.updateCanvas(),a.addToRenderList(o),n.batchSprite(o,o.frame,a,h)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1095),o=i(1096),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o.videoTexture&&(a.addToRenderList(o),o.pipeline.batchSprite(o,a,h))};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o.videoTexture&&(a.addToRenderList(o),n.batchSprite(o,o.frame,a,h))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1098),o=i(1099),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(114),a=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=n(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&o(d,p,l,x,g,m),l.isStroked&&a(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(36),o=i(48),a=i(60),h=i(30),u=function(l,f,c,d){c.addToRenderList(f);var v=l.currentContext;if(h(l,v,f,c,d)){var p=f.radius;v.beginPath(),v.arc(p-f.originX*(p*2),p-f.originY*(p*2),p,n(f._startAngle),n(f._endAngle),f.anticlockwise),f.closePath&&v.closePath(),f.isFilled&&(o(v,f),v.fill()),f.isStroked&&(a(v,f),v.stroke()),v.restore()}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1101),o=i(1102),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),a=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=o(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX+l._curveBounds.x,m=l._displayOriginY+l._curveBounds.y,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&n(d,p,l,x,g,m),l.isStroked&&a(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),a=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(a(u,d,l,f,c)){var v=l._displayOriginX+l._curveBounds.x,p=l._displayOriginY+l._curveBounds.y,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;d.lineTo(C,S)}l.closePath&&d.closePath(),l.isFilled&&(n(d,l),d.fill()),l.isStroked&&(o(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1104),o=i(1105),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),a=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=o(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&n(d,p,l,x,g,m),l.isStroked&&a(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),a=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(a(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),l.isFilled&&(n(d,l),d.fill()),l.isStroked&&(o(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1107),o=i(1108),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),a=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=n(u,l,f),v=c.calcMatrix.copyFrom(d.calc);v.translate(-u._displayOriginX,-u._displayOriginY);var p=l.alpha*u.alpha,g=u.width,m=u.height,x=u.cellWidth,y=u.cellHeight,T=Math.ceil(g/x),C=Math.ceil(m/y),S=x,E=y,P=x-(T*x-g),M=y-(C*y-m),R,A,O=u.showCells,b=u.showAltCells,w=u.showOutline,I=0,Y=0,z=0,V=0,W=0;if(w&&(S--,E--,P===x&&P--,M===y&&M--),h.pipelines.preBatch(u),O&&u.fillAlpha>0)for(R=c.fillTint,A=o.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*p),R.TL=A,R.TR=A,R.BL=A,R.BR=A,Y=0;Y<C;Y++)for(b&&(z=Y%2),I=0;I<T;I++){if(b&&z){z=0;continue}z++,V=I<T-1?S:P,W=Y<C-1?E:M,c.batchFillRect(I*x,Y*y,V,W)}if(b&&u.altFillAlpha>0)for(R=c.fillTint,A=o.getTintAppendFloatAlpha(u.altFillColor,u.altFillAlpha*p),R.TL=A,R.TR=A,R.BL=A,R.BR=A,Y=0;Y<C;Y++)for(b&&(z=Y%2),I=0;I<T;I++){if(b&&!z){z=1;continue}z=0,V=I<T-1?S:P,W=Y<C-1?E:M,c.batchFillRect(I*x,Y*y,V,W)}if(w&&u.outlineFillAlpha>0){var F=c.strokeTint,L=o.getTintAppendFloatAlpha(u.outlineFillColor,u.outlineFillAlpha*p);for(F.TL=L,F.TR=L,F.BL=L,F.BR=L,I=1;I<T;I++){var D=I*x;c.batchLine(D,0,D,m,1,1,1,0,!1)}for(Y=1;Y<C;Y++){var B=Y*y;c.batchLine(0,B,g,B,1,1,1,0,!1)}}h.pipelines.postBatch(u)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),a=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(a(u,d,l,f,c)){var v=-l._displayOriginX,p=-l._displayOriginY,g=f.alpha*l.alpha,m=l.width,x=l.height,y=l.cellWidth,T=l.cellHeight,C=Math.ceil(m/y),S=Math.ceil(x/T),E=y,P=T,M=y-(C*y-m),R=T-(S*T-x),A=l.showCells,O=l.showAltCells,b=l.showOutline,w=0,I=0,Y=0,z=0,V=0;if(b&&(E--,P--,M===y&&M--,R===T&&R--),A&&l.fillAlpha>0)for(n(d,l),I=0;I<S;I++)for(O&&(Y=I%2),w=0;w<C;w++){if(O&&Y){Y=0;continue}Y++,z=w<C-1?E:M,V=I<S-1?P:R,d.fillRect(v+w*y,p+I*T,z,V)}if(O&&l.altFillAlpha>0)for(n(d,l,l.altFillColor,l.altFillAlpha*g),I=0;I<S;I++)for(O&&(Y=I%2),w=0;w<C;w++){if(O&&!Y){Y=1;continue}Y=0,z=w<C-1?E:M,V=I<S-1?P:R,d.fillRect(v+w*y,p+I*T,z,V)}if(b&&l.outlineFillAlpha>0){for(o(d,l,l.outlineFillColor,l.outlineFillAlpha*g),w=1;w<C;w++){var W=w*y;d.beginPath(),d.moveTo(W+v,p),d.lineTo(W+v,x+p),d.stroke()}for(I=1;I<S;I++){var F=I*T;d.beginPath(),d.moveTo(v,F+p),d.lineTo(v+m,F+p),d.stroke()}}d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1110),o=i(1111),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),a=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=n(u,l,f),v=c.calcMatrix.copyFrom(d.calc),p=u.width,g=u.height,m=p/2,x=p/u.projection,y=l.alpha*u.alpha;if(u.isFilled){var T,C,S,E,P,M,R,A,O;h.pipelines.preBatch(u),u.showTop&&(T=o.getTintAppendFloatAlpha(u.fillTop,y),C=v.getX(-m,-g),S=v.getY(-m,-g),E=v.getX(0,-x-g),P=v.getY(0,-x-g),M=v.getX(m,-g),R=v.getY(m,-g),A=v.getX(0,x-g),O=v.getY(0,x-g),c.batchQuad(u,C,S,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),u.showLeft&&(T=o.getTintAppendFloatAlpha(u.fillLeft,y),C=v.getX(-m,0),S=v.getY(-m,0),E=v.getX(0,x),P=v.getY(0,x),M=v.getX(0,x-g),R=v.getY(0,x-g),A=v.getX(-m,-g),O=v.getY(-m,-g),c.batchQuad(u,C,S,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),u.showRight&&(T=o.getTintAppendFloatAlpha(u.fillRight,y),C=v.getX(m,0),S=v.getY(m,0),E=v.getX(0,x),P=v.getY(0,x),M=v.getX(0,x-g),R=v.getY(0,x-g),A=v.getX(m,-g),O=v.getY(m,-g),c.batchQuad(u,C,S,E,P,M,R,A,O,0,0,1,1,T,T,T,T,2)),h.pipelines.postBatch(u)}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(30),a=function(h,u,l,f){l.addToRenderList(u);var c=h.currentContext;if(o(h,c,u,l,f)&&u.isFilled){var d=u.width,v=u.height,p=d/2,g=d/u.projection;u.showTop&&(n(c,u,u.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(p,-1),c.lineTo(0,g-1),c.lineTo(-p,-1),c.lineTo(-p,-v),c.fill()),u.showLeft&&(n(c,u,u.fillLeft),c.beginPath(),c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(-p,-v),c.lineTo(-p,0),c.fill()),u.showRight&&(n(c,u,u.fillRight),c.beginPath(),c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v),c.lineTo(p,-v),c.lineTo(p,0),c.fill()),c.restore()}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1113),o=i(1114),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),a=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=n(u,l,f),v=c.calcMatrix.copyFrom(d.calc),p=u.width,g=u.height,m=p/2,x=p/u.projection,y=u.isReversed,T=l.alpha*u.alpha;if(u.isFilled){h.pipelines.preBatch(u);var C,S,E,P,M,R,A;if(u.showTop&&y){C=o.getTintAppendFloatAlpha(u.fillTop,T),S=v.getX(-m,-g),E=v.getY(-m,-g),P=v.getX(0,-x-g),M=v.getY(0,-x-g),R=v.getX(m,-g),A=v.getY(m,-g);var O=v.getX(0,x-g),b=v.getY(0,x-g);c.batchQuad(u,S,E,P,M,R,A,O,b,0,0,1,1,C,C,C,C,2)}u.showLeft&&(C=o.getTintAppendFloatAlpha(u.fillLeft,T),y?(S=v.getX(-m,-g),E=v.getY(-m,-g),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)):(S=v.getX(-m,0),E=v.getY(-m,0),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)),c.batchTri(u,S,E,P,M,R,A,0,0,1,1,C,C,C,2)),u.showRight&&(C=o.getTintAppendFloatAlpha(u.fillRight,T),y?(S=v.getX(m,-g),E=v.getY(m,-g),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)):(S=v.getX(m,0),E=v.getY(m,0),P=v.getX(0,x),M=v.getY(0,x),R=v.getX(0,x-g),A=v.getY(0,x-g)),c.batchTri(u,S,E,P,M,R,A,0,0,1,1,C,C,C,2)),h.pipelines.postBatch(u)}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(30),a=function(h,u,l,f){l.addToRenderList(u);var c=h.currentContext;if(o(h,c,u,l,f)&&u.isFilled){var d=u.width,v=u.height,p=d/2,g=d/u.projection,m=u.isReversed;u.showTop&&m&&(n(c,u,u.fillTop),c.beginPath(),c.moveTo(-p,-v),c.lineTo(0,-g-v),c.lineTo(p,-v),c.lineTo(0,g-v),c.fill()),u.showLeft&&(n(c,u,u.fillLeft),c.beginPath(),m?(c.moveTo(-p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(-p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),u.showRight&&(n(c,u,u.fillRight),c.beginPath(),m?(c.moveTo(p,-v),c.lineTo(0,g),c.lineTo(0,g-v)):(c.moveTo(p,0),c.lineTo(0,g),c.lineTo(0,g-v)),c.fill()),c.restore()}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1116),o=i(1117),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(12),a=function(h,u,l,f){l.addToRenderList(u);var c=h.pipelines.set(u.pipeline),d=n(u,l,f);c.calcMatrix.copyFrom(d.calc);var v=u._displayOriginX,p=u._displayOriginY,g=l.alpha*u.alpha;if(h.pipelines.preBatch(u),u.isStroked){var m=c.strokeTint,x=o.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*g);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var y=u._startWidth,T=u._endWidth;c.batchLine(u.geom.x1-v,u.geom.y1-p,u.geom.x2-v,u.geom.y2-p,y,T,1,0,!1,d.sprite,d.camera)}h.pipelines.postBatch(u)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(60),o=i(30),a=function(h,u,l,f){l.addToRenderList(u);var c=h.currentContext;if(o(h,c,u,l,f)){var d=u._displayOriginX,v=u._displayOriginY;u.isStroked&&(n(c,u),c.beginPath(),c.moveTo(u.geom.x1-d,u.geom.y1-v),c.lineTo(u.geom.x2-d,u.geom.y2-v),c.stroke()),c.restore()}};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1119),o=i(1120),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),a=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=o(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&n(d,p,l,x,g,m),l.isStroked&&a(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),a=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(a(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),l.isFilled&&(n(d,l),d.fill()),l.isStroked&&(o(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1122),o=i(1123),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(81),a=i(12),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=n(l,f,c);d.calcMatrix.copyFrom(v.calc);var p=l._displayOriginX,g=l._displayOriginY,m=f.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var x=d.fillTint,y=a.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y,d.batchFillRect(-p,-g,l.width,l.height)}l.isStroked&&o(d,l,m,p,g),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),a=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(a(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY;l.isFilled&&(n(d,l),d.fillRect(-v,-p,l.width,l.height)),l.isStroked&&(o(d,l),d.beginPath(),d.rect(-v,-p,l.width,l.height),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1125),o=i(1126),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(114),o=i(19),a=i(81),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=o(l,f,c),p=d.calcMatrix.copyFrom(v.calc),g=l._displayOriginX,m=l._displayOriginY,x=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&n(d,p,l,x,g,m),l.isStroked&&a(d,l,x,g,m),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),a=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(a(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.pathData,m=g.length-1,x=g[0]-v,y=g[1]-p;d.beginPath(),d.moveTo(x,y),l.closePath||(m-=2);for(var T=2;T<m;T+=2){var C=g[T]-v,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),l.isFilled&&(n(d,l),d.fill()),l.isStroked&&(o(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1128),o=i(1129),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=i(81),a=i(12),h=function(u,l,f,c){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),v=n(l,f,c);d.calcMatrix.copyFrom(v.calc);var p=l._displayOriginX,g=l._displayOriginY,m=f.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var x=d.fillTint,y=a.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*m);x.TL=y,x.TR=y,x.BL=y,x.BR=y;var T=l.geom.x1-p,C=l.geom.y1-g,S=l.geom.x2-p,E=l.geom.y2-g,P=l.geom.x3-p,M=l.geom.y3-g;d.batchFillTriangle(T,C,S,E,P,M,v.sprite,v.camera)}l.isStroked&&o(d,l,m,p,g),u.pipelines.postBatch(l)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(48),o=i(60),a=i(30),h=function(u,l,f,c){f.addToRenderList(l);var d=u.currentContext;if(a(u,d,l,f,c)){var v=l._displayOriginX,p=l._displayOriginY,g=l.geom.x1-v,m=l.geom.y1-p,x=l.geom.x2-v,y=l.geom.y2-p,T=l.geom.x3-v,C=l.geom.y3-p;d.beginPath(),d.moveTo(g,m),d.lineTo(x,y),d.lineTo(T,C),d.closePath(),l.isFilled&&(n(d,l),d.fill()),l.isStroked&&(o(d,l),d.stroke()),d.restore()}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(213),o=i(5);o.register("blitter",function(a,h,u,l){return this.displayList.add(new n(this.scene,a,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(214),o=i(5);o.register("container",function(a,h,u){return this.displayList.add(new n(this.scene,a,h,u))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(442),o=i(5);o.register("dom",function(a,h,u,l,f){var c=new n(this.scene,a,h,u,l,f);return this.displayList.add(c),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(215),o=i(5);o.register("dynamicBitmapText",function(a,h,u,l,f){return this.displayList.add(new n(this.scene,a,h,u,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(444),o=i(5);o.register("extern",function(){var a=new n(this.scene);return this.displayList.add(a),a})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(216),o=i(5);o.register("graphics",function(a){return this.displayList.add(new n(this.scene,a))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(113),o=i(5);o.register("group",function(a,h){return this.updateList.add(new n(this.scene,a,h))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(125),o=i(5);o.register("image",function(a,h,u,l){return this.displayList.add(new n(this.scene,a,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(219),o=i(5);o.register("layer",function(a){return this.displayList.add(new n(this.scene,a))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(220);n.register("particles",function(a,h,u){return this.displayList.add(new o(this.scene,a,h,u))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(457);n.register("follower",function(a,h,u,l,f){var c=new o(this.scene,a,h,u,l,f);return this.displayList.add(c),this.updateList.add(c),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(221);n.register("renderTexture",function(a,h,u,l,f,c){return this.displayList.add(new o(this.scene,a,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(223),o=i(5);o.register("rope",function(a,h,u,l,f,c,d,v){return this.displayList.add(new n(this.scene,a,h,u,l,f,c,d,v))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(73);n.register("sprite",function(a,h,u,l){var f=new o(this.scene,a,h,u,l);return this.displayList.add(f),f})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),o=i(5);o.register("bitmapText",function(a,h,u,l,f,c){return this.displayList.add(new n(this.scene,a,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(224),o=i(5);o.register("text",function(a,h,u,l){return this.displayList.add(new n(this.scene,a,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(225),o=i(5);o.register("tileSprite",function(a,h,u,l,f,c){return this.displayList.add(new n(this.scene,a,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(129),o=i(5);o.register("zone",function(a,h,u,l){return this.displayList.add(new n(this.scene,a,h,u,l))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(226),o=i(5);o.register("video",function(a,h,u){return this.displayList.add(new n(this.scene,a,h,u))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(461),o=i(5);o.register("arc",function(a,h,u,l,f,c,d,v){return this.displayList.add(new n(this.scene,a,h,u,l,f,c,d,v))}),o.register("circle",function(a,h,u,l,f){return this.displayList.add(new n(this.scene,a,h,u,0,360,!1,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(462);n.register("curve",function(a,h,u,l,f){return this.displayList.add(new o(this.scene,a,h,u,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(463),o=i(5);o.register("ellipse",function(a,h,u,l,f,c){return this.displayList.add(new n(this.scene,a,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(464);n.register("grid",function(a,h,u,l,f,c,d,v,p,g){return this.displayList.add(new o(this.scene,a,h,u,l,f,c,d,v,p,g))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(465);n.register("isobox",function(a,h,u,l,f,c,d){return this.displayList.add(new o(this.scene,a,h,u,l,f,c,d))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(466);n.register("isotriangle",function(a,h,u,l,f,c,d,v){return this.displayList.add(new o(this.scene,a,h,u,l,f,c,d,v))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(467);n.register("line",function(a,h,u,l,f,c,d,v){return this.displayList.add(new o(this.scene,a,h,u,l,f,c,d,v))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(468);n.register("polygon",function(a,h,u,l,f){return this.displayList.add(new o(this.scene,a,h,u,l,f))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(473);n.register("rectangle",function(a,h,u,l,f,c){return this.displayList.add(new o(this.scene,a,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(474),o=i(5);o.register("star",function(a,h,u,l,f,c,d){return this.displayList.add(new n(this.scene,a,h,u,l,f,c,d))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(475);n.register("triangle",function(a,h,u,l,f,c,d,v,p,g){return this.displayList.add(new o(this.scene,a,h,u,l,f,c,d,v,p,g))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(213),o=i(28),a=i(16),h=i(13);a.register("blitter",function(u,l){u===void 0&&(u={});var f=h(u,"key",null),c=h(u,"frame",null),d=new n(this.scene,0,0,f,c);return l!==void 0&&(u.add=l),o(this.scene,d,u),d})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(214),a=i(16),h=i(13);a.register("container",function(u,l){u===void 0&&(u={});var f=h(u,"x",0),c=h(u,"y",0),d=h(u,"children",null),v=new o(this.scene,f,c,d);return l!==void 0&&(u.add=l),n(this.scene,v,u),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(215),o=i(28),a=i(16),h=i(13);a.register("dynamicBitmapText",function(u,l){u===void 0&&(u={});var f=h(u,"font",""),c=h(u,"text",""),d=h(u,"size",!1),v=new n(this.scene,0,0,f,c,d);return l!==void 0&&(u.add=l),o(this.scene,v,u),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(216);n.register("graphics",function(a,h){a===void 0&&(a={}),h!==void 0&&(a.add=h);var u=new o(this.scene,a);return a.add&&this.scene.sys.displayList.add(u),u})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(113);n.register("group",function(a){return new o(this.scene,null,a)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(125);o.register("image",function(u,l){u===void 0&&(u={});var f=a(u,"key",null),c=a(u,"frame",null),d=new h(this.scene,0,0,f,c);return l!==void 0&&(u.add=l),n(this.scene,d,u),d})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(219),a=i(16),h=i(13);a.register("layer",function(u,l){u===void 0&&(u={});var f=h(u,"children",null),c=new o(this.scene,f);return l!==void 0&&(u.add=l),n(this.scene,c,u),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(13),a=i(2),h=i(220);n.register("particles",function(u,l){u===void 0&&(u={});var f=o(u,"key",null),c=o(u,"frame",null),d=a(u,"emitters",null),v=new h(this.scene,f,c,d);l!==void 0&&(u.add=l);var p=a(u,"add",!1);return p?this.displayList.add(v):this.updateList.add(v),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(221);o.register("renderTexture",function(u,l){u===void 0&&(u={});var f=a(u,"x",0),c=a(u,"y",0),d=a(u,"width",32),v=a(u,"height",32),p=a(u,"key",void 0),g=a(u,"frame",void 0),m=new h(this.scene,f,c,d,v,p,g);return l!==void 0&&(u.add=l),n(this.scene,m,u),m})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(6),u=i(223);o.register("rope",function(l,f){l===void 0&&(l={});var c=a(l,"key",null),d=a(l,"frame",null),v=a(l,"horizontal",!0),p=h(l,"points",void 0),g=h(l,"colors",void 0),m=h(l,"alphas",void 0),x=new u(this.scene,0,0,c,d,p,v,g,m);return f!==void 0&&(l.add=f),n(this.scene,x,l),l.add||this.updateList.add(x),x})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(439),a=i(16),h=i(13),u=i(73);a.register("sprite",function(l,f){l===void 0&&(l={});var c=h(l,"key",null),d=h(l,"frame",null),v=new u(this.scene,0,0,c,d);return f!==void 0&&(l.add=f),n(this.scene,v,l),o(v,l),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(148),o=i(28),a=i(16),h=i(13),u=i(6);a.register("bitmapText",function(l,f){l===void 0&&(l={});var c=u(l,"font",""),d=h(l,"text",""),v=h(l,"size",!1),p=u(l,"align",0),g=new n(this.scene,0,0,c,d,v,p);return f!==void 0&&(l.add=f),o(this.scene,g,l),g})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(224);o.register("text",function(u,l){u===void 0&&(u={});var f=a(u,"text",""),c=a(u,"style",null),d=a(u,"padding",null);d!==null&&(c.padding=d);var v=new h(this.scene,0,0,f,c);return l!==void 0&&(u.add=l),n(this.scene,v,u),v.autoRound=a(u,"autoRound",!0),v.resolution=a(u,"resolution",1),v})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(225);o.register("tileSprite",function(u,l){u===void 0&&(u={});var f=a(u,"x",0),c=a(u,"y",0),d=a(u,"width",512),v=a(u,"height",512),p=a(u,"key",""),g=a(u,"frame",""),m=new h(this.scene,f,c,d,v,p,g);return l!==void 0&&(u.add=l),n(this.scene,m,u),m})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(13),a=i(129);n.register("zone",function(h){var u=o(h,"x",0),l=o(h,"y",0),f=o(h,"width",1),c=o(h,"height",f);return new a(this.scene,u,l,f,c)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(226);o.register("video",function(u,l){u===void 0&&(u={});var f=a(u,"key",null),c=new h(this.scene,0,0,f);return l!==void 0&&(u.add=l),n(this.scene,c,u),u.add||this.updateList.add(c),c})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1177),o=i(1178),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(a,h,u,l){if(h.shader){if(u.addToRenderList(h),a.pipelines.clear(),h.renderToTexture)h.load(),h.flush();else{var f=n(h,u,l).calc;(a.width!==h._rendererWidth||a.height!==h._rendererHeight)&&h.projOrtho(0,a.width,a.height,0),h.load(f.matrix),h.flush()}a.pipelines.rebind()}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1180),o=i(1181),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(a,h,u,l){var f=h.faces,c=f.length;if(c!==0){u.addToRenderList(h);var d=a.pipelines.set(h.pipeline,h),v=n(h,u,l).calc,p=d.setGameObject(h),g=d.vertexViewF32,m=d.vertexViewU32,x=d.vertexCount*d.currentShader.vertexComponentCount-1,y=h.tintFill,T=[],C=h.debugCallback,S=v.a,E=v.b,P=v.c,M=v.d,R=v.e,A=v.f,O=h.viewPosition.z,b=h.hideCCW,w=u.roundPixels,I=u.alpha*h.alpha,Y=0;a.pipelines.preBatch(h);for(var z=0;z<c;z++){var V=f[z];V.isInView(u,b,O,I,S,E,P,M,R,A,w)&&(d.shouldFlush(3)&&(d.flush(),x=0),x=V.load(g,m,x,p,y),Y++,d.vertexCount+=3,C&&T.push(V))}h.totalFrame+=Y,C&&C.call(h,h,T),a.pipelines.postBatch(h)}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1183),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(19),o=function(a,h,u,l){u.addToRenderList(h);var f=a.pipelines.set(h.pipeline),c=n(h,u,l).calc,d=h.width,v=h.height,p=-h._radius,g=-h._radius,m=p+d,x=g+v,y=c.getX(0,0),T=c.getY(0,0),C=c.getX(p,g),S=c.getY(p,g),E=c.getX(p,x),P=c.getY(p,x),M=c.getX(m,x),R=c.getY(m,x),A=c.getX(m,g),O=c.getY(m,g);a.pipelines.preBatch(h),f.batchPointLight(h,u,C,S,E,P,M,R,A,O,y,T),a.pipelines.postBatch(h)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(229),o=i(5);o.register("shader",function(a,h,u,l,f,c,d){return this.displayList.add(new n(this.scene,a,h,u,l,f,c,d))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(230),o=i(5);o.register("mesh",function(a,h,u,l,f,c,d,v,p,g,m){return this.displayList.add(new n(this.scene,a,h,u,l,f,c,d,v,p,g,m))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(150);n.register("pointlight",function(a,h,u,l,f,c){return this.displayList.add(new o(this.scene,a,h,u,l,f,c))})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(229);o.register("shader",function(u,l){u===void 0&&(u={});var f=a(u,"key",null),c=a(u,"x",0),d=a(u,"y",0),v=a(u,"width",128),p=a(u,"height",128),g=new h(this.scene,f,c,d,v,p);return l!==void 0&&(u.add=l),n(this.scene,g,u),g})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(6),u=i(230);o.register("mesh",function(l,f){l===void 0&&(l={});var c=a(l,"key",null),d=a(l,"frame",null),v=h(l,"vertices",[]),p=h(l,"uvs",[]),g=h(l,"indicies",[]),m=h(l,"containsZ",!1),x=h(l,"normals",[]),y=h(l,"colors",16777215),T=h(l,"alphas",1),C=new u(this.scene,0,0,c,d,v,p,g,m,x,y,T);return f!==void 0&&(l.add=f),n(this.scene,C,l),C})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(28),o=i(16),a=i(13),h=i(150);o.register("pointlight",function(u,l){u===void 0&&(u={});var f=a(u,"color",16777215),c=a(u,"radius",128),d=a(u,"intensity",1),v=a(u,"attenuation",.1),p=new h(this.scene,0,0,f,c,d,v);return l!==void 0&&(u.add=l),n(this.scene,p,u),p})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(482),a=i(24),h=i(20),u=new n({Extends:o,initialize:function(f){this.scene=f,this.systems=f.sys,f.sys.settings.isBooted||f.sys.events.once(h.BOOT,this.boot,this),o.call(this)},boot:function(){var l=this.systems.events;l.on(h.SHUTDOWN,this.shutdown,this),l.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",u,"lights"),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65);n.Area=i(1192),n.Circumference=i(302),n.CircumferencePoint=i(169),n.Clone=i(1193),n.Contains=i(66),n.ContainsPoint=i(1194),n.ContainsRect=i(1195),n.CopyFrom=i(1196),n.Equals=i(1197),n.GetBounds=i(1198),n.GetPoint=i(300),n.GetPoints=i(301),n.Offset=i(1199),n.OffsetPoint=i(1200),n.Random=i(170),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.radius>0?Math.PI*n.radius*n.radius:0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=function(a){return new n(a.x,a.y,a.radius)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=function(a,h){return n(a,h.x,h.y)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(66),o=function(a,h){return n(a,h.x,h.y)&&n(a,h.right,h.y)&&n(a,h.x,h.bottom)&&n(a,h.right,h.bottom)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y,n.radius)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y&&n.radius===o.radius};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(a,h){return h===void 0&&(h=new n),h.x=a.left,h.y=a.top,h.width=a.diameter,h.height=a.diameter,h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n.x+=o,n.y+=a,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x+=o.x,n.y+=o.y,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(111);n.Area=i(1202),n.Circumference=i(447),n.CircumferencePoint=i(218),n.Clone=i(1203),n.Contains=i(112),n.ContainsPoint=i(1204),n.ContainsRect=i(1205),n.CopyFrom=i(1206),n.Equals=i(1207),n.GetBounds=i(1208),n.GetPoint=i(445),n.GetPoints=i(446),n.Offset=i(1209),n.OffsetPoint=i(1210),n.Random=i(180),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.isEmpty()?0:n.getMajorRadius()*n.getMinorRadius()*Math.PI};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(111),o=function(a){return new n(a.x,a.y,a.width,a.height)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(112),o=function(a,h){return n(a,h.x,h.y)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(112),o=function(a,h){return n(a,h.x,h.y)&&n(a,h.right,h.y)&&n(a,h.x,h.bottom)&&n(a,h.right,h.bottom)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y,n.width,n.height)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y&&n.width===o.width&&n.height===o.height};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(a,h){return h===void 0&&(h=new n),h.x=a.left,h.y=a.top,h.width=a.width,h.height=a.height,h};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n.x+=o,n.y+=a,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x+=o.x,n.y+=o.y,n};e.exports=i},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(231),a=function(h,u,l){if(l===void 0&&(l=[]),o(h,u)){var f=h.x,c=h.y,d=h.radius,v=u.x,p=u.y,g=u.radius,m,x,y,T,C;if(c===p)C=(g*g-d*d-v*v+f*f)/(2*(f-v)),m=1,x=-2*p,y=v*v+C*C-2*v*C+p*p-g*g,T=x*x-4*m*y,T===0?l.push(new n(C,-x/(2*m))):T>0&&(l.push(new n(C,(-x+Math.sqrt(T))/(2*m))),l.push(new n(C,(-x-Math.sqrt(T))/(2*m))));else{var S=(f-v)/(c-p),E=(g*g-d*d-v*v+f*f-p*p+c*c)/(2*(c-p));m=S*S+1,x=2*c*S-2*E*S-2*f,y=f*f+c*c+E*E-d*d-2*c*E,T=x*x-4*m*y,T===0?(C=-x/(2*m),l.push(new n(C,E-C*S))):T>0&&(C=(-x+Math.sqrt(T))/(2*m),l.push(new n(C,E-C*S)),C=(-x-Math.sqrt(T))/(2*m),l.push(new n(C,E-C*S)))}}return l};e.exports=a},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(232),o=i(151),a=function(h,u,l){if(l===void 0&&(l=[]),o(h,u)){var f=u.getLineA(),c=u.getLineB(),d=u.getLineC(),v=u.getLineD();n(f,h,l),n(c,h,l),n(d,h,l),n(v,h,l)}return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(140),o=i(487),a=i(47),h=new a;function u(c,d,v,p,g){var m=Math.cos(c),x=Math.sin(c);h.setTo(d,v,d+m,v+x);var y=o(h,p);y&&g.push(new n(y.x,y.y,c,y.w))}function l(c,d){return c.z-d.z}var f=function(c,d,v){Array.isArray(v)||(v=[v]);for(var p=[],g=[],m=0;m<v.length;m++)for(var x=v[m].points,y=0;y<x.length;y++){var T=Math.atan2(x[y].y-d,x[y].x-c);g.indexOf(T)===-1&&(u(T,c,d,v,p),u(T-1e-5,c,d,v,p),u(T+1e-5,c,d,v,p),g.push(T))}return p.sort(l)};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(152),a=function(h,u,l){return l===void 0&&(l=new n),o(h,u)&&(l.x=Math.max(h.x,u.x),l.y=Math.max(h.y,u.y),l.width=Math.min(h.right,u.right)-l.x,l.height=Math.min(h.bottom,u.bottom)-l.y),l};e.exports=a},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(234),o=i(152),a=function(h,u,l){if(l===void 0&&(l=[]),o(h,u)){var f=h.getLineA(),c=h.getLineB(),d=h.getLineC(),v=h.getLineD();n(f,u,l),n(c,u,l),n(d,u,l),n(v,u,l)}return l};e.exports=a},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(489),o=i(234),a=function(h,u,l){if(l===void 0&&(l=[]),n(h,u)){var f=u.getLineA(),c=u.getLineB(),d=u.getLineC();o(f,h,l),o(c,h,l),o(d,h,l)}return l};e.exports=a},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(232),o=i(491),a=function(h,u,l){if(l===void 0&&(l=[]),o(h,u)){var f=h.getLineA(),c=h.getLineB(),d=h.getLineC();n(f,u,l),n(c,u,l),n(d,u,l)}return l};e.exports=a},function(e,r,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(494),o=i(492),a=function(h,u,l){if(l===void 0&&(l=[]),n(h,u)){var f=u.getLineA(),c=u.getLineB(),d=u.getLineC();o(h,f,l),o(h,c,l),o(h,d,l)}return l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(496),o=function(a,h){if(!n(a,h))return!1;var u=Math.min(h.x1,h.x2),l=Math.max(h.x1,h.x2),f=Math.min(h.y1,h.y2),c=Math.max(h.y1,h.y2);return a.x>=u&&a.x<=l&&a.y>=f&&a.y<=c};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u,l){return l===void 0&&(l=0),!(o>n.right+l||a<n.left-l||h>n.bottom+l||u<n.top-l)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(47);n.Angle=i(97),n.BresenhamPoints=i(317),n.CenterOn=i(1222),n.Clone=i(1223),n.CopyFrom=i(1224),n.Equals=i(1225),n.Extend=i(1226),n.GetEasedPoints=i(1227),n.GetMidPoint=i(1228),n.GetNearestPoint=i(1229),n.GetNormal=i(1230),n.GetPoint=i(307),n.GetPoints=i(172),n.GetShortestDistance=i(1231),n.Height=i(1232),n.Length=i(67),n.NormalAngle=i(497),n.NormalX=i(1233),n.NormalY=i(1234),n.Offset=i(1235),n.PerpSlope=i(1236),n.Random=i(173),n.ReflectAngle=i(1237),n.Rotate=i(1238),n.RotateAroundPoint=i(1239),n.RotateAroundXY=i(236),n.SetToAngle=i(1240),n.Slope=i(1241),n.Width=i(1242),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=o-(n.x1+n.x2)/2,u=a-(n.y1+n.y2)/2;return n.x1+=h,n.y1+=u,n.x2+=h,n.y2+=u,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(47),o=function(a){return new n(a.x1,a.y1,a.x2,a.y2)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x1,n.y1,n.x2,n.y2)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x1===o.x1&&n.y1===o.y1&&n.x2===o.x2&&n.y2===o.y2};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=function(a,h,u){u===void 0&&(u=h);var l=n(a),f=a.x2-a.x1,c=a.y2-a.y1;return h&&(a.x1=a.x1-f/l*h,a.y1=a.y1-c/l*h),u&&(a.x2=a.x2+f/l*u,a.y2=a.y2+c/l*u),a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(352),o=i(80),a=i(4),h=function(u,l,f,c,d){c===void 0&&(c=0),d===void 0&&(d=[]);var v=[],p=u.x1,g=u.y1,m=u.x2-p,x=u.y2-g,y=o(l,d),T,C,S=f-1;for(T=0;T<S;T++)C=y(T/S),v.push(new a(p+m*C,g+x*C));if(C=y(1),v.push(new a(p+m*C,g+x*C)),c>0){var E=v[0],P=[E];for(T=1;T<v.length-1;T++){var M=v[T];n(E,M)>=c&&(P.push(M),E=M)}var R=v[v.length-1];return n(E,R)<c&&P.pop(),P.push(R),P}else return v};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){return h===void 0&&(h=new n),h.x=(a.x1+a.x2)/2,h.y=(a.y1+a.y2)/2,h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h,u){u===void 0&&(u=new n);var l=a.x1,f=a.y1,c=a.x2,d=a.y2,v=(c-l)*(c-l)+(d-f)*(d-f);if(v===0)return u;var p=((h.x-l)*(c-l)+(h.y-f)*(d-f))/v;return u.x=l+p*(c-l),u.y=f+p*(d-f),u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(97),a=i(4),h=function(u,l){l===void 0&&(l=new a);var f=o(u)-n.TAU;return l.x=Math.cos(f),l.y=Math.sin(f),l};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=n.x1,h=n.y1,u=n.x2,l=n.y2,f=(u-a)*(u-a)+(l-h)*(l-h);if(f===0)return!1;var c=((h-o.y)*(u-a)-(a-o.x)*(l-h))/f;return Math.abs(c)*Math.sqrt(f)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.abs(n.y1-n.y2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(97),a=function(h){return Math.cos(o(h)-n.TAU)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(14),o=i(97),a=function(h){return Math.sin(o(h)-n.TAU)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n.x1+=o,n.y1+=a,n.x2+=o,n.y2+=a,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return-((n.x2-n.x1)/(n.y2-n.y1))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(97),o=i(497),a=function(h,u){return 2*o(u)-Math.PI-n(h)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(236),o=function(a,h){var u=(a.x1+a.x2)/2,l=(a.y1+a.y2)/2;return n(a,u,l,h)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(236),o=function(a,h,u){return n(a,h.x,h.y,u)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h,u){return n.x1=o,n.y1=a,n.x2=o+Math.cos(h)*u,n.y2=a+Math.sin(h)*u,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return(n.y2-n.y1)/(n.x2-n.x1)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return Math.abs(n.x1-n.x2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(116),o=i(2),a=i(69),h=i(39),u=i(117),l=new h,f=new h,c=new a,d=function(v){var p=o(v,"mesh"),g=o(v,"texture",null),m=o(v,"frame"),x=o(v,"width",1),y=o(v,"height",x),T=o(v,"widthSegments",1),C=o(v,"heightSegments",T),S=o(v,"x",0),E=o(v,"y",0),P=o(v,"z",0),M=o(v,"rotateX",0),R=o(v,"rotateY",0),A=o(v,"rotateZ",0),O=o(v,"zIsUp",!0),b=o(v,"isOrtho",p?p.dirtyCache[11]:!1),w=o(v,"colors",[16777215]),I=o(v,"alphas",[1]),Y=o(v,"tile",!1),z=o(v,"flipY",!1),V=o(v,"width",null),W={faces:[],verts:[]};if(l.set(S,E,P),f.set(M,R,A),c.fromRotationXYTranslation(f,l,O),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return W;var F=g.get(m);!V&&b&&g&&p&&(x=F.width/p.height,y=F.height/p.height);var L=x/2,D=y/2,B=Math.floor(T),G=Math.floor(C),N=B+1,X=G+1,U=x/B,H=y/G,$=[],Z=[],J,Q,_=0,j=1,tt=0,lt=1;F&&(_=F.u0,j=F.u1,z?(tt=F.v1,lt=F.v0):(tt=F.v0,lt=F.v1));var rt=j-_,et=lt-tt;for(Q=0;Q<X;Q++){var q=Q*H-D;for(J=0;J<N;J++){var vt=J*U-L;Z.push(vt,-q);var it=_+rt*(J/B),ot=tt+et*(Q/G);$.push(it,ot)}}Array.isArray(w)||(w=[w]),Array.isArray(I)||(I=[I]);var De=0,Ie=0;for(Q=0;Q<G;Q++)for(J=0;J<B;J++){var Dt=(J+N*Q)*2,mt=(J+N*(Q+1))*2,Zt=(J+1+N*(Q+1))*2,Wt=(J+1+N*Q)*2,Xt=w[Ie],Be=I[De],ls=new u(Z[Dt],Z[Dt+1],0,$[Dt],$[Dt+1],Xt,Be).transformMat4(c),us=new u(Z[mt],Z[mt+1],0,$[mt],$[mt+1],Xt,Be).transformMat4(c),fs=new u(Z[Wt],Z[Wt+1],0,$[Wt],$[Wt+1],Xt,Be).transformMat4(c),ds=new u(Z[mt],Z[mt+1],0,$[mt],$[mt+1],Xt,Be).transformMat4(c),cs=new u(Z[Zt],Z[Zt+1],0,$[Zt],$[Zt+1],Xt,Be).transformMat4(c),vs=new u(Z[Wt],Z[Wt+1],0,$[Wt],$[Wt+1],Xt,Be).transformMat4(c);Y&&(ls.setUVs(_,lt),us.setUVs(_,tt),fs.setUVs(j,lt),ds.setUVs(_,tt),cs.setUVs(j,tt),vs.setUVs(j,lt)),Ie++,Ie===w.length&&(Ie=0),De++,De===I.length&&(De=0),W.verts.push(ls,us,fs,ds,cs,vs),W.faces.push(new n(ls,us,fs),new n(ds,cs,vs))}return p&&(p.faces=p.faces.concat(W.faces),p.vertices=p.vertices.concat(W.verts)),W};e.exports=d},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){var u,l;if(a===void 0&&h===void 0){var f=n.getInCenter();u=f.x,l=f.y}var c=Math.cos(o),d=Math.sin(o),v=n.vertex1,p=n.vertex2,g=n.vertex3,m=v.x-u,x=v.y-l;v.set(m*c-x*d+u,m*d+x*c+l),m=p.x-u,x=p.y-l,p.set(m*c-x*d+u,m*d+x*c+l),m=g.x-u,x=g.y-l,g.set(m*c-x*d+u,m*d+x*c+l)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4);n.Ceil=i(1247),n.Clone=i(1248),n.CopyFrom=i(1249),n.Equals=i(1250),n.Floor=i(1251),n.GetCentroid=i(1252),n.GetMagnitude=i(500),n.GetMagnitudeSq=i(501),n.GetRectangleFromPoints=i(1253),n.Interpolate=i(1254),n.Invert=i(1255),n.Negative=i(1256),n.Project=i(1257),n.ProjectUnit=i(1258),n.SetMagnitude=i(1259),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(Math.ceil(n.x),Math.ceil(n.y))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a){return new n(a.x,a.y)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(Math.floor(n.x),Math.floor(n.y))};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){if(h===void 0&&(h=new n),!Array.isArray(a))throw new Error("GetCentroid points argument must be an array");var u=a.length;if(u<1)throw new Error("GetCentroid points array must not be empty");if(u===1)h.x=a[0].x,h.y=a[0].y;else{for(var l=0;l<u;l++)h.x+=a[l].x,h.y+=a[l].y;h.x/=u,h.y/=u}return h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(a,h){h===void 0&&(h=new n);for(var u=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,d=0;d<a.length;d++){var v=a[d];v.x>u&&(u=v.x),v.x<l&&(l=v.x),v.y>f&&(f=v.y),v.y<c&&(c=v.y)}return h.x=l,h.y=c,h.width=u-l,h.height=f-c,h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h,u,l){return u===void 0&&(u=0),l===void 0&&(l=new n),l.x=a.x+(h.x-a.x)*u,l.y=a.y+(h.y-a.y)*u,l};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.setTo(n.y,n.x)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){return h===void 0&&(h=new n),h.setTo(-a.x,-a.y)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(501),a=function(h,u,l){l===void 0&&(l=new n);var f=h.x*u.x+h.y*u.y,c=f/o(u);return c!==0&&(l.x=c*u.x,l.y=c*u.y),l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h,u){u===void 0&&(u=new n);var l=a.x*h.x+a.y*h.y;return l!==0&&(u.x=l*h.x,u.y=l*h.y),u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(500),o=function(a,h){if(a.x!==0||a.y!==0){var u=n(a);a.x/=u,a.y/=u}return a.x*=h,a.y*=h,a};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(227);n.Clone=i(1261),n.Contains=i(228),n.ContainsPoint=i(1262),n.Earcut=i(59),n.GetAABB=i(469),n.GetNumberArray=i(1263),n.GetPoints=i(470),n.Perimeter=i(471),n.Reverse=i(1264),n.Simplify=i(1265),n.Smooth=i(472),n.Translate=i(1266),e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(227),o=function(a){return new n(a.points)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(228),o=function(a,h){return n(a,h.x,h.y)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=[]);for(var a=0;a<n.points.length;a++)o.push(n.points[a].x),o.push(n.points[a].y);return o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.points.reverse(),n};e.exports=i},function(e,r){function i(l,f){var c=l.x-f.x,d=l.y-f.y;return c*c+d*d}function n(l,f,c){var d=f.x,v=f.y,p=c.x-d,g=c.y-v;if(p!==0||g!==0){var m=((l.x-d)*p+(l.y-v)*g)/(p*p+g*g);m>1?(d=c.x,v=c.y):m>0&&(d+=p*m,v+=g*m)}return p=l.x-d,g=l.y-v,p*p+g*g}function o(l,f){for(var c=l[0],d=[c],v,p=1,g=l.length;p<g;p++)v=l[p],i(v,c)>f&&(d.push(v),c=v);return c!==v&&d.push(v),d}function a(l,f,c,d,v){for(var p=d,g,m=f+1;m<c;m++){var x=n(l[m],l[f],l[c]);x>p&&(g=m,p=x)}p>d&&(g-f>1&&a(l,f,g,d,v),v.push(l[g]),c-g>1&&a(l,g,c,d,v))}function h(l,f){var c=l.length-1,d=[l[0]];return a(l,0,c,f,d),d.push(l[c]),d}var u=function(l,f,c){f===void 0&&(f=1),c===void 0&&(c=!1);var d=l.points;if(d.length>2){var v=f*f;c||(d=o(d,v)),l.setTo(h(d,v))}return l};e.exports=u},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){for(var h=n.points,u=0;u<h.length;u++)h[u].x+=o,h[u].y+=a;return n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.width*n.height};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(a){return new n(a.x,a.y,a.width,a.height)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(57),o=function(a,h){return n(a,h.x,h.y)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x,n.y,n.width,n.height)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x===o.x&&n.y===o.y&&n.width===o.width&&n.height===o.height};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(237),o=function(a,h){var u=n(a);return u<n(h)?a.setSize(h.height*u,h.height):a.setSize(h.width,h.width/u),a.setPosition(h.centerX-a.width/2,h.centerY-a.height/2)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(237),o=function(a,h){var u=n(a);return u>n(h)?a.setSize(h.height*u,h.height):a.setSize(h.width,h.width/u),a.setPosition(h.centerX-a.width/2,h.centerY-a.height/2)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n.width=Math.floor(n.width),n.height=Math.floor(n.height),n};e.exports=i},function(e,r,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=function(a,h,u,l,f){return f===void 0&&(f=new n),f.setTo(Math.min(a,u),Math.min(h,l),Math.abs(a-u),Math.abs(h-l))};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){return h===void 0&&(h=new n),h.x=a.centerX,h.y=a.centerY,h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=function(a,h){return h===void 0&&(h=new n),h.x=a.width,h.y=a.height,h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(190),o=function(a,h,u){var l=a.centerX,f=a.centerY;return a.setSize(a.width+h*2,a.height+u*2),n(a,l,f)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(10),o=i(152),a=function(h,u,l){return l===void 0&&(l=new n),o(h,u)?(l.x=Math.max(h.x,u.x),l.y=Math.max(h.y,u.y),l.width=Math.min(h.right,u.right)-l.x,l.height=Math.min(h.bottom,u.bottom)-l.y):l.setEmpty(),l};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var a=n.x,h=n.right,u=n.y,l=n.bottom,f=0;f<o.length;f++)a=Math.min(a,o[f].x),h=Math.max(h,o[f].x),u=Math.min(u,o[f].y),l=Math.max(l,o[f].y);return n.x=a,n.y=u,n.width=h-a,n.height=l-u,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){var a=Math.min(n.x,o.x),h=Math.max(n.right,o.right);n.x=a,n.width=h-a;var u=Math.min(n.y,o.y),l=Math.max(n.bottom,o.bottom);return n.y=u,n.height=l-u,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){var h=Math.min(n.x,o),u=Math.max(n.right,o);n.x=h,n.width=u-h;var l=Math.min(n.y,a),f=Math.max(n.bottom,a);return n.y=l,n.height=f-l,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return n.x+=o,n.y+=a,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x+=o.x,n.y+=o.y,n};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x<o.right&&n.right>o.x&&n.y<o.bottom&&n.bottom>o.y};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(4),o=i(36),a=function(h,u,l){l===void 0&&(l=new n),u=o(u);var f=Math.sin(u),c=Math.cos(u),d=c>0?h.width/2:h.width/-2,v=f>0?h.height/2:h.height/-2;return Math.abs(d*f)<Math.abs(v*c)?v=d*f/c:d=v*c/f,l.x=d+h.centerX,l.y=v+h.centerY,l};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(195),o=i(503),a=i(4),h=function(u,l,f){if(f===void 0&&(f=new a),o(u,l))switch(n(0,3)){case 0:f.x=u.x+Math.random()*(l.right-u.x),f.y=u.y+Math.random()*(l.top-u.y);break;case 1:f.x=l.x+Math.random()*(u.right-l.x),f.y=l.bottom+Math.random()*(u.bottom-l.bottom);break;case 2:f.x=u.x+Math.random()*(l.x-u.x),f.y=l.y+Math.random()*(u.bottom-l.y);break;case 3:f.x=l.right+Math.random()*(u.right-l.right),f.y=u.y+Math.random()*(l.bottom-u.y);break}return f};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.width===o.width&&n.height===o.height};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a){return a===void 0&&(a=o),n.width*=o,n.height*=a,n};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82);n.Area=i(1294),n.BuildEquilateral=i(1295),n.BuildFromPolygon=i(1296),n.BuildRight=i(1297),n.CenterOn=i(1298),n.Centroid=i(504),n.CircumCenter=i(1299),n.CircumCircle=i(1300),n.Clone=i(1301),n.Contains=i(115),n.ContainsArray=i(235),n.ContainsPoint=i(1302),n.CopyFrom=i(1303),n.Decompose=i(495),n.Equals=i(1304),n.GetPoint=i(476),n.GetPoints=i(477),n.InCenter=i(506),n.Perimeter=i(1305),n.Offset=i(505),n.Random=i(181),n.Rotate=i(1306),n.RotateAroundPoint=i(1307),n.RotateAroundXY=i(238),e.exports=n},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){var o=n.x1,a=n.y1,h=n.x2,u=n.y2,l=n.x3,f=n.y3;return Math.abs(((l-o)*(u-a)-(h-o)*(f-a))/2)};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),o=function(a,h,u){var l=u*(Math.sqrt(3)/2),f=a,c=h,d=a+u/2,v=h+l,p=a-u/2,g=h+l;return new n(f,c,d,v,p,g)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(59),o=i(82),a=function(h,u,l,f,c){u===void 0&&(u=null),l===void 0&&(l=1),f===void 0&&(f=1),c===void 0&&(c=[]);for(var d=n(h,u),v,p,g,m,x,y,T,C,S,E=0;E<d.length;E+=3)v=d[E],p=d[E+1],g=d[E+2],m=h[v*2]*l,x=h[v*2+1]*f,y=h[p*2]*l,T=h[p*2+1]*f,C=h[g*2]*l,S=h[g*2+1]*f,c.push(new o(m,x,y,T,C,S));return c};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),o=function(a,h,u,l){l===void 0&&(l=u);var f=a,c=h,d=a,v=h-l,p=a+u,g=h;return new n(f,c,d,v,p,g)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(504),o=i(505),a=function(h,u,l,f){f===void 0&&(f=n);var c=f(h),d=u-c.x,v=l-c.y;return o(h,d,v)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(3);function o(h,u,l,f){return h*f-u*l}var a=function(h,u){u===void 0&&(u=new n);var l=h.x3,f=h.y3,c=h.x1-l,d=h.y1-f,v=h.x2-l,p=h.y2-f,g=2*o(c,d,v,p),m=o(d,c*c+d*d,p,v*v+p*p),x=o(c,c*c+d*d,v,v*v+p*p);return u.x=l-m/g,u.y=f+x/g,u};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=function(a,h){h===void 0&&(h=new n);var u=a.x1,l=a.y1,f=a.x2,c=a.y2,d=a.x3,v=a.y3,p=f-u,g=c-l,m=d-u,x=v-l,y=p*(u+f)+g*(l+c),T=m*(u+d)+x*(l+v),C=2*(p*(v-c)-g*(d-f)),S,E;if(Math.abs(C)<1e-6){var P=Math.min(u,f,d),M=Math.min(l,c,v);S=(Math.max(u,f,d)-P)*.5,E=(Math.max(l,c,v)-M)*.5,h.x=P+S,h.y=M+E,h.radius=Math.sqrt(S*S+E*E)}else h.x=(x*y-g*T)/C,h.y=(p*T-m*y)/C,S=h.x-u,E=h.y-l,h.radius=Math.sqrt(S*S+E*E);return h};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(82),o=function(a){return new n(a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(115),o=function(a,h){return n(a,h.x,h.y)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o.setTo(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.x1===o.x1&&n.y1===o.y1&&n.x2===o.x2&&n.y2===o.y2&&n.x3===o.x3&&n.y3===o.y3};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(67),o=function(a){var h=a.getLineA(),u=a.getLineB(),l=a.getLineC();return n(h)+n(u)+n(l)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(238),o=i(506),a=function(h,u){var l=o(h);return n(h,l.x,l.y,u)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(238),o=function(a,h,u){return n(a,h.x,h.y,u)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(203),o=i(17),a={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(239),h=i(511),u=i(6),l=i(153),f=i(51),c=new n({Extends:o,initialize:function(v){o.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(f.BOOT,this.boot,this),v.pluginEvents.on(f.START,this.start,this)},boot:function(){var d=this.scene.sys.game,v=this.settings.input,p=d.config;this.enabled=u(v,"gamepad",p.inputGamepad)&&d.device.input.gamepads,this.target=u(v,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(f.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(f.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var d=this,v=this.target,p=function(g){g.defaultPrevented||!d.isActive()||(d.refreshPads(),d.queue.push(g))};this.onGamepadHandler=p,v.addEventListener("gamepadconnected",p,!1),v.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(f.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(f.UPDATE,this.update);for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].removeAllListeners()},disconnectAll:function(){for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].pad.connected=!1},refreshPads:function(){var d=navigator.getGamepads();if(!d)this.disconnectAll();else for(var v=this.gamepads,p=0;p<d.length;p++){var g=d[p];if(g){var m=g.id,x=g.index,y=v[x];if(y)y.id!==m?(y.destroy(),v[x]=new h(this,g)):y.update(g);else{var T=new h(this,g);v[x]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var d=[],v=this.gamepads,p=0;p<v.length;p++)v[p]&&d.push(v[p]);return d},getPad:function(d){for(var v=this.gamepads,p=0;p<v.length;p++)if(v[p]&&v[p].index===d)return v[p]},update:function(){if(this.enabled){this.refreshPads();var d=this.queue.length;if(d!==0)for(var v=this.queue.splice(0,d),p=0;p<d;p++){var g=v[p],m=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(a.CONNECTED,m,g):g.type==="gamepaddisconnected"&&this.emit(a.DISCONNECTED,m,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var d=0;d<this.gamepads.length;d++)this.gamepads[d]&&this.gamepads[d].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});l.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(65),o=i(66),a=i(0),h=i(203),u=i(508),l=i(507),f=i(50),c=i(111),d=i(112),v=i(51),p=i(9),g=i(2),m=i(56),x=i(153),y=i(7),T=i(24),C=i(10),S=i(57),E=i(20),P=i(82),M=i(115),R=new a({Extends:p,initialize:function(O){p.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var b={cancelled:!1};this._eventContainer={stopPropagation:function(){b.cancelled=!0}},this._eventData=b,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(E.BOOT,this.boot,this),O.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var A=this.systems.events;A.on(E.TRANSITION_START,this.transitionIn,this),A.on(E.TRANSITION_OUT,this.transitionOut,this),A.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(E.PRE_UPDATE,this.preUpdate,this),A.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(A){this.isActive()&&this.emit(v.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(v.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var A=this._pendingRemoval,O=this._pendingInsertion,b=A.length,w=O.length;if(!(b===0&&w===0)){for(var I=this._list,Y=0;Y<b;Y++){var z=A[Y],V=I.indexOf(z);V>-1&&(I.splice(V,1),this.clear(z,!0))}A.length=0,this._pendingRemoval.length=0,this._list=I.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,A,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var b,w=this.manager,I=w.pointers,Y=w.pointersTotal;for(b=0;b<Y;b++)I[b].updateMotion();if(this._list.length===0)return!1;var z=this.pollRate;if(z===-1)return!1;if(z>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var V=!1;for(b=0;b<Y;b++){var W=0,F=I[b];this._tempZones=[],this._temp=this.hitTestPointer(F),this.sortGameObjects(this._temp,F),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(F),this.getDragState(F)===2&&this.processDragThresholdEvent(F,A),W>0&&(V=!0)}return V},update:function(A,O){if(!this.isActive())return!1;for(var b=O.length,w=!1,I=0;I<b;I++){var Y=0,z=O[I];switch(this._tempZones=[],this._temp=this.hitTestPointer(z),this.sortGameObjects(this._temp,z),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case h.MOUSE_DOWN:Y+=this.processDragDownEvent(z),Y+=this.processDownEvents(z),Y+=this.processOverOutEvents(z);break;case h.MOUSE_UP:Y+=this.processDragUpEvent(z),Y+=this.processUpEvents(z),Y+=this.processOverOutEvents(z);break;case h.TOUCH_START:Y+=this.processDragDownEvent(z),Y+=this.processDownEvents(z),Y+=this.processOverEvents(z);break;case h.TOUCH_END:case h.TOUCH_CANCEL:Y+=this.processDragUpEvent(z),Y+=this.processUpEvents(z),Y+=this.processOutEvents(z);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:Y+=this.processDragMoveEvent(z),Y+=this.processMoveEvents(z),Y+=this.processOverOutEvents(z);break;case h.MOUSE_WHEEL:Y+=this.processWheelEvent(z);break}Y>0&&(w=!0)}return this._updatedThisFrame=!0,w},clear:function(A,O){O===void 0&&(O=!1);var b=A.input;if(b){O||this.queueForRemoval(A),b.gameObject=void 0,b.target=void 0,b.hitArea=void 0,b.hitAreaCallback=void 0,b.callbackContext=void 0,A.input=null;var w=this._draggable.indexOf(A);return w>-1&&this._draggable.splice(w,1),w=this._drag[0].indexOf(A),w>-1&&this._drag[0].splice(w,1),w=this._over[0].indexOf(A),w>-1&&(this._over[0].splice(w,1),this.manager.resetCursor(b)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,O,b,w){return w===void 0&&(w=!1),A.input?A.input.enabled=!0:this.setHitArea(A,O,b),A.input&&w&&!A.input.dropZone&&(A.input.dropZone=w),this},hitTestPointer:function(A){for(var O=this.cameras.getCamerasBelowPointer(A),b=0;b<O.length;b++){for(var w=O[b],I=this.manager.hitTest(A,this._list,w),Y=0;Y<I.length;Y++){var z=I[Y];z.input.dropZone&&this._tempZones.push(z)}if(I.length>0)return A.camera=w,I}return A.camera=O[0],[]},processDownEvents:function(A){var O=0,b=this._temp,w=this._eventData,I=this._eventContainer;w.cancelled=!1;for(var Y=!1,z=0;z<b.length;z++){var V=b[z];if(V.input){if(O++,V.emit(v.GAMEOBJECT_POINTER_DOWN,A,V.input.localX,V.input.localY,I),w.cancelled||!V.input){Y=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,A,V,I),w.cancelled||!V.input){Y=!0;break}}}return!Y&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,A,b):this.emit(v.POINTER_DOWN_OUTSIDE,A)),O},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,O){this._dragState[A.id]=O},processDragThresholdEvent:function(A,O){var b=!1,w=this.dragTimeThreshold,I=this.dragDistanceThreshold;if((I>0&&f(A.x,A.y,A.downX,A.downY)>=I||w>0&&O>=A.downTime+w)&&(b=!0),b)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(this.getDragState(A)!==3)return 0;for(var O=this._drag[A.id],b=0;b<O.length;b++){var w=O[b],I=w.input;I.dragState=2,I.dragStartX=w.x,I.dragStartY=w.y,I.dragStartXGlobal=A.worldX,I.dragStartYGlobal=A.worldY,I.dragX=I.dragStartXGlobal-I.dragStartX,I.dragY=I.dragStartYGlobal-I.dragStartY,w.emit(v.GAMEOBJECT_DRAG_START,A,I.dragX,I.dragY),this.emit(v.DRAG_START,A,w)}return this.setDragState(A,4),O.length},processDragDownEvent:function(A){var O=this._temp;if(this._draggable.length===0||O.length===0||!A.primaryDown||this.getDragState(A)!==0)return 0;this.setDragState(A,1);for(var b=[],w=0;w<O.length;w++){var I=O[w];I.input.draggable&&I.input.dragState===0&&b.push(I)}return b.length===0?(this.setDragState(A,0),0):(b.length>1&&(this.sortGameObjects(b,A),this.topOnly&&b.splice(1)),this._drag[A.id]=b,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(this.getDragState(A)===2&&this.processDragThresholdEvent(A,this.manager.game.loop.now),this.getDragState(A)!==4)return 0;for(var O=this._tempZones,b=this._drag[A.id],w=0;w<b.length;w++){var I=b[w],Y=I.input,z=Y.target;if(z){var V=O.indexOf(z);V===0?(I.emit(v.GAMEOBJECT_DRAG_OVER,A,z),this.emit(v.DRAG_OVER,A,I,z)):V>0?(I.emit(v.GAMEOBJECT_DRAG_LEAVE,A,z),this.emit(v.DRAG_LEAVE,A,I,z),Y.target=O[0],z=Y.target,I.emit(v.GAMEOBJECT_DRAG_ENTER,A,z),this.emit(v.DRAG_ENTER,A,I,z)):(I.emit(v.GAMEOBJECT_DRAG_LEAVE,A,z),this.emit(v.DRAG_LEAVE,A,I,z),O[0]?(Y.target=O[0],z=Y.target,I.emit(v.GAMEOBJECT_DRAG_ENTER,A,z),this.emit(v.DRAG_ENTER,A,I,z)):Y.target=null)}else!z&&O[0]&&(Y.target=O[0],z=Y.target,I.emit(v.GAMEOBJECT_DRAG_ENTER,A,z),this.emit(v.DRAG_ENTER,A,I,z));var W,F;if(!I.parentContainer)W=A.worldX-Y.dragX,F=A.worldY-Y.dragY;else{var L=A.worldX-Y.dragStartXGlobal,D=A.worldY-Y.dragStartYGlobal,B=I.getParentRotation(),G=L*Math.cos(B)+D*Math.sin(B),N=D*Math.cos(B)-L*Math.sin(B);G*=1/I.parentContainer.scaleX,N*=1/I.parentContainer.scaleY,W=G+Y.dragStartX,F=N+Y.dragStartY}I.emit(v.GAMEOBJECT_DRAG,A,W,F),this.emit(v.DRAG,A,I,W,F)}return b.length},processDragUpEvent:function(A){for(var O=this._drag[A.id],b=0;b<O.length;b++){var w=O[b],I=w.input;if(I&&I.dragState===2){I.dragState=0,I.dragX=I.localX-w.displayOriginX,I.dragY=I.localY-w.displayOriginY;var Y=!1,z=I.target;z&&(w.emit(v.GAMEOBJECT_DROP,A,z),this.emit(v.DROP,A,w,z),I.target=null,Y=!0),w.input&&(w.emit(v.GAMEOBJECT_DRAG_END,A,I.dragX,I.dragY,Y),this.emit(v.DRAG_END,A,w,Y))}}return this.setDragState(A,0),O.splice(0),0},processMoveEvents:function(A){var O=0,b=this._temp,w=this._eventData,I=this._eventContainer;w.cancelled=!1;for(var Y=!1,z=0;z<b.length;z++){var V=b[z];if(V.input){if(O++,V.emit(v.GAMEOBJECT_POINTER_MOVE,A,V.input.localX,V.input.localY,I),w.cancelled||!V.input){Y=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,A,V,I),w.cancelled||!V.input){Y=!0;break}if(this.topOnly)break}}return Y||this.emit(v.POINTER_MOVE,A,b),O},processWheelEvent:function(A){var O=0,b=this._temp,w=this._eventData,I=this._eventContainer;w.cancelled=!1;for(var Y=!1,z=A.deltaX,V=A.deltaY,W=A.deltaZ,F=0;F<b.length;F++){var L=b[F];if(L.input){if(O++,L.emit(v.GAMEOBJECT_POINTER_WHEEL,A,z,V,W,I),w.cancelled||!L.input){Y=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,A,L,z,V,W,I),w.cancelled||!L.input){Y=!0;break}}}return Y||this.emit(v.POINTER_WHEEL,A,b,z,V,W),O},processOverEvents:function(A){var O=this._temp,b=0,w=O.length,I=[];if(w>0){var Y=this.manager,z=this._eventData,V=this._eventContainer;z.cancelled=!1;for(var W=!1,F=0;F<w;F++){var L=O[F];if(L.input){if(I.push(L),Y.setCursor(L.input),L.emit(v.GAMEOBJECT_POINTER_OVER,A,L.input.localX,L.input.localY,V),b++,z.cancelled||!L.input){W=!0;break}if(this.emit(v.GAMEOBJECT_OVER,A,L,V),z.cancelled||!L.input){W=!0;break}}}W||this.emit(v.POINTER_OVER,A,I)}return this._over[A.id]=I,b},processOutEvents:function(A){var O=this._over[A.id],b=0,w=O.length;if(w>0){var I=this.manager,Y=this._eventData,z=this._eventContainer;Y.cancelled=!1;var V=!1;this.sortGameObjects(O,A);for(var W=0;W<w;W++){var F=O[W];if(F=O[W],!!F.input){if(I.resetCursor(F.input),F.emit(v.GAMEOBJECT_POINTER_OUT,A,z),b++,Y.cancelled||!F.input){V=!0;break}if(this.emit(v.GAMEOBJECT_OUT,A,F,z),Y.cancelled||!F.input){V=!0;break}V||this.emit(v.POINTER_OUT,A,O)}}this._over[A.id]=[]}return b},processOverOutEvents:function(A){var O=this._temp,b,w,I=[],Y=[],z=[],V=this._over[A.id],W=this._drag[A.id],F=this.manager;for(b=0;b<V.length;b++)w=V[b],O.indexOf(w)===-1&&W.indexOf(w)===-1?I.push(w):z.push(w);for(b=0;b<O.length;b++)w=O[b],V.indexOf(w)===-1&&Y.push(w);var L=I.length,D=0,B=this._eventData,G=this._eventContainer;B.cancelled=!1;var N=!1;if(L>0){for(this.sortGameObjects(I,A),b=0;b<L;b++)if(w=I[b],!!w.input){if(F.resetCursor(w.input),w.emit(v.GAMEOBJECT_POINTER_OUT,A,G),D++,B.cancelled||!w.input){N=!0;break}if(this.emit(v.GAMEOBJECT_OUT,A,w,G),B.cancelled||!w.input){N=!0;break}}N||this.emit(v.POINTER_OUT,A,I)}if(L=Y.length,B.cancelled=!1,N=!1,L>0){for(this.sortGameObjects(Y,A),b=0;b<L;b++)if(w=Y[b],!!w.input){if(F.setCursor(w.input),w.emit(v.GAMEOBJECT_POINTER_OVER,A,w.input.localX,w.input.localY,G),D++,B.cancelled||!w.input){N=!0;break}if(this.emit(v.GAMEOBJECT_OVER,A,w,G),B.cancelled||!w.input){N=!0;break}}N||this.emit(v.POINTER_OVER,A,Y)}return V=z.concat(Y),this._over[A.id]=this.sortGameObjects(V,A),D},processUpEvents:function(A){var O=this._temp,b=this._eventData,w=this._eventContainer;b.cancelled=!1;for(var I=!1,Y=0;Y<O.length;Y++){var z=O[Y];if(z.input){if(z.emit(v.GAMEOBJECT_POINTER_UP,A,z.input.localX,z.input.localY,w),b.cancelled||!z.input){I=!0;break}if(this.emit(v.GAMEOBJECT_UP,A,z,w),b.cancelled||!z.input){I=!0;break}}}return!I&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,A,O):this.emit(v.POINTER_UP_OUTSIDE,A)),O.length},queueForInsertion:function(A){return this._pendingInsertion.indexOf(A)===-1&&this._list.indexOf(A)===-1&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,O){O===void 0&&(O=!0),Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var w=A[b];w.input.draggable=O;var I=this._draggable.indexOf(w);O&&I===-1?this._draggable.push(w):!O&&I>-1&&this._draggable.splice(I,1)}return this},makePixelPerfect:function(A){A===void 0&&(A=1);var O=this.systems.textures;return l(O,A)},setHitArea:function(A,O,b){if(O===void 0)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var w=!1,I=!1,Y=!1,z=!1,V=!1,W=!0;if(y(O)){var F=O;O=g(F,"hitArea",null),b=g(F,"hitAreaCallback",null),w=g(F,"draggable",!1),I=g(F,"dropZone",!1),Y=g(F,"cursor",!1),z=g(F,"useHandCursor",!1),V=g(F,"pixelPerfect",!1);var L=g(F,"alphaTolerance",1);V&&(O={},b=this.makePixelPerfect(L)),(!O||!b)&&(this.setHitAreaFromTexture(A),W=!1)}else typeof O=="function"&&!b&&(b=O,O={});for(var D=0;D<A.length;D++){var B=A[D];if(V&&B.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var G=B.input?B.input:u(B,O,b);G.customHitArea=W,G.dropZone=I,G.cursor=z?"pointer":Y,B.input=G,w&&this.setDraggable(B),this.queueForInsertion(B)}return this},setHitAreaCircle:function(A,O,b,w,I){I===void 0&&(I=o);var Y=new n(O,b,w);return this.setHitArea(A,Y,I)},setHitAreaEllipse:function(A,O,b,w,I,Y){Y===void 0&&(Y=d);var z=new c(O,b,w,I);return this.setHitArea(A,z,Y)},setHitAreaFromTexture:function(A,O){O===void 0&&(O=S),Array.isArray(A)||(A=[A]);for(var b=0;b<A.length;b++){var w=A[b],I=w.frame,Y=0,z=0;if(w.width?(Y=w.width,z=w.height):I&&(Y=I.realWidth,z=I.realHeight),w.type==="Container"&&(Y===0||z===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Y!==0&&z!==0&&(w.input=u(w,new C(0,0,Y,z),O),this.queueForInsertion(w))}return this},setHitAreaRectangle:function(A,O,b,w,I,Y){Y===void 0&&(Y=S);var z=new C(O,b,w,I);return this.setHitArea(A,z,Y)},setHitAreaTriangle:function(A,O,b,w,I,Y,z,V){V===void 0&&(V=M);var W=new P(O,b,w,I,Y,z);return this.setHitArea(A,W,V)},enableDebug:function(A,O){O===void 0&&(O=65280);var b=A.input;if(!b||!b.hitArea)return this;var w=b.hitArea,I=w.type,Y=b.hitAreaDebug,z=this.systems.add,V=this.systems.updateList;Y&&(V.remove(Y),Y.destroy(),Y=null);var W=0,F=0;switch(I){case m.CIRCLE:Y=z.arc(0,0,w.radius),W=w.x-w.radius,F=w.y-w.radius;break;case m.ELLIPSE:Y=z.ellipse(0,0,w.width,w.height),W=w.x-w.width/2,F=w.y-w.height/2;break;case m.LINE:Y=z.line(0,0,w.x1,w.y1,w.x2,w.y2);break;case m.POLYGON:Y=z.polygon(0,0,w.points);break;case m.RECTANGLE:Y=z.rectangle(0,0,w.width,w.height),W=w.x,F=w.y;break;case m.TRIANGLE:Y=z.triangle(0,0,w.x1,w.y1,w.x2,w.y2,w.x3,w.y3);break}return Y&&(Y.isFilled=!1,Y.preUpdate=function(){Y.setStrokeStyle(1/A.scale,O),Y.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var L=A.x,D=A.y,B=A.rotation,G=A.scaleX,N=A.scaleY;if(A.parentContainer){var X=A.getWorldTransformMatrix();L=X.tx,D=X.ty,B=X.rotation,G=X.scaleX,N=X.scaleY}Y.setRotation(B),Y.setScale(G,N),Y.setPosition(L+W,D+F),Y.setScrollFactor(A.scrollFactorX,A.scrollFactorY),Y.setDepth(A.depth)},V.add(Y),b.hitAreaDebug=Y),this},removeDebug:function(A){var O=A.input;if(O&&O.hitAreaDebug){var b=O.hitAreaDebug;this.systems.updateList.remove(b),b.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,O){if(A.length<2)return A;var b=O.camera.renderList;return A.sort(function(w,I){return b.indexOf(I)-b.indexOf(w)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,O){if(!A.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(A);if(A.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-A.parentContainer.getIndex(A);if(A.parentContainer===O)return-1;if(O.parentContainer===A)return 1;for(var b=A.getIndexList(),w=O.getIndexList(),I=Math.min(b.length,w.length),Y=0;Y<I;Y++){var z=b[Y],V=w[Y];if(z!==V)return V-z}return w.length-b.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var A=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var b=this.systems.events;b.off(E.TRANSITION_START,this.transitionIn,this),b.off(E.TRANSITION_OUT,this.transitionOut,this),b.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),b.off(E.PRE_UPDATE,this.preUpdate,this),O.events.off(v.GAME_OUT,this.onGameOut,this),O.events.off(v.GAME_OVER,this.onGameOver,this),b.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",R,"input"),e.exports=R},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(9),a=i(154),h=i(22),u=i(6),l=i(51),f=i(153),c=i(512),d=i(143),v=i(513),p=i(1331),g=i(20),m=i(76),x=new n({Extends:o,initialize:function(T){o.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(l.BOOT,this.boot,this),T.pluginEvents.on(l.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=u(y,"keyboard",!0);var T=u(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT,space:d.SPACE,shift:d.SHIFT})},addKeys:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var P=y[E].trim();P&&(S[P]=this.addKey(P,T,C))}}else for(var M in y)S[M]=this.addKey(y[M],T,C);return S},addKey:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.keys;if(y instanceof c){var E=S.indexOf(y);return E>-1?S[E]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=d[y.toUpperCase()]),S[y]||(S[y]=new c(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(C)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var C=this.keys,S;if(y instanceof c){var E=C.indexOf(y);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=d[y.toUpperCase()]);return C[y]&&(S=C[y],C[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,C=0;C<T.length;C++){var S=T[C];S&&(T[C]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new v(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var C=m(this.time-y.timeDown,T);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var C=this.keys,S=0;S<T;S++){var E=y[S],P=E.keyCode,M=C[P],R=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(P===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=P,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(M&&(R=M.isDown,M.onDown(E)),!E.cancelled&&(!M||!R)&&(p[P]&&this.emit(a.KEY_DOWN+p[P],E),E.cancelled||this.emit(a.ANY_KEY_DOWN,E))):(M&&M.onUp(E),E.cancelled||(p[P]&&this.emit(a.KEY_UP+p[P],E),E.cancelled||this.emit(a.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});f.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(143),o={};for(var a in n)o[n[a]]=a;e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n._justDown?(n._justDown=!1,!0):!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n._justUp?(n._justUp=!1,!0):!1};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=50);var a=n.plugin.game.loop.time-n.timeDown;return n.isDown&&a<o};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){o===void 0&&(o=50);var a=n.plugin.game.loop.time-n.timeUp;return n.isUp&&a<o};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:i(411)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:i(413)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(21),o=i(17),a={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(61),h=i(95),u=new n({Extends:a,initialize:function(f,c,d,v,p){a.call(this,f,c,d,v,p),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});o.register("animation",function(l,f,c,d){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new u(this,l[v]));else this.addFile(new u(this,l,f,d,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(71),u=i(7),l=i(61),f=i(49),c=new n({Extends:f,initialize:function(v,p,g,m,x,y){var T,C;if(u(p)){var S=p;p=a(S,"key"),T=new h(v,{key:p,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),C=new l(v,{key:p,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","json"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new h(v,p,g,x),C=new l(v,p,m,y);T.linkFile?f.call(this,v,"atlasjson",p,[T,C,T.linkFile]):f.call(this,v,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,v.data,p),v.addToCache(),this.complete=!0}}});o.register("aseprite",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(71),u=i(7),l=i(61),f=i(49),c=new n({Extends:f,initialize:function(v,p,g,m,x,y){var T,C;if(u(p)){var S=p;p=a(S,"key"),T=new h(v,{key:p,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),C=new l(v,{key:p,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","json"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new h(v,p,g,x),C=new l(v,p,m,y);T.linkFile?f.call(this,v,"atlasjson",p,[T,C,T.linkFile]):f.call(this,v,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});o.register("atlas",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(71),u=i(7),l=i(49),f=i(241),c=new n({Extends:l,initialize:function(v,p,g,m,x,y){var T,C;if(u(p)){var S=p;p=a(S,"key"),T=new h(v,{key:p,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),C=new f(v,{key:p,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","xml"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new h(v,p,g,x),C=new f(v,p,m,y);T.linkFile?l.call(this,v,"atlasxml",p,[T,C,T.linkFile]):l.call(this,v,"atlasxml",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(d.key,d.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});o.register("atlasXML",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(518),o=i(0),a=i(8),h=i(2),u=i(7),l=i(61),f=i(49),c=new o({Extends:f,initialize:function(v,p,g,m,x,y,T){if(u(p)){var C=p;p=h(C,"key"),g=h(C,"jsonURL"),m=h(C,"audioURL"),x=h(C,"audioConfig"),y=h(C,"audioXhrSettings"),T=h(C,"jsonXhrSettings")}var S;if(!m)S=new l(v,p,g,T),f.call(this,v,"audiosprite",p,[S]),this.config.resourceLoad=!0,this.config.audioConfig=x,this.config.audioXhrSettings=y;else{var E=n.create(v,p,m,x,y);E&&(S=new l(v,p,g,T),f.call(this,v,"audiosprite",p,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(d){var v=this.files.indexOf(d);if(v!==-1&&(this.pending--,this.config.resourceLoad&&d.type==="json"&&d.data.hasOwnProperty("resources"))){var p=d.data.resources,g=h(this.config,"audioConfig"),m=h(this.config,"audioXhrSettings"),x=n.create(this.loader,d.key,p,g,m);x&&(this.addToMultiFile(x),this.loader.addFile(x))}},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1];d.addToCache(),v.addToCache(),this.complete=!0}}});a.register("audioSprite",function(d,v,p,g,m,x){var y=this.systems.game,T=y.config.audio,C=y.device.audio;if(T&&T.noAudio||!C.webAudio&&!C.audioData)return this;var S;if(Array.isArray(d))for(var E=0;E<d.length;E++)S=new c(this,d[E]),S.files&&this.addFile(S.files);else S=new c(this,d,v,p,g,m,x),S.files&&this.addFile(S.files);return this})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g,m){var x="bin";if(l(v)){var y=v;v=u(y,"key"),p=u(y,"url"),g=u(y,"xhrSettings"),x=u(y,"extension",x),m=u(y,"dataType",m)}var T={type:"binary",cache:d.cacheManager.binary,extension:x,responseType:"arraybuffer",key:v,url:p,xhrSettings:g,config:{dataType:m}};a.call(this,d,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var c=this.config.dataType;this.data=c?new c(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",function(c,d,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new f(this,c[g]));else this.addFile(new f(this,c,d,p,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(71),u=i(7),l=i(49),f=i(212),c=i(241),d=new n({Extends:l,initialize:function(p,g,m,x,y,T){var C,S;if(u(g)){var E=g;g=a(E,"key"),C=new h(p,{key:g,url:a(E,"textureURL"),extension:a(E,"textureExtension","png"),normalMap:a(E,"normalMap"),xhrSettings:a(E,"textureXhrSettings")}),S=new c(p,{key:g,url:a(E,"fontDataURL"),extension:a(E,"fontDataExtension","xml"),xhrSettings:a(E,"fontDataXhrSettings")})}else C=new h(p,g,m,y),S=new c(p,g,x,T);C.linkFile?l.call(this,p,"bitmapfont",g,[C,S,C.linkFile]):l.call(this,p,"bitmapfont",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1];v.addToCache(),p.pendingDestroy();var g=v.cache.get(v.key),m=f(p.data,v.cache.getFrame(v.key),0,0,g);this.loader.cacheManager.bitmapFont.add(v.key,{data:m,texture:v.key,frame:null}),this.complete=!0}}});o.register("bitmapFont",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new d(this,v[T]),this.addFile(y.files);else y=new d(this,v,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g){var m="css";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"script",cache:!1,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};a.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=i(396),c=new n({Extends:a,initialize:function(v,p,g,m,x){var y="glsl";if(l(p)){var T=p;p=u(T,"key"),g=u(T,"url"),m=u(T,"shaderType","fragment"),x=u(T,"xhrSettings"),y=u(T,"extension",y)}else m===void 0&&(m="fragment");var C={type:"glsl",cache:v.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:m},xhrSettings:x};a.call(this,v,C)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.split(`
`),v=this.extractBlock(d,0);if(v)for(;v;){var p=this.getShaderName(v.header),g=this.getShaderType(v.header),m=this.getShaderUniforms(v.header),x=v.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=x:y.vertexSrc=x,y.uniforms||(y.uniforms=m)}else g==="fragment"?this.cache.add(p,new f(p,x,"",m)):this.cache.add(p,new f(p,"",x,m));v=this.extractBlock(d,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new f(this.key,this.data)):this.cache.add(this.key,new f(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(d){for(var v=0;v<d.length;v++){var p=d[v].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(d){for(var v=0;v<d.length;v++){var p=d[v].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(d){for(var v={},p=0;p<d.length;p++){var g=d[p].trim();if(g.substring(0,8)==="uniform."){var m=g.indexOf(":");if(m){var x=g.substring(8,m);try{v[x]=JSON.parse(g.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return v},extractBlock:function(d,v){for(var p=-1,g=-1,m=-1,x=!1,y=!1,T=[],C=[],S=v;S<d.length;S++){var E=d[S].trim();if(E==="---")if(p===-1)p=S,x=!0;else if(x)g=S,x=!1,y=!0;else{y=!1;break}else x?T.push(E):y&&(C.push(E),m=S)}return!x&&g!==-1?{header:T,shader:C.join(`
`),offset:m}:null}});h.register("glsl",function(d,v,p,g){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.addFile(new c(this,d[m]));else this.addFile(new c(this,d,v,p,g));return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g){var m="html";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"text",cache:d.cacheManager.html,extension:m,responseType:"text",key:v,url:p,xhrSettings:g};a.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g,m,x){g===void 0&&(g=512),m===void 0&&(m=512);var y="html";if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),x=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"width",g),m=u(T,"height",m)}var C={type:"html",cache:d.textureManager,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{width:g,height:m}};a.call(this,d,C)},onProcess:function(){this.state=o.FILE_PROCESSING;var c=this.config.width,d=this.config.height,v=[];v.push('<svg width="'+c+'px" height="'+d+'px" viewBox="0 0 '+c+" "+d+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var p=[v.join(`
`)],g=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=o.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(g.data),g.onProcessError()},a.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});h.register("htmlTexture",function(c,d,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new f(this,c[m]));else this.addFile(new f(this,c,d,v,p,g));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(71),u=i(7),l=i(61),f=i(49),c=new n({Extends:f,initialize:function(v,p,g,m,x,y,T){if(u(p)){var C=p;p=a(C,"key"),a(C,"url",!1)?g=a(C,"url"):g=a(C,"atlasURL"),y=a(C,"xhrSettings"),m=a(C,"path"),x=a(C,"baseURL"),T=a(C,"textureXhrSettings")}var S=new l(v,p,g,y);f.call(this,v,"multiatlas",p,[S]),this.config.path=m,this.config.baseURL=x,this.config.textureXhrSettings=T},onFileComplete:function(d){var v=this.files.indexOf(d);if(v!==-1&&(this.pending--,d.type==="json"&&d.data.hasOwnProperty("textures"))){var p=d.data.textures,g=this.config,m=this.loader,x=m.baseURL,y=m.path,T=m.prefix,C=a(g,"baseURL",this.baseURL),S=a(g,"path",this.path),E=a(g,"prefix",this.prefix),P=a(g,"textureXhrSettings");m.setBaseURL(C),m.setPath(S),m.setPrefix(E);for(var M=0;M<p.length;M++){var R=p[M].image,A="MA"+this.multiKeyIndex+"_"+R,O=new h(m,A,R,P);if(this.addToMultiFile(O),m.addFile(O),p[M].normalMap){var b=new h(m,A,p[M].normalMap,P);b.type="normalMap",O.setLink(b),this.addToMultiFile(b),m.addFile(b)}}m.setBaseURL(x),m.setPath(y),m.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var d=this.files[0],v=[],p=[],g=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var y=x.key.indexOf("_"),T=x.key.substr(y+1),C=x.data,S=0;S<d.data.textures.length;S++){var E=d.data.textures[S];if(E.image===T){p.push(C),v.push(E),x.linkFile&&g.push(x.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,v,g),this.complete=!0,m=0;m<this.files.length;m++)this.files[m].pendingDestroy()}}});o.register("multiatlas",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(7),u=i(49),l=i(520),f=new n({Extends:u,initialize:function(d,v,p,g){var m="js",x=[];if(h(v)){var y=v;v=a(y,"key"),p=a(y,"url"),g=a(y,"xhrSettings"),m=a(y,"extension",m)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var C=new l(d,{key:v+"_"+T.toString(),url:p[T],extension:m,xhrSettings:g});C.onProcess=function(){this.onProcessComplete()},x.push(C)}u.call(this,d,"scripts",v,x)},addToCache:function(){if(this.isReadyToProcess()){for(var c=0;c<this.files.length;c++){var d=this.files[c];d.data=document.createElement("script"),d.data.language="javascript",d.data.type="text/javascript",d.data.defer=!1,d.data.text=d.xhrLoader.responseText,document.head.appendChild(d.data)}this.complete=!0}}});o.register("scripts",function(c,d,v){var p;if(Array.isArray(c))for(var g=0;g<c.length;g++)p=new f(this,c[g]),this.addFile(p.files);else p=new f(this,c,d,v),this.addFile(p.files);return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(7),u=i(49),l=i(498),f=i(499),c=i(242),d=new n({Extends:u,initialize:function(p,g,m,x,y,T){var C,S,E=p.cacheManager.obj;if(h(g)){var P=g;g=a(P,"key"),C=new c(p,{key:g,type:"obj",cache:E,url:a(P,"url"),extension:a(P,"extension","obj"),xhrSettings:a(P,"xhrSettings"),config:{flipUV:a(P,"flipUV",y)}}),x=a(P,"matURL"),x&&(S=new c(p,{key:g,type:"mat",cache:E,url:x,extension:a(P,"matExtension","mat"),xhrSettings:a(P,"xhrSettings")}))}else C=new c(p,{key:g,url:m,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),x&&(S=new c(p,{key:g,url:x,type:"mat",cache:E,extension:"mat",xhrSettings:T}));u.call(this,p,"obj",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],p=this.files[1],g=l(v.data,v.config.flipUV);p&&(g.materials=f(p.data)),v.cache.add(v.key,g),this.complete=!0}}});o.register("obj",function(v,p,g,m,x){var y;if(Array.isArray(v))for(var T=0;T<v.length;T++)y=new d(this,v[T]),this.addFile(y.files);else y=new d(this,v,p,g,m,x),this.addFile(y.files);return this}),e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(8),h=i(61),u=new n({Extends:h,initialize:function(f,c,d,v,p){h.call(this,f,c,d,v,p),this.type="packfile"},onProcess:function(){this.state!==o.FILE_POPULATED&&(this.state=o.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",function(l,f,c,d){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new u(this,l[v]));else this.addFile(new u(this,l,f,d,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g,m,x){var y="js";if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),x=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"start"),m=u(T,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{start:g,mapping:m}};a.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=o.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,d=this.config,v=u(d,"start",!1),p=u(d,"mapping",null);if(this.state===o.FILE_POPULATED)c.install(this.key,this.data,v,p);else{this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=c.install(this.key,window[this.key],v,p);(v||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});h.register("plugin",function(c,d,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new f(this,c[m]));else this.addFile(new f(this,c,d,v,p,g));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g){var m="js";if(l(v)){var x=v;v=u(x,"key"),p=u(x,"url"),g=u(x,"xhrSettings"),m=u(x,"extension",m)}var y={type:"text",extension:m,responseType:"text",key:v,url:p,xhrSettings:g};a.call(this,d,y)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),d=eval;this.loader.sceneManager.add(this.key,d(c)),this.complete=!0}});h.register("sceneFile",function(c,d,v){if(Array.isArray(c))for(var p=0;p<c.length;p++)this.addFile(new f(this,c[p]));else this.addFile(new f(this,c,d,v));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g,m,x){var y="js";if(l(v)){var T=v;v=u(T,"key"),p=u(T,"url"),x=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"systemKey"),m=u(T,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:v,url:p,xhrSettings:x,config:{systemKey:g,sceneKey:m}};a.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=o.FILE_POPULATED)},onProcess:function(){var c=this.loader.systems.plugins,d=this.config,v=this.key,p=u(d,"systemKey",v),g=u(d,"sceneKey",v);this.state===o.FILE_POPULATED?c.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),c.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",function(c,d,v,p,g){if(Array.isArray(c))for(var m=0;m<c.length;m++)this.addFile(new f(this,c[m]));else this.addFile(new f(this,c,d,v,p,g));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(71),h=new n({Extends:a,initialize:function(l,f,c,d,v){a.call(this,l,f,c,v,d),this.type="spritesheet"},addToCache:function(){var u=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(u)}});o.register("spritesheet",function(u,l,f,c){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new h(this,u[d]));else this.addFile(new h(this,u,l,f,c));return this}),e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=new n({Extends:a,initialize:function(d,v,p,g,m){var x="svg";if(l(v)){var y=v;v=u(y,"key"),p=u(y,"url"),g=u(y,"svgConfig",{}),m=u(y,"xhrSettings"),x=u(y,"extension",x)}var T={type:"svg",cache:d.textureManager,extension:x,responseType:"text",key:v,url:p,xhrSettings:m,config:{width:u(g,"width"),height:u(g,"height"),scale:u(g,"scale")}};a.call(this,d,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var c=this.xhrLoader.responseText,d=[c],v=this.config.width,p=this.config.height,g=this.config.scale;t:if(v&&p||g){var m=null,x=new DOMParser;m=x.parseFromString(c,"text/xml");var y=m.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&C&&S)y.setAttribute("viewBox","0  0 "+C+" "+S);else if(T&&!C&&!S){var E=y.getAttribute("viewBox").split(/\s+|,/);C=E[2],S=E[3]}if(g)if(C&&S)v=C*g,p=S*g;else break t;y.setAttribute("width",v.toString()+"px"),y.setAttribute("height",p.toString()+"px"),d=[new XMLSerializer().serializeToString(y)]}try{var P=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,R=!1;this.data.onload=function(){R||a.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){R?M.onProcessError():(R=!0,a.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(d.join("")))},a.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var c=this.cache.addImage(this.key,this.data);this.pendingDestroy(c)}});h.register("svg",function(c,d,v,p){if(Array.isArray(c))for(var g=0;g<c.length;g++)this.addFile(new f(this,c[g]));else this.addFile(new f(this,c,d,v,p));return this}),e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(2),l=i(7),f=i(40),c=new n({Extends:a,initialize:function(v,p,g,m){var x="csv";if(l(p)){var y=p;p=u(y,"key"),g=u(y,"url"),m=u(y,"xhrSettings"),x=u(y,"extension",x)}var T={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:x,responseType:"text",key:p,url:g,xhrSettings:m};a.call(this,v,T),this.tilemapFormat=f.CSV},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,d),this.pendingDestroy(d)}});h.register("tilemapCSV",function(d,v,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new c(this,d[g]));else this.addFile(new c(this,d,v,p));return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(61),h=i(40),u=new n({Extends:a,initialize:function(f,c,d,v){a.call(this,f,c,d,v),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});o.register("tilemapImpact",function(l,f,c){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new u(this,l[d]));else this.addFile(new u(this,l,f,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(61),h=i(40),u=new n({Extends:a,initialize:function(f,c,d,v){a.call(this,f,c,d,v),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});o.register("tilemapTiledJSON",function(l,f,c){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new u(this,l[d]));else this.addFile(new u(this,l,f,c));return this}),e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(8),a=i(2),h=i(71),u=i(7),l=i(49),f=i(242),c=new n({Extends:l,initialize:function(v,p,g,m,x,y){var T,C;if(u(p)){var S=p;p=a(S,"key"),T=new h(v,{key:p,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),C=new f(v,{key:p,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","txt"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new h(v,p,g,x),C=new f(v,p,m,y);T.linkFile?l.call(this,v,"unityatlas",p,[T,C,T.linkFile]):l.call(this,v,"unityatlas",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],v=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(d.key,d.data,v.data,p),v.pendingDestroy(),this.complete=!0}}});o.register("unityAtlas",function(d,v,p,g,m){var x;if(Array.isArray(d))for(var y=0;y<d.length;y++)x=new c(this,d[y]),this.addFile(x.files);else x=new c(this,d,v,p,g,m),this.addFile(x.files);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(23),h=i(8),u=i(155),l=i(2),f=i(7),c=new n({Extends:a,initialize:function(v,p,g,m,x,y,T){m===void 0&&(m="loadeddata"),x===void 0&&(x=!1),y===void 0&&(y=!1),m!=="loadeddata"&&m!=="canplay"&&m!=="canplaythrough"&&(m="loadeddata");var C={type:"video",cache:v.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:m,asBlob:x,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),a.call(this,v,C)},onProcess:function(){if(this.state=o.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var d=this.createVideoElement();this.data=d;var v=this;this.data.onloadeddata=function(){v.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(v.data),v.onProcessError()},a.createObjectURL(d,this.xhrLoader.response,""),d.load()},createVideoElement:function(){var d=document.createElement("video");return d.controls=!1,d.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(d.muted=!0,d.defaultMuted=!0,d.setAttribute("autoplay","autoplay")),d.setAttribute("playsinline","playsinline"),d.setAttribute("preload","auto"),d},onVideoLoadHandler:function(d){var v=d.target;v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0),this.data=v,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(d){var v=d.target;v&&(v.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),v.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var d=this.config.loadEvent;if(this.config.asBlob)a.prototype.load.call(this);else{this.percentComplete=0;var v=this.createVideoElement();v.addEventListener(d,this.onLoadCallback,!0),v.addEventListener("error",this.onErrorCallback,!0),v.src=u(this,this.loader.baseURL),v.load()}}});c.create=function(d,v,p,g,m,x,y){var T=d.systems.game;f(v)&&(p=l(v,"url",[]),g=l(v,"loadEvent","loadeddata"),m=l(v,"asBlob",!1),x=l(v,"noAudio",!1),y=l(v,"xhrSettings"),v=l(v,"key"));var C=c.getVideoURL(T,p);if(C)return new c(d,v,C,g,m,x,y)},c.getVideoURL=function(d,v){Array.isArray(v)||(v=[v]);for(var p=0;p<v.length;p++){var g=l(v[p],"url",v[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var m;if(g.indexOf("data:")===0?m=g.split(",")[0].match(/\/(.*?);/):m=g.match(/\.([a-zA-Z0-9]+)($|\?)/),m=l(v[p],"type",m?m[1]:"").toLowerCase(),d.device.video[m])return{url:g,type:m}}return null},h.register("video",function(d,v,p,g,m,x){var y;if(Array.isArray(d))for(var T=0;T<d.length;T++)y=c.create(this,d[T]),y&&this.addFile(y);else y=c.create(this,d,v,p,g,m,x),y&&this.addFile(y);return this}),e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(21),a=i(149),h=i(9),u=i(95),l=i(8),f=i(2),c=i(24),d=i(20),v=i(156),p=new n({Extends:h,initialize:function(m){h.call(this);var x=m.sys.game.config,y=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,l.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(f(y,"baseURL",x.loaderBaseURL)),this.setPath(f(y,"path",x.loaderPath)),this.setPrefix(f(y,"prefix",x.loaderPrefix)),this.maxParallelDownloads=f(y,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=v(f(y,"responseType",x.loaderResponseType),f(y,"async",x.loaderAsync),f(y,"user",x.loaderUser),f(y,"password",x.loaderPassword),f(y,"timeout",x.loaderTimeout),f(y,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=f(y,"crossOrigin",x.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=o.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(d.BOOT,this.boot,this),m.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];this.keyExists(x)||(this.list.set(x),this.emit(u.ADD,x.key,x.type,this,x),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var m=g.hasCacheConflict();return m||this.list.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),!m&&this.isLoading()&&(this.inflight.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1}),this.queue.iterate(function(x){if(x.type===g.type&&x.key===g.key)return m=!0,!1})),m},addPack:function(g,m){m&&g.hasOwnProperty(m)&&(g={packKey:g[m]});var x=0,y=this.baseURL,T=this.path,C=this.prefix;for(var S in g)if(Object.prototype.hasOwnProperty.call(g,S)){var E=g[S],P=f(E,"baseURL",y),M=f(E,"path",T),R=f(E,"prefix",C),A=f(E,"files",null),O=f(E,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(P),this.setPath(M),this.setPrefix(R);for(var b=0;b<A.length;b++){var w=A[b],I=w.hasOwnProperty("type")?w.type:O;this[I]&&(this[I](w),x++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(C),x>0},isLoading:function(){return this.state===o.LOADER_LOADING||this.state===o.LOADER_PROCESSING},isReady:function(){return this.state===o.LOADER_IDLE||this.state===o.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(u.START,this),this.list.size===0?this.loadComplete():(this.state=o.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(d.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(u.PROGRESS,this.progress)},update:function(){this.state===o.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===o.FILE_POPULATED||g.state===o.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,m){this.inflight&&(this.inflight.delete(g),this.updateProgress(),m?(this.totalComplete++,this.queue.set(g),this.emit(u.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(u.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===o.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===o.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(u.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=o.LOADER_COMPLETE,this.systems.events.off(d.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(u.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,m){return this.save(JSON.stringify(g),m)},save:function(g,m,x){m===void 0&&(m="file.json"),x===void 0&&(x="application/json");var y=new Blob([g],{type:x}),T=URL.createObjectURL(y),C=document.createElement("a");return C.download=m,C.textContent="Download "+m,C.href=T,C.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,m=this.systems.settings.loader;this.setBaseURL(f(m,"baseURL",g.loaderBaseURL)),this.setPath(f(m,"path",g.loaderPath)),this.setPrefix(f(m,"prefix",g.loaderPrefix)),this.state=o.LOADER_IDLE},shutdown:function(){this.reset(),this.state=o.LOADER_SHUTDOWN,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=o.LOADER_DESTROYED,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});c.register("Loader",p,"load"),e.exports=p},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(62),o=i(17),a={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(36),a=i(50),h=i(353),u=i(521),l=i(2),f=i(127),c=i(523),d=i(244),v=i(24),p=i(20),g=i(3),m=i(526),x=new n({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new u(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new u(this.world));var y=this.systems.events;l(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,C=f(l(T,"arcade",{}),l(y,"arcade",{}));return C},overlap:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!0)},collide:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!1)},collideTiles:function(y,T,C,S,E){return this.world.collideTiles(y,T,C,S,E)},overlapTiles:function(y,T,C,S,E){return this.world.overlapTiles(y,T,C,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,C,S,E,P){S===void 0&&(S=60);var M=Math.atan2(C-y.y,T-y.x);return y.body.acceleration.setToPolar(M,S),E!==void 0&&P!==void 0&&y.body.maxVelocity.set(E,P),M},accelerateToObject:function(y,T,C,S,E){return this.accelerateTo(y,T.x,T.y,C,S,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var C=Number.MAX_VALUE,S=null,E=y.x,P=y.y,M=T.length,R=0;R<M;R++){var A=T[R],O=A.body||A;if(!(y===A||y===O||y===O.gameObject||y===O.center)){var b=h(E,P,O.center.x,O.center.y);b<C&&(S=A,C=b)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var C=-1,S=null,E=y.x,P=y.y,M=T.length,R=0;R<M;R++){var A=T[R],O=A.body||A;if(!(y===A||y===O||y===O.gameObject||y===O.center)){var b=h(E,P,O.center.x,O.center.y);b>C&&(S=A,C=b)}}return S},moveTo:function(y,T,C,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var P=Math.atan2(C-y.y,T-y.x);return E>0&&(S=a(y.x,y.y,T,C)/(E/1e3)),y.body.velocity.setToPolar(P,S),P},moveToObject:function(y,T,C,S){return this.moveTo(y,T.x,T.y,C,S)},velocityFromAngle:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(o(y),T)},velocityFromRotation:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(y,T)},overlapRect:function(y,T,C,S,E,P){return d(this.world,y,T,C,S,E,P)},overlapCirc:function(y,T,C,S,E){return c(this.world,y,T,C,S,E)},shutdown:function(){if(this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",x,"arcadePhysics"),e.exports=x},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAcceleration:function(n,o){return this.body.acceleration.set(n,o),this},setAccelerationX:function(n){return this.body.acceleration.x=n,this},setAccelerationY:function(n){return this.body.acceleration.y=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAngularVelocity:function(n){return this.body.angularVelocity=n,this},setAngularAcceleration:function(n){return this.body.angularAcceleration=n,this},setAngularDrag:function(n){return this.body.angularDrag=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(n,o){return this.body.bounce.set(n,o),this},setBounceX:function(n){return this.body.bounce.x=n,this},setBounceY:function(n){return this.body.bounce.y=n,this},setCollideWorldBounds:function(n,o,a){return this.body.setCollideWorldBounds(n,o,a),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDebug:function(n,o,a){return this.debugShowBody=n,this.debugShowVelocity=o,this.debugBodyColor=a,this},setDebugBodyColor:function(n){return this.body.debugBodyColor=n,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(n){this.body.debugShowBody=n}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(n){this.body.debugShowVelocity=n}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(n){this.body.debugBodyColor=n}}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDrag:function(n,o){return this.body.drag.set(n,o),this},setDragX:function(n){return this.body.drag.x=n,this},setDragY:function(n){return this.body.drag.y=n,this},setDamping:function(n){return this.body.useDamping=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={enableBody:function(n,o,a,h,u){return n&&this.body.reset(o,a),h&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(n,o){return n===void 0&&(n=!1),o===void 0&&(o=!1),this.body.stop(),this.body.enable=!1,n&&(this.body.gameObject.active=!1),o&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(n,o){return this.body.friction.set(n,o),this},setFrictionX:function(n){return this.body.friction.x=n,this},setFrictionY:function(n){return this.body.friction.y=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setGravity:function(n,o){return this.body.gravity.set(n,o),this},setGravityX:function(n){return this.body.gravity.x=n,this},setGravityY:function(n){return this.body.gravity.y=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setImmovable:function(n){return n===void 0&&(n=!0),this.body.immovable=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setMass:function(n){return this.body.mass=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setPushable:function(n){return n===void 0&&(n=!0),this.body.pushable=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setOffset:function(n,o){return this.body.setOffset(n,o),this},setSize:function(n,o,a){return this.body.setSize(n,o,a),this},setBodySize:function(n,o,a){return this.body.setSize(n,o,a),this},setCircle:function(n,o,a){return this.body.setCircle(n,o,a),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setVelocity:function(n,o){return this.body.setVelocity(n,o),this},setVelocityX:function(n){return this.body.setVelocityX(n),this},setVelocityY:function(n){return this.body.setVelocityY(n),this},setMaxVelocity:function(n,o){return this.body.maxVelocity.set(n,o),this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,n,o,a,h,u,l,f,c,d,v,p,g,m,x,y,T,C=function(A,O,b){i=A,n=O;var w=i.velocity.x,I=n.velocity.x;return o=i.pushable,c=i._dx<0,d=i._dx>0,v=i._dx===0,x=Math.abs(i.right-n.x)<=Math.abs(n.right-i.x),l=I-w*i.bounce.x,a=n.pushable,p=n._dx<0,g=n._dx>0,m=n._dx===0,y=!x,f=w-I*n.bounce.x,T=Math.abs(b),S()},S=function(){return d&&x&&n.blocked.right?(i.processX(-T,l,!1,!0),1):c&&y&&n.blocked.left?(i.processX(T,l,!0),1):g&&y&&i.blocked.right?(n.processX(-T,f,!1,!0),2):p&&x&&i.blocked.left?(n.processX(T,f,!0),2):0},E=function(){var A=i.velocity.x,O=n.velocity.x,b=Math.sqrt(O*O*n.mass/i.mass)*(O>0?1:-1),w=Math.sqrt(A*A*i.mass/n.mass)*(A>0?1:-1),I=(b+w)*.5;return b-=I,w-=I,h=I+b*i.bounce.x,u=I+w*n.bounce.x,c&&y?P(0):p&&x?P(1):d&&x?P(2):g&&y?P(3):!1},P=function(A){if(o&&a)T*=.5,A===0||A===3?(i.processX(T,h),n.processX(-T,u)):(i.processX(-T,h),n.processX(T,u));else if(o&&!a)A===0||A===3?i.processX(T,l,!0):i.processX(-T,l,!1,!0);else if(!o&&a)A===0||A===3?n.processX(-T,f,!1,!0):n.processX(T,f,!0);else{var O=T*.5;A===0?m?(i.processX(T,0,!0),n.processX(0,null,!1,!0)):g?(i.processX(O,0,!0),n.processX(-O,0,!1,!0)):(i.processX(O,n.velocity.x,!0),n.processX(-O,null,!1,!0)):A===1?v?(i.processX(0,null,!1,!0),n.processX(T,0,!0)):d?(i.processX(-O,0,!1,!0),n.processX(O,0,!0)):(i.processX(-O,null,!1,!0),n.processX(O,i.velocity.x,!0)):A===2?m?(i.processX(-T,0,!1,!0),n.processX(0,null,!0)):p?(i.processX(-O,0,!1,!0),n.processX(O,0,!0)):(i.processX(-O,n.velocity.x,!1,!0),n.processX(O,null,!0)):A===3&&(v?(i.processX(0,null,!0),n.processX(-T,0,!1,!0)):c?(i.processX(O,0,!0),n.processX(-O,0,!1,!0)):(i.processX(O,n.velocity.y,!0),n.processX(-O,null,!1,!0)))}return!0},M=function(A){A===1?n.velocity.x=0:x?n.processX(T,f,!0):n.processX(-T,f,!1,!0),i.moves&&(n.y+=(i.y-i.prev.y)*i.friction.y,n._dy=n.y-n.prev.y)},R=function(A){A===2?i.velocity.x=0:y?i.processX(T,l,!0):i.processX(-T,l,!1,!0),n.moves&&(i.y+=(n.y-n.prev.y)*n.friction.y,i._dy=i.y-i.prev.y)};e.exports={BlockCheck:S,Check:E,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:R}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,n,o,a,h,u,l,f,c,d,v,p,g,m,x,y,T,C=function(A,O,b){i=A,n=O;var w=i.velocity.y,I=n.velocity.y;return o=i.pushable,c=i._dy<0,d=i._dy>0,v=i._dy===0,x=Math.abs(i.bottom-n.y)<=Math.abs(n.bottom-i.y),l=I-w*i.bounce.y,a=n.pushable,p=n._dy<0,g=n._dy>0,m=n._dy===0,y=!x,f=w-I*n.bounce.y,T=Math.abs(b),S()},S=function(){return d&&x&&n.blocked.down?(i.processY(-T,l,!1,!0),1):c&&y&&n.blocked.up?(i.processY(T,l,!0),1):g&&y&&i.blocked.down?(n.processY(-T,f,!1,!0),2):p&&x&&i.blocked.up?(n.processY(T,f,!0),2):0},E=function(){var A=i.velocity.y,O=n.velocity.y,b=Math.sqrt(O*O*n.mass/i.mass)*(O>0?1:-1),w=Math.sqrt(A*A*i.mass/n.mass)*(A>0?1:-1),I=(b+w)*.5;return b-=I,w-=I,h=I+b*i.bounce.y,u=I+w*n.bounce.y,c&&y?P(0):p&&x?P(1):d&&x?P(2):g&&y?P(3):!1},P=function(A){if(o&&a)T*=.5,A===0||A===3?(i.processY(T,h),n.processY(-T,u)):(i.processY(-T,h),n.processY(T,u));else if(o&&!a)A===0||A===3?i.processY(T,l,!0):i.processY(-T,l,!1,!0);else if(!o&&a)A===0||A===3?n.processY(-T,f,!1,!0):n.processY(T,f,!0);else{var O=T*.5;A===0?m?(i.processY(T,0,!0),n.processY(0,null,!1,!0)):g?(i.processY(O,0,!0),n.processY(-O,0,!1,!0)):(i.processY(O,n.velocity.y,!0),n.processY(-O,null,!1,!0)):A===1?v?(i.processY(0,null,!1,!0),n.processY(T,0,!0)):d?(i.processY(-O,0,!1,!0),n.processY(O,0,!0)):(i.processY(-O,null,!1,!0),n.processY(O,i.velocity.y,!0)):A===2?m?(i.processY(-T,0,!1,!0),n.processY(0,null,!0)):p?(i.processY(-O,0,!1,!0),n.processY(O,0,!0)):(i.processY(-O,n.velocity.y,!1,!0),n.processY(O,null,!0)):A===3&&(v?(i.processY(0,null,!0),n.processY(-T,0,!1,!0)):c?(i.processY(O,0,!0),n.processY(-O,0,!1,!0)):(i.processY(O,n.velocity.y,!0),n.processY(-O,null,!1,!0)))}return!0},M=function(A){A===1?n.velocity.y=0:x?n.processY(T,f,!0):n.processY(-T,f,!1,!0),i.moves&&(n.x+=(i.x-i.prev.x)*i.friction.x,n._dx=n.x-n.prev.x)},R=function(A){A===2?i.velocity.y=0:y?i.processY(T,l,!0):i.processY(-T,l,!1,!0),n.moves&&(i.x+=(n.x-n.prev.x)*n.friction.x,i._dx=i.x-i.prev.x)};e.exports={BlockCheck:S,Check:E,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:R}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(3),a=new n({initialize:function(){this.boundsCenter=new o,this.centerDiff=new o},parseBody:function(h){if(h=h.hasOwnProperty("body")?h.body:h,!h.hasOwnProperty("bounds")||!h.hasOwnProperty("centerOfMass"))return!1;var u=this.boundsCenter,l=this.centerDiff,f=h.bounds.max.x-h.bounds.min.x,c=h.bounds.max.y-h.bounds.min.y,d=f*h.centerOfMass.x,v=c*h.centerOfMass.y;return u.set(f/2,c/2),l.set(d-u.x,v-u.y),!0},getTopLeft:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u+f.x+c.x,l+f.y+c.y)}return!1},getTopCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u+c.x,l+f.y+c.y)}return!1},getTopRight:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u-(f.x-c.x),l+f.y+c.y)}return!1},getLeftCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u+f.x+c.x,l+c.y)}return!1},getCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.centerDiff;return new o(u+f.x,l+f.y)}return!1},getRightCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u-(f.x-c.x),l+c.y)}return!1},getBottomLeft:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u+f.x+c.x,l-(f.y-c.y))}return!1},getBottomCenter:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u+c.x,l-(f.y-c.y))}return!1},getBottomRight:function(h,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(h)){var f=this.boundsCenter,c=this.centerDiff;return new o(u-(f.x-c.x),l-(f.y-c.y))}return!1}});e.exports=a},function(e,r){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:A,quickDecomp:I,isSimple:b,removeCollinearPoints:Y,removeDuplicatePoints:z,makeCCW:x};function i(F,L,D){D=D||0;var B=[0,0],G,N,X,U,H,$,Z;return G=F[1][1]-F[0][1],N=F[0][0]-F[1][0],X=G*F[0][0]+N*F[0][1],U=L[1][1]-L[0][1],H=L[0][0]-L[1][0],$=U*L[0][0]+H*L[0][1],Z=G*H-U*N,V(Z,0,D)||(B[0]=(H*X-N*$)/Z,B[1]=(G*$-U*X)/Z),B}function n(F,L,D,B){var G=L[0]-F[0],N=L[1]-F[1],X=B[0]-D[0],U=B[1]-D[1];if(X*N-U*G===0)return!1;var H=(G*(D[1]-F[1])+N*(F[0]-D[0]))/(X*N-U*G),$=(X*(F[1]-D[1])+U*(D[0]-F[0]))/(U*G-X*N);return H>=0&&H<=1&&$>=0&&$<=1}function o(F,L,D){return(L[0]-F[0])*(D[1]-F[1])-(D[0]-F[0])*(L[1]-F[1])}function a(F,L,D){return o(F,L,D)>0}function h(F,L,D){return o(F,L,D)>=0}function u(F,L,D){return o(F,L,D)<0}function l(F,L,D){return o(F,L,D)<=0}var f=[],c=[];function d(F,L,D,B){if(B){var G=f,N=c;G[0]=L[0]-F[0],G[1]=L[1]-F[1],N[0]=D[0]-L[0],N[1]=D[1]-L[1];var X=G[0]*N[0]+G[1]*N[1],U=Math.sqrt(G[0]*G[0]+G[1]*G[1]),H=Math.sqrt(N[0]*N[0]+N[1]*N[1]),$=Math.acos(X/(U*H));return $<B}else return o(F,L,D)===0}function v(F,L){var D=L[0]-F[0],B=L[1]-F[1];return D*D+B*B}function p(F,L){var D=F.length;return F[L<0?L%D+D:L%D]}function g(F){F.length=0}function m(F,L,D,B){for(var G=D;G<B;G++)F.push(L[G])}function x(F){for(var L=0,D=F,B=1;B<F.length;++B)(D[B][1]<D[L][1]||D[B][1]===D[L][1]&&D[B][0]>D[L][0])&&(L=B);return a(p(F,L-1),p(F,L),p(F,L+1))?!1:(y(F),!0)}function y(F){for(var L=[],D=F.length,B=0;B!==D;B++)L.push(F.pop());for(var B=0;B!==D;B++)F[B]=L[B]}function T(F,L){return u(p(F,L-1),p(F,L),p(F,L+1))}var C=[],S=[];function E(F,L,D){var B,G,N=C,X=S;if(h(p(F,L+1),p(F,L),p(F,D))&&l(p(F,L-1),p(F,L),p(F,D)))return!1;G=v(p(F,L),p(F,D));for(var U=0;U!==F.length;++U)if(!((U+1)%F.length===L||U===L)&&h(p(F,L),p(F,D),p(F,U+1))&&l(p(F,L),p(F,D),p(F,U))&&(N[0]=p(F,L),N[1]=p(F,D),X[0]=p(F,U),X[1]=p(F,U+1),B=i(N,X),v(p(F,L),B)<G))return!1;return!0}function P(F,L,D){for(var B=0;B!==F.length;++B)if(!(B===L||B===D||(B+1)%F.length===L||(B+1)%F.length===D)&&n(p(F,L),p(F,D),p(F,B),p(F,B+1)))return!1;return!0}function M(F,L,D,B){var G=B||[];if(g(G),L<D)for(var N=L;N<=D;N++)G.push(F[N]);else{for(var N=0;N<=D;N++)G.push(F[N]);for(var N=L;N<F.length;N++)G.push(F[N])}return G}function R(F){for(var L=[],D=[],B=[],G=[],N=Number.MAX_VALUE,X=0;X<F.length;++X)if(T(F,X)){for(var U=0;U<F.length;++U)if(E(F,X,U)){D=R(M(F,X,U,G)),B=R(M(F,U,X,G));for(var H=0;H<B.length;H++)D.push(B[H]);D.length<N&&(L=D,N=D.length,L.push([p(F,X),p(F,U)]))}}return L}function A(F){var L=R(F);return L.length>0?O(F,L):[F]}function O(F,L){if(L.length===0)return[F];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var D=[F],B=0;B<L.length;B++)for(var G=L[B],N=0;N<D.length;N++){var X=D[N],U=O(X,G);if(U){D.splice(N,1),D.push(U[0],U[1]);break}}return D}else{var G=L,B=F.indexOf(G[0]),N=F.indexOf(G[1]);return B!==-1&&N!==-1?[M(F,B,N),M(F,N,B)]:!1}}function b(F){var L=F,D;for(D=0;D<L.length-1;D++)for(var B=0;B<D-1;B++)if(n(L[D],L[D+1],L[B],L[B+1]))return!1;for(D=1;D<L.length-2;D++)if(n(L[0],L[L.length-1],L[D],L[D+1]))return!1;return!0}function w(F,L,D,B,G){G=G||0;var N=L[1]-F[1],X=F[0]-L[0],U=N*F[0]+X*F[1],H=B[1]-D[1],$=D[0]-B[0],Z=H*D[0]+$*D[1],J=N*$-H*X;return V(J,0,G)?[0,0]:[($*U-X*Z)/J,(N*Z-H*U)/J]}function I(F,L,D,B,G,N,X){N=N||100,X=X||0,G=G||25,L=typeof L<"u"?L:[],D=D||[],B=B||[];var U=[0,0],H=[0,0],$=[0,0],Z=0,J=0,Q=0,_=0,j=0,tt=0,lt=0,rt=[],et=[],q=F,vt=F;if(vt.length<3)return L;if(X++,X>N)return console.warn("quickDecomp: max level ("+N+") reached."),L;for(var it=0;it<F.length;++it)if(T(q,it)){D.push(q[it]),Z=J=Number.MAX_VALUE;for(var ot=0;ot<F.length;++ot)a(p(q,it-1),p(q,it),p(q,ot))&&l(p(q,it-1),p(q,it),p(q,ot-1))&&($=w(p(q,it-1),p(q,it),p(q,ot),p(q,ot-1)),u(p(q,it+1),p(q,it),$)&&(Q=v(q[it],$),Q<J&&(J=Q,H=$,tt=ot))),a(p(q,it+1),p(q,it),p(q,ot+1))&&l(p(q,it+1),p(q,it),p(q,ot))&&($=w(p(q,it+1),p(q,it),p(q,ot),p(q,ot+1)),a(p(q,it-1),p(q,it),$)&&(Q=v(q[it],$),Q<Z&&(Z=Q,U=$,j=ot)));if(tt===(j+1)%F.length)$[0]=(H[0]+U[0])/2,$[1]=(H[1]+U[1])/2,B.push($),it<j?(m(rt,q,it,j+1),rt.push($),et.push($),tt!==0&&m(et,q,tt,q.length),m(et,q,0,it+1)):(it!==0&&m(rt,q,it,q.length),m(rt,q,0,j+1),rt.push($),et.push($),m(et,q,tt,it+1));else{if(tt>j&&(j+=F.length),_=Number.MAX_VALUE,j<tt)return L;for(var ot=tt;ot<=j;++ot)h(p(q,it-1),p(q,it),p(q,ot))&&l(p(q,it+1),p(q,it),p(q,ot))&&(Q=v(p(q,it),p(q,ot)),Q<_&&P(q,it,ot)&&(_=Q,lt=ot%F.length));it<lt?(m(rt,q,it,lt+1),lt!==0&&m(et,q,lt,vt.length),m(et,q,0,it+1)):(it!==0&&m(rt,q,it,vt.length),m(rt,q,0,lt+1),m(et,q,lt,it+1))}return rt.length<et.length?(I(rt,L,D,B,G,N,X),I(et,L,D,B,G,N,X)):(I(et,L,D,B,G,N,X),I(rt,L,D,B,G,N,X)),L}return L.push(F),L}function Y(F,L){for(var D=0,B=F.length-1;F.length>3&&B>=0;--B)d(p(F,B-1),p(F,B),p(F,B+1),L)&&(F.splice(B%F.length,1),D++);return D}function z(F,L){for(var D=F.length-1;D>=1;--D)for(var B=F[D],G=D-1;G>=0;--G)if(W(B,F[G],L)){F.splice(D,1);continue}}function V(F,L,D){return D=D||0,Math.abs(F-L)<=D}function W(F,L,D){return V(F[0],L[0],D)&&V(F[1],L[1],D)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(0),a=i(591),h=i(128),u=i(592),l=i(1395),f=i(1396),c=i(1397),d=i(593),v=i(589),p=i(590),g=i(1398),m=i(64),x=new o({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,C,S,E){var P=n.rectangle(y,T,C,S,E);return this.world.add(P),P},trapezoid:function(y,T,C,S,E,P){var M=n.trapezoid(y,T,C,S,E,P);return this.world.add(M),M},circle:function(y,T,C,S,E){var P=n.circle(y,T,C,S,E);return this.world.add(P),P},polygon:function(y,T,C,S,E){var P=n.polygon(y,T,C,S,E);return this.world.add(P),P},fromVertices:function(y,T,C,S,E,P,M){typeof C=="string"&&(C=m.fromPath(C));var R=n.fromVertices(y,T,C,S,E,P,M);return this.world.add(R),R},fromPhysicsEditor:function(y,T,C,S,E){E===void 0&&(E=!0);var P=v.parseBody(y,T,C,S);return E&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(y,T,C,S,E,P){S===void 0&&(S=1),E===void 0&&(E={}),P===void 0&&(P=!0);for(var M=C.getElementsByTagName("path"),R=[],A=0;A<M.length;A++){var O=u.pathToVertices(M[A],30);S!==1&&m.scale(O,S,S),R.push(O)}var b=n.fromVertices(y,T,R,E);return P&&this.world.add(b),b},fromJSON:function(y,T,C,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var P=p.parseBody(y,T,C,S);return P&&E&&this.world.add(P),P},imageStack:function(y,T,C,S,E,P,M,R,A){M===void 0&&(M=0),R===void 0&&(R=0),A===void 0&&(A={});var O=this.world,b=this.sys.displayList;A.addToWorld=!1;var w=a.stack(C,S,E,P,M,R,function(I,Y){var z=new f(O,I,Y,y,T,A);return b.add(z),z.body});return O.add(w),w},stack:function(y,T,C,S,E,P,M){var R=a.stack(y,T,C,S,E,P,M);return this.world.add(R),R},pyramid:function(y,T,C,S,E,P,M){var R=a.pyramid(y,T,C,S,E,P,M);return this.world.add(R),R},chain:function(y,T,C,S,E,P){return a.chain(y,T,C,S,E,P)},mesh:function(y,T,C,S,E){return a.mesh(y,T,C,S,E)},newtonsCradle:function(y,T,C,S,E){var P=a.newtonsCradle(y,T,C,S,E);return this.world.add(P),P},car:function(y,T,C,S,E){var P=a.car(y,T,C,S,E);return this.world.add(P),P},softBody:function(y,T,C,S,E,P,M,R,A,O){var b=a.softBody(y,T,C,S,E,P,M,R,A,O);return this.world.add(b),b},joint:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},spring:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},constraint:function(y,T,C,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(C)||(E.length=C),E.stiffness=S;var P=h.create(E);return this.world.add(P),P},worldConstraint:function(y,T,C,S){C===void 0&&(C=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=C;var E=h.create(S);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,C,S,E){var P=new f(this.world,y,T,C,S,E);return this.sys.displayList.add(P),P},tileBody:function(y,T){return new d(this.world,y,T)},sprite:function(y,T,C,S,E){var P=new c(this.world,y,T,C,S,E);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(y,T,C){return l(this.world,y,T,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=x},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(249),o=i(2),a=i(3);function h(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}var u=function(l,f,c,d){c===void 0&&(c={}),d===void 0&&(d=!0);var v=f.x,p=f.y;f.body={temp:!0,position:{x:v,y:p}};var g=[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity];if(g.forEach(function(x){for(var y in x)h(x[y])?Object.defineProperty(f,y,{get:x[y].get,set:x[y].set}):Object.defineProperty(f,y,{value:x[y]})}),f.world=l,f._tempVec2=new a(v,p),c.hasOwnProperty("type")&&c.type==="body")f.setExistingBody(c,d);else{var m=o(c,"shape",null);m||(m="rectangle"),c.addToWorld=d,f.setBody(m,c)}return f};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(249),a=i(15),h=i(2),u=i(125),l=i(167),f=i(3),c=new n({Extends:u,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,l],initialize:function(v,p,g,m,x,y){a.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new f(p,g);var T=h(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(164),o=i(0),a=i(249),h=i(15),u=i(2),l=i(167),f=i(73),c=i(3),d=new o({Extends:f,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,l],initialize:function(p,g,m,x,y,T){h.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new n(this),this.setTexture(x,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new c(g,m);var C=u(T,"shape",null);C?this.setBody(C,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,m),this.initPipeline()}});e.exports=d},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(84),o=i(0),a=i(118),h=i(128),u=i(273),l=i(272),f=i(51),c=i(127),d=i(165),v=i(3),p=i(64),g=new o({initialize:function(x,y,T){T===void 0&&(T={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=x,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=h.create(c(T,C)),this.world.on(l.BEFORE_UPDATE,this.update,this),x.sys.input.on(f.POINTER_DOWN,this.onDown,this),x.sys.input.on(f.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,y=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var T=a.allBodies(this.world.localWorld),C=0;C<T.length;C++){var S=T[C];if(!S.ignorePointer&&n.contains(S.bounds,x)&&u.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,x))return this.world.emit(l.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var y=this.constraint,T=m.parts.length,C=T>1?1:0,S=C;S<T;S++){var E=m.parts[S];if(p.contains(E.vertices,x))return y.pointA=x,y.pointB={x:x.x-m.position.x,y:x.y-m.position.y},y.bodyB=m,y.angleB=m.angle,d.set(m,!1),this.part=E,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(!this.active||!m){x&&this.stopDrag();return}if(!m.isDown&&x){this.stopDrag();return}else if(m.isDown){if(!x&&!this.getBody(m))return;x=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(m.x,m.y,y),T.pointA.x=y.x,T.pointA.y=y.y,d.set(x,!1),this.world.emit(l.DRAG,x,this)}},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(l.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(f.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(f.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,r,i){var n={};e.exports=n;var o=i(595),a=i(32);(function(){n.name="matter-js",n.version="0.14.2",n.uses=[],n.used=[],n.use=function(){o.use(n,Array.prototype.slice.call(arguments))},n.before=function(h,u){return h=h.replace(/^Matter./,""),a.chainPathBefore(n,h,u)},n.after=function(h,u){return h=h.replace(/^Matter./,""),a.chainPathAfter(n,h,u)}})()},function(e,r,i){var n={};e.exports=n;var o=i(83),a=i(274),h=i(84),u=i(86),l=i(64);(function(){n.collides=function(f,c){for(var d=[],v=0;v<c.length;v++){var p=c[v];if(f!==p&&h.overlaps(p.bounds,f.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(h.overlaps(m.bounds,f.bounds)){var x=a.collides(m,f);if(x.collided){d.push(x);break}}}}return d},n.ray=function(f,c,d,v){v=v||1e-100;for(var p=o.angle(c,d),g=o.magnitude(o.sub(c,d)),m=(d.x+c.x)*.5,x=(d.y+c.y)*.5,y=u.rectangle(m,x,g,v,{angle:p}),T=n.collides(y,f),C=0;C<T.length;C+=1){var S=T[C];S.body=S.bodyB=S.bodyA}return T},n.region=function(f,c,d){for(var v=[],p=0;p<f.length;p++){var g=f[p],m=h.overlaps(g.bounds,c);(m&&!d||!m&&d)&&v.push(g)}return v},n.point=function(f,c){for(var d=[],v=0;v<f.length;v++){var p=f[v];if(h.contains(p.bounds,c))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var m=p.parts[g];if(h.contains(m.bounds,c)&&l.contains(m.vertices,c)){d.push(p);break}}}return d}})()},function(e,r,i){var n={};e.exports=n;var o=i(596),a=i(165),h=i(599),u=i(598),l=i(1523),f=i(597),c=i(166),d=i(118),v=i(128),p=i(32),g=i(41);(function(){n.create=function(m,x){x=p.isElement(m)?x:m,m=p.isElement(m)?m:null,x=x||{},(m||x.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:f}},T=p.extend(y,x);return T.world=x.world||o.create(T.world),T.pairs=u.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=l.create(T.metrics),T},n.update=function(m,x,y){x=x||1e3/60,y=y||1;var T=m.world,C=m.timing,S=m.broadphase,E=[],P;C.timestamp+=x*C.timeScale;var M={timestamp:C.timestamp};c.trigger(m,"beforeUpdate",M);var R=d.allBodies(T),A=d.allConstraints(T);for(l.reset(m.metrics),m.enableSleeping&&a.update(R,C.timeScale),n._bodiesApplyGravity(R,T.gravity),n._bodiesUpdate(R,x,C.timeScale,y,T.bounds),v.preSolveAll(R),P=0;P<m.constraintIterations;P++)v.solveAll(A,C.timeScale);v.postSolveAll(R),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,R,m,T.isModified),E=S.pairsList):E=R,T.isModified&&d.setModified(T,!1,!1,!0);var O=S.detector(E,m),b=m.pairs,w=C.timestamp;for(u.update(b,O,w),u.removeOld(b,w),m.enableSleeping&&a.afterCollisions(b.list,C.timeScale),b.collisionStart.length>0&&c.trigger(m,"collisionStart",{pairs:b.collisionStart}),h.preSolvePosition(b.list),P=0;P<m.positionIterations;P++)h.solvePosition(b.list,R,C.timeScale);for(h.postSolvePosition(R),v.preSolveAll(R),P=0;P<m.constraintIterations;P++)v.solveAll(A,C.timeScale);for(v.postSolveAll(R),h.preSolveVelocity(b.list),P=0;P<m.velocityIterations;P++)h.solveVelocity(b.list,C.timeScale);return b.collisionActive.length>0&&c.trigger(m,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&c.trigger(m,"collisionEnd",{pairs:b.collisionEnd}),l.update(m.metrics,m),n._bodiesClearForces(R),c.trigger(m,"afterUpdate",M),m},n.merge=function(m,x){if(p.extend(m,x),x.world){m.world=x.world,n.clear(m);for(var y=d.allBodies(m.world),T=0;T<y.length;T++){var C=y[T];a.set(C,!1),C.id=p.nextId()}}},n.clear=function(m){var x=m.world;u.clear(m.pairs);var y=m.broadphase;if(y.controller){var T=d.allBodies(x);y.controller.clear(y),y.controller.update(y,T,m,!0)}},n._bodiesClearForces=function(m){for(var x=0;x<m.length;x++){var y=m[x];y.force.x=0,y.force.y=0,y.torque=0}},n._bodiesApplyGravity=function(m,x){var y=typeof x.scale<"u"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var T=0;T<m.length;T++){var C=m[T];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.x+=C.mass*x.x*y*C.gravityScale.x,C.force.y+=C.mass*x.y*y*C.gravityScale.y)}},n._bodiesUpdate=function(m,x,y,T,C){for(var S=0;S<m.length;S++){var E=m[S];E.isStatic||E.isSleeping||g.update(E,x,y,T)}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),a=i(0),h=i(32),u=i(118),l=i(1401),f=i(9),c=i(272),d=i(2),v=i(6),p=i(41),g=i(166),m=i(593),x=i(596),y=i(83),T=new a({Extends:f,initialize:function(S,E){f.call(this),this.scene=S,this.engine=l.create(E),this.localWorld=this.engine.world;var P=v(E,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(E,"enabled",!0),this.correction=v(E,"correction",1),this.getDelta=v(E,"getDelta",this.update60Hz);var M=d(E,"runner",{}),R=d(M,"fps",!1),A=d(M,"fps",60),O=d(M,"delta",1e3/A),b=d(M,"deltaMin",1e3/A),w=d(M,"deltaMax",1e3/(A*.5));R||(A=1e3/O),this.runner={fps:A,correction:d(M,"correction",1),deltaSampleSize:d(M,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:d(M,"isFixed",!1),delta:O,deltaMin:b,deltaMax:w},this.autoUpdate=v(E,"autoUpdate",!0);var I=v(E,"debug",!1);if(this.drawDebug=typeof I=="object"?!0:I,this.debugGraphic,this.debugConfig={showAxes:d(I,"showAxes",!1),showAngleIndicator:d(I,"showAngleIndicator",!1),angleColor:d(I,"angleColor",15208787),showBroadphase:d(I,"showBroadphase",!1),broadphaseColor:d(I,"broadphaseColor",16757760),showBounds:d(I,"showBounds",!1),boundsColor:d(I,"boundsColor",16777215),showVelocity:d(I,"showVelocity",!1),velocityColor:d(I,"velocityColor",44783),showCollisions:d(I,"showCollisions",!1),collisionColor:d(I,"collisionColor",16094476),showSeparations:d(I,"showSeparations",!1),separationColor:d(I,"separationColor",16753920),showBody:d(I,"showBody",!0),showStaticBody:d(I,"showStaticBody",!0),showInternalEdges:d(I,"showInternalEdges",!1),renderFill:d(I,"renderFill",!1),renderLine:d(I,"renderLine",!0),fillColor:d(I,"fillColor",1075465),fillOpacity:d(I,"fillOpacity",1),lineColor:d(I,"lineColor",2678297),lineOpacity:d(I,"lineOpacity",1),lineThickness:d(I,"lineThickness",1),staticFillColor:d(I,"staticFillColor",857979),staticLineColor:d(I,"staticLineColor",1255396),showSleeping:d(I,"showSleeping",!1),staticBodySleepOpacity:d(I,"staticBodySleepOpacity",.7),sleepFillColor:d(I,"sleepFillColor",4605510),sleepLineColor:d(I,"sleepLineColor",10066585),showSensors:d(I,"showSensors",!0),sensorFillColor:d(I,"sensorFillColor",857979),sensorLineColor:d(I,"sensorLineColor",1255396),showPositions:d(I,"showPositions",!0),positionSize:d(I,"positionSize",4),positionColor:d(I,"positionColor",14697178),showJoint:d(I,"showJoint",!0),jointColor:d(I,"jointColor",14737474),jointLineOpacity:d(I,"jointLineOpacity",1),jointLineThickness:d(I,"jointLineThickness",2),pinSize:d(I,"pinSize",4),pinColor:d(I,"pinColor",4382944),springColor:d(I,"springColor",14697184),anchorColor:d(I,"anchorColor",15724527),anchorSize:d(I,"anchorSize",4),showConvexHulls:d(I,"showConvexHulls",!1),hullColor:d(I,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(E,"setBounds",!1)){var Y=E.setBounds;if(typeof Y=="boolean")this.setBounds();else{var z=d(Y,"x",0),V=d(Y,"y",0),W=d(Y,"width",S.sys.scale.width),F=d(Y,"height",S.sys.scale.height),L=d(Y,"thickness",64),D=d(Y,"left",!0),B=d(Y,"right",!0),G=d(Y,"top",!0),N=d(Y,"bottom",!0);this.setBounds(z,V,W,F,L,D,B,G,N)}}},setCompositeRenderStyle:function(C){var S=C.bodies,E=C.constraints,P=C.composites,M,R,A;for(M=0;M<S.length;M++)R=S[M],A=R.render,this.setBodyRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.fillColor,A.fillOpacity);for(M=0;M<E.length;M++)R=E[M],A=R.render,this.setConstraintRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.pinSize,A.anchorColor,A.anchorSize);for(M=0;M<P.length;M++)R=P[M],this.setCompositeRenderStyle(R);return this},setBodyRenderStyle:function(C,S,E,P,M,R){var A=C.render,O=this.debugConfig;return A?(S==null&&(S=C.isStatic?O.staticLineColor:O.lineColor),E==null&&(E=O.lineOpacity),P==null&&(P=O.lineThickness),M==null&&(M=C.isStatic?O.staticFillColor:O.fillColor),R==null&&(R=O.fillOpacity),S!==!1&&(A.lineColor=S),E!==!1&&(A.lineOpacity=E),P!==!1&&(A.lineThickness=P),M!==!1&&(A.fillColor=M),R!==!1&&(A.fillOpacity=R),this):this},setConstraintRenderStyle:function(C,S,E,P,M,R,A){var O=C.render,b=this.debugConfig;if(!O)return this;if(S==null){var w=O.type;w==="line"?S=b.jointColor:w==="pin"?S=b.pinColor:w==="spring"&&(S=b.springColor)}return E==null&&(E=b.jointLineOpacity),P==null&&(P=b.jointLineThickness),M==null&&(M=b.pinSize),R==null&&(R=b.anchorColor),A==null&&(A=b.anchorSize),S!==!1&&(O.lineColor=S),E!==!1&&(O.lineOpacity=E),P!==!1&&(O.lineThickness=P),M!==!1&&(O.pinSize=M),R!==!1&&(O.anchorColor=R),A!==!1&&(O.anchorSize=A),this},setEventsProxy:function(){var C=this,S=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(P){C.setCompositeRenderStyle(P)}),g.on(E,"beforeAdd",function(P){for(var M=[].concat(P.object),R=0;R<M.length;R++){var A=M[R],O=A.render;A.type==="body"?C.setBodyRenderStyle(A,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):A.type==="composite"?C.setCompositeRenderStyle(A):A.type==="constraint"&&C.setConstraintRenderStyle(A,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),g.on(E,"beforeAdd",function(P){C.emit(c.BEFORE_ADD,P)}),g.on(E,"afterAdd",function(P){C.emit(c.AFTER_ADD,P)}),g.on(E,"beforeRemove",function(P){C.emit(c.BEFORE_REMOVE,P)}),g.on(E,"afterRemove",function(P){C.emit(c.AFTER_REMOVE,P)}),g.on(S,"beforeUpdate",function(P){C.emit(c.BEFORE_UPDATE,P)}),g.on(S,"afterUpdate",function(P){C.emit(c.AFTER_UPDATE,P)}),g.on(S,"collisionStart",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),C.emit(c.COLLISION_START,P,R,A)}),g.on(S,"collisionActive",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),C.emit(c.COLLISION_ACTIVE,P,R,A)}),g.on(S,"collisionEnd",function(P){var M=P.pairs,R,A;M.length>0&&(R=M[0].bodyA,A=M[0].bodyB),C.emit(c.COLLISION_END,P,R,A)})},setBounds:function(C,S,E,P,M,R,A,O,b){return C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),M===void 0&&(M=64),R===void 0&&(R=!0),A===void 0&&(A=!0),O===void 0&&(O=!0),b===void 0&&(b=!0),this.updateWall(R,"left",C-M,S-M,M,P+M*2),this.updateWall(A,"right",C+E,S-M,M,P+M*2),this.updateWall(O,"top",C,S-M,E,M),this.updateWall(b,"bottom",C,S+P,E,M),this},updateWall:function(C,S,E,P,M,R){var A=this.walls[S];C?(A&&x.remove(this.localWorld,A),E+=M/2,P+=R/2,this.walls[S]=this.create(E,P,M,R,{isStatic:!0,friction:0,frictionStatic:0})):(A&&x.remove(this.localWorld,A),this.walls[S]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,S,E){return C===void 0&&(C=0),S===void 0&&(S=1),this.localWorld.gravity.x=C,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(C,S,E,P,M){var R=n.rectangle(C,S,E,P,M);return x.add(this.localWorld,R),R},add:function(C){return x.add(this.localWorld,C),this},remove:function(C,S){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++){var P=C[E],M=P.body?P.body:P;u.remove(this.localWorld,M,S)}return this},removeConstraint:function(C,S){return u.remove(this.localWorld,C,S),this},convertTilemapLayer:function(C,S){var E=C.layer,P=C.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(P,S),this},convertTiles:function(C,S){if(C.length===0)return this;for(var E=0;E<C.length;E++)new m(this,C[E],S);return this},nextGroup:function(C){return p.nextGroup(C)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(C,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,P=this.runner,M=E.timing,R=this.correction;P.isFixed?S=this.getDelta(C,S):(S=C-P.timePrev||P.delta,P.timePrev=C,P.deltaHistory.push(S),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),S=Math.min.apply(null,P.deltaHistory),S=S<P.deltaMin?P.deltaMin:S,S=S>P.deltaMax?P.deltaMax:S,R=S/P.delta,P.delta=S),P.timeScalePrev!==0&&(R*=M.timeScale/P.timeScalePrev),M.timeScale===0&&(R=0),P.timeScalePrev=M.timeScale,P.correction=R,P.frameCounter+=1,C-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((C-P.counterTimestamp)/1e3),P.counterTimestamp=C,P.frameCounter=0),l.update(E,S,R)}},step:function(C,S){l.update(this.engine,C,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var S=C.hasOwnProperty("body")?C.body:C;return u.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return u.allBodies(this.localWorld)},getAllConstraints:function(){return u.allConstraints(this.localWorld)},getAllComposites:function(){return u.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var C=this.debugConfig,S=this.engine,E=this.debugGraphic,P=u.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(P,E,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(P),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(P,E,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(P,E,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(S.pairs.list,E,C.separationColor),C.showCollisions&&this.renderCollisions(S.pairs.list,E,C.collisionColor)}},renderGrid:function(C,S,E,P){S.lineStyle(1,E,P);for(var M=h.keys(C.buckets),R=0;R<M.length;R++){var A=M[R];if(!(C.buckets[A].length<2)){var O=A.split(/C|R/);S.strokeRect(parseInt(O[1],10)*C.bucketWidth,parseInt(O[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,S,E){S.lineStyle(1,E,1);for(var P=0;P<C.length;P++){var M=C[P];if(M.isActive){var R=M.collision,A=R.bodyA,O=R.bodyB,b=A.position,w=O.position,I=R.penetration,Y=!A.isStatic&&!O.isStatic?4:1;O.isStatic&&(Y=0),S.lineBetween(w.x,w.y,w.x-I.x*Y,w.y-I.y*Y),Y=!A.isStatic&&!O.isStatic?4:1,A.isStatic&&(Y=0),S.lineBetween(b.x,b.y,b.x-I.x*Y,b.y-I.y*Y)}}return this},renderCollisions:function(C,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var P,M;for(P=0;P<C.length;P++)if(M=C[P],!!M.isActive)for(var R=0;R<M.activeContacts.length;R++){var A=M.activeContacts[R],O=A.vertex;S.fillRect(O.x-2,O.y-2,5,5)}for(P=0;P<C.length;P++)if(M=C[P],!!M.isActive){var b=M.collision,w=M.activeContacts;if(w.length>0){var I=w[0].vertex.x,Y=w[0].vertex.y;w.length===2&&(I=(w[0].vertex.x+w[1].vertex.x)/2,Y=(w[0].vertex.y+w[1].vertex.y)/2),b.bodyB===b.supports[0].body||b.bodyA.isStatic?S.lineBetween(I-b.normal.x*8,Y-b.normal.y*8,I,Y):S.lineBetween(I+b.normal.x*8,Y+b.normal.y*8,I,Y)}}return this},renderBodyBounds:function(C,S,E,P){S.lineStyle(1,E,P);for(var M=0;M<C.length;M++){var R=C[M];if(R.render.visible){var A=R.bounds;if(A)S.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var O=R.parts,b=O.length>1?1:0;b<O.length;b++){var w=O[b];S.strokeRect(w.bounds.min.x,w.bounds.min.y,w.bounds.max.x-w.bounds.min.x,w.bounds.max.y-w.bounds.min.y)}}}return this},renderBodyAxes:function(C,S,E,P,M){S.lineStyle(1,P,M);for(var R=0;R<C.length;R++){var A=C[R],O=A.parts;if(A.render.visible){var b,w,I;if(E)for(w=O.length>1?1:0;w<O.length;w++)for(b=O[w],I=0;I<b.axes.length;I++){var Y=b.axes[I];S.lineBetween(b.position.x,b.position.y,b.position.x+Y.x*20,b.position.y+Y.y*20)}else for(w=O.length>1?1:0;w<O.length;w++)for(b=O[w],I=0;I<b.axes.length;I++)S.lineBetween(b.position.x,b.position.y,(b.vertices[0].x+b.vertices[b.vertices.length-1].x)/2,(b.vertices[0].y+b.vertices[b.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,S,E,P,M){S.lineStyle(M,E,P);for(var R=0;R<C.length;R++){var A=C[R];A.render.visible&&S.lineBetween(A.position.x,A.position.y,A.position.x+(A.position.x-A.positionPrev.x)*2,A.position.y+(A.position.y-A.positionPrev.y)*2)}return this},renderBodies:function(C){for(var S=this.debugGraphic,E=this.debugConfig,P=E.showBody,M=E.showStaticBody,R=E.showSleeping,A=E.showInternalEdges,O=E.showConvexHulls,b=E.renderFill,w=E.renderLine,I=E.staticBodySleepOpacity,Y=E.sleepFillColor,z=E.sleepLineColor,V=E.hullColor,W=0;W<C.length;W++){var F=C[W];if(F.render.visible&&!(!M&&F.isStatic||!P&&!F.isStatic)){var L=F.render.lineColor,D=F.render.lineOpacity,B=F.render.lineThickness,G=F.render.fillColor,N=F.render.fillOpacity;R&&F.isSleeping&&(F.isStatic?(D*=I,N*=I):(L=z,G=Y)),b||(G=null),w||(L=null),this.renderBody(F,S,A,L,D,B,G,N);var X=F.parts.length;O&&X>1&&this.renderConvexHull(F,S,V,B)}}},renderBody:function(C,S,E,P,M,R,A,O){P===void 0&&(P=null),M===void 0&&(M=null),R===void 0&&(R=1),A===void 0&&(A=null),O===void 0&&(O=null);for(var b=this.debugConfig,w=b.sensorFillColor,I=b.sensorLineColor,Y=C.parts,z=Y.length,V=z>1?1:0;V<z;V++){var W=Y[V],F=W.render,L=F.opacity;if(!(!F.visible||L===0||W.isSensor&&!b.showSensors)){var D=W.circleRadius;if(S.beginPath(),W.isSensor?(A!==null&&S.fillStyle(w,O*L),P!==null&&S.lineStyle(R,I,M*L)):(A!==null&&S.fillStyle(A,O*L),P!==null&&S.lineStyle(R,P,M*L)),D)S.arc(W.position.x,W.position.y,D,0,2*Math.PI);else{var B=W.vertices,G=B.length;S.moveTo(B[0].x,B[0].y);for(var N=1;N<G;N++){var X=B[N];if(!B[N-1].isInternal||E?S.lineTo(X.x,X.y):S.moveTo(X.x,X.y),N<G&&X.isInternal&&!E){var U=(N+1)%G;S.moveTo(B[U].x,B[U].y)}}S.closePath()}A!==null&&S.fillPath(),P!==null&&S.strokePath()}}if(b.showPositions&&!C.isStatic){var H=C.position.x,$=C.position.y,Z=Math.ceil(b.positionSize/2);S.fillStyle(b.positionColor,1),S.fillRect(H-Z,$-Z,b.positionSize,b.positionSize)}return this},renderConvexHull:function(C,S,E,P){P===void 0&&(P=1);var M=C.parts,R=M.length;if(R>1){var A=C.vertices;S.lineStyle(P,E),S.beginPath(),S.moveTo(A[0].x,A[0].y);for(var O=1;O<A.length;O++)S.lineTo(A[O].x,A[O].y);S.lineTo(A[0].x,A[0].y),S.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,S=u.allConstraints(this.localWorld),E=0;E<S.length;E++){var P=S[E].render,M=P.lineColor,R=P.lineOpacity,A=P.lineThickness,O=P.pinSize,b=P.anchorColor,w=P.anchorSize;this.renderConstraint(S[E],C,M,R,A,O,b,w)}},renderConstraint:function(C,S,E,P,M,R,A,O){var b=C.render;if(!b.visible||!C.pointA||!C.pointB)return this;S.lineStyle(M,E,P);var w=C.bodyA,I=C.bodyB,Y,z;if(w?Y=y.add(w.position,C.pointA):Y=C.pointA,b.type==="pin")S.strokeCircle(Y.x,Y.y,R);else{if(I?z=y.add(I.position,C.pointB):z=C.pointB,S.beginPath(),S.moveTo(Y.x,Y.y),b.type==="spring")for(var V=y.sub(z,Y),W=y.perp(y.normalise(V)),F=Math.ceil(h.clamp(C.length/5,12,20)),L,D=1;D<F;D+=1)L=D%2===0?1:-1,S.lineTo(Y.x+V.x*(D/F)+W.x*L*4,Y.y+V.y*(D/F)+W.y*L*4);S.lineTo(z.x,z.y)}return S.strokePath(),b.anchors&&O>0&&(S.fillStyle(A),S.fillCircle(Y.x,Y.y,O),S.fillCircle(z.x,z.y,O)),this},resetCollisionIDs:function(){return o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),l.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(e,r,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var n=i(540),o=i(0),a=i(20),h=new o({Extends:n,initialize:function(l,f,c){n.call(this,f),this.scene=l,this.systems=l.sys,this.pluginKey=c,l.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(369),WebGL:i(383)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(107),o=i(17),a={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(92),o=i(17),a={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(198),a=i(2),h=i(1411),u=i(382),l=i(58),f=new n({Extends:l,initialize:function(d){d.renderTarget=a(d,"renderTarget",1),d.fragShader=a(d,"fragShader",h),d.vertShader=a(d,"vertShader",u),d.attributes=a(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.batchSize=1,d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],l.call(this,d),this.isPostFX=!0,this.gameObject,this.colorMatrix=new o,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){l.prototype.boot.call(this);var c=this.manager.UTILITY_PIPELINE;this.fullFrame1=c.fullFrame1,this.fullFrame2=c.fullFrame2,this.halfFrame1=c.halfFrame1,this.halfFrame2=c.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(c){this.bindAndDraw(c)},copyFrame:function(c,d,v,p,g){this.manager.copyFrame(c,d,v,p,g)},copyToGame:function(c){this.manager.copyToGame(c)},drawFrame:function(c,d,v){this.manager.drawFrame(c,d,v,this.colorMatrix)},blendFrames:function(c,d,v,p,g){this.manager.blendFrames(c,d,v,p,g)},blendFramesAdditive:function(c,d,v,p,g){this.manager.blendFramesAdditive(c,d,v,p,g)},clearFrame:function(c,d){this.manager.clearFrame(c,d)},blitFrame:function(c,d,v,p,g,m){this.manager.blitFrame(c,d,v,p,g,m)},copyFrameRect:function(c,d,v,p,g,m,x,y){this.manager.copyFrameRect(c,d,v,p,g,m,x,y)},bindAndDraw:function(c,d,v,p,g){v===void 0&&(v=!0),p===void 0&&(p=!0);var m=this.gl,x=this.renderer;this.bind(g),this.set1i("uMainSampler",0),d?(m.viewport(0,0,d.width,d.height),m.bindFramebuffer(m.FRAMEBUFFER,d.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,d.texture,0),v&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,c.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),d?(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,null)):x.resetTextures()}});e.exports=f},function(e,r){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(201),a={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)};a=n(!1,a,o.CENTER),a=n(!1,a,o.ORIENTATION),a=n(!1,a,o.SCALE_MODE),a=n(!1,a,o.ZOOM),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(144),o=i(17),a={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(18),o=i(0),a=i(20),h=i(2),u=i(24),l=new o({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(a.BOOT,this.boot,this),c.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",f,c),this},restart:function(f){var c=this.key;return this.manager.queueOp("stop",c),this.manager.queueOp("start",c,f),this},transition:function(f){f===void 0&&(f={});var c=h(f,"target",!1),d=this.manager.getScene(c);if(!c||!this.checkValidTransition(d))return!1;var v=h(f,"duration",1e3);this._elapsed=0,this._target=d,this._duration=v,this._willSleep=h(f,"sleep",!1),this._willRemove=h(f,"remove",!1);var p=h(f,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=h(f,"onUpdateScope",this.scene));var g=h(f,"allowInput",!1);this.settings.transitionAllowInput=g;var m=d.sys.settings;return m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=v,m.transitionAllowInput=g,h(f,"moveAbove",!1)?this.manager.moveAbove(this.key,c):h(f,"moveBelow",!1)&&this.manager.moveBelow(this.key,c),d.sys.isSleeping()?d.sys.wake(h(f,"data")):this.manager.start(c,h(f,"data")),this.systems.events.emit(a.TRANSITION_OUT,d,v),this.systems.events.on(a.UPDATE,this.step,this),!0},checkValidTransition:function(f){return!(!f||f.sys.isActive()||f.sys.isTransitioning()||f===this.scene||this.systems.isTransitioning())},step:function(f,c){this._elapsed+=c,this.transitionProgress=n(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var f=this._target.sys,c=this._target.sys.settings;this.systems.events.off(a.UPDATE,this.step,this),f.events.emit(a.TRANSITION_COMPLETE,this.scene),c.isTransition=!1,c.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(f,c,d,v){return this.manager.add(f,c,d,v)},launch:function(f,c){return f&&f!==this.key&&this.manager.queueOp("start",f,c),this},run:function(f,c){return f&&f!==this.key&&this.manager.queueOp("run",f,c),this},pause:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("pause",f,c),this},resume:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("resume",f,c),this},sleep:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("sleep",f,c),this},wake:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("wake",f,c),this},switch:function(f){return f!==this.key&&this.manager.queueOp("switch",this.key,f),this},stop:function(f,c){return f===void 0&&(f=this.key),this.manager.queueOp("stop",f,c),this},setActive:function(f,c,d){c===void 0&&(c=this.key);var v=this.manager.getScene(c);return v&&v.sys.setActive(f,d),this},setVisible:function(f,c){c===void 0&&(c=this.key);var d=this.manager.getScene(c);return d&&d.sys.setVisible(f),this},isSleeping:function(f){return f===void 0&&(f=this.key),this.manager.isSleeping(f)},isActive:function(f){return f===void 0&&(f=this.key),this.manager.isActive(f)},isPaused:function(f){return f===void 0&&(f=this.key),this.manager.isPaused(f)},isVisible:function(f){return f===void 0&&(f=this.key),this.manager.isVisible(f)},swapPosition:function(f,c){return c===void 0&&(c=this.key),f!==c&&this.manager.swapPosition(f,c),this},moveAbove:function(f,c){return c===void 0&&(c=this.key),f!==c&&this.manager.moveAbove(f,c),this},moveBelow:function(f,c){return c===void 0&&(c=this.key),f!==c&&this.manager.moveBelow(f,c),this},remove:function(f){return f===void 0&&(f=this.key),this.manager.remove(f),this},moveUp:function(f){return f===void 0&&(f=this.key),this.manager.moveUp(f),this},moveDown:function(f){return f===void 0&&(f=this.key),this.manager.moveDown(f),this},bringToTop:function(f){return f===void 0&&(f=this.key),this.manager.bringToTop(f),this},sendToBack:function(f){return f===void 0&&(f=this.key),this.manager.sendToBack(f),this},get:function(f){return this.manager.getScene(f)},getIndex:function(f){return f===void 0&&(f=this.key),this.manager.getIndex(f)},shutdown:function(){var f=this.systems.events;f.off(a.SHUTDOWN,this.shutdown,this),f.off(a.POST_UPDATE,this.step,this),f.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});u.register("ScenePlugin",l,"scenePlugin"),e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(1417),a={CanvasTexture:i(423),Events:i(106),FilterMode:o,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)};a=n(!1,a,o),e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LINEAR:0,NEAREST:1};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(17),o=i(1419),a={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)};a=n(!1,a,o.ORIENTATION),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n={ORIENTATION:i(29)};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(63),a=function(h,u,l,f,c,d,v,p){v===void 0&&(v=!0),h<0&&(h=0),u<0&&(u=0);for(var g=n(h,u,l,f,null,p),m=c-h,x=d-u,y=0;y<g.length;y++){var T=g[y].x+m,C=g[y].y+x;T>=0&&T<p.width&&C>=0&&C<p.height&&p.data[C][T]&&p.data[C][T].copy(g[y])}v&&o(c-1,d-1,l+2,f+2,p)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(542),a=function(h,u,l,f,c,d){l||(l={}),Array.isArray(h)||(h=[h]);var v=d.tilemapLayer;f||(f=v.scene),c||(c=f.cameras.main);var p=n(0,0,d.width,d.height,null,d),g=[],m;for(m=0;m<p.length;m++){var x=p[m];if(h.indexOf(x.index)!==-1){var y=v.tileToWorldXY(x.x,x.y,void 0,c,d);l.x=y.x,l.y=y.y,g.push(f.make.sprite(l))}}if(typeof u=="number")for(m=0;m<h.length;m++)o(h[m],u,0,0,d.width,d.height,d);else if(Array.isArray(u))for(m=0;m<h.length;m++)o(h[m],u[m],0,0,d.width,d.height,d);return g};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(63),a=i(72),h=function(u,l,f,c,d,v,p){for(var g=p.collideIndexes.indexOf(u)!==-1,m=n(l,f,c,d,null,p),x=0;x<m.length;x++)m[x].index=u,a(m[x],g);v&&o(l-1,f-1,c+2,d+2,p)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(a,h,u,l,f,c,d,v){var p=n(u,l,f,c,d,v);return p.filter(a,h)};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){o===void 0&&(o=0),a===void 0&&(a=!1);var u=0,l,f,c;if(a){for(f=h.height-1;f>=0;f--)for(l=h.width-1;l>=0;l--)if(c=h.data[f][l],c&&c.index===n){if(u===o)return c;u+=1}}else for(f=0;f<h.height;f++)for(l=0;l<h.width;l++)if(c=h.data[f][l],c&&c.index===n){if(u===o)return c;u+=1}return null};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(a,h,u,l,f,c,d,v){var p=n(u,l,f,c,d,v);return p.find(a,h)||null};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(a,h,u,l,f,c,d,v){var p=n(u,l,f,c,d,v);p.forEach(a,h)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(544),a=i(545),h=i(547),u=i(1),l=i(548),f=function(c){return c===n.ORTHOGONAL?o:c===n.HEXAGONAL?a:c===n.STAGGERED?l:c===n.ISOMETRIC?h:u};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(158),o=i(3),a=new o,h=function(u,l,f,c,d){return d.tilemapLayer.worldToTileXY(u,l,!0,a,c),n(a.x,a.y,f,d)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(483),o=i(26),a=i(484),h=i(1),u=i(3),l=function(p,g){return a.RectangleToTriangle(g,p)},f=new u,c=new u,d=new u,v=function(p,g,m,x){if(p===void 0)return[];var y=h;p instanceof n.Circle?y=a.CircleToRectangle:p instanceof n.Rectangle?y=a.RectangleToRectangle:p instanceof n.Triangle?y=l:p instanceof n.Line&&(y=a.LineToRectangle),x.tilemapLayer.worldToTileXY(p.left,p.top,!0,c,m);var T=c.x,C=c.y;x.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,d,m);var S=Math.ceil(d.x),E=Math.ceil(d.y),P=Math.max(S-T,1),M=Math.max(E-C,1),R=o(T,C,P,M,g,x),A=x.tileWidth,O=x.tileHeight;x.tilemapLayer&&(A*=x.tilemapLayer.scaleX,O*=x.tilemapLayer.scaleY);for(var b=[],w=new n.Rectangle(0,0,A,O),I=0;I<R.length;I++){var Y=R[I];x.tilemapLayer.tileToWorldXY(Y.x,Y.y,f,m),w.x=f.x,w.y=f.y,y(p,w)&&b.push(Y)}return b};e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(1),a=i(253),h=function(u){return u===n.ORTHOGONAL?a:o};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(550),a=i(551),h=i(1),u=i(552),l=i(553),f=function(c){return c===n.ORTHOGONAL?l:c===n.ISOMETRIC?a:c===n.HEXAGONAL?o:c===n.STAGGERED?u:h};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(554),a=i(1),h=i(555),u=i(254),l=function(f){return f===n.ORTHOGONAL?u:f===n.HEXAGONAL?o:f===n.STAGGERED?h:a};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(1),a=i(255),h=function(u){return u===n.ORTHOGONAL?a:o};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(556),a=i(557),h=i(1),u=i(558),l=i(559),f=function(c){return c===n.ORTHOGONAL?l:c===n.ISOMETRIC?a:c===n.HEXAGONAL?o:c===n.STAGGERED?u:h};e.exports=f},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(29),o=i(560),a=i(1),h=i(561),u=i(256),l=function(f){return f===n.ORTHOGONAL?u:f===n.HEXAGONAL?o:f===n.STAGGERED?h:a};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(562),o=i(3),a=new o,h=function(u,l,f,c){c.tilemapLayer.worldToTileXY(u,l,!0,a,f);var d=a.x,v=a.y;return n(d,v,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(257),o=i(3),a=new o,h=function(u,l,f,c,d,v){return v.tilemapLayer.worldToTileXY(l,f,!0,a,d,v),n(u,a.x,a.y,c,v)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(63),o=i(257),a=function(h,u,l,f,c){if(f===void 0&&(f=!0),!Array.isArray(h))return null;Array.isArray(h[0])||(h=[h]);for(var d=h.length,v=h[0].length,p=0;p<d;p++)for(var g=0;g<v;g++){var m=h[p][g];o(m,u+g,l+p,!1,c)}f&&n(u-1,l-1,v+2,d+2,c)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(210),a=function(h,u,l,f,c,d){var v,p=n(h,u,l,f,{},d);if(!c)for(c=[],v=0;v<p.length;v++)c.indexOf(p[v].index)===-1&&c.push(p[v].index);for(v=0;v<p.length;v++)p[v].index=o(c)};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(563),o=i(3),a=new o,h=function(u,l,f,c,d,v){return v.tilemapLayer.worldToTileXY(u,l,!0,a,d,v),n(a.x,a.y,f,c,v)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(397),a=new o(105,210,231,150),h=new o(243,134,48,200),u=new o(40,39,37,150),l=function(f,c,d){c===void 0&&(c={});var v=c.tileColor!==void 0?c.tileColor:a,p=c.collidingTileColor!==void 0?c.collidingTileColor:h,g=c.faceColor!==void 0?c.faceColor:u,m=n(0,0,d.width,d.height,null,d);f.translateCanvas(d.tilemapLayer.x,d.tilemapLayer.y),f.scaleCanvas(d.tilemapLayer.scaleX,d.tilemapLayer.scaleY);for(var x=0;x<m.length;x++){var y=m[x],T=y.width,C=y.height,S=y.pixelX,E=y.pixelY,P=y.collides?p:v;P!==null&&(f.fillStyle(P.color,P.alpha/255),f.fillRect(S,E,T,C)),S+=1,E+=1,T-=2,C-=2,g!==null&&(f.lineStyle(1,g.color,g.alpha/255),y.faceTop&&f.lineBetween(S,E,S+T,E),y.faceRight&&f.lineBetween(S+T,E,S+T,E+C),y.faceBottom&&f.lineBetween(S,E+C,S+T,E+C),y.faceLeft&&f.lineBetween(S,E,S,E+C))}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),a=i(160),h=function(u,l,f,c,d){l===void 0&&(l=!0),f===void 0&&(f=!0),d===void 0&&(d=!0),Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++)a(u[v],l,c);if(d)for(var p=0;p<c.height;p++)for(var g=0;g<c.width;g++){var m=c.data[p][g];m&&u.indexOf(m.index)!==-1&&n(m,l)}f&&o(0,0,c.width,c.height,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),a=i(160),h=function(u,l,f,c,d,v){if(f===void 0&&(f=!0),c===void 0&&(c=!0),v===void 0&&(v=!0),!(u>l)){for(var p=u;p<=l;p++)a(p,f,d);if(v)for(var g=0;g<d.height;g++)for(var m=0;m<d.width;m++){var x=d.data[g][m];x&&x.index>=u&&x.index<=l&&n(x,f)}c&&o(0,0,d.width,d.height,d)}};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),a=i(160),h=function(u,l,f,c){l===void 0&&(l=!0),f===void 0&&(f=!0),Array.isArray(u)||(u=[u]);for(var d=0;d<c.height;d++)for(var v=0;v<c.width;v++){var p=c.data[d][v];p&&u.indexOf(p.index)===-1&&(n(p,l),a(p.index,l,c))}f&&o(0,0,c.width,c.height,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),a=i(126),h=function(u,l,f,c){l===void 0&&(l=!0),f===void 0&&(f=!0);for(var d=0;d<c.height;d++)for(var v=0;v<c.width;v++){var p=c.data[d][v];if(p){for(var g in u)if(a(p.properties,g)){var m=u[g];Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++)p.properties[g]===m[x]&&n(p,l)}}}f&&o(0,0,c.width,c.height,c)};e.exports=h},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(72),o=i(63),a=function(h,u,l){h===void 0&&(h=!0),u===void 0&&(u=!0);for(var f=0;f<l.height;f++)for(var c=0;c<l.width;c++){var d=l.data[f][c];if(d){var v=d.getCollisionGroup();v&&v.objects&&v.objects.length>0&&n(d,h)}}u&&o(0,0,l.width,l.height,l)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o,a,h){if(typeof n=="number")h.callbacks[n]=o!==null?{callback:o,callbackContext:a}:void 0;else for(var u=0,l=n.length;u<l;u++)h.callbacks[n[u]]=o!==null?{callback:o,callbackContext:a}:void 0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(a,h,u,l,f,c,d){for(var v=n(a,h,u,l,null,d),p=0;p<v.length;p++)v[p].setCollisionCallback(f,c)};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=i(131),a=function(h,u,l,f,c){var d=n(h,u,l,f,null,c),v=d.map(function(g){return g.index});o(v);for(var p=0;p<d.length;p++)d[p].index=v[p]};e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(a,h,u,l,f,c,d){for(var v=n(u,l,f,c,null,d),p=0;p<v.length;p++)v[p]&&(v[p].index===a?v[p].index=h:v[p].index===h&&(v[p].index=a))};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(26),o=function(a,h,u,l,f,c){if(f){var d,v=n(a,h,u,l,null,c),p=0;for(d=0;d<f.length;d++)p+=f[d].weight;if(!(p<=0))for(d=0;d<v.length;d++){for(var g=Math.random()*p,m=0,x=-1,y=0;y<f.length;y++)if(m+=f[y].weight,g<=m){var T=f[y].index;x=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}v[d].index=x}}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var a=0;a<n.length;a++){var h=n[a],u=a;if(h.name&&h.name!==""&&(u=h.name),Array.isArray(h.wangtiles)&&h.wangtiles.length>0){var l={},f={},c,d,v;if(Array.isArray(h.edgecolors))for(c=0;c<h.edgecolors.length;c++)v=1+c,d=h.edgecolors[c],d.name!==""&&(l[v]=d.name);if(Array.isArray(h.cornercolors))for(c=0;c<h.cornercolors.length;c++)v=1+c,d=h.cornercolors[c],d.name!==""&&(f[v]=d.name);if(Array.isArray(h.colors))for(c=0;c<h.colors.length;c++)d=h.colors[c],v=1+c,d.name!==""&&(l[v]=f[v]=d.name);for(var p=[l,f,l,f,l,f,l,f],g=0;g<h.wangtiles.length;g++){var m=h.wangtiles[g],x=o[m.tileid]||(o[m.tileid]={});x=x.wangid||(x.wangid={});for(var y=[],T=0;T<Math.min(p.length,m.wangid.length);T++){if(d=m.wangid[T],d===0){y.push(void 0);continue}var C=p[T][d];if(C!==void 0){y.push(C);continue}y.push(d)}x[u]=y}}}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(1),o=i(1);n=i(1457),o=i(1458),e.exports={renderWebGL:n,renderCanvas:o}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(12),o=function(a,h,u){var l=h.cull(u),f=l.length,c=u.alpha*h.alpha;if(!(f===0||c<=0)){var d=h.gidMap,v=a.pipelines.set(h.pipeline,h),p=n.getTintAppendFloatAlpha,g=h.scrollFactorX,m=h.scrollFactorY,x=h.x,y=h.y,T=h.scaleX,C=h.scaleY;a.pipelines.preBatch(h);for(var S=0;S<f;S++){var E=l[S],P=d[E.index];if(P){var M=P.getTileTextureCoordinates(E.index);if(M!==null){var R=P.glTexture,A=v.setTexture2D(R,h),O=P.tileWidth,b=P.tileHeight,w=M.x,I=M.y,Y=P.tileWidth*.5,z=P.tileHeight*.5,V=p(E.tint,c*E.alpha);v.batchTexture(h,R,R.width,R.height,x+(Y+E.pixelX)*T,y+(z+E.pixelY)*C,E.width,E.height,T,C,E.rotation,E.flipX,E.flipY,g,m,Y,z,w,I,O,b,V,V,V,V,!1,0,0,u,null,!0,A)}}}a.pipelines.postBatch(h)}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(25),o=new n,a=new n,h=new n,u=function(l,f,c,d){var v=f.cull(c),p=v.length,g=c.alpha*f.alpha;if(!(p===0||g<=0)){var m=o,x=a,y=h;x.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),m.copyFrom(c.matrix);var T=l.currentContext,C=f.gidMap;T.save(),d?(m.multiplyWithOffset(d,-c.scrollX*f.scrollFactorX,-c.scrollY*f.scrollFactorY),x.e=f.x,x.f=f.y,m.multiply(x,y),y.copyToContext(T)):(x.e-=c.scrollX*f.scrollFactorX,x.f-=c.scrollY*f.scrollFactorY,x.copyToContext(T)),(!l.antialias||f.scaleX>1||f.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<p;S++){var E=v[S],P=C[E.index];if(P){var M=P.image.getSourceImage(),R=P.getTileTextureCoordinates(E.index);if(R!==null){var A=P.tileWidth,O=P.tileHeight,b=A*.5,w=O*.5;T.save(),T.translate(E.pixelX+b,E.pixelY+w),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(M,R.x,R.y,A,O,-b,-w,A,O),T.restore()}}}T.restore()}};e.exports=u},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(16),o=i(262);n.register("tilemap",function(a){var h=a!==void 0?a:{};return o(this.scene,h.key,h.tileWidth,h.tileHeight,h.width,h.height,h.data,h.insertNull)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(5),o=i(262);n.register("tilemap",function(a,h,u,l,f,c,d){return a===null&&(a=void 0),h===null&&(h=void 0),u===null&&(u=void 0),l===null&&(l=void 0),f===null&&(f=void 0),o(this.scene,a,h,u,l,f,c,d)})},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:i(1462),TimerEvent:i(582)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(0),o=i(24),a=i(20),h=i(582),u=i(93),l=new n({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(a.BOOT,this.boot,this),c.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var f=this.systems.events;f.on(a.PRE_UPDATE,this.preUpdate,this),f.on(a.UPDATE,this.update,this),f.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(f){var c;return f instanceof h?(c=f,this.removeEvent(c),c.elapsed=c.startAt,c.hasDispatched=!1,c.repeatCount=c.repeat===-1||c.loop?999999999999:c.repeat):c=new h(f),this._pendingInsertion.push(c),c},delayedCall:function(f,c,d,v){return this.addEvent({delay:f,callback:c,args:d,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(f){Array.isArray(f)||(f=[f]);for(var c=0;c<f.length;c++){var d=f[c];u(this._pendingRemoval,d),u(this._pendingInsertion,d),u(this._active,d)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var f=this._pendingRemoval.length,c=this._pendingInsertion.length;if(!(f===0&&c===0)){var d,v;for(d=0;d<f;d++){v=this._pendingRemoval[d];var p=this._active.indexOf(v);p>-1&&this._active.splice(p,1),v.destroy()}for(d=0;d<c;d++)v=this._pendingInsertion[d],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(f,c){if(this.now=f,!this.paused){c*=this.timeScale;for(var d=0;d<this._active.length;d++){var v=this._active[d];if(!v.paused&&(v.elapsed+=c*v.timeScale,v.elapsed>=v.delay)){var p=v.elapsed-v.delay;v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0?(v.repeatCount--,v.elapsed=p,v.hasDispatched=!1):this._pendingRemoval.push(v)}}}},shutdown:function(){var f;for(f=0;f<this._pendingInsertion.length;f++)this._pendingInsertion[f].destroy();for(f=0;f<this._active.length;f++)this._active[f].destroy();for(f=0;f<this._pendingRemoval.length;f++)this._pendingRemoval[f].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var c=this.systems.events;c.off(a.PRE_UPDATE,this.preUpdate,this),c.off(a.UPDATE,this.update,this),c.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("Clock",l,"time"),e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(100),o=i(17),a={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)};a=o(!1,a,n),e.exports=a},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,r){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(93),o=i(0),a=i(585),h=i(24),u=i(20),l=i(586),f=i(587),c=i(100),d=i(163),v=new o({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(u.BOOT,this.boot,this),g.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(u.PRE_UPDATE,this.preUpdate,this),p.on(u.UPDATE,this.update,this),p.once(u.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return f(this,p)},timeline:function(p){var g=f(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return d(this,p)},add:function(p){var g=d(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=a(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return l(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,m=this._pending,x,y;for(x=0;x<p.length;x++){y=p[x];var T=g.indexOf(y);T===-1?(T=m.indexOf(y),T>-1&&(y.state=c.REMOVED,m.splice(T,1))):(y.state=c.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,x=0;x<p.length;x++)y=p[x],y.state===c.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var m=this._active,x;g*=this.timeScale;for(var y=0;y<m.length;y++)x=m[y],x.update(p,g)&&(this._destroy.push(x),this._toProcess++)},remove:function(p){return n(this._add,p),n(this._pending,p),n(this._active,p),n(this._destroy,p),p.state=c.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=c.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var m=[null],x=1;x<arguments.length;x++)m.push(arguments[x]);for(var y in this.list)m[0]=this.list[y],p.apply(g,m)},getAllTweens:function(){for(var p=this._active,g=[],m=0;m<p.length;m++)g.push(p[m]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var m=this._active,x,y=[],T,C;for(Array.isArray(p)||(p=[p]),T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);if(g)for(m=this._pending,T=0;T<m.length;T++)for(x=m[T],C=0;C<p.length;C++)x.hasTarget(p[C])&&y.push(x);return y},isTweening:function(p){for(var g=this._active,m,x=0;x<g.length;x++)if(m=g[x],m.hasTarget(p)&&m.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),m=0;m<g.length;m++)g[m].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(u.PRE_UPDATE,this.preUpdate,this),p.off(u.UPDATE,this.update,this),p.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});h.register("TweenManager",v,"tweens"),e.exports=v},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(e,r){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(o,a){for(var h=new Uint8Array(o),u=h.length,l=a?"data:"+a+";base64,":"",f=0;f<u;f+=3)l+=i[h[f]>>2],l+=i[(h[f]&3)<<4|h[f+1]>>4],l+=i[(h[f+1]&15)<<2|h[f+2]>>6],l+=i[h[f+2]&63];return u%3===2?l=l.substring(0,l.length-1)+"=":u%3===1&&(l=l.substring(0,l.length-2)+"=="),l};e.exports=n},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(6),o=i(18),a=function(h,u,l,f,c){c===void 0&&(c=l);var d=n(h,u,c);return o(d,l,f)};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){for(var a=0;a<o.length;a++)if(!n.hasOwnProperty(o[a]))return!1;return!0};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(77),o=function(a,h){var u=n(a);for(var l in h)u.hasOwnProperty(l)&&(u[l]=h[l]);return u};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return n.replace(/%([0-9]+)/g,function(a,h){return o[Number(h)-1]})};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n,o){return o===0?n.slice(1):n.slice(0,o-1)+n.slice(o)};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(n){return n.split("").reverse().join("")};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:i(1366),Matter:i(1494)}},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:i(1392),Components:i(249),Events:i(272),Factory:i(1394),MatterGameObject:i(1395),Image:i(1396),Matter:i(594),MatterPhysics:i(1524),PolyDecomp:i(1393),Sprite:i(1397),TileBody:i(593),PhysicsEditorParser:i(589),PhysicsJSONParser:i(590),PointerConstraint:i(1398),World:i(1402)}},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(n){return this.body.restitution=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCollisionCategory:function(n){return this.body.collisionFilter.category=n,this},setCollisionGroup:function(n){return this.body.collisionFilter.group=n,this},setCollidesWith:function(n){var o=0;if(!Array.isArray(n))o=n;else for(var a=0;a<n.length;a++)o|=n[a];return this.body.collisionFilter.mask=o,this},setOnCollide:function(n){return this.body.onCollideCallback=n,this},setOnCollideEnd:function(n){return this.body.onCollideEndCallback=n,this},setOnCollideActive:function(n){return this.body.onCollideActiveCallback=n,this},setOnCollideWith:function(n,o){Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++){var h=n[a].hasOwnProperty("body")?n[a].body:n[a];this.body.setOnCollideWith(h,o)}return this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o={applyForce:function(a){return this._tempVec2.set(this.body.position.x,this.body.position.y),n.applyForce(this.body,this._tempVec2,a),this},applyForceFrom:function(a,h){return n.applyForce(this.body,a,h),this},thrust:function(a){var h=this.body.angle;return this._tempVec2.set(a*Math.cos(h),a*Math.sin(h)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(a){var h=this.body.angle-Math.PI/2;return this._tempVec2.set(a*Math.cos(h),a*Math.sin(h)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(a){var h=this.body.angle+Math.PI/2;return this._tempVec2.set(a*Math.cos(h),a*Math.sin(h)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(a){var h=this.body.angle-Math.PI;return this._tempVec2.set(a*Math.cos(h),a*Math.sin(h)),n.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=o},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(n,o,a){return this.body.friction=n,o!==void 0&&(this.body.frictionAir=o),a!==void 0&&(this.body.frictionStatic=a),this},setFrictionAir:function(n){return this.body.frictionAir=n,this},setFrictionStatic:function(n){return this.body.frictionStatic=n,this}};e.exports=i},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setIgnoreGravity:function(n){return this.body.ignoreGravity=n,this}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o=i(3),a={setMass:function(h){return n.setMass(this.body,h),this},setDensity:function(h){return n.setDensity(this.body,h),this},centerOfMass:{get:function(){return new o(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=a},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setSensor:function(n){return this.body.isSensor=n,this},isSensor:function(){return this.body.isSensor}};e.exports=i},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(86),o=i(41),a=i(124),h=i(2),u=i(589),l=i(590),f=i(64),c={setRectangle:function(d,v,p){return this.setBody({type:"rectangle",width:d,height:v},p)},setCircle:function(d,v){return this.setBody({type:"circle",radius:d},v)},setPolygon:function(d,v,p){return this.setBody({type:"polygon",sides:v,radius:d},p)},setTrapezoid:function(d,v,p,g){return this.setBody({type:"trapezoid",width:d,height:v,slope:p},g)},setExistingBody:function(d,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=d;for(var p=0;p<d.parts.length;p++)d.parts[p].gameObject=this;var g=this;if(d.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},v&&(this.world.has(d)&&this.world.remove(d,!0),this.world.add(d)),this._originComponent){var m=d.render.sprite.xOffset,x=d.render.sprite.yOffset,y=d.centerOfMass.x,T=d.centerOfMass.y;if(a(y,.5)&&a(T,.5))this.setOrigin(m+.5,x+.5);else{var C=d.centerOffset.x,S=d.centerOffset.y;this.setOrigin(m+C/this.displayWidth,x+S/this.displayHeight)}}return this},setBody:function(d,v){if(!d)return this;var p;typeof d=="string"&&(d={type:d});var g=h(d,"type","rectangle"),m=h(d,"x",this._tempVec2.x),x=h(d,"y",this._tempVec2.y),y=h(d,"width",this.width),T=h(d,"height",this.height);switch(g){case"rectangle":p=n.rectangle(m,x,y,T,v);break;case"circle":var C=h(d,"radius",Math.max(y,T)/2),S=h(d,"maxSides",25);p=n.circle(m,x,C,v,S);break;case"trapezoid":var E=h(d,"slope",.5);p=n.trapezoid(m,x,y,T,E,v);break;case"polygon":var P=h(d,"sides",5),M=h(d,"radius",Math.max(y,T)/2);p=n.polygon(m,x,P,M,v);break;case"fromVertices":case"fromVerts":var R=h(d,"verts",null);if(R)if(typeof R=="string"&&(R=f.fromPath(R)),this.body&&!this.body.hasOwnProperty("temp"))o.setVertices(this.body,R),p=this.body;else{var A=h(d,"flagInternal",!1),O=h(d,"removeCollinear",.01),b=h(d,"minimumArea",10);p=n.fromVertices(m,x,R,v,A,O,b)}break;case"fromPhysicsEditor":p=u.parseBody(m,x,d,v);break;case"fromPhysicsTracer":p=l.parseBody(m,x,d,v);break}return p&&this.setExistingBody(p,d.addToWorld),this}};e.exports=c},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(272),o=i(165),a=i(166),h={setToSleep:function(){return o.set(this.body,!0),this},setAwake:function(){return o.set(this.body,!1),this},setSleepThreshold:function(u){return u===void 0&&(u=60),this.body.sleepThreshold=u,this},setSleepEvents:function(u,l){return this.setSleepStartEvent(u),this.setSleepEndEvent(l),this},setSleepStartEvent:function(u){if(u){var l=this.world;a.on(this.body,"sleepStart",function(f){l.emit(n.SLEEP_START,f,this)})}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(u){if(u){var l=this.world;a.on(this.body,"sleepEnd",function(f){l.emit(n.SLEEP_END,f,this)})}else a.off(this.body,"sleepEnd");return this}};e.exports=h},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,r){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o={setStatic:function(a){return n.setStatic(this.body,a),this},isStatic:function(){return this.body.isStatic}};e.exports=o},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o=i(14),a=i(269),h=i(270),u=4,l={x:{get:function(){return this.body.position.x},set:function(f){this._tempVec2.set(f,this.y),n.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(f){this._tempVec2.set(this.x,f),n.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(f){var c=1/this._scaleX,d=1/this._scaleY;this._scaleX=f,this._scaleX===0?this.renderFlags&=~u:this.renderFlags|=u,n.scale(this.body,c,d),n.scale(this.body,f,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(f){var c=1/this._scaleX,d=1/this._scaleY;this._scaleY=f,this._scaleY===0?this.renderFlags&=~u:this.renderFlags|=u,n.scale(this.body,c,d),n.scale(this.body,this._scaleX,f)}},angle:{get:function(){return h(this.body.angle*o.RAD_TO_DEG)},set:function(f){this.rotation=h(f)*o.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(f){this._rotation=a(f),n.setAngle(this.body,this._rotation)}},setPosition:function(f,c){return f===void 0&&(f=0),c===void 0&&(c=f),this._tempVec2.set(f,c),n.setPosition(this.body,this._tempVec2),this},setRotation:function(f){return f===void 0&&(f=0),this._rotation=a(f),n.setAngle(this.body,f),this},setFixedRotation:function(){return n.setInertia(this.body,1/0),this},setAngle:function(f){return f===void 0&&(f=0),this.angle=f,n.setAngle(this.body,this.rotation),this},setScale:function(f,c,d){f===void 0&&(f=1),c===void 0&&(c=f);var v=1/this._scaleX,p=1/this._scaleY;return this._scaleX=f,this._scaleY=c,n.scale(this.body,v,p,d),n.scale(this.body,f,c,d),this}};e.exports=l},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(41),o={setAngularVelocity:function(a){return n.setAngularVelocity(this.body,a),this},setVelocityX:function(a){return this._tempVec2.set(a,this.body.velocity.y),n.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(a){return this._tempVec2.set(this.body.velocity.x,a),n.setVelocity(this.body,this._tempVec2),this},setVelocity:function(a,h){return this._tempVec2.set(a,h),n.setVelocity(this.body,this._tempVec2),this}};e.exports=o},function(e,r,i){var n={};e.exports=n;var o=i(118),a=i(32);(function(){n.create=function(h){var u={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return a.extend(u,!1,h)},n.reset=function(h){h.extended&&(h.narrowDetections=0,h.narrowphaseTests=0,h.narrowReuse=0,h.narrowReuseCount=0,h.midphaseTests=0,h.broadphaseTests=0,h.narrowEff=0,h.midEff=0,h.broadEff=0,h.collisions=0,h.buckets=0,h.pairs=0,h.bodies=0)},n.update=function(h,u){if(h.extended){var l=u.world,f=o.allBodies(l);h.collisions=h.narrowDetections,h.pairs=u.pairs.list.length,h.bodies=f.length,h.midEff=(h.narrowDetections/(h.midphaseTests||1)).toFixed(2),h.narrowEff=(h.narrowDetections/(h.narrowphaseTests||1)).toFixed(2),h.broadEff=(1-h.broadphaseTests/(f.length||1)).toFixed(2),h.narrowReuse=(h.narrowReuseCount/(h.narrowphaseTests||1)).toFixed(2)}}})()},function(e,r,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var n=i(123),o=i(271),a=i(86),h=i(41),u=i(1392),l=i(84),f=i(0),c=i(118),d=i(591),v=i(128),p=i(273),g=i(50),m=i(1394),x=i(2),y=i(6),T=i(597),C=i(1525),S=i(1526),E=i(1399),P=i(1527),M=i(127),R=i(250),A=i(598),O=i(595),b=i(24),w=i(1400),I=i(599),Y=i(274),z=i(20),V=i(592),W=i(83),F=i(64),L=i(1402),D=new f({initialize:function(G){this.scene=G,this.systems=G.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=c,this.detector=p,this.grid=T,this.pair=R,this.pairs=A,this.query=w,this.resolver=I,this.sat=Y,this.constraint=v,this.bodies=a,this.composites=d,this.axes=o,this.bounds=l,this.svg=V,this.vector=W,this.vertices=F,this.verts=F,this._tempVec2=W.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),I._restingThresh=y(this.config,"restingThresh",4),I._restingThreshTangent=y(this.config,"restingThreshTangent",6),I._positionDampen=y(this.config,"positionDampen",.9),I._positionWarming=y(this.config,"positionWarming",.8),I._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),G.sys.events.once(z.BOOT,this.boot,this),G.sys.events.on(z.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new u,this.systems.events.once(z.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new m(this.world));var B=this.systems.events;B.on(z.UPDATE,this.world.update,this.world),B.on(z.POST_UPDATE,this.world.postUpdate,this.world),B.once(z.SHUTDOWN,this.shutdown,this)},getConfig:function(){var B=this.systems.game.config.physics,G=this.systems.settings.physics,N=M(x(G,"matter",{}),x(B,"matter",{}));return N},enableAttractorPlugin:function(){return O.register(C),O.use(E,C),this},enableWrapPlugin:function(){return O.register(P),O.use(E,P),this},enableCollisionEventsPlugin:function(){return O.register(S),O.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(B,G){this.world.step(B,G)},containsPoint:function(B,G,N){B=this.getMatterBodies(B);var X=W.create(G,N),U=w.point(B,X);return U.length>0},intersectPoint:function(B,G,N){N=this.getMatterBodies(N);var X=W.create(B,G),U=[],H=w.point(N,X);return H.forEach(function($){U.indexOf($)===-1&&U.push($)}),U},intersectRect:function(B,G,N,X,U,H){U===void 0&&(U=!1),H=this.getMatterBodies(H);var $={min:{x:B,y:G},max:{x:B+N,y:G+X}},Z=[],J=w.region(H,$,U);return J.forEach(function(Q){Z.indexOf(Q)===-1&&Z.push(Q)}),Z},intersectRay:function(B,G,N,X,U,H){U===void 0&&(U=1),H=this.getMatterBodies(H);for(var $=[],Z=w.ray(H,W.create(B,G),W.create(N,X),U),J=0;J<Z.length;J++)$.push(Z[J].body);return $},intersectBody:function(B,G){G=this.getMatterBodies(G);for(var N=[],X=w.collides(B,G),U=0;U<X.length;U++){var H=X[U];H.bodyA===B?N.push(H.bodyB):N.push(H.bodyA)}return N},overlap:function(B,G,N,X,U){N===void 0&&(N=null),X===void 0&&(X=null),U===void 0&&(U=N),Array.isArray(B)||(B=[B]),B=this.getMatterBodies(B),G=this.getMatterBodies(G);for(var H=!1,$=0;$<B.length;$++)for(var Z=B[$],J=w.collides(Z,G),Q=0;Q<J.length;Q++){var _=J[Q],j=_.bodyA.id===Z.id?_.bodyB:_.bodyA;if(!X||X.call(U,Z,j,_)){if(H=!0,N)N.call(U,Z,j,_);else if(!X)return!0}}return H},setCollisionCategory:function(B,G){return B=this.getMatterBodies(B),B.forEach(function(N){N.collisionFilter.category=G}),this},setCollisionGroup:function(B,G){return B=this.getMatterBodies(B),B.forEach(function(N){N.collisionFilter.group=G}),this},setCollidesWith:function(B,G){B=this.getMatterBodies(B);var N=0;if(!Array.isArray(G))N=G;else for(var X=0;X<G.length;X++)N|=G[X];return B.forEach(function(U){U.collisionFilter.mask=N}),this},getMatterBodies:function(B){if(!B)return this.world.getAllBodies();Array.isArray(B)||(B=[B]);for(var G=[],N=0;N<B.length;N++){var X=B[N].hasOwnProperty("body")?B[N].body:B[N];G.push(X)}return G},setVelocity:function(B,G,N){B=this.getMatterBodies(B);var X=this._tempVec2;return X.x=G,X.y=N,B.forEach(function(U){h.setVelocity(U,X)}),this},setVelocityX:function(B,G){B=this.getMatterBodies(B);var N=this._tempVec2;return N.x=G,B.forEach(function(X){N.y=X.velocity.y,h.setVelocity(X,N)}),this},setVelocityY:function(B,G){B=this.getMatterBodies(B);var N=this._tempVec2;return N.y=G,B.forEach(function(X){N.x=X.velocity.x,h.setVelocity(X,N)}),this},setAngularVelocity:function(B,G){return B=this.getMatterBodies(B),B.forEach(function(N){h.setAngularVelocity(N,G)}),this},applyForce:function(B,G){B=this.getMatterBodies(B);var N=this._tempVec2;return B.forEach(function(X){N.x=X.position.x,N.y=X.position.y,h.applyForce(X,N,G)}),this},applyForceFromPosition:function(B,G,N,X){B=this.getMatterBodies(B);var U=this._tempVec2;return B.forEach(function(H){X===void 0&&(X=H.angle),U.x=N*Math.cos(X),U.y=N*Math.sin(X),h.applyForce(H,G,U)}),this},applyForceFromAngle:function(B,G,N){B=this.getMatterBodies(B);var X=this._tempVec2;return B.forEach(function(U){N===void 0&&(N=U.angle),X.x=G*Math.cos(N),X.y=G*Math.sin(N),h.applyForce(U,{x:U.position.x,y:U.position.y},X)}),this},getConstraintLength:function(B){var G=B.pointA.x,N=B.pointA.y,X=B.pointB.x,U=B.pointB.y;return B.bodyA&&(G+=B.bodyA.position.x,N+=B.bodyA.position.y),B.bodyB&&(X+=B.bodyB.position.x,U+=B.bodyB.position.y),g(G,N,X,U)},alignBody:function(B,G,N,X){B=B.hasOwnProperty("body")?B.body:B;var U;switch(X){case n.TOP_LEFT:case n.LEFT_TOP:U=this.bodyBounds.getTopLeft(B,G,N);break;case n.TOP_CENTER:U=this.bodyBounds.getTopCenter(B,G,N);break;case n.TOP_RIGHT:case n.RIGHT_TOP:U=this.bodyBounds.getTopRight(B,G,N);break;case n.LEFT_CENTER:U=this.bodyBounds.getLeftCenter(B,G,N);break;case n.CENTER:U=this.bodyBounds.getCenter(B,G,N);break;case n.RIGHT_CENTER:U=this.bodyBounds.getRightCenter(B,G,N);break;case n.LEFT_BOTTOM:case n.BOTTOM_LEFT:U=this.bodyBounds.getBottomLeft(B,G,N);break;case n.BOTTOM_CENTER:U=this.bodyBounds.getBottomCenter(B,G,N);break;case n.BOTTOM_RIGHT:case n.RIGHT_BOTTOM:U=this.bodyBounds.getBottomRight(B,G,N);break}return U&&h.setPosition(B,U),this},shutdown:function(){var B=this.systems.events;this.world&&(B.off(z.UPDATE,this.world.update,this.world),B.off(z.POST_UPDATE,this.world.postUpdate,this.world)),B.off(z.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(z.START,this.start,this),this.scene=null,this.systems=null}});b.register("MatterPhysics",D,"matterPhysics"),e.exports=D},function(e,r,i){var n=i(594),o={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(a){a.after("Body.create",function(){o.Body.init(this)}),a.before("Engine.update",function(h){o.Engine.update(h)})},Body:{init:function(a){a.plugin.attractors=a.plugin.attractors||[]}},Engine:{update:function(a){for(var h=n.Composite.allBodies(a.world),u=0;u<h.length;u++){var l=h[u],f=l.plugin.attractors;if(f&&f.length>0)for(var c=0;c<h.length;c++){var d=h[c];if(u!==c)for(var v=0;v<f.length;v++){var p=f[v],g=p;n.Common.isFunction(p)&&(g=p(l,d)),g&&n.Body.applyForce(d,d.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(a,h){var u=n.Vector.sub(h.position,a.position),l=n.Vector.magnitudeSquared(u)||1e-4,f=n.Vector.normalise(u),c=-o.Attractors.gravityConstant*(a.mass*h.mass/l),d=n.Vector.mult(f,c);n.Body.applyForce(a,a.position,n.Vector.neg(d)),n.Body.applyForce(h,h.position,d)}}};e.exports=o},function(e,r){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(n){n.after("Engine.create",function(){n.Events.on(this,"collisionStart",function(o){o.pairs.map(function(a){var h=a.bodyA,u=a.bodyB;h.gameObject&&h.gameObject.emit("collide",h,u,a),u.gameObject&&u.gameObject.emit("collide",u,h,a),n.Events.trigger(h,"onCollide",{pair:a}),n.Events.trigger(u,"onCollide",{pair:a}),h.onCollideCallback&&h.onCollideCallback(a),u.onCollideCallback&&u.onCollideCallback(a),h.onCollideWith[u.id]&&h.onCollideWith[u.id](u,a),u.onCollideWith[h.id]&&u.onCollideWith[h.id](h,a)})}),n.Events.on(this,"collisionActive",function(o){o.pairs.map(function(a){var h=a.bodyA,u=a.bodyB;h.gameObject&&h.gameObject.emit("collideActive",h,u,a),u.gameObject&&u.gameObject.emit("collideActive",u,h,a),n.Events.trigger(h,"onCollideActive",{pair:a}),n.Events.trigger(u,"onCollideActive",{pair:a}),h.onCollideActiveCallback&&h.onCollideActiveCallback(a),u.onCollideActiveCallback&&u.onCollideActiveCallback(a)})}),n.Events.on(this,"collisionEnd",function(o){o.pairs.map(function(a){var h=a.bodyA,u=a.bodyB;h.gameObject&&h.gameObject.emit("collideEnd",h,u,a),u.gameObject&&u.gameObject.emit("collideEnd",u,h,a),n.Events.trigger(h,"onCollideEnd",{pair:a}),n.Events.trigger(u,"onCollideEnd",{pair:a}),h.onCollideEndCallback&&h.onCollideEndCallback(a),u.onCollideEndCallback&&u.onCollideEndCallback(a)})})})}};e.exports=i},function(e,r,i){var n=i(594),o={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(a){a.after("Engine.update",function(){o.Engine.update(this)})},Engine:{update:function(a){for(var h=a.world,u=n.Composite.allBodies(h),l=n.Composite.allComposites(h),f=0;f<u.length;f+=1){var c=u[f];c.plugin.wrap&&o.Body.wrap(c,c.plugin.wrap)}for(f=0;f<l.length;f+=1){var d=l[f];d.plugin.wrap&&o.Composite.wrap(d,d.plugin.wrap)}}},Bounds:{wrap:function(a,h){var u=null,l=null;if(typeof h.min.x<"u"&&typeof h.max.x<"u"&&(a.min.x>h.max.x?u=h.min.x-a.max.x:a.max.x<h.min.x&&(u=h.max.x-a.min.x)),typeof h.min.y<"u"&&typeof h.max.y<"u"&&(a.min.y>h.max.y?l=h.min.y-a.max.y:a.max.y<h.min.y&&(l=h.max.y-a.min.y)),u!==null||l!==null)return{x:u||0,y:l||0}}},Body:{wrap:function(a,h){var u=o.Bounds.wrap(a.bounds,h);return u&&n.Body.translate(a,u),u}},Composite:{bounds:function(a){for(var h=n.Composite.allBodies(a),u=[],l=0;l<h.length;l+=1){var f=h[l];u.push(f.bounds.min,f.bounds.max)}return n.Bounds.create(u)},wrap:function(a,h){var u=o.Bounds.wrap(o.Composite.bounds(a),h);return u&&n.Composite.translate(a,u),u}}};e.exports=o},function(e,r,i){(function(n){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var o=i(33),a=i(17),h={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:i(1493),Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};h.Sound=i(1492),h=a(!1,h,o),e.exports=h,n.Phaser=h}).call(this,i(600))}])})})(WT);const js=UT(Rh),HT=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;

// Scene buffer
uniform sampler2D uMainSampler; 
varying vec2 outTexCoord;

// Effect parameters
uniform vec2 texSize;
uniform float thickness;
uniform vec3 outlineColor;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main() {
  vec4 front = texture2D(uMainSampler, outTexCoord);

  if (thickness > 0.0) {
    vec2 mag = vec2(thickness/texSize.x, thickness/texSize.y);
    vec4 curColor;
    float maxAlpha = front.a;
    vec2 offset;
    for (float angle = 0.; angle < DOUBLE_PI; angle += #{angleStep}) {
        offset = vec2(mag.x * cos(angle), mag.y * sin(angle));        
        curColor = texture2D(uMainSampler, outTexCoord + offset);
        maxAlpha = max(maxAlpha, curColor.a);
    }
    vec3 resultColor = front.rgb + (outlineColor.rgb * (1. - front.a)) * maxAlpha;
    gl_FragColor = vec4(resultColor, maxAlpha);
  } else {
    gl_FragColor = front;
  }
}
`,kT=100,$T=1;var Kg=function(s){s===void 0&&(s=.1);var t=Math.max(s*kT,$T),e=(Math.PI*2/t).toFixed(7);return HT.replace(/\#\{angleStep\}/,e)};const ZT=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,dc=Phaser.Utils.Objects.GetValue,KT=Phaser.Display.Color.IntegerToRGB,JT=Phaser.Display.Color;var xh=.1,cc=Kg(xh);class Gn extends ZT{constructor(t){super({name:"rexOutlinePostFx",game:t,renderTarget:!0,fragShader:cc}),this.thickness=0,this._outlineColor=new JT}resetFromJSON(t){return this.setThickness(dc(t,"thickness",3)),this.setOutlineColor(dc(t,"outlineColor",16777215)),this}onPreRender(){this.set1f("thickness",this.thickness),this.set3f("outlineColor",this._outlineColor.redGL,this._outlineColor.greenGL,this._outlineColor.blueGL),this.set2f("texSize",this.renderer.width,this.renderer.height)}setThickness(t){return this.thickness=t,this}get outlineColor(){return this._outlineColor}set outlineColor(t){typeof t=="number"&&(t=KT(t)),this._outlineColor.setFromRGB(t)}setOutlineColor(t){return this.outlineColor=t,this}static setQuality(t){xh!==t&&(xh=t,cc=Kg(t))}static getQuality(){return xh}}const QT=4807066,vc=14535964,Bf=12974578,jT=4671303,qT=9880531,Jg=16186436;var Nt=(s=>(s[s.MonsterGenerator=0]="MonsterGenerator",s[s.HomeBase=67]="HomeBase",s[s.Mounted=89]="Mounted",s[s.Units=62]="Units",s[s.Mine=162]="Mine",s[s.Hammer=164]="Hammer",s[s.SpeedBooster=130]="SpeedBooster",s[s.Armor=119]="Armor",s[s.Income=204]="Income",s[s.Upkeep=205]="Upkeep",s[s.Farm=231]="Farm",s[s.PowerTile=59]="PowerTile",s[s.Fortified=98]="Fortified",s[s.SpiderWeb=11]="SpiderWeb",s[s.Treasure=187]="Treasure",s[s.Hourglass=175]="Hourglass",s))(Nt||{}),pt=(s=>(s[s.Standard=0]="Standard",s[s.Player=1]="Player",s[s.Icons=2]="Icons",s[s.RaisedCell=2]="RaisedCell",s[s.Actions=3]="Actions",s[s.Marker=4]="Marker",s[s.Debug=100]="Debug",s[s.StatusEffects=5]="StatusEffects",s))(pt||{}),ie=(s=>(s[s.Player=23]="Player",s[s.Spider=32]="Spider",s[s.Soldier=22]="Soldier",s[s.Engineer=21]="Engineer",s[s.Miner=0]="Miner",s[s.Farmer=11]="Farmer",s[s.Slime=8]="Slime",s[s.Ant=13]="Ant",s[s.Goblin=16]="Goblin",s[s.Golem=5]="Golem",s[s.Hornet=14]="Hornet",s[s.HornetQueen=34]="HornetQueen",s))(ie||{}),Tt=(s=>(s[s.PlayerTiles=-2]="PlayerTiles",s[s.Marker=-1]="Marker",s[s.Default=0]="Default",s[s.Buildings=1]="Buildings",s[s.Player=2]="Player",s[s.Items=3]="Items",s[s.Mounting=9]="Mounting",s[s.BoardTouchZone=10]="BoardTouchZone",s))(Tt||{}),ft=(s=>(s[s.Empty=0]="Empty",s[s.Hive=9]="Hive",s[s.ClearedWood=3]="ClearedWood",s[s.Tower=2]="Tower",s[s.Wood1=5]="Wood1",s[s.Wood2=6]="Wood2",s[s.HomeBase=1]="HomeBase",s[s.MonsterGenerator=7]="MonsterGenerator",s[s.Water=8]="Water",s[s.PowerTile=14]="PowerTile",s[s.Sawmill=10]="Sawmill",s[s.Mine=11]="Mine",s[s.MineAlt=13]="MineAlt",s[s.MineClaimed=12]="MineClaimed",s[s.Burnt=15]="Burnt",s))(ft||{}),wr=(s=>(s[s.Sawmill=1]="Sawmill",s[s.Farm=2]="Farm",s[s.Bridge=3]="Bridge",s[s.Tower=4]="Tower",s[s.Hive=5]="Hive",s))(wr||{}),yh=(s=>(s[s.Download=0]="Download",s[s.Editor=1]="Editor",s[s.Upload=2]="Upload",s))(yh||{});const Yn="Codhex_SaveGame",pc="Codehex_FirstVisit",Ea=new Array(5).fill(0).map((s,t)=>Math.pow(8+t*2,2));var nt=(s=>(s.Game="GameScene",s.Menu="MenuScene",s.UI="UiScene",s.Editor="EditorScene",s))(nt||{});function Ps(s,t=300){let e;return(...r)=>{clearTimeout(e),e=setTimeout(()=>{s.apply(this,r)},t)}}function gc(s,t=300){let e=0;return function(){Date.now()-e>t&&s(),e=Date.now()}}const _T=(s,t)=>t.every(e=>s.some(r=>r instanceof e));function Oh(){let s=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(s=!0)}(navigator.userAgent||navigator.vendor||window.opera),s}const tC=()=>window.matchMedia("(orientation: landscape)").matches;function at(s,t=!1){var e,r;if((r=(e=window.process)==null?void 0:e.env)!=null&&r.isTest){const i=t?s*10:s/10;return i<=5?i*2:i}return s}async function eC(s){return new Promise((t,e)=>{const r=new FileReader;r.onload=i=>t(JSON.parse(i.target.result.toString())),r.onerror=i=>e(i),r.readAsText(s)})}const iC=()=>({type:js.AUTO,parent:"game",pixelArt:!1,backgroundColor:"#6d6a63",gameTitle:"Codhex",dom:{createContainer:!0},scale:{width:window.innerWidth-5,height:Oh()?window.screen.availHeight:window.innerHeight-5,mode:js.Scale.NONE,autoCenter:js.Scale.NONE},banner:!1}),hi=()=>Ea[ct.currentLevel-1],ct={grid:{gridType:"hexagonGrid",x:200,y:50,cellWidth:48,cellHeight:56,staggeraxis:"x",staggerindex:"odd"},get width(){return Math.sqrt(hi())},get height(){return Math.sqrt(hi())},currentLevel:1};var Ms={i8:"i8",ui8:"ui8",ui8c:"ui8c",i16:"i16",ui16:"ui16",i32:"i32",ui32:"ui32",f32:"f32",f64:"f64",eid:"eid"},Lh={i8:"Int8",ui8:"Uint8",ui8c:"Uint8Clamped",i16:"Int16",ui16:"Uint16",i32:"Int32",ui32:"Uint32",eid:"Uint32",f32:"Float32",f64:"Float64"},qi={i8:Int8Array,ui8:Uint8Array,ui8c:Uint8ClampedArray,i16:Int16Array,ui16:Uint16Array,i32:Int32Array,ui32:Uint32Array,f32:Float32Array,f64:Float64Array,eid:Uint32Array},bh={uint8:2**8,uint16:2**16,uint32:2**32},sC=s=>t=>Math.ceil(t/s)*s,Qg=sC(4),nC=Symbol("storeRef"),wa=Symbol("storeSize"),rC=Symbol("storeMaps"),es=Symbol("storeFlattened"),yo=Symbol("storeBase"),jg=Symbol("storeType"),Gf=Symbol("storeArrayElementCounts"),Nn=Symbol("storeSubarrays"),Fa=Symbol("subarrayCursors"),qg=Symbol("subarray"),Da=Symbol("parentArray"),Yf=Symbol("tagStore"),wh=Symbol("indexType"),Fh=Symbol("indexBytes"),_g=Symbol("isEidType"),ps={},tm=(s,t)=>{const e=new ArrayBuffer(t*s.BYTES_PER_ELEMENT),r=new s.constructor(e);return r.set(s,0),r},aC=(s,t)=>{if(ArrayBuffer.isView(s))s[t]=s.slice(0);else{const e=s[Da].slice(0);s[t]=s.map((r,i)=>{const{length:n}=s[i],o=n*i,a=o+n;return e.subarray(o,a)})}},oC=(s,t,e)=>{const r=s[Fa];let i=t[jg];const n=t[0].length,o=n<=bh.uint8?Ms.ui8:n<=bh.uint16?Ms.ui16:Ms.ui32;if(r[i]===0){const u=s[Gf][i],l=new qi[i](Qg(u*e));l.set(s[Nn][i]),s[Nn][i]=l,l[wh]=Lh[o],l[Fh]=qi[o].BYTES_PER_ELEMENT}const a=r[i],h=a+e*n;r[i]=h,t[Da]=s[Nn][i].subarray(a,h);for(let u=0;u<e;u++){const l=n*u,f=l+n;t[u]=t[Da].subarray(l,f),t[u][wh]=Lh[o],t[u][Fh]=qi[o].BYTES_PER_ELEMENT,t[u][qg]=!0}},em=(s,t,e)=>{Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?(oC(s,i,e),t[es].push(i)):ArrayBuffer.isView(i)?(t[r]=tm(i,e),t[es].push(t[r])):typeof i=="object"&&em(s,t[r],e)})},im=(s,t)=>{s[Yf]||(s[wa]=t,s[es].length=0,Object.keys(s[Fa]).forEach(e=>{s[Fa][e]=0}),em(s,s,t))},sm=(s,t)=>{s[es]&&s[es].forEach(e=>{ArrayBuffer.isView(e)?e[t]=0:e[t].fill(0)})},hC=(s,t)=>{const e=t*qi[s].BYTES_PER_ELEMENT,r=new ArrayBuffer(e),i=new qi[s](r);return i[_g]=s===Ms.eid,i},lC=(s,t,e)=>{const r=s[wa],i=Array(r).fill(0);i[jg]=t,i[_g]=t===Ms.eid;const n=s[Fa],o=e<=bh.uint8?Ms.ui8:e<=bh.uint16?Ms.ui16:Ms.ui32;if(!e)throw new Error("bitECS - Must define component array length");if(!qi[t])throw new Error(`bitECS - Invalid component array property type ${t}`);if(!s[Nn][t]){const u=s[Gf][t],l=new qi[t](Qg(u*r));l[wh]=Lh[o],l[Fh]=qi[o].BYTES_PER_ELEMENT,s[Nn][t]=l}const a=n[t],h=a+r*e;n[t]=h,i[Da]=s[Nn][t].subarray(a,h);for(let u=0;u<r;u++){const l=e*u,f=l+e;i[u]=i[Da].subarray(l,f),i[u][wh]=Lh[o],i[u][Fh]=qi[o].BYTES_PER_ELEMENT,i[u][qg]=!0}return i},mc=s=>Array.isArray(s)&&typeof s[0]=="string"&&typeof s[1]=="number",uC=(s,t)=>{const e=Symbol("store");if(!s||!Object.keys(s).length)return ps[e]={[wa]:t,[Yf]:!0,[yo]:()=>ps[e]},ps[e];s=JSON.parse(JSON.stringify(s));const r={},i=o=>{const a=Object.keys(o);for(const h of a)mc(o[h])?(r[o[h][0]]||(r[o[h][0]]=0),r[o[h][0]]+=o[h][1]):o[h]instanceof Object&&i(o[h])};i(s);const n={[wa]:t,[rC]:{},[Nn]:{},[nC]:e,[Fa]:Object.keys(qi).reduce((o,a)=>({...o,[a]:0}),{}),[es]:[],[Gf]:r};if(s instanceof Object&&Object.keys(s).length){const o=(a,h)=>{if(typeof a[h]=="string")a[h]=hC(a[h],t),a[h][yo]=()=>ps[e],n[es].push(a[h]);else if(mc(a[h])){const[u,l]=a[h];a[h]=lC(n,u,l),a[h][yo]=()=>ps[e],n[es].push(a[h])}else a[h]instanceof Object&&(a[h]=Object.keys(a[h]).reduce(o,a[h]));return a};return ps[e]=Object.assign(Object.keys(s).reduce(o,s),n),ps[e][yo]=()=>ps[e],ps[e]}},Bn=()=>{const s=[],t=[];s.sort=function(n){const o=Array.prototype.sort.call(this,n);for(let a=0;a<s.length;a++)t[s[a]]=a;return o};const e=n=>s[t[n]]===n;return{add:n=>{e(n)||(t[n]=s.push(n)-1)},remove:n=>{if(!e(n))return;const o=t[n],a=s.pop();a!==n&&(s[o]=a,t[a]=o)},has:e,sparse:t,dense:s}},li=Symbol("entityMasks"),Qa=Symbol("entityComponents"),Rs=Symbol("entitySparseSet"),Pa=Symbol("entityArray"),Qh=1e5,Dh=0,Un=Qh,fC=()=>Un-Un/5,Ia=()=>Un,Ih=[],dC=()=>{Un=Qh,Dh=0,Ih.length=0},cC=s=>{const t=Un;Qh=s,dC(),Un=s,OC(s),PC(s),console.info(` bitECS - resizing all data stores from ${t} to ${s}`)},vC=()=>Dh,pC=new Map,Gr=s=>{if(Dh>=fC()){const e=Un,r=Math.ceil(e/2/4)*4;cC(e+r)}const t=Ih.length>Math.round(Qh*.01)?Ih.shift():Dh++;return s[Rs].add(t),pC.set(t,s),s[zf].forEach(e=>{qh(s,e,t)&&_h(e,t)}),s[Qa].set(t,new Set),t},Nf=(s,t)=>{if(s[Rs].has(t)){s[jh].forEach(e=>{Uf(s,e,t)}),Ih.push(t),s[Rs].remove(t),s[Qa].delete(t),s[am].delete(s[tf].get(t)),s[tf].delete(t);for(let e=0;e<s[li].length;e++)s[li][e][t]=0}},Xf=(s,t)=>s[Rs].has(t);function gC(s){return()=>[s,"not"]}function xc(s){return()=>[s,"changed"]}var jh=Symbol("queries"),zf=Symbol("notQueries"),mC=Symbol("queryAny"),xC=Symbol("queryAll"),yC=Symbol("queryNone"),sn=Symbol("queryMap"),Ma=Symbol("$dirtyQueries"),nm=Symbol("queryComponents"),Os=s=>t=>{t[sn].has(s)||Vf(t,s);const e=t[sn].get(s),r=e.entered.dense.slice();return e.entered=Bn(),r},nn=s=>t=>{t[sn].has(s)||Vf(t,s);const e=t[sn].get(s),r=e.exited.dense.slice();return e.exited=Bn(),r},Vf=(s,t)=>{const e=[],r=[],i=[];t[nm].forEach(C=>{if(typeof C=="function"){const[S,E]=C();s[is].has(S)||_u(s,S),E==="not"&&r.push(S),E==="changed"&&(i.push(S),e.push(S))}else s[is].has(C)||_u(s,C),e.push(C)});const n=C=>s[is].get(C),o=e.concat(r).map(n),a=Bn(),h=[],u=[],l=Bn(),f=Bn(),c=Bn(),d=o.map(C=>C.generationId).reduce((C,S)=>(C.includes(S)||C.push(S),C),[]),v=(C,S)=>(C[S.generationId]||(C[S.generationId]=0),C[S.generationId]|=S.bitflag,C),p=e.map(n).reduce(v,{}),g=r.map(n).reduce(v,{}),m=o.reduce(v,{}),x=e.filter(C=>!C[Yf]).map(C=>Object.getOwnPropertySymbols(C).includes(es)?C[es]:[C]).reduce((C,S)=>C.concat(S),[]),T=Object.assign(a,{archetypes:h,changed:u,components:e,notComponents:r,changedComponents:i,allComponents:o,masks:p,notMasks:g,hasMasks:m,generations:d,flatProps:x,toRemove:l,entered:f,exited:c,shadows:[]});s[sn].set(t,T),s[jh].add(T),o.forEach(C=>{C.queries.add(T)}),r.length&&s[zf].add(T);for(let C=0;C<vC();C++){if(!s[Rs].has(C))continue;qh(s,T,C)&&_h(T,C)}},TC=(s,t)=>{const e=Symbol(),r=s.flatProps[t];return aC(r,e),s.shadows[t]=r[e],r[e]},CC=(s,t)=>{t&&(s.changed=[]);const{flatProps:e,shadows:r}=s;for(let i=0;i<s.dense.length;i++){const n=s.dense[i];let o=!1;for(let a=0;a<e.length;a++){const h=e[a],u=r[a]||TC(s,a);if(ArrayBuffer.isView(h[n])){for(let l=0;l<h[n].length;l++)if(h[n][l]!==u[n][l]){o=!0;break}u[n].set(h[n])}else h[n]!==u[n]&&(o=!0,u[n]=h[n])}o&&s.changed.push(n)}return s.changed},Ni=(...s)=>{let t,e,r,i;if(Array.isArray(s[0])&&(t=s[0]),t===void 0||t[is]!==void 0)return o=>o?o[Pa]:t[Pa];const n=function(o,a=!0){o[sn].has(n)||Vf(o,n);const h=o[sn].get(n);return EC(o),h.changedComponents.length?CC(h,a):h.dense};return n[nm]=t,n[mC]=e,n[xC]=r,n[yC]=i,n},qh=(s,t,e)=>{const{masks:r,notMasks:i,generations:n}=t;for(let o=0;o<n.length;o++){const a=n[o],h=r[a],u=i[a],l=s[li][a][e];if(u&&l&u||h&&(l&h)!==h)return!1}return!0},_h=(s,t)=>{s.toRemove.remove(t),s.entered.add(t),s.add(t)},SC=s=>{for(let t=s.toRemove.dense.length-1;t>=0;t--){const e=s.toRemove.dense[t];s.toRemove.remove(e),s.remove(e)}},EC=s=>{s[Ma].size&&(s[Ma].forEach(SC),s[Ma].clear())},Uf=(s,t,e)=>{!t.has(e)||t.toRemove.has(e)||(t.toRemove.add(e),s[Ma].add(t),t.exited.add(e))},is=Symbol("componentMap"),rm=[],PC=s=>{rm.forEach(t=>im(t,s))},le=(s,t)=>{const e=uC(s,t||Ia());return s&&Object.keys(s).length&&rm.push(e),e},MC=s=>{s[Ra]*=2,s[Ra]>=2**31&&(s[Ra]=1,s[li].push(new Uint32Array(s[Aa])))},_u=(s,t)=>{if(!t)throw new Error("bitECS - Cannot register null or undefined component");const e=new Set,r=new Set,i=new Set;s[jh].forEach(n=>{n.allComponents.includes(t)&&e.add(n)}),s[is].set(t,{generationId:s[li].length-1,bitflag:s[Ra],store:t,queries:e,notQueries:r,changedQueries:i}),t[wa]<Ia()&&im(t,Ia()),MC(s)},ht=(s,t,e)=>{const r=s[is].get(t);if(!r)return!1;const{generationId:i,bitflag:n}=r;return(s[li][i][e]&n)===n},si=(s,t,e,r=!1)=>{if(e===void 0)throw new Error("bitECS - entity is undefined.");if(!s[Rs].has(e))throw new Error("bitECS - entity does not exist in the world.");if(s[is].has(t)||_u(s,t),ht(s,t,e))return;const i=s[is].get(t),{generationId:n,bitflag:o,queries:a,notQueries:h}=i;s[li][n][e]|=o,a.forEach(u=>{u.toRemove.has(e)&&u.toRemove.remove(e);const l=qh(s,u,e);l&&_h(u,e),l||Uf(s,u,e)}),s[Qa].get(e).add(t),r&&sm(t,e)},me=(s,t,e,r=!0)=>{if(e===void 0)throw new Error("bitECS - entity is undefined.");if(!s[Rs].has(e))throw new Error("bitECS - entity does not exist in the world.");if(!ht(s,t,e))return;const i=s[is].get(t),{generationId:n,bitflag:o,queries:a}=i;s[li][n][e]&=~o,a.forEach(h=>{h.toRemove.has(e)&&h.toRemove.remove(e);const u=qh(s,h,e);u&&_h(h,e),u||Uf(s,h,e)}),s[Qa].get(e).delete(t),r&&sm(t,e)},Aa=Symbol("size"),AC=Symbol("resizeThreshold"),Ra=Symbol("bitflag"),RC=Symbol("archetypes"),am=Symbol("localEntities"),tf=Symbol("localEntityLookp"),Bh=[],OC=s=>{Bh.forEach(t=>{t[Aa]=s;for(let e=0;e<t[li].length;e++){const r=t[li][e];t[li][e]=tm(r,s)}t[AC]=t[Aa]-t[Aa]/5})},ef=(...s)=>{const t=typeof s[0]=="object"?s[0]:{},e=typeof s[0]=="number"?s[0]:typeof s[1]=="number"?s[1]:Ia();return LC(t,e),Bh.push(t),t},LC=(s,t=Ia())=>(s[Aa]=t,s[Pa]&&s[Pa].forEach(e=>Nf(s,e)),s[li]=[new Uint32Array(t)],s[Qa]=new Map,s[RC]=[],s[Rs]=Bn(),s[Pa]=s[Rs].dense,s[Ra]=1,s[is]=new Map,s[sn]=new Map,s[jh]=new Set,s[zf]=new Set,s[Ma]=new Set,s[am]=new Map,s[tf]=new Map,s),yc=s=>{Object.getOwnPropertySymbols(s).forEach(t=>{delete s[t]}),Object.keys(s).forEach(t=>{delete s[t]}),Bh.splice(Bh.indexOf(s),1)},ln=s=>(t,...e)=>(s(t,...e),t),he=Ms;const $s=Phaser.Utils.Objects.GetValue;let om=class{constructor(t,e,r,i,n){t===void 0&&(t=0),e===void 0&&(e=t),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,r,i,n)}setTo(t,e,r,i,n){return this.setPosition(t,e),this.setRadius(n),this.setSize(r,i),this}setPosition(t,e){return this.x=t,this.y=e,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,r;typeof t=="number"?(e=t,r=t):(e=$s(t,"x",0),r=$s(t,"y",0));var i=this.cornerRadius;i.tl=To($s(t,"tl",void 0),e,r),i.tr=To($s(t,"tr",void 0),e,r),i.bl=To($s(t,"bl",void 0),e,r),i.br=To($s(t,"br",void 0),e,r)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Co(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Co(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Co(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Co(this.cornerRadius.br,t)}};var To=function(s,t,e){return s===void 0?s={x:t,y:e}:typeof s=="number"&&(s={x:s,y:s}),hm(s),s},Co=function(s,t){typeof t=="number"?(s.x=t,s.y=t):(s.x=$s(t,"x",0),s.y=$s(t,"y",0)),hm(s)},hm=function(s){s.convex=s.x>=0||s.y>=0,s.x=Math.abs(s.x),s.y=Math.abs(s.y)},_i=function(s,t,e){var r=e.length;if(r>=2){var i=e[r-2],n=e[r-1];if(s===i&&t===n)return e}return e.push(s,t),e};const Tc=Phaser.Math.DegToRad;var re=function(s,t,e,r,i,n,o,a,h){o&&n>i?n-=360:!o&&n<i&&(n+=360);var u=n-i,l=Tc(u)/a;i=Tc(i);for(var f=0;f<=a;f++){var c=i+l*f,d=s+e*Math.cos(c),v=t+r*Math.sin(c);_i(d,v,h)}return h},bC=Phaser.Renderer.WebGL.Utils,lm=function(s,t,e,r,i,n){for(var o=bC.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*r),a=e.pathData,h=e.pathIndexes,u=0;u<h.length;u+=3){var l=h[u]*2,f=h[u+1]*2,c=h[u+2]*2,d=a[l+0]-i,v=a[l+1]-n,p=a[f+0]-i,g=a[f+1]-n,m=a[c+0]-i,x=a[c+1]-n,y=t.getX(d,v),T=t.getY(d,v),C=t.getX(p,g),S=t.getY(p,g),E=t.getX(m,x),P=t.getY(m,x);s.batchTri(e,y,T,C,S,E,P,0,0,1,1,o,o,o,2)}},wC=Phaser.Renderer.WebGL.Utils,tl=function(s,t,e,r,i){var n=s.strokeTint,o=wC.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*e);n.TL=o,n.TR=o,n.BL=o,n.BR=o;var a=t.pathData,h=a.length-1,u=t.lineWidth,l=u/2,f=a[0]-r,c=a[1]-i;t.closePath||(h-=2);for(var d=2;d<h;d+=2){var v=a[d]-r,p=a[d+1]-i;s.batchLine(f,c,v,p,l,l,u,d-2,t.closePath?d===h-1:!1),f=v,c=p}};const FC=Phaser.GameObjects.GetCalcMatrix;var DC=function(s,t,e,r){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=s.pipelines.set(t.pipeline),n=FC(t,e,r),o=i.calcMatrix.copyFrom(n.calc),a=t._displayOriginX,h=t._displayOriginY,u=e.alpha*t.alpha;s.pipelines.preBatch(t),t.isFilled&&lm(i,o,t,u,a,h),t.isStroked&&tl(i,t,u,a,h),s.pipelines.postBatch(t)},ja=function(s,t,e,r){var i=e||t.fillColor,n=r||t.fillAlpha,o=(i&16711680)>>>16,a=(i&65280)>>>8,h=i&255;s.fillStyle="rgba("+o+","+a+","+h+","+n+")"},qa=function(s,t,e,r){var i=e||t.strokeColor,n=r||t.strokeAlpha,o=(i&16711680)>>>16,a=(i&65280)>>>8,h=i&255;s.strokeStyle="rgba("+o+","+a+","+h+","+n+")",s.lineWidth=t.lineWidth};const IC=Phaser.Renderer.Canvas.SetTransform;var BC=function(s,t,e,r){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=s.currentContext;if(IC(s,i,t,e,r)){var n=t._displayOriginX,o=t._displayOriginY,a=t.pathData,h=a.length-1,u=a[0]-n,l=a[1]-o;i.beginPath(),i.moveTo(u,l),t.closePath||(h-=2);for(var f=2;f<h;f+=2){var c=a[f]-n,d=a[f+1]-o;i.lineTo(c,d)}i.closePath(),t.isFilled&&(ja(i,t),i.fill()),t.isStroked&&(qa(i,t),i.stroke()),i.restore()}};const GC={renderWebGL:DC,renderCanvas:BC},YC=Phaser.GameObjects.Shape,NC=Phaser.Utils.Objects.IsPlainObject,Cc=Phaser.Utils.Objects.GetValue,XC=Phaser.Geom.Polygon.Earcut;let kn=class extends YC{constructor(t,e,r,i,n,o,a,h){var u,l,f,c;if(NC(e)){var d=e;e=d.x,r=d.y,i=d.width,n=d.height,o=d.radius,a=d.color,h=d.alpha,u=d.strokeColor,l=d.strokeAlpha,f=d.strokeWidth,c=d.shape}e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),n===void 0&&(n=i),o===void 0&&(o=0),c===void 0&&(c=0);var v=new om;if(super(t,"rexRoundRectangleShape",v),this.setShapeType(c),this.shapeType===0){var p=Cc(o,"radius",o);v.setTo(0,0,i,n,p)}else{var p={x:i/2,y:n/2};v.setTo(0,0,i,n,p)}var g=Cc(o,"iteration",void 0);this.setIteration(g),this.setPosition(e,r),this.setFillStyle(a,h),u!==void 0&&f===void 0&&(f=2),this.setStrokeStyle(f,u,l),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var r=t.width,i=t.height,n=t.cornerRadius,o,a=this.iteration+1;if(o=n.tl,So(o))if(o.convex){var h=o.x,u=o.y;re(h,u,o.x,o.y,180,270,!1,a,e)}else{var h=0,u=0;re(h,u,o.x,o.y,90,0,!0,a,e)}else _i(0,0,e);if(o=n.tr,So(o))if(o.convex){var h=r-o.x,u=o.y;re(h,u,o.x,o.y,270,360,!1,a,e)}else{var h=r,u=0;re(h,u,o.x,o.y,180,90,!0,a,e)}else _i(r,0,e);if(o=n.br,So(o))if(o.convex){var h=r-o.x,u=i-o.y;re(h,u,o.x,o.y,0,90,!1,a,e)}else{var h=r,u=i;re(h,u,o.x,o.y,270,180,!0,a,e)}else _i(r,i,e);if(o=n.bl,So(o))if(o.convex){var h=o.x,u=i-o.y;re(h,u,o.x,o.y,90,180,!1,a,e)}else{var h=0,u=i;re(h,u,o.x,o.y,360,270,!0,a,e)}else _i(0,i,e);return e.push(e[0],e[1]),this.pathIndexes=XC(e),this}setShapeType(t){return typeof t=="string"&&(t=zC[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(e===void 0&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.shapeType===1&&this.setRadius({x:t/2,y:e/2}),this.updateDisplayOrigin(),this.dirty=!0;var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}};var So=function(s){return s.x!==0&&s.y!==0};const zC={rectangle:0,circle:1};Object.assign(kn.prototype,GC);var VC=function(s){return s===void 0&&(s=UC),this.getFrameNameCallback=s,this},UC=function(s,t,e){return e==="__BASE"?`${s},${t}`:`${e}_${s},${t}`},pi=function(s){var t,e,r;if(s==null||typeof s!="object")return s;t=Array.isArray(s)?[]:{};for(r in s)e=s[r],t[r]=pi(e);return t},WC=function(s,t,e,r){Array.isArray(t)&&(r=e,e=t,t=void 0),t===void 0&&(t="__BASE"),e=pi(e),r=pi(r),this.textureKey=s,this.baseFrameName=t,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=r,this.rows.count=r?r.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var i=this.scene.sys.textures.get(s);if(!i)return this.clear(),this;if(!e||!r)return this.clear(),this;for(var n=i.get(t),o=n.width,a=0,h=0,u=e.length;h<u;h++)e[h]===void 0?a++:typeof e[h]=="number"?o-=e[h]:o-=e[h].width;for(var l=o/a,f=n.height,c=0,h=0,u=r.length;h<u;h++)r[h]===void 0?c++:typeof r[h]=="number"?f-=r[h]:f-=r[h].width;for(var d=f/c,v,p,g,m,x,y=0,T=0,C=0,S=r.length;C<S;C++){r[C]===void 0&&(r[C]=d),typeof r[C]=="number"&&(r[C]={height:r[C],stretch:C%2}),v=r[C],g=v.height,this.rows.stretch+=v.stretch|0,this.rows.minHeight+=v.stretch>0?0:g,y=0;for(var h=0,E=e.length;h<E;h++){if(e[h]===void 0&&(e[h]=l),typeof e[h]=="number"&&(e[h]={width:e[h],stretch:h%2}),p=e[h],m=p.width,C===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:m),m>=1&&g>=1){x=this.getFrameNameCallback(h,C,t);var P=typeof x;(P==="string"||P==="number")&&i.add(x,0,y+n.cutX,T+n.cutY,m,g)}y+=m}T+=g}return this.updateTexture(),this},HC=function(){if(this.clear(),this.textureKey===void 0)return this;var s=this.scene.sys.textures.get(this.textureKey);if(!s)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,r=this.width-t,i=this.height-e,n=r>=0?this.maxFixedPartScaleX:this.width/t,o=i>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var a=Math.min(n,o);if(n>a){var h=(n-a)*t;r>=0?r+=h:r=h,n=a}if(o>a){var u=(o-a)*e;i>=0?i+=u:i=u,o=a}}this.columns.scale=n,this.rows.scale=o;var l;r>0?l=this.columns.stretch>0?r/this.columns.stretch:0:l=0;var f;i>0?f=this.rows.stretch>0?i/this.rows.stretch:0:f=0;for(var c,d,v,p,g,m=0,x=0,y,T=0,C=this.rows.count;T<C;T++){v=this.rows.data[T],g=v.stretch===0?v.height*o:f*v.stretch,m=0;for(var S=0,E=this.columns.count;S<E;S++)d=this.columns.data[S],p=d.stretch===0?d.width*n:l*d.stretch,c=this.getFrameNameCallback(S,T,this.baseFrameName),s.has(c)&&p>0&&g>0&&(v.stretch===0&&d.stretch===0||this.getStretchMode(S,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,c,m,x,p,g):this._drawTileSprite(this.textureKey,c,m,x,p,g)),m+=p;x+=g}};const kC=Phaser.Utils.Objects.IsPlainObject,Sc=Phaser.Utils.Objects.GetValue;var $C=function(s){return kC(s)?(this.stretchMode.edge=Pl(Sc(s,"edge",0)),this.stretchMode.internal=Pl(Sc(s,"internal",0))):(s=Pl(s),this.stretchMode.edge=s,this.stretchMode.internal=s),this},Pl=function(s){return typeof s=="string"&&(s=ZC[s]),s};const ZC={scale:0,repeat:1};var KC=function(s,t){return s===0||s===this.columns.count-1||t===0||t===this.rows.count-1},JC=function(s,t){return KC.call(this,s,t)?this.stretchMode.edge:this.stretchMode.internal},QC=function(s){return s==null&&(s=!0),this.preserveRatio=s,this},jC=function(s,t){return t===void 0&&(t=s),this.maxFixedPartScaleX=s,this.maxFixedPartScaleY=t,this},We=function(){};const qC={_drawImage:We,_drawTileSprite:We,setGetFrameNameCallback:VC,setTexture:WC,updateTexture:HC,setStretchMode:$C,getStretchMode:JC,setPreserveRatio:QC,setMaxFixedPartScale:jC},Kr=Phaser.Utils.Objects.IsPlainObject,St=Phaser.Utils.Objects.GetValue;var um=function(s,t){class e extends s{constructor(i,n,o,a,h,u,l,f,c,d){Kr(n)?(d=n,n=St(d,"x",0),o=St(d,"y",0),a=St(d,"width",1),h=St(d,"height",1),u=St(d,"key",void 0),l=St(d,"baseFrame",void 0),f=St(d,"columns",void 0),c=St(d,"rows",void 0)):Kr(a)?(d=a,a=St(d,"width",1),h=St(d,"height",1),u=St(d,"key",void 0),l=St(d,"baseFrame",void 0),f=St(d,"columns",void 0),c=St(d,"rows",void 0)):Kr(u)?(d=u,u=St(d,"key",void 0),l=St(d,"baseFrame",void 0),f=St(d,"columns",void 0),c=St(d,"rows",void 0)):Kr(l)?(d=l,l=St(d,"baseFrame",void 0),f=St(d,"columns",void 0),c=St(d,"rows",void 0)):Array.isArray(l)?(d=c,c=f,f=l,l=St(d,"baseFrame",void 0)):Kr(f)&&(d=f,f=St(d,"columns",void 0),c=St(d,"rows",void 0)),super(i),this.type=t,this.setPosition(n,o).setSize(a,h).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(St(d,"getFrameNameCallback",void 0)),this.setStretchMode(St(d,"stretchMode",0)),this.setPreserveRatio(St(d,"preserveRatio",!0));var v=St(d,"maxFixedPartScale",1),p=St(d,"maxFixedPartScaleX",v),g=St(d,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setTexture(u,l,f,c)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(i,n){return this.width===i&&this.height===n?this:(super.resize(i,n),this.updateTexture(),this)}}return Object.assign(e.prototype,qC),e},fm=function(s,t,e){return e===void 0&&(e="image"),s[t]||(s[t]=s.scene.make[e]({add:!1,origin:{x:0,y:0}}),s.once("destroy",function(){s[t]&&(s[t].destroy(),s[t]=void 0)})),s[t]},_C=function(s,t,e,r,i,n){var o=fm(this,"_image","image").setTexture(s,t).setDisplaySize(i,n);this.draw(o,e,r)},t1=function(s,t,e,r,i,n){var o=fm(this,"_tileSprite","tileSprite").setTexture(s,t).setSize(i,n);this.draw(o,e,r)};const e1={_drawImage:_C,_drawTileSprite:t1},i1=Phaser.GameObjects.RenderTexture;let s1=class extends um(i1,"rexNinePatch"){};Object.assign(s1.prototype,e1);const n1=Phaser.GameObjects.GetCalcMatrix;var r1=function(s,t,e,r){var i=t.getRenderList();if(i.length!==0){e.addToRenderList(t);var n=s.pipelines.set(t.pipeline),o=t.frame.glTexture,a=n.setGameObject(t),h=e.roundPixels,u=n1(t,e,r),l=n.calcMatrix.copyFrom(u.calc),f=t._displayOriginX,c=t._displayOriginY,d=e.alpha*t.alpha;s.pipelines.preBatch(t);for(var v=0,p=i.length;v<p;v++)i[v].webglRender(n,l,d,f,c,o,a,h);s.pipelines.postBatch(t)}};const a1=Phaser.Renderer.Canvas.SetTransform;var o1=function(s,t,e,r){var i=s.currentContext,n=t.getRenderList();if(!(n.length===0||!a1(s,i,t,e,r))){e.addToRenderList(t);var o=e.roundPixels,a=-t._displayOriginX,h=-t._displayOriginY;i.translate(a,h);for(var u=0,l=n.length;u<l;u++)n[u].canvasRender(i,a,h,o);i.restore()}};const h1={renderWebGL:r1,renderCanvas:o1};var dm=function(s,t){return this.texture=this.scene.sys.textures.get(s),this.frame=this.texture.get(t),this},Ec=function(s,t){if(this.width===s&&this.height===t)return this;this.width=s,this.height=t,this.updateDisplayOrigin();var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=s,e.hitArea.height=t),this},l1=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.add(s),this.lastAppendedChildren.push(...s)):(this.children.add(s),this.lastAppendedChildren.push(s)),this};const u1=Phaser.Utils.Array.Remove;var f1=function(s){return this.poolManager&&this.poolManager.free(s),u1(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},Pc=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},d1=function(){return this.lastAppendedChildren},c1=function(){return this.children.list};const v1={setTint(s){return this.tint=s,this.tintFill=!1,this},setTintFill(s){return this.tint=s,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var cm={setTexture:dm,resize:Ec,setSize:Ec,addChild:l1,removeChild:f1,removeChildren:Pc,clear:Pc,getLastAppendedChildren:d1,getChildren:c1};Object.assign(cm,v1);class Yr{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const p1=Phaser.Utils.Objects.GetValue;var g1={};let m1=class{constructor(t){this.pools=p1(t,"pools",g1)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Yr),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,r=t.length;e<r;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}};const x1=Phaser.GameObjects.GameObject,y1=Phaser.Utils.Objects.IsPlainObject,Jr=Phaser.Utils.Objects.GetValue,T1=Phaser.Structs.List,C1=Phaser.Utils.Array.StableSort;class vm extends x1{constructor(t,e,r,i,n,o){y1(e)&&(o=e,e=Jr(o,"x",0),r=Jr(o,"y",0),i=Jr(o,"texture"),n=Jr(o,"frame")),e===void 0&&(e=0),r===void 0&&(r=0),super(t,"rexBlitter"),this.children=new T1,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var a=Jr(o,"reuseBob",!0);this.poolManager=a?new m1(o):void 0,this.setTexture(i,n).setPosition(e,r).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,e=this.children.list,r=0,i=e.length;r<i;r++){var n=e[r];S1(n)&&(this.renderList.push(n),t||(t=n.depth!==0))}t&&C1(this.renderList,E1),this.displayListDirty=!1}return this.renderList}}var S1=function(s){return s.active&&s.visible&&s.alpha>0},E1=function(s,t){return s._depth-t._depth};const mi=Phaser.GameObjects.Components;Phaser.Class.mixin(vm,[mi.Alpha,mi.BlendMode,mi.ComputedSize,mi.Depth,mi.GetBounds,mi.Mask,mi.Origin,mi.Pipeline,mi.ScrollFactor,mi.Transform,mi.Visible,h1,cm]);const pm="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var K=function(s,t,e){if(!s||typeof s=="number")return e;if(s.hasOwnProperty(t))return s[t];if(t.indexOf(".")!==-1){for(var r=t.split("."),i=s,n=e,o=0;o<r.length;o++)if(i.hasOwnProperty(r[o]))n=i[r[o]],i=i[r[o]];else{n=e;break}return n}else return e},ui=function(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))s.length=0;else for(var t in s)delete s[t];return s};const el={enableData(){return this.data===void 0&&(this.data={}),this},setData(s,t){if(this.enableData(),arguments.length===1){var e=s;for(s in e)this.data[s]=e[s]}else this.data[s]=t;return this},getData(s,t){return this.enableData(),s===void 0?this.data:K(this.data,s,t)},incData(s,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(s,this.getData(s,e)+t),this},mulData(s,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(s,this.getData(s,e)*t),this},clearData(){return this.data&&ui(this.data),this}};let gm=class{constructor(t,e){this.type=e,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(gm.prototype,el);const P1=Phaser.Math.DegToRad,M1=Phaser.Math.RadToDeg,tr=Phaser.Utils.Objects.GetValue;let A1=class extends gm{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setRotation(t){return this.rotation=t,this}get angle(){return M1(this.rotation)}set angle(t){this.rotation=P1(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,e){return e===void 0&&(e=!1),this.displayWidth=t,e&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,e){return e===void 0&&(e=!1),this.displayHeight=t,e&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,e){return e===void 0&&(e=t),this.setOriginX(t).setOriginY(e),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=tr(t,"width",void 0),r=tr(t,"height",void 0),i=tr(t,"scale",void 0),n=tr(t,"scaleX",i),o=tr(t,"scaleY",i);e!==void 0?r===void 0&&o===void 0?this.setWidth(e,!0):this.setWidth(e):n!==void 0?this.setScaleX(n):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),r!==void 0?e===void 0&&n===void 0?this.setHeight(r,!0):this.setHeight(r):o!==void 0?this.setScaleY(o):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var a=tr(t,"origin",void 0);return a!==void 0?this.setOrigin(a):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,e,r,i,n,o,a,h){}canvasRender(t,e,r,i){}};const R1=Phaser.GameObjects.Components.TransformMatrix,O1=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var xi=new R1,L1=function(s,t,e,r,i,n,o,a){var h=this._width,u=this._height,l=h*this.originX,f=u*this.originY,c=this.x-r,d=this.y-i,v=1,p=1;this.flipX&&(c+=h-l*2,v=-1),this.flipY&&(d+=u-f*2,p=-1),xi.applyITRS(c,d,this.rotation,this.scaleX*v,this.scaleY*p),t.multiply(xi,xi);var g=-l,m=-f,x=g+h,y=m+u,T=xi.getXRound(g,m,a),C=xi.getXRound(g,y,a),S=xi.getXRound(x,y,a),E=xi.getXRound(x,m,a),P=xi.getYRound(g,m,a),M=xi.getYRound(g,y,a),R=xi.getYRound(x,y,a),A=xi.getYRound(x,m,a),O=this.frame.u0,b=this.frame.v0,w=this.frame.u1,I=this.frame.v1,Y=O1(this.tint,this.alpha*e);s.batchQuad(this.parent,T,P,C,M,S,R,E,A,O,b,w,I,Y,Y,Y,Y,this.tintFill,n,o)},b1=function(s,t,e,r){s.save();var i=this._width,n=this._height,o=i*this.originX,a=n*this.originY,h=this.x-o,u=this.y-a,l=1,f=1;this.flipX&&(h+=i,l=-1),this.flipY&&(u+=n,f=-1),r&&(h=Math.round(h),u=Math.round(u)),s.translate(h,u),s.rotate(this.rotation),s.scale(this.scaleX*l,this.scaleY*f);var c=this.frame;s.drawImage(c.source.image,c.cutX,c.cutY,i,n,0,0,i,n),s.restore()};const w1=Phaser.Utils.Objects.IsPlainObject;let mm=class extends A1{constructor(t,e){super(t,pm),this.setFrame(e)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!w1(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}};var F1={webglRender:L1,canvasRender:b1};Object.assign(mm.prototype,F1);var xm=function(s,t){typeof t=="string"&&(t={frame:t});var e=s.poolManager?s.poolManager.allocate(pm):null;return e===null?e=new mm(s):e.setParent(s).setActive(),e.modifyPorperties(t),s.addChild(e),e},D1=function(s,t,e,r,i,n){xm(this,{frame:t,x:e,y:r,width:i,height:n})},I1=function(s,t,e,r,i,n){var o=this.texture.get(t),a=o.width,h=o.height,u=Math.floor(i/a),l=Math.floor(n/h);e+=(i-u*a)/2,r+=(n-l*h)/2;for(var f=0;f<u;f++)for(var c=0;c<l;c++)xm(this,{frame:t,x:e+f*a,y:r+c*h})};const B1={_drawImage:D1,_drawTileSprite:I1};class G1 extends um(vm,"rexNinePatch2"){setTexture(t,e,r,i){return dm.call(this,t,"__BASE"),this.columns?(super.setTexture(t,e,r,i),this):this}}Object.assign(G1.prototype,B1);const Y1=Phaser.Renderer.WebGL.Utils;var N1=function(s,t,e,r){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,n=i.width,o=i.height,a=Y1.getTintAppendFloatAlpha,h=s.pipelines.set(t.pipeline,t),u=h.setTexture2D(i.glTexture,t);s.pipelines.preBatch(t),h.batchTexture(t,i.glTexture,n,o,t.x,t.y,n/t.resolution,o/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,o,a(t.tintTopLeft,e.alpha*t._alphaTL),a(t.tintTopRight,e.alpha*t._alphaTR),a(t.tintBottomLeft,e.alpha*t._alphaBL),a(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,r,!1,u),s.pipelines.postBatch(t)}},X1=function(s,t,e,r){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(e.addToRenderList(t),s.batchSprite(t,t.frame,e,r))};const z1={renderWebGL:N1,renderCanvas:X1},V1=Phaser.Display.Color,U1={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(s){return this.context.fillStyle=s,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(s,t){var e=this,r=new Image;return r.onload=function(){e.width!==r.width||e.height!==r.height?e.resize(r.width,r.height):e.clear(),e.context.drawImage(r,0,0),e.updateTexture(),t&&t(),r.onload=null,r.src="",r.remove()},r.src=s,this},loadFromURLPromise(s){var t=this;return new Promise(function(e,r){t.loadFromURL(s,e)})},drawFrame(s,t,e,r,i,n){var o=this.scene.sys.textures.getFrame(s,t);return o?(e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=o.cutWidth),n===void 0&&(n=o.cutHeight),this.context.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,e,r,i,n),this.dirty=!0,this):this},getDataURL(s,t){return this.canvas.toDataURL(s,t)},getPixel(s,t,e){e===void 0&&(e=new V1);var r=this.context.getImageData(s,t,1,1);return e.setTo(r.data[0],r.data[1],r.data[2],r.data[3]),e},setPixel(s,t,e,r,i,n){if(typeof e!="number"){var o=e;e=o.red,r=o.green,i=o.blue,n=o.alpha}n===void 0&&(n=e!==0||r!==0||i!==0?255:0);var a=this.context.createImageData(1,1);return a.data[0]=e,a.data[1]=r,a.data[2]=i,a.data[3]=n,this.context.putImageData(a,s,t),this.dirty=!0,this}};var W1=function(s,t,e,r,i,n,o){var a=s.sys.textures,h=s.renderer;r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=t.width),o===void 0&&(o=t.height);var u;a.exists(e)?u=a.get(e):u=a.createCanvas(e,n,o);var l=u.getSourceImage();l.width!==n&&(l.width=n),l.height!==o&&(l.height=o);var f=l.getContext("2d");f.clearRect(0,0,n,o),f.drawImage(t,r,i,n,o),h.gl&&u&&h.canvasToTexture(l,u.source[0].glTexture,!0,0)};const H1={updateTexture(s,t){s&&(t?s.call(t,this.canvas,this.context):s(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(s,t,e,r,i){var n=this.canvas;return r===void 0?r=n.width:r*=this.resolution,i===void 0?i=n.height:i*=this.resolution,W1(this.scene,n,s,t,e,r,i),this},loadTexture(s,t){var e=this.scene.sys.textures.getFrame(s,t);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.setSize(e.cutWidth,e.cutHeight):this.clear(),this.drawFrame(s,t),this.dirty=!0,this):this}},Mc=Phaser.Display.Canvas.CanvasPool,k1=Phaser.GameObjects.GameObject;class $n extends k1{constructor(t,e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),n===void 0&&(n=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=i,this._height=n,i=Math.max(Math.ceil(i*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas=Mc.create(this,i,n),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,r),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){Mc.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,e){return this._width===t&&this._height===e?this:(this._width=t,this._height=e,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=t,this.canvas.height=e,this.frame.setSize(t,e),this.dirty=!0,this)}setSize(t,e){return this.setCanvasSize(t,e),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,e){return this.displayWidth=t,this.displayHeight=e,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,e){return this.setSize(t,e),this}}const Ke=Phaser.GameObjects.Components;Phaser.Class.mixin($n,[Ke.Alpha,Ke.BlendMode,Ke.Crop,Ke.Depth,Ke.Flip,Ke.GetBounds,Ke.Mask,Ke.Origin,Ke.Pipeline,Ke.ScrollFactor,Ke.Tint,Ke.Transform,Ke.Visible,z1,U1,H1]);const $1=Phaser.Utils.String.Pad;var dt=function(s,t,e){if(s==null)return s;switch(typeof s){case"string":return s;case"number":return`#${$1(Math.floor(s).toString(16),6,"0",1)}`;case"function":return s(t,e);case"object":return s.hasOwnProperty("r")?s.hasOwnProperty("a")?`rgba(${s.r},${s.g},${s.b},${s.a})`:`rgb(${s.r},${s.g},${s.b})`:s.hasOwnProperty("h")?s.hasOwnProperty("a")?`hsla(${s.h},${s.s},${s.l},${s.a})`:`hsl(${s.h},${s.s},${s.l})`:s;default:return s}};const Ac=Phaser.Math.DegToRad;var Z1=function(s,t,e,r,i,n,o){var a=new om(t,e,r,i,n),h=a.minWidth,u=a.minHeight,l=r>=h?1:r/h,f=i>=u?1:i/u,c=a.cornerRadius,d,v,p,g,m;s.save(),s.beginPath(),s.translate(t,e),d=c.tl,Po(d)?(v=d.x*l,p=d.y*f,Eo(d)?(g=v,m=p,Is(s,g,m,v,p,180,270,!1,o)):(g=0,m=0,Is(s,g,m,v,p,90,0,!0,o))):s.lineTo(0,0),d=c.tr,Po(d)?(v=d.x*l,p=d.y*f,Eo(d)?(g=r-v,m=p,Is(s,g,m,v,p,270,360,!1,o)):(g=r,m=0,Is(s,g,m,v,p,180,90,!0,o))):s.lineTo(r,0),d=c.br,Po(d)?(v=d.x*l,p=d.y*f,Eo(d)?(g=r-v,m=i-p,Is(s,g,m,v,p,0,90,!1,o)):(g=r,m=i,Is(s,g,m,v,p,270,180,!0,o))):s.lineTo(r,i),d=c.bl,Po(d)?(v=d.x*l,p=d.y*f,Eo(d)?(g=v,m=i-p,Is(s,g,m,v,p,90,180,!1,o)):(g=0,m=i,Is(s,g,m,v,p,360,270,!0,o))):s.lineTo(0,i),s.closePath(),s.restore()},Eo=function(s){return!s.hasOwnProperty("convex")||s.convex},Po=function(s){return s.x>0&&s.y>0},Is=function(s,t,e,r,i,n,o,a,h){if(a&&o>n?o-=360:!a&&o<n&&(o+=360),n=Ac(n),o=Ac(o),h==null)s.ellipse(t,e,r,i,0,n,o,a);else{h+=1;for(var u,l,f,c=(o-n)/h,d=0;d<=h;d++)f=n+c*d,u=t+r*Math.cos(f),l=e+i*Math.sin(f),s.lineTo(u,l)}},K1=function(s,t,e,r,i,n,o,a,h,u,l,f,c){if(Z1(t,e,r,i,n,o,c),a!=null){if(l!=null){var d;f?d=t.createLinearGradient(0,0,i,0):d=t.createLinearGradient(0,0,0,n),d.addColorStop(0,a),d.addColorStop(1,l),a=d}t.fillStyle=a,t.fill()}h!=null&&u>0&&(t.strokeStyle=h,t.lineWidth=u,t.stroke())},ym=function(s,t,e,r,i,n,o,a){if(!(t==null&&e==null)){var h=s.canvas.width,u=s.canvas.height;e==null&&(r=0);var l=r/2;h-=r,u-=r,K1(s.canvas,s.context,l,l,h,u,i,t,e,r,n,o,a)}};Phaser.Utils.Objects.GetValue;/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var J1=Phaser.Renderer.WebGL.Utils,Q1=function(s,t,e,r){if(!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,n=i.width,o=i.height,a=J1.getTintAppendFloatAlpha,h=s.pipelines.set(t.pipeline,t),u=h.setTexture2D(i.glTexture,t);s.pipelines.preBatch(t),h.batchTexture(t,i.glTexture,n,o,t.x,t.y,n/t.style.resolution,o/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,n,o,a(t.tintTopLeft,e.alpha*t._alphaTL),a(t.tintTopRight,e.alpha*t._alphaTR),a(t.tintBottomLeft,e.alpha*t._alphaBL),a(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,r,!1,u),s.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var j1=function(s,t,e,r){t.width===0||t.height===0||(e.addToRenderList(t),s.batchSprite(t,t.frame,e,r))};const q1={renderWebGL:Q1,renderCanvas:j1},Ml=Phaser.Display.Canvas.CanvasPool;var _1=function(s,t,e){e===void 0&&(e={});var r=Ml.create(this),i=r.getContext("2d");s.syncFont(r,i);var n=i.measureText(t),o=Math.ceil(n.width*s.baselineX),a=o,h=2*a;if(a=a*s.baselineY|0,r.width=o,r.height=h,i.fillStyle="#f00",i.fillRect(0,0,o,h),i.font=s._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s.testString,0,a),e.left=0,o===0||h===0||!i.getImageData(0,0,o,h))return Ml.remove(r),e;for(var u=i.getImageData(0,0,o,h).data,l=!1,f=0;f<o;f++){for(var c=0;c<h;c++){var d=(c*o+f)*4;if(u[d]!==255){e.left=f,l=!0;break}}if(l)break}return Ml.remove(r),e};const tS=Phaser.GameObjects.GameObject;class eS extends tS{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,e){return this.style.setFixedSize(t,e)}setBackgroundColor(t,e,r){return this.style.setBackgroundColor(t,e,r)}setBackgroundStrokeColor(t,e){return this.style.setBackgroundStrokeColor(t,e)}setBackgroundCornerRadius(t,e){return this.style.setBackgroundCornerRadius(t,e)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,e){return this.style.setStroke(t,e)}setShadow(t,e,r,i,n,o){return this.style.setShadow(t,e,r,i,n,o)}setShadowOffset(t,e){return this.style.setShadowOffset(t,e)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,e){return this.style.setTextMetrics(t,e)}measureTextMargins(t,e){return _1(this.style,t,e)}}const Ge=Phaser.GameObjects.Components;Phaser.Class.mixin(eS,[Ge.Alpha,Ge.BlendMode,Ge.ComputedSize,Ge.Crop,Ge.Depth,Ge.Flip,Ge.GetBounds,Ge.Mask,Ge.Origin,Ge.Pipeline,Ge.ScrollFactor,Ge.Tint,Ge.Transform,Ge.Visible,q1]);var iS={backgroundColor:["backgroundColor",null,dt],backgroundColor2:["backgroundColor2",null,dt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,dt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",dt],stroke:["stroke","#fff",dt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",dt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",dt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|Mqgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Mo=Phaser.Display.Canvas.CanvasPool;var Rc=function(s){var t=Mo.create(this),e=t.getContext("2d");s.syncFont(t,e);var r=e.measureText(s.testString);if("actualBoundingBoxAscent"in r){var i=r.actualBoundingBoxAscent,n=r.actualBoundingBoxDescent,u={ascent:i,descent:n,fontSize:i+n};return Mo.remove(t),u}var o=Math.ceil(r.width*s.baselineX),a=o,h=2*a;a=a*s.baselineY|0,t.width=o,t.height=h,e.fillStyle="#f00",e.fillRect(0,0,o,h),e.font=s._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(s.testString,0,a);var u={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,o,h))return u.ascent=a,u.descent=a+6,u.fontSize=u.ascent+u.descent,Mo.remove(t),u;var l=e.getImageData(0,0,o,h).data,f=l.length,c=o*4,d,v,p=0,g=!1;for(d=0;d<a;d++){for(v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p+=c;else break}for(u.ascent=a-d,p=f-c,g=!1,d=h;d>a;d--){for(v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p-=c;else break}return u.descent=d-a,u.fontSize=u.ascent+u.descent,Mo.remove(t),u},oe={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const sS=Phaser.Utils.Objects.GetAdvancedValue,Je=Phaser.Utils.Objects.GetValue;let Tm=class{constructor(t,e,r){this.parent=t,r===void 0&&(r=iS),this.propertyMap=r,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==oe.NO_WRAP&&this.wrapWidth===0}setStyle(t,e,r){if(e===void 0&&(e=!0),r===void 0&&(r=!1),t&&t.hasOwnProperty("wrap")){var i=t.wrap;if(i.hasOwnProperty("mode")){var n=i.mode;typeof n=="string"&&(i.mode=Oc[n])}else i.hasOwnProperty("width")&&(i.mode=1)}t&&t.rtl&&r&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var o=this.propertyMap;for(var a in o){var h=o[a],u=h[0],l=r?h[1]:this[a],f=h[2];if(a==="wrapCallback"||a==="wrapCallbackScope")this[a]=Je(t,u,l);else{var c=sS(t,u,l);f&&(c=f(c)),this[a]=c}}var d=Je(t,"font",null);d===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=d;var v=Je(t,"fill",null);v!==null&&(this.color=dt(v));var p=Je(t,"metrics",!1);return p?this.metrics={ascent:Je(p,"ascent",0),descent:Je(p,"descent",0),fontSize:Je(p,"fontSize",0)}:(e||!this.metrics)&&(this.metrics=Rc(this)),e?this.parent.updateText():this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=Rc(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Je(t,"fontFamily","Courier"),this.fontSize=Je(t,"fontSize","16px"),this.fontStyle=Je(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,e,r){return r===void 0&&(r=!0),this.backgroundColor=dt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=dt(e,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=r,this.update(!1)}setBackgroundStrokeColor(t,e){return this.backgroundStrokeColor=dt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}setFill(t){return this.color=dt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=dt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,e){return t===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=dt(t,this.parent.canvas,this.parent.context),this.strokeThickness=e),this.update(!0)}setShadow(t,e,r,i,n,o){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r="#000"),i===void 0&&(i=0),n===void 0&&(n=!1),o===void 0&&(o=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=dt(r,this.parent.canvas,this.parent.context),this.shadowBlur=i,this.shadowStroke=n,this.shadowFill=o,this.update(!1)}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=dt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,r){return t===void 0&&(t="#000"),e===void 0&&(e=0),r===void 0&&(r=0),this.underlineColor=dt(t,this.parent.canvas,this.parent.context),this.underlineThickness=e,this.underlineOffset=r,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=dt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=Oc[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,e){return t===void 0&&(t="left"),e===void 0&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,e){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,e&&(typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=Je(e,"fontFamily",this.fontFamily),this.fontSize=Je(e,"fontSize",this.fontSize),this.fontStyle=Je(e,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},e=this.propertyMap;for(var r in e)t[r]=this[r];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}};const Oc={none:oe.NO_WRAP,word:oe.WORD_WRAP,char:oe.CHAR_WRAP,character:oe.CHAR_WRAP},nS={draw(s,t,e,r){var i=this.penManager;this.hitAreaManager.clear();var n=this.context;n.save();var o=this.defaultStyle;this.clear(),ym(this,o.backgroundColor,o.backgroundStrokeColor,o.backgroundStrokeLineWidth,o.backgroundCornerRadius,o.backgroundColor2,o.backgroundHorizontalGradient,o.backgroundCornerIteration),s+=this.startXOffset,t+=this.startYOffset;var a=o.halign,h=o.valign,u,l=o.lineHeight,f=i.lines,c=f.length,d=o.maxLines,v,p,g;d>0&&c>d?(v=d,h==="center"?p=Math.floor((c-v)/2):h==="bottom"?p=c-v:p=0):(v=c,p=0),g=p+v;var m,x,y=this.rtl,T=y?this.parent.width:void 0;h==="center"?x=Math.max((r-v*l)/2,0):h==="bottom"?x=Math.max(r-v*l-2,0):x=0,x+=t;for(var C=p;C<g;C++)if(u=i.getLineWidth(C),u!==0){for(var S=f[C],E=S.length,P=a,M=0;M<E;M++){var R=S[M].prop.align;if(R!==void 0){P=R;break}}P==="center"?m=(e-u)/2:P==="right"?m=y?0:e-u:m=y?e-u:0,m+=s;for(var M=0;M<E;M++)this.drawPen(S[M],m,x,T)}n.restore()},drawPen(s,t,e,r){t+=s.x,e+=s.y+(s.prop.y||0),r!==void 0&&(t=r-t);var i=this.canvas,n=this.context;n.save();var o=this.parser.propToContextStyle(this.defaultStyle,s.prop);o.buildFont(),o.syncFont(i,n),o.syncStyle(i,n),o.underlineThickness>0&&s.width>0&&this.drawUnderline(t,e,s.width,o),s.isTextPen&&this.drawText(t,e,s.text,o),s.isImagePen&&this.drawImage(t,e,s.prop.img,o),n.restore(),s.hasAreaMarker&&s.width>0&&this.hitAreaManager.add(s.prop.area,t,e-this.startYOffset,s.width,this.defaultStyle.lineHeight)},clear(){var s=this.canvas;this.context.clearRect(0,0,s.width,s.height)},drawUnderline(s,t,e,r){t+=r.underlineOffset-r.underlineThickness/2,this.autoRound&&(s=Math.round(s),t=Math.round(t));var i=this.context,n=i.lineCap;i.lineCap="butt",i.strokeStyle=r.underlineColor,i.lineWidth=r.underlineThickness,i.beginPath(),i.moveTo(s,t),i.lineTo(s+e,t),i.stroke(),i.lineCap=n},drawText(s,t,e,r){this.autoRound&&(s=Math.round(s),t=Math.round(t));var i=this.context;r.stroke&&r.stroke!=="none"&&r.strokeThickness>0&&(r.syncShadow(i,r.shadowStroke),i.strokeText(e,s,t)),r.color&&r.color!=="none"&&(r.syncShadow(i,r.shadowFill),i.fillText(e,s,t))},drawImage(s,t,e,r){t-=this.startYOffset,this.parent.imageManager.draw(e,this.context,s,t,this.autoRound)}},vn=Phaser.Utils.Objects.GetValue,rS=oe.NO_NEWLINE,Lc=oe.RAW_NEWLINE;class aS{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=vn(t,"text",""),this.x=vn(t,"x",0),this.y=vn(t,"y",0),this.width=vn(t,"width",0);var e=vn(t,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=vn(t,"newLineMode",0),this.startIndex=vn(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===Lc&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==rS&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===Lc&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var Ls=function(s,t){var e=Array.isArray(s);if(t===void 0?t=e?[]:{}:ui(t),e){t.length=s.length;for(var r=0,i=s.length;r<i;r++)t[r]=s[r]}else for(var n in s)t[n]=s[n];return t};const bc=Phaser.Utils.Objects.GetFastValue,wc=oe.NO_NEWLINE,oS=oe.WRAPPED_NEWLINE;class Wf{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=bc(t,"tagToText",We),this.tagToTextScope=bc(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,e,r,i,n,o){var a=this.pensPool.pop();return a==null&&(a=new aS),pn.text=t,pn.x=e,pn.y=r,pn.width=i,pn.prop=n,pn.newLineMode=o,a.resetFromJSON(pn),this.addPen(a),this}addImagePen(t,e,r,i){return this.addTextPen("",t,e,r,i,wc),this}addNewLinePen(){var t=this.lastPen,e=t?t.lastX:0,r=t?t.y:0,i=t?Ls(t.prop):null;return this.addTextPen("",e,r,0,i,oS),this}addPen(t){var e=this.lastPen;e==null?t.startIndex=0:t.startIndex=e.endIndex,this.pens.push(t);var r=this.lastLine;r==null&&(r=this.linesPool.pop()||[],this.lines.push(r)),r.push(t),t.newLineMode!==wc&&(r=this.linesPool.pop()||[],this.lines.push(r)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new Wf),t.clear();for(var e=0,r=this.lines.length;e<r;e++)for(var i=this.lines[e],n=0,o=i.length;n<o;n++){var a=i[n];t.addPen(a.text,a.x,a.y,a.width,Ls(a.prop),a.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,r=!1,i;for(e=t;e>=0&&(i=this.lines[e],r=i!=null&&i.length>0,!r);e--);if(!r)return 0;var n=i[i.length-1];return n.endIndex}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var r=e[e.length-1];if(r==null)return 0;var i=r.lastX;return i}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,e=0,r=0,i=this.lines.length;r<i;r++)t=this.getLineWidth(r),t>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,r=this.lines.length;e<r;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",e=this.pens,r=0,i=e.length;r<i;r++)t+=e[r].plainText;return t}get rawTextLength(){for(var t=0,e=this.pens,r=0,i=this.pens.length;r<i;r++)t+=e[r].rawTextLength;return t}getSliceTagText(t,e,r){if(t===void 0&&(t=0),e===void 0){var i=this.lastPen;if(i==null)return"";e=i.endIndex}r===void 0&&(r=!1);for(var n="",o,a,h,u,l,f,c,d=0,v=this.pens.length;d<v&&(o=this.pens[d],u=o.endIndex,!(!(u<=t)&&(o=this.pens[d],a=r?o.wrapText:o.plainText,f=o.prop,h=o.startIndex,l=h>=t&&u<=e,l||(a=a.substring(t-h,e-h)),this.tagToTextScope?n+=this.tagToText.call(this.tagToTextScope,a,f,c):n+=this.tagToText(a,f,c),c=f,u>=e)));d++);return n}get length(){return this.lines.length}set length(t){this.clear()}}var pn={};const hS=Phaser.Geom.Rectangle;var Fc=new Yr;class lS{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return Fc.pushMultiple(this.hitAreas),this}add(t,e,r,i,n){var o=Fc.pop();return o===null?o=new hS(e,r,i,n):o.setTo(e,r,i,n),o.key=t,this.hitAreas.push(o),this}getFirst(t,e){for(var r=0,i=this.hitAreas.length;r<i;r++){var n=this.hitAreas[r];if(n.contains(t,e))return n}return null}drawBounds(t,e,r){e===void 0&&(e=16777215),r&&t.save().scaleCanvas(r.scaleX,r.scaleY).rotateCanvas(r.rotation).translateCanvas(r.x,r.y);for(var i=0,n=this.hitAreas.length;i<n;i++){var o=this.hitAreas[i];t.lineStyle(1,e).strokeRect(o.x,o.y,o.width,o.height)}return r&&t.restore(),this}}var uS=function(){this.parent.on("pointerdown",fS,this).on("pointerup",dS,this).on("pointermove",Al,this).on("pointerover",Al,this).on("pointerout",function(s,t){Al.call(this,s,null,null,t)},this)},fS=function(s,t,e,r){var i=this.hitAreaManager.getFirst(t,e);i!==null&&Oa.call(this,"areadown",i.key,s,t,e,r)},dS=function(s,t,e,r){var i=this.hitAreaManager.getFirst(t,e);i!==null&&Oa.call(this,"areaup",i.key,s,t,e,r)},Al=function(s,t,e,r){if(t===null){this.lastHitAreaKey!==null&&(Oa.call(this,"areaout",this.lastHitAreaKey,s,t,e,r),this.lastHitAreaKey=null);return}var i=this.hitAreaManager.getFirst(t,e),n=i?i.key:null;this.lastHitAreaKey!==n&&(this.lastHitAreaKey!==null&&Oa.call(this,"areaout",this.lastHitAreaKey,s,t,e,r),n!==null&&Oa.call(this,"areaover",n,s,t,e,r),this.lastHitAreaKey=n)},Oa=function(s,t,e,r,i,n){this.parent.emit(`${s}-${t}`,e,r,i,n),this.parent.emit(s,t,e,r,i,n)};const cS=oe.NO_NEWLINE,vS=oe.RAW_NEWLINE,Rl=oe.WRAPPED_NEWLINE,Dc=oe.NO_WRAP,pS=oe.WORD_WRAP,gS=oe.CHAR_WRAP,mS=oe.SPLITREGEXP;var Cm=function(s,t,e,r,i,n){r<=0&&(e=Dc);var o=[];if(!s||!s.length)return o;for(var a=e===Dc,h=e===pS,u=s.split(mS),l,f,c,d=0,v=u.length;d<v;d++){if(l=u[d],c=d===v-1?cS:vS,a){var p=t(l);o.push(n.getLine(l,p,c));continue}if(f=d===0?r-i:r,l.length<=100){var p=t(l);if(p<=f){o.push(n.getLine(l,p,c));continue}}var g,m;h?(g=l.split(" "),m=g[g.length-1]==="",m&&(g.length-=1)):g=l;for(var x,y,T,C="",S=0,E,P=h?t(" "):void 0,M=0,R=g.length;M<R;M++){if(x=g[M],y=t(x),T=M===R-1,h&&(!T||m)&&(x+=" ",y+=P),h&&y>r){C!==""?o.push(n.getLine(C,S,Rl)):M===0&&i>0&&o.push(n.getLine("",0,Rl)),o.push(...Cm(x,t,gS,r,0,n));var A=o.pop();C=A.text,S=A.width,n.freeLine(A),C===" "&&(C="",S=0);continue}E=S+y,E>f?(o.push(n.getLine(C,S,Rl)),C=x,S=y,f=r):(C+=x,S=E),T&&o.push(n.getLine(C,S,c))}}return o};const Ol=Phaser.Utils.Objects.GetValue,xS=oe.NO_WRAP,yS=oe.NO_NEWLINE;class TS{constructor(t){this.parent=t.parent,this.context=Ol(t,"context",null),this.canvas=this.context.canvas,this.parser=Ol(t,"parser",null),this.defaultStyle=Ol(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new lS,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(r){return e.measureText(r).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,e,r,i,n){if(n===void 0&&(n=this.penManager),n.clear(),t==="")return n;var o=this.parent.style;if(o.isWrapFitMode){var a=this.parent.padding;r=o.fixedWidth-a.left-a.right}for(var h=this.canvas,u=this.context,l=function(I){return u.measureText(I).width},f=0,c=0,d=o.wrapCallback,v=o.wrapCallbackScope,p=!0,g,m,x,y=this.parser.splitText(t),T,C,S=this.wrapTextLinesPool,E=0,P=y.length;E<P;E++)if(T=this.parser.tagTextToProp(y[E],m),g=T.plainText,m=T.prop,m.img){var M=this.imageManager.getOuterWidth(m.img);r>0&&e!==xS&&r<f+M&&(n.addNewLinePen(),c+=i,f=0),n.addImagePen(f,c,M,Ls(m)),f+=M}else if(g!==""){if(u.save(),x=this.parser.propToContextStyle(this.defaultStyle,m),x.buildFont(),x.syncFont(h,u),x.syncStyle(h,u),!d)C=Cm(g,l,e,r,f,S);else{C=d.call(v,g,l,r,f),typeof C=="string"&&(C=C.split(`
`));for(var O,R=0,A=C.length;R<A;R++)O=C[R],typeof O=="string"?C[R]=S.getLine(O,l(O),R<A-1?2:0):p=!1}for(var O,R=0,A=C.length;R<A;R++)O=C[R],n.addTextPen(O.text,f,c,O.width,Ls(m),O.newLineMode),O.newLineMode!==yS?(f=0,c+=i):f+=O.width;p&&S.freeLines(C),C=null,u.restore()}for(var E=0,P=this.lines.length;E<P;E++){var b=this.lines[E],w=b[b.length-1];w&&(w.width+=this.parser.getStrokeThinkness(this.defaultStyle,w.prop))}return n}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Wf({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,e,r){var i;if(t==null)i=this.penManager.plainText;else{var n=this.parser.splitText(t,1);i="";for(var o=0,a=n.length;o<a;o++)i+=n[o]}return(e!=null||r!=null)&&(e==null&&(e=0),r==null&&(r=i.length),i=i.substring(e,r)),i}getPenManager(t,e){if(t===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,e),e}getText(t,e,r,i){if(t==null)return this.penManager.getSliceTagText(e,r,i);var n=this.tmpPenManager,o=this.defaultStyle;return this.updatePenManager(t,o.wrapMode,o.wrapWidth,o.lineHeight,n),n.getSliceTagText(e,r,i)}copyPenManager(t,e){return e===void 0&&(e=this.penManager),e.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var CS={setInteractive:uS};Object.assign(TS.prototype,nS,CS);const Ll=Phaser.Utils.Objects.GetValue;var bl=function(s,t){t===void 0&&(t={key:s}),t.hasOwnProperty("key")||(t.key=s);var e=t.key,r=t.frame,i=t.width,n=t.height;if(i===void 0||n===void 0){var o=this.textureManager.getFrame(e,r),a=o?o.cutWidth:0,h=o?o.cutHeight:0;i===void 0&&n===void 0?(i=a,n=h):i===void 0?i=a*(n/h):n===void 0&&(n=h*(i/a))}this.images[s]={key:e,frame:r,width:i,height:n,y:Ll(t,"y",0),left:Ll(t,"left",0),right:Ll(t,"right",0)}},SS=function(s,t,e,r,i){var n=this.get(s);e+=n.left,r+=n.y,i&&(e=Math.round(e),r=Math.round(r));var o=this.textureManager.getFrame(n.key,n.frame);t.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,e,r,n.width,n.height)};class Sm{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,e){if(typeof t=="string")bl.call(this,t,e);else if(Array.isArray(t))for(var r=t,i=0,n=r.length;i<n;i++)bl.call(this,r[i]);else{var r=t;for(var t in r)bl.call(this,t,r[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var e=this.get(t);return e?e.width+e.left+e.right:0}getFrame(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var ES={draw:SS};Object.assign(Sm.prototype,ES);Phaser.Utils.Objects.IsPlainObject;Phaser.DOM.AddToDOM;Phaser.Display.Canvas.CanvasPool;Phaser.GameObjects.GameObject;Phaser.Utils.Objects.GetValue;Phaser.DOM.RemoveFromDOM;var Me=function(s,t){return t===void 0?`\\[${s}\\]`:`\\[${s}=(${t})\\]`},Ze=function(s){return`\\[/${s}\\]`};const Hf="[-.0-9]+",kf="[a-z]+|#[0-9abcdef]+",$f="[^\\]]+",Em="esc",Pm=Me(Em),Mm=Ze(Em),Am="raw",Rm=Me(Am),Om=Ze(Am),Lm="b",bm=Me(Lm),wm=Ze(Lm),Fm="i",Dm=Me(Fm),Im=Ze(Fm),Bm="weight",Gm=Me(Bm,Hf),Ym=Ze(Bm),Nm="size",Xm=Me(Nm,Hf),zm=Ze(Nm),Vm="color",Um=Me(Vm,kf),Wm=Ze(Vm),Zf="u",Hm=Me(Zf),km=Me(Zf,kf),$m=Ze(Zf),Zm="shadow",Km=Me(Zm),Jm=Ze(Zm),Kf="stroke",Qm=Me(Kf),jm=Me(Kf,kf),qm=Ze(Kf),_m="y",t0=Me(_m,Hf),e0=Ze(_m),i0="img",s0=Me(i0,$f),n0=Ze(i0),r0="area",a0=Me(r0,$f),o0=Ze(r0),h0="align",l0=Me(h0,$f),u0=Ze(h0),f0=new RegExp(Pm,"i"),sf=new RegExp(Mm,"i"),d0=new RegExp(Rm,"i"),nf=new RegExp(Om,"i"),PS=new RegExp(bm,"i"),MS=new RegExp(wm,"i"),AS=new RegExp(Dm,"i"),RS=new RegExp(Im,"i"),Ic=new RegExp(Gm,"i"),OS=new RegExp(Ym,"i"),Bc=new RegExp(Xm,"i"),LS=new RegExp(zm,"i"),Gc=new RegExp(Um,"i"),bS=new RegExp(Wm,"i"),wS=new RegExp(Hm,"i"),Yc=new RegExp(km,"i"),FS=new RegExp($m,"i"),DS=new RegExp(Km,"i"),IS=new RegExp(Jm,"i"),BS=new RegExp(Qm,"i"),Nc=new RegExp(jm,"i"),GS=new RegExp(qm,"i"),Xc=new RegExp(t0,"i"),YS=new RegExp(e0,"i"),zc=new RegExp(s0,"i"),NS=new RegExp(n0,"i"),Vc=new RegExp(a0,"i"),XS=new RegExp(o0,"i"),Uc=new RegExp(l0,"i"),zS=new RegExp(u0,"i"),Wc=new RegExp([Rm,Om,Pm,Mm,bm,wm,Dm,Im,Gm,Ym,Xm,zm,Um,Wm,Hm,km,$m,Km,Jm,Qm,jm,qm,t0,e0,s0,n0,a0,o0,l0,u0].join("|"),"ig");var VS=function(s,t){for(var e=[],r=0,i=!1,n=!1;;){var o=Wc.exec(s);if(!o)break;var a=o[0];if(n)if(sf.test(a))n=!1;else continue;else if(i)if(nf.test(a))i=!1;else continue;else f0.test(a)?n=!0:d0.test(a)&&(i=!0);var h=Wc.lastIndex,u=h-a.length;if(r<u){var l=s.substring(r,u);e.push(l)}t===void 0&&e.push(a),r=h}var f=s.length;return r<f&&e.push(s.substring(r,f)),e};const ue=!1,ve=!0;var US={plainText:null,prevProp:null},WS=function(s,t){t==null&&(t={});var e="";if(t.img&&xt(t,ue,"img"),t.esc)sf.test(s)?xt(t,ue,"esc"):e=s;else if(t.raw)nf.test(s)?xt(t,ue,"raw"):e=s;else if(f0.test(s))xt(t,ve,"esc",!0);else if(sf.test(s))xt(t,ue,"esc");else if(d0.test(s))xt(t,ve,"raw",!0);else if(nf.test(s))xt(t,ue,"raw");else if(PS.test(s))xt(t,ve,"b",!0);else if(MS.test(s))xt(t,ue,"b");else if(AS.test(s))xt(t,ve,"i",!0);else if(RS.test(s))xt(t,ue,"i");else if(Ic.test(s)){var r=s.match(Ic);xt(t,ve,"weight",r[1])}else if(OS.test(s))xt(t,ue,"weight");else if(Bc.test(s)){var r=s.match(Bc);xt(t,ve,"size",`${r[1]}px`)}else if(LS.test(s))xt(t,ue,"size");else if(Gc.test(s)){var r=s.match(Gc);xt(t,ve,"color",r[1])}else if(bS.test(s))xt(t,ue,"color");else if(wS.test(s))xt(t,ve,"u",!0);else if(Yc.test(s)){var r=s.match(Yc);xt(t,ve,"u",r[1])}else if(FS.test(s))xt(t,ue,"u");else if(DS.test(s))xt(t,ve,"shadow",!0);else if(IS.test(s))xt(t,ue,"shadow");else if(BS.test(s))xt(t,ve,"stroke",!0);else if(Nc.test(s)){var r=s.match(Nc);xt(t,ve,"stroke",r[1])}else if(GS.test(s))xt(t,ue,"stroke");else if(Xc.test(s)){var r=s.match(Xc);xt(t,ve,"y",parseFloat(r[1]))}else if(YS.test(s))xt(t,ue,"y");else if(zc.test(s)){var r=s.match(zc);xt(t,ve,"img",r[1])}else if(NS.test(s))xt(t,ue,"img");else if(Vc.test(s)){var r=s.match(Vc);xt(t,ve,"area",r[1])}else if(XS.test(s))xt(t,ue,"area");else if(Uc.test(s)){var r=s.match(Uc);xt(t,ve,"align",r[1])}else zS.test(s)?xt(t,ue,"align"):e=s;var i=US;return i.plainText=e,i.prop=t,i},xt=function(s,t,e,r){return t===ve?s[e]=r:s.hasOwnProperty(e)&&delete s[e],s},HS=function(s,t){var e=$S;if(t.hasOwnProperty("img"))e.image=t.img;else{if(e.image=null,t.hasOwnProperty("family")?e.fontFamily=t.family:e.fontFamily=s.fontFamily,t.hasOwnProperty("size")){var r=t.size;typeof r=="number"&&(r=`${r}px`),e.fontSize=r}else e.fontSize=s.fontSize;e.fontStyle=kS(t),t.hasOwnProperty("color")?e.color=t.color:e.color=s.color,t.hasOwnProperty("stroke")?t.stroke===!0?(e.stroke=s.stroke,e.strokeThickness=s.strokeThickness):(e.stroke=t.stroke,e.strokeThickness=s.strokeThickness):(e.stroke=s.stroke,e.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(e.shadowColor=s.shadowColor,e.shadowOffsetX=s.shadowOffsetX,e.shadowOffsetY=s.shadowOffsetY,e.shadowBlur=s.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=t.shadow,e.shadowOffsetX=s.shadowOffsetX,e.shadowOffsetY=s.shadowOffsetY,e.shadowBlur=s.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(e.underlineColor=s.underlineColor,e.underlineThickness=s.underlineThickness,e.underlineOffset=s.underlineOffset):(e.underlineColor=t.u,e.underlineThickness=s.underlineThickness,e.underlineOffset=s.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},kS=function(s){var t=s.b,e=s.weight,r=s.i;return t||e||r?r?t?"bold italic":e?`${e} italic`:"italic":t?"bold":e.toString():""},$S=new Tm,ZS=function(s,t,e){e==null&&(e=KS);var r=[];for(var i in e)t.hasOwnProperty(i)||r.push(`[/${i}]`);for(var i in t){var n=t[i];if(e[i]!==n)switch(i){case"size":r.push(`[size=${n.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":r.push(`[${i}=${n}]`);break;case"u":n===!0?r.push("[u]"):r.push(`[u=${n}]`);break;default:r.push(`[${i}]`);break}}return r.push(s),r.join("")},KS={};let JS=class{getStrokeThinkness(t,e){var r;return e.hasOwnProperty("stroke")?r=t.strokeThickness:r=0,r}};var QS={splitText:VS,tagTextToProp:WS,propToContextStyle:HS,propToTagText:ZS};Object.assign(JS.prototype,QS);new Tm;Phaser.Utils.Objects.GetValue;const Nr={setEventEmitter(s,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=s===!0||s===void 0,this._eventEmitter=this._privateEE?new t:s,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(s){return this._eventEmitter&&s&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},jS=Phaser.Scene;var Xn=function(s){return s instanceof jS},c0=function(s){return s==null||typeof s!="object"?null:Xn(s)?s:s.scene&&Xn(s.scene)?s.scene:s.parent&&s.parent.scene&&Xn(s.parent.scene)?s.parent.scene:null};const qS=Phaser.Game;var Hc=function(s){return s instanceof qS},v0=function(s){if(s==null||typeof s!="object")return null;if(Hc(s))return s;if(Hc(s.game))return s.game;if(Xn(s))return s.sys.game;if(Xn(s.scene))return s.scene.sys.game};const _S=Phaser.Utils.Objects.GetValue;class Qt{constructor(t,e){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(_S(e,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}setParent(t){return this.parent=t,this.scene=c0(t),this.game=v0(t),this}}Object.assign(Qt.prototype,Nr);const p0={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},g0={direction:["direction",void 0]};var Ks=function(s,t,e){if(typeof e=="string")s.hasOwnProperty(e)&&(t[e]=s[e]);else{var r=e;if(Array.isArray(r))for(var i=0,n=r.length;i<n;i++)Ks(s,t,r[i]);else for(var e in r)Ks(s,t,e)}},tE=function(s){s===void 0&&(s={});var t={};return Ks(s,t,"inputType"),Ks(s,t,"type"),Ks(s,t,"style"),Ks(s,t,g0),Ks(s,t,p0),t},m0=function(s,t,e,r){if(t)return!(e&&!e(s,t)||!kc(s,t)||r&&!r(s,t));for(var i=s.scene.input.manager,n=i.pointersTotal,o=i.pointers,t,a=0;a<n;a++)if(t=o[a],!(e&&!e(s,t))&&kc(s,t)&&!(r&&!r(s,t)))return!0;return!1},kc=function(s,t){for(var e=s.scene,r=e.input.cameras.getCamerasBelowPointer(t),i=e.input.manager,n=[s],o,a=0,h=r.length;a<h;a++)if(o=i.hitTest(t,n,r[a]),o.length>0)return!0;return!1},Pr=void 0,eE=function(s){s!==Pr&&(Pr!==void 0&&Pr.close(),Pr=s)},iE=function(s){s===Pr&&(Pr=void 0)};const sE=Phaser.Utils.Objects.GetValue;var Gh=function(s,t,e){e===void 0&&(e={});var r,i;for(var n in s)r=s[n],i=sE(t,n,r[1]),i!==void 0&&(e[r[0]]=i);return e},x0=function(s){s.addEventListener("touchstart",er,!1),s.addEventListener("touchmove",er,!1),s.addEventListener("touchend",er,!1),s.addEventListener("mousedown",er,!1),s.addEventListener("mouseup",er,!1),s.addEventListener("mousemove",er,!1)},er=function(s){s.stopPropagation()};const wl=Phaser.Utils.Objects.GetValue;var nE=function(s,t){var e,r=wl(t,"inputType",void 0);r===void 0&&(r=wl(t,"type","text")),r==="textarea"?(e=document.createElement("textarea"),e.style.resize="none"):(e=document.createElement("input"),e.type=r);var i=wl(t,"style",void 0),n=e.style;return Gh(g0,i,n),n.position="absolute",n.opacity=0,n.pointerEvents="none",n.zIndex=0,n.transform="scale(0)",Gh(p0,t,e),x0(e),document.body.appendChild(e),e},rE=function(){return this.isOpened?this:this.readOnly?this:(eE(this),this.isOpened=!0,this.node||(this.node=nE(this,this.nodeConfig)),this.setFocus(),this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this),this)},aE=function(s){s&&document.body.removeChild(s)},oE=function(){return this.isOpened?(iE(this),this.setBlur(),this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),aE(this.node),this.node=void 0,this.emit("close",this),this):this},hE={open:rE,close:oE};const Bs=Phaser.Utils.Objects.GetValue;class y0 extends Qt{constructor(t,e){super(t);var r=Bs(e,"inputType",void 0);r===void 0&&(r=Bs(e,"type","text")),this.setEnterCloseEnable(Bs(e,"enterClose",r!=="textarea"));var i=Bs(e,"onOpen",void 0);i||(i=Bs(e,"onFocus",void 0)),this.onOpenCallback=i;var n=Bs(e,"onClose",void 0);n||(n=Bs(e,"onBlur",void 0)),this.onCloseCallback=n,this.onUpdateCallback=Bs(e,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=tE(e),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){m0(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,e),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node?(this.node.style[t]=e,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(y0.prototype,hE);var lE=function(s,t,e){s=s.replace(" ","");var r=e.previousText;if(s===r)return s;if(isNaN(s)){e.emit("nan",s,e),s=r;var i=e.cursorPosition-1;e.setText(s),e.setCursorPosition(i)}else e.previousText=s;return s},T0=function(s){return v0(s).loop.delta};Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const uE=Phaser.GameObjects.GetCalcMatrix;var fE=function(s,t,e,r){t.updateData(),e.addToRenderList(t);var i=s.pipelines.set(t.pipeline),n=uE(t,e,r),o=i.calcMatrix.copyFrom(n.calc),a=t._displayOriginX,h=t._displayOriginY,u=e.alpha*t.alpha;s.pipelines.preBatch(t);for(var l=t.geom,f=0,c=l.length;f<c;f++)l[f].webglRender(i,o,u,a,h);s.pipelines.postBatch(t)};const dE=Phaser.Renderer.Canvas.SetTransform;var cE=function(s,t,e,r){t.updateData(),e.addToRenderList(t);var i=s.currentContext;if(dE(s,i,t,e,r)){for(var n=t._displayOriginX,o=t._displayOriginY,a=t.geom,h=0,u=a.length;h<u;h++)a[h].canvasRender(i,n,o);i.restore()}};const vE={renderWebGL:fE,renderCanvas:cE},pE=Phaser.GameObjects.Shape,gE=Phaser.Utils.Array.Remove;class Zn extends pE{constructor(t,e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=2),n===void 0&&(n=i),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,r),this.setSize(i,n),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this._fillColor=t,this._fillAlpha=e,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,e,r){return r===void 0&&(r=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==r,this._lineWidth=t,this._strokeColor=e,this._strokeAlpha=r,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,r=t.length;e<r;e++){var i=t[e];i.dirty&&i.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ui(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],gE(this.geom,e)),this}}Object.assign(Zn.prototype,vE);const mE={setBoxFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==s||this.boxFillAlpha!==t,this.boxFillColor=s,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==s||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=s,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(s,t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.boxLineWidth!==s||this.boxStrokeColor!==t||this.boxStrokeAlpha!==e,this.boxLineWidth=s,this.boxStrokeColor=t,this.boxStrokeAlpha=e,this},setUncheckedBoxStrokeStyle(s,t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==s||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==e,this.uncheckedBoxLineWidth=s,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=e,this},setCheckerStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==s||this.checkAlpha!==t,this.checkerColor=s,this.checkAlpha=t,this},setBoxShape(s){return s===void 0&&(s=!1),this.isCircleShape===s?this:(this.isCircleShape=s,this.isSizeChanged=!0,this.dirty=!0,this)}},xE={setBoxSize(s){return this.dirty=this.dirty||this.boxSize!==s,this.boxSize=s,this},setCheckerSize(s){return this.dirty=this.dirty||this.checkerSize!==s,this.checkerSize=s,this}};var yE=function(s,t){return s==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=s,this.fillAlpha=t),this},TE=function(s,t,e){return s==null||t==null?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=s,this.strokeColor=t,this.strokeAlpha=e),this};const CE={fillStyle:yE,lineStyle:TE};class il{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,e,r,i,n){}canvasRender(t,e,r){}updateData(){this.dirty=!1}}Object.assign(il.prototype,CE,el);const SE=Phaser.Geom.Polygon.Earcut;class _a extends il{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=SE(this.pathData),super.updateData(),this}webglRender(t,e,r,i,n){this.isFilled&&lm(t,e,this,r,i,n),this.isStroked&&tl(t,this,r,i,n)}canvasRender(t,e,r){var i=this.pathData,n=i.length-1,o=i[0]-e,a=i[1]-r;t.beginPath(),t.moveTo(o,a),this.closePath||(n-=2);for(var h=2;h<n;h+=2){var u=i[h]-e,l=i[h+1]-r;t.lineTo(u,l)}this.closePath&&t.closePath(),this.isFilled&&(ja(t,this),t.fill()),this.isStroked&&(qa(t,this),t.stroke())}}const $c=Phaser.Math.DegToRad;class sl extends _a{constructor(t,e,r,i,n,o,a,h){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=360),a===void 0&&(a=!1),h===void 0&&(h=!1),super(),this.setCenterPosition(t,e),this.setRadius(r,i),this.setAngle(n,o,a),this.setPie(h),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return e===void 0&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return e===void 0&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,r){return r===void 0&&(r=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=r,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),re(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,r){t.beginPath();var i=this.x-e,n=this.y-r,o=$c(this.startAngle),a=$c(this.endAngle);this.pie&&(t.moveTo(i,n),t.lineTo(i+Math.cos(o)*this.radiusX,n+Math.sin(o)*this.radiusY)),t.ellipse(i,n,this.radiusX,this.radiusY,0,o,a,this.anticlockwise),this.pie&&t.lineTo(i,n),this.isFilled&&(ja(t,this),t.fill()),this.isStroked&&(qa(t,this),t.stroke())}}class rf extends sl{constructor(t,e,r){super(t,e,r,r,0,360)}}class EE extends _a{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),e=0,r=t.length;e<r;e++)this.pathData.push(t[e].x,t[e].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class PE extends sl{constructor(t,e,r,i){super(t,e,r,i,0,360)}}let ME=class extends _a{constructor(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),super(),this.setP0(t,e),this.setP1(r,i)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}};var AE=function(s,t,e){return e.length=0,s!=null&&e.push(s,t),e};const Zc=Phaser.Math.Interpolation.QuadraticBezier;var Kc=function(s,t,e,r,i,n){for(var o=n.length,a=n[o-2],h=n[o-1],u=1,l=i-1;u<=l;u++){var f=u/l;n.push(Zc(f,a,s,e),Zc(f,h,t,r))}return n},C0=function(s){var t=s.length;if(t<2)return s;var e=s[t-2],r=s[t-1];return s.push(e),s.push(r),s};const RE={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(s,t){return this.restorePathData(),this.accumulationLengths=void 0,AE(s,t,this.pathData),this.firstPointX=s,this.firstPointY=t,this.lastPointX=s,this.lastPointY=t,this},lineTo(s,t,e){return e===void 0&&(e=!1),e&&(s+=this.lastPointX,t+=this.lastPointY),_i(s,t,this.pathData),this.lastPointX=s,this.lastPointY=t,this},verticalLineTo(s,t){return this.lineTo(s,this.lastPointY,t),this},horizontalLineTo(s,t){return this.lineTo(this.lastPointX,s,t),this},ellipticalArc(s,t,e,r,i,n,o){return o===void 0&&(o=!1),re(s,t,e,r,i,n,o,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(s,t,e,r,i,n){return this.ellipticalArc(s,t,e,e,r,i,n),this},quadraticBezierTo(s,t,e,r){return Kc(s,t,e,r,this.iterations,this.pathData),this.lastPointX=e,this.lastPointY=r,this.lastCX=s,this.lastCY=t,this},smoothQuadraticBezierTo(s,t){var e=this.lastPointX*2-this.lastCX,r=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(e,r,s,t),this},cubicBezierCurveTo(s,t,e,r,i,n){return Kc(s,t,e,r,i,n,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=n,this.lastCX=e,this.lastCY=r,this},smoothCubicBezierCurveTo(s,t,e,r){var i=this.lastPointX*2-this.lastCX,n=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(i,n,s,t,e,r),this},close(){return this.closePath=!0,this},end(){return C0(this.pathData),this}},OE=Phaser.Math.RotateAround;var LE=function(s,t,e,r){for(var i={x:0,y:0},n=0,o=r.length-1;n<o;n+=2)i.x=r[n],i.y=r[n+1],OE(i,s,t,e),r[n]=i.x,r[n+1]=i.y;return r},bE=function(s,t,e,r,i){for(var n=0,o=i.length-1;n<o;n+=2){var a=i[n]-s,h=i[n+1]-t;a*=e,h*=r,i[n]=a+s,i[n+1]=h+t}return i},S0=function(s,t,e){for(var r=0,i=e.length-1;r<i;r+=2)e[r]+=s,e[r+1]+=t;return e};const wE=Phaser.Math.DegToRad,FE=Phaser.Math.RotateAround,DE={rotateAround(s,t,e){if(this.pathData.length===0)return this;e=wE(e),LE(s,t,e,this.pathData);var r=this.pathData.length;if(this.lastPointX=this.pathData[r-2],this.lastPointY=this.pathData[r-1],this.lastCX!==void 0){var i={x:this.lastCX,y:this.lastCY};FE(i,s,t,e),this.lastCX=i.x,this.lastCY=i.y}return this},scale(s,t,e,r){if(this.pathData.length===0)return this;if(bE(s,t,e,r,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var i=this.lastCX-s,n=this.lastCY-t;i*=e,n*=r,this.lastCX=i+s,this.lastCY=n+t}return this},offset(s,t){return S0(s,t,this.pathData),this}};var Jf=function(s,t,e,r){e===void 0&&(e=0),r===void 0&&(r=t.length),s.length=r-e;for(var i=0,n=s.length;i<n;i++)s[i]=t[i+e];return s};const IE={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(Jf(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},BE=Phaser.Math.Distance.Between,GE=Phaser.Math.Wrap,YE=Phaser.Math.Linear;var Jc=function(s,t,e,r,i){if(r===void 0&&(r=e,e=0),e=Qc(e),r=Qc(r),e!==r){var n=t[t.length-1],o=n*e,a=n*r;e<r?Fl(s,t,o,a,i):(Fl(s,t,o,n,i),Fl(s,t,0,a,i)),C0(i)}},Fl=function(s,t,e,r,i){for(var n=e>0,o=0,a=t.length;o<a;o++){var h=o*2,u=t[o];if(n){if(u<e)continue;if(u==e)n=!1;else{var l=u-t[o-1],f=1-(u-e)/l;i.push(Ao(s,h-2,h,f)),i.push(Ao(s,h-1,h+1,f)),n=!1}}if(u<=r){if(i.push(s[h]),i.push(s[h+1]),u===r)break}else{var l=u-t[o-1],f=1-(u-r)/l;i.push(Ao(s,h-2,h,f)),i.push(Ao(s,h-1,h+1,f));break}}},Ao=function(s,t,e,r){var i=s[t],n=s[e];return YE(i,n,r)},Qc=function(s){return s===0?0:s%1===0?1:GE(s,0,1)};const NE={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var s=this.accumulationLengths,t=this.pathData,e,r,i,n,o,a=0,h=0,u=t.length;h<u;h+=2)i=t[h],n=t[h+1],o=e===void 0?0:BE(e,r,i,n),a+=o,s.push(a),e=i,r=n;return this.totalPathLength=a,this},setDisplayPathSegment(s,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,Jc(this.pathDataSave,this.accumulationLengths,s,t,this.pathData),this},appendFromPathSegment(s,t,e){return t===void 0?this.pathData.push(...s.pathData):(s.updateAccumulationLengths(),Jc(s.pathData,s.accumulationLengths,t,e,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},XE={draw(s,t,e){var r=this.toPoints();return t&&s.fillPoints(r,this.closePath,this.closePath),e&&s.strokePoints(r,this.closePath,this.closePath),this}};var zE=function(s,t){t===void 0&&(t=[]);for(var e=0,r=s.length-1;e<r;e+=2)t.push({x:s[e],y:s[e+1]});return t};const VE=Phaser.Geom.Polygon;var UE=function(s,t){return t===void 0&&(t=new VE),t.setTo(s),t};class E0{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return zE(this.pathData)}toPolygon(t){return UE(this.pathData,t)}}Object.assign(E0.prototype,RE,DE,IE,NE,XE);class Rr extends _a{constructor(){super(),this.builder=new E0(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,e){return this.builder.startAt(t,e),this.dirty=!0,this}lineTo(t,e,r){return this.builder.lineTo(t,e,r),this.dirty=!0,this}verticalLineTo(t,e){return this.builder.verticalLineTo(t,e),this.dirty=!0,this}horizontalLineTo(t,e){return this.builder.horizontalLineTo(t,e),this.dirty=!0,this}ellipticalArc(t,e,r,i,n,o,a){return this.builder.ellipticalArc(t,e,r,i,n,o,a),this.dirty=!0,this}arc(t,e,r,i,n,o){return this.builder.arc(t,e,r,i,n,o),this.dirty=!0,this}quadraticBezierTo(t,e,r,i){return this.builder.quadraticBezierTo(t,e,r,i),this.dirty=!0,this}smoothQuadraticBezierTo(t,e){return this.builder.smoothQuadraticBezierTo(t,e),this.dirty=!0,this}cubicBezierCurveTo(t,e,r,i,n,o){return this.builder.cubicBezierCurveTo(t,e,r,i,n,o),this.dirty=!0,this}smoothCubicBezierCurveTo(t,e,r,i){return this.builder.smoothCubicBezierCurveTo(t,e,r,i),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,e,r){return this.builder.rotateAround(t,e,r),this.dirty=!0,this}scale(t,e,r,i){return this.builder.scale(t,e,r,i),this.dirty=!0,this}offset(t,e){return this.builder.offset(t,e),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,e,r){return this.builder.appendFromPathSegment(t.builder,e,r),this}copyPathFrom(t,e,r){return this.builder.clear().appendFromPathSegment(t.builder,e,r),this}setDisplayPathSegment(t,e){return this.builder.setDisplayPathSegment(t,e),this}}const WE=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let HE=class extends il{constructor(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=r),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,e),this.setSize(r,i)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,e){return this.centerX=t,this.centerY=e,this}updateData(){this.pathData.length=0;var t=this.x,e=t+this.width,r=this.y,i=r+this.height;return this.pathData.push(t,r),this.pathData.push(e,r),this.pathData.push(e,i),this.pathData.push(t,i),this.pathData.push(t,r),super.updateData(),this}webglRender(t,e,r,i,n){if(this.isFilled){var o=t.fillTint,a=WE(this.fillColor,this.fillAlpha*r);o.TL=a,o.TR=a,o.BL=a,o.BR=a,t.batchFillRect(-i+this.x,-n+this.y,this.width,this.height)}this.isStroked&&tl(t,this,r,i,n)}canvasRender(t,e,r){this.isFilled&&(ja(t,this),t.fillRect(-e,-r,this.width,this.height)),this.isStroked&&(qa(t,this),t.beginPath(),t.rect(-e,-r,this.width,this.height),t.stroke())}};const Ro=Phaser.Utils.Objects.GetValue;let Yh=class extends _a{constructor(t,e,r,i,n,o){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=r),n===void 0&&(n=0),o===void 0&&(o=6),super(),this.setTopLeftPosition(t,e),this.setSize(r,i),this.setRadius(n),this.setIterations(o),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,e){return this.centerX=t,this.centerY=e,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var e=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==e,this._convexTL=e,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var e=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==e,this._convexTR=e,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var e=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==e,this._convexBL=e,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var e=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==e,this._convexBR=e,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=Ro(t,"tl",0),this.radiusTR=Ro(t,"tr",0),this.radiusBL=Ro(t,"bl",0),this.radiusBR=Ro(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var e=this.width,r=this.height,i,n=this.iterations+1;if(i=this.radiusTL,i>0)if(this._convexTL){var o=i,a=i;re(o,a,i,i,180,270,!1,n,t)}else{var o=0,a=0;re(o,a,i,i,90,0,!0,n,t)}else _i(0,0,t);if(i=this.radiusTR,i>0)if(this._convexTR){var o=e-i,a=i;re(o,a,i,i,270,360,!1,n,t)}else{var o=e,a=0;re(o,a,i,i,180,90,!0,n,t)}else _i(e,0,t);if(i=this.radiusBR,i>0)if(this._convexBR){var o=e-i,a=r-i;re(o,a,i,i,0,90,!1,n,t)}else{var o=e,a=r;re(o,a,i,i,270,180,!0,n,t)}else _i(e,r,t);if(i=this.radiusBL,i>0)if(this._convexBL){var o=i,a=r-i;re(o,a,i,i,90,180,!1,n,t)}else{var o=0,a=r;re(o,a,i,i,360,270,!0,n,t)}else _i(0,r,t);return t.push(t[0],t[1]),S0(this.x,this.y,t),super.updateData(),this}};const kE=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let $E=class extends il{constructor(t,e,r,i,n,o){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,e),this.setP1(r,i),this.setP2(n,o)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,e){return this.dirty=this.dirty||this.x2!==t||this.y2!==e,this.x2=t,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,e,r,i,n){if(this.isFilled){var o=kE(this.fillColor,this.fillAlpha*r),a=this.x0-i,h=this.y0-n,u=this.x1-i,l=this.y1-n,f=this.x2-i,c=this.y2-n,d=e.getX(a,h),v=e.getY(a,h),p=e.getX(u,l),g=e.getY(u,l),m=e.getX(f,c),x=e.getY(f,c);t.batchTri(d,v,p,g,m,x,o,o,o)}this.isStroked&&tl(t,this,r,i,n)}canvasRender(t,e,r){var i=this.x1-e,n=this.y1-r,o=this.x2-e,a=this.y2-r,h=this.x3-e,u=this.y3-r;t.beginPath(),t.moveTo(i,n),t.lineTo(o,a),t.lineTo(h,u),t.closePath(),this.isFilled&&(ja(t,this),t.fill()),this.isStroked&&(qa(t,this),t.stroke())}};const ZE={buildShapes(){this.addShape(new Yh().setName("box")).addShape(new Rr().setName("checker"))},updateShapes(){var s=this.width/2,t=this.height/2,e=Math.min(s,t),r=e*2,i=s-e,n=t-e,o=this.boxLineWidth,a=Math.max(r/10,2),h=this.getShape("box"),u=this.getShape("checker");if(this.isSizeChanged){var c=r*(1-this.boxSize)/2,l=o/2,f=r*this.boxSize-o;h.setTopLeftPosition(i+l+c,n+l+c).setSize(f,f),this.isCircleShape?h.setRadius(f/2):h.setRadius(0);var c=r*(1-this.checkerSize)/2,d=r*this.checkerSize/4,v=d*1,p=d*2,g=d*3;u.startAt(v,p).lineTo(p,g).lineTo(g,v).offset(i+c,n+c).end()}this.checked?(h.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(o,this.boxStrokeColor,this.boxStrokeAlpha),u.lineStyle(a,this.checkerColor)):(h.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(o,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),u.lineStyle()),this.checked&&u.setDisplayPathSegment(this.checkerAnimProgress)}},KE=Phaser.Utils.Objects.GetValue;class nl extends Qt{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(KE(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=JE[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const JE={no:0,lazy:1,always:2},QE=Phaser.Utils.Objects.GetValue;class rl extends nl{constructor(t,e){super(t,e);var r=this.scene?"update":"step";this.tickEventName=QE(e,"tickEventName",r),this.isSceneTicker=!jE(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var jE=function(s){return s==="step"||s==="poststep"};const gs=Phaser.Utils.Objects.GetValue,jc=Phaser.Math.Clamp;let P0=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=gs(t,"state",Qr),this.timeScale=gs(t,"timeScale",1),this.delay=gs(t,"delay",0),this.repeat=gs(t,"repeat",0),this.repeatCounter=gs(t,"repeatCounter",0),this.repeatDelay=gs(t,"repeatDelay",0),this.duration=gs(t,"duration",0),this.nowTime=gs(t,"nowTime",0),this.justRestart=gs(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?ir:jr,this.repeatCounter=0,this}stop(){return this.state=Qr,this}update(t,e){this.state===Qr||this.state===Oo||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=qc)):(this.nowTime=this.duration,this.state=Oo):this.nowTime>=0&&(this.state=ir))}get t(){var t;switch(this.state){case Qr:case jr:case qc:t=0;break;case ir:t=this.nowTime/this.duration;break;case Oo:t=1;break}return jc(t,0,1)}set t(t){t=jc(t,-1,1),t<0?(this.state=jr,this.nowTime=-this.delay*t):(this.state=ir,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Qr}get isDelay(){return this.state===jr}get isCountDown(){return this.state===ir}get isRunning(){return this.state===jr||this.state===ir}get isDone(){return this.state===Oo}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const Qr=0,jr=1,ir=2,qc=3,Oo=-1;class qE extends rl{constructor(t,e){super(t,e),this.timer=new P0}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const qr=Phaser.Utils.Objects.GetValue,_c=Phaser.Utils.Objects.GetAdvancedValue,_E=Phaser.Tweens.Builders.GetEaseFunction;class Xr extends qE{resetFromJSON(t){return this.timer.resetFromJSON(qr(t,"timer")),this.setEnable(qr(t,"enable",!0)),this.setTarget(qr(t,"target",this.parent)),this.setDelay(_c(t,"delay",0)),this.setDuration(_c(t,"duration",1e3)),this.setEase(qr(t,"ease","Linear")),this.setRepeat(qr(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=_E(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,e){if(!this.isRunning||!this.enable||!this.parent.active)return this;var r=this.target,i=this.timer;return i.update(t,e),i.isDelay||this.updateGameObject(r,i),this.emit("update",r,this),i.isDone&&this.complete(),this}updateGameObject(t,e){}}const Gs=Phaser.Utils.Objects.GetValue,tP=Phaser.Math.Linear;class Kn extends Xr{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.target;this.propertyKey=Gs(t,"key","value");var r=e[this.propertyKey];return this.fromValue=Gs(t,"from",r),this.toValue=Gs(t,"to",r),this.setEase(Gs(t,"ease",this.ease)),this.setDuration(Gs(t,"duration",this.duration)),this.setRepeat(Gs(t,"repeat",0)),this.setDelay(Gs(t,"delay",0)),this.setRepeatDelay(Gs(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var r=e.t;r=this.easeFn(r),t[this.propertyKey]=tP(this.fromValue,this.toValue,r)}}const eP={setCheckerAnimationDuration(s){return s===void 0&&(s=0),this.checkerAnimDuration=s,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Kn(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var M0={};Object.assign(M0,mE,xE,ZE,eP);const zt=Phaser.Utils.Objects.GetValue,tv=Phaser.Utils.Objects.IsPlainObject,Dl=23730,iP=16777215;class A0 extends Zn{constructor(t,e,r,i,n,o,a){tv(e)?(a=e,e=zt(a,"x",0),r=zt(a,"y",0),i=zt(a,"width",2),n=zt(a,"height",2),o=zt(a,"color",Dl)):tv(o)&&(a=o,o=zt(a,"color",Dl)),super(t,e,r,i,n),this.type="rexCheckbox",o===void 0&&(o=Dl),this.setBoxShape(zt(a,"circleBox",!1)),this.setBoxFillStyle(o,zt(a,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(zt(a,"uncheckedColor",null),zt(a,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(zt(a,"boxLineWidth",4),zt(a,"boxStrokeColor",o),zt(a,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,zt(a,"uncheckedBoxStrokeColor",this.boxStrokeColor),zt(a,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(zt(a,"checkerColor",iP),zt(a,"checkerAlpha",1)),this.setBoxSize(zt(a,"boxSize",1)),this.setCheckerSize(zt(a,"checkerSize",1)),this.setCheckerAnimationDuration(zt(a,"animationDuration",150)),this.buildShapes();var h=zt(a,"checked");h===void 0&&(h=zt(a,"value",!1)),this.setValue(h)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(A0.prototype,M0);const _r=Phaser.Utils.Objects.GetValue;let zr=class extends Qt{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(_r(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(_r(t,"enable",!0)),this.setMode(_r(t,"mode",1)),this.setClickInterval(_r(t,"clickInterval",100)),this.setDragThreshold(_r(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=sP[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,e,r,i){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,i))}onRelease(t,e,r,i){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,i),this.pointer=void 0)}onPointOut(t,e){this.pointer===t&&this.cancel()}onMove(t,e,r,i){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,e,r){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,e,r),this;this.pointer=void 0;var i=this.lastClickTime;return i!==void 0&&t-i<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,e,r),this)}cancel(){return this.pointer=void 0,this}onOver(t,e,r,i){return this.enable?(this.emit("over",this,this.parent,t,i),this):this}onOut(t,e){return this.enable?(this.emit("out",this,this.parent,t,e),this):this}};const sP={press:0,pointerdown:0,release:1,pointerup:1},ev=Phaser.Utils.Objects.GetValue;class nP extends A0{constructor(t,e,r,i,n,o,a){super(t,e,r,i,n,o,a),this._click=new zr(this,ev(a,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(ev(a,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}const rP={setTrackFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==s||this.trackFillAlpha!==t,this.trackFillColor=s,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==s||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=s,this.falseValueTrackFillAlpha=t,this},setThumbStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==s||this.checkAlpha!==t,this.thumbColor=s,this.thumbAlpha=t,this}},aP={setTrackSize(s,t){return this.dirty=this.dirty||this.trackWidth!==s||this.trackHeight!==t,this.trackWidth=s,this.trackHeight=t,this},setTrackRadius(s){return this.dirty=this.dirty||this.trackRadius!==s,this.trackRadius=s,this},setThumbSize(s,t){return t===void 0&&(t=s),this.dirty=this.dirty||this.thumbWidth!==s||this.thumbHeight!==t,this.thumbWidth=s,this.thumbHeight=t,this},setThumbRadius(s){return this.dirty=this.dirty||this.thumbRadius!==s,this.thumbRadius=s,this}},oP={setThumbPosition(s,t){return t===void 0&&(t=1-s),this.thumbLeftX=s,this.thumbRightX=t,this},setRTL(s){return s===void 0&&(s=!0),this.rtl=s,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var zn=function(s,t,e){return(t-s)*e+s},Ba=function(s){return s>>16&255},Ga=function(s){return s>>8&255},Ya=function(s){return s&255},hP=function(s,t,e){var r=zn(Ba(s),Ba(t),e),i=zn(Ga(s),Ga(t),e),n=zn(Ya(s),Ya(t),e);return(r&255)<<16|(i&255)<<8|n&255};const iv=Phaser.Math.Linear,lP={buildShapes(){this.addShape(new Yh().setName("track")).addShape(new Yh().setName("thumb"))},updateShapes(){var s=this.width,t=this.height,e=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,r=this.getShape("track");if(this.isSizeChanged){var i=s*this.trackWidth,n=t*this.trackHeight,o=(s-i)/2,a=(t-n)/2,h=t*this.trackRadius;r.setTopLeftPosition(o,a).setSize(i,n).setRadius(h)}var u=hP(this.falseValueTrackColor,this.trackFillColor,e),l=iv(this.falseValueTrackFillAlpha,this.trackFillAlpha,e);r.fillStyle(u,l);var f=this.getShape("thumb");if(this.isSizeChanged){var c=s*this.thumbWidth,d=t*this.thumbHeight,v=t*this.thumbRadius;f.setSize(c,d).setRadius(v)}var p=iv(this.thumbLeftX,this.thumbRightX,e)*s;this.rtl&&(p=s-p);var g=t/2;f.setCenterPosition(p,g),f.fillStyle(this.thumbColor,this.thumbAlpha)}},uP={setToggleAnimationDuration(s){return s===void 0&&(s=0),this.toggleAnimDuration=s,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Kn(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var R0={};Object.assign(R0,rP,aP,oP,lP,uP);var fP=function(s){var t=.3*Ba(s)+.59*Ga(s)+.11*Ya(s);return(t&255)<<16|(t&255)<<8|t&255};const Vt=Phaser.Utils.Objects.GetValue,sv=Phaser.Utils.Objects.IsPlainObject,Il=23730,dP=16777215;class O0 extends Zn{constructor(t,e,r,i,n,o,a){sv(e)?(a=e,e=Vt(a,"x",0),r=Vt(a,"y",0),i=Vt(a,"width",2),n=Vt(a,"height",2),o=Vt(a,"color",Il)):sv(o)&&(a=o,o=Vt(a,"color",Il)),super(t,e,r,i,n),this.type="rexToggleSwitch",o===void 0&&(o=Il),this.setTrackFillStyle(o,Vt(a,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Vt(a,"falseValueTrackColor",fP(o)),Vt(a,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Vt(a,"thumbColor",dP),Vt(a,"thumbAlpha",1)),this.setTrackSize(Vt(a,"trackWidth",.9),Vt(a,"trackHeight",.5)),this.setTrackRadius(Vt(a,"trackRadius",this.trackHeight*.5));var h=Vt(a,"thumbHeight",void 0),u=Vt(a,"thumbWidth",h);u===void 0&&(u=this.trackHeight*.9),this.setThumbSize(u,h),this.setThumbRadius(Vt(a,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Vt(a,"thumbLeft",.3),Vt(a,"thumbRight",void 0)),this.setRTL(Vt(a,"rtl",!1)),this.setToggleAnimationDuration(Vt(a,"animationDuration",150)),this.buildShapes(),this.setValue(Vt(a,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,e){e===void 0&&(e=this.toggleAnimDuration);var r=this.toggleAnimDuration;return this.toggleAnimDuration=e,this.value=t,this.toggleAnimDuration=r,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(O0.prototype,R0);const nv=Phaser.Utils.Objects.GetValue;class cP extends O0{constructor(t,e,r,i,n,o,a){super(t,e,r,i,n,o,a),this._click=new zr(this,nv(a,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(nv(a,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}const vP=Phaser.GameObjects.Zone,pP=Phaser.Utils.Array.Add,gP=Phaser.Utils.Array.Remove;let to=class extends vP{constructor(t,e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),n===void 0&&(n=1),super(t,e,r,i,n),this.children=[]}destroy(t){if(this.scene){if(t)for(var e,r=this.children.length-1;r>=0;r--)e=this.children[r],!e.parentContainer&&!e.displayList&&e.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var e=this;return pP(this.children,t,0,function(r){r.once("destroy",e.onChildDestroy,e)},this),this}remove(t,e){var r=this;return gP(this.children,t,function(i){i.off("destroy",r.onChildDestroy,r),e&&i.destroy()}),this}onChildDestroy(t,e){this.remove(t,!1)}clear(t){for(var e=this,r,i=0,n=this.children.length;i<n;i++)r=this.children[i],r.off("destroy",e.onChildDestroy,e),t&&r.destroy();return this.children.length=0,this}};const rv=Phaser.GameObjects.Components;Phaser.Class.mixin(to,[rv.Alpha,rv.Flip]);var Xi=function(s,t){var e;if(t===void 0)s.hasOwnProperty("rexContainer")&&(e=s.rexContainer.parent);else for(e=Xi(s);e&&e.name!==t;)e=Xi(e);return e},mP=function(s){for(var t=Xi(s);t;)s=t,t=Xi(t);return s};const xP=Phaser.Math.DegToRad,yP=Phaser.Math.RadToDeg;var yt=function(s){if(!s.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return yP(this.rotation)},set:function(e){this.rotation=xP(e)}}),Object.defineProperty(t,"displayWidth",{get:function(){return s.width*this.scaleX},set:function(e){this.scaleX=e/s.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return s.height*this.scaleY},set:function(e){this.scaleY=e/s.height}}),s.rexContainer=t}return s.rexContainer};const TP={setParent(s,t){t===void 0&&(t=this);var e=yt(s);return t?(e.parent=t,e.self=s):(e.parent=null,e.self=null),this},getParent(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),Xi(s,t)},getTopmostParent(s){return s===void 0&&(s=this),mP(s)}},Lo=Phaser.Utils.Objects.GetValue,L0=to.prototype.add;var Bl=function(s,t){this.setParent(s);var e=yt(s);return b0(e,t),this.resetChildState(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),L0.call(this,s),this.addToParentContainer(s),this.addToRenderLayer(s),this},Gl=function(s,t){this.setParent(s);var e=yt(s);return b0(e,t),e.x=s.x,e.y=s.y,e.rotation=s.rotation,e.scaleX=s.scaleX,e.scaleY=s.scaleY,e.alpha=s.alpha,e.visible=s.visible,e.active=s.active,this.updateChildPosition(s).updateChildAlpha(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),L0.call(this,s),this.addToRenderLayer(s),this},b0=function(s,t){s.syncPosition=Lo(t,"syncPosition",!0),s.syncRotation=Lo(t,"syncRotation",!0),s.syncScale=Lo(t,"syncScale",!0),s.syncAlpha=Lo(t,"syncAlpha",!0)};const CP={add(s){return Array.isArray(s)?this.addMultiple(s):Bl.call(this,s),this},pin(s,t){return Array.isArray(s)?this.addMultiple(s,t):Bl.call(this,s,t),this},addMultiple(s){for(var t=0,e=s.length;t<e;t++)Bl.call(this,s[t]);return this},addLocal(s){return Array.isArray(s)?this.addMultiple(s):Gl.call(this,s),this},pinLocal(s,t){return Array.isArray(s)?this.addMultiple(s,t):Gl.call(this,s,t),this},addLocalMultiple(s){for(var t=0,e=s.length;t<e;t++)Gl.call(this,s[t]);return this}},av=to.prototype.remove,SP=to.prototype.clear,EP={remove(s,t){return Xi(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),av.call(this,s,t),this)},unpin(s,t){return Xi(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),av.call(this,s,t),this)},clear(s){for(var t=this.children,e=0,r=t.length;e<r;e++){var i=t[e];this.setParent(i,null),s||this.removeFromRenderLayer(i)}return SP.call(this,s),this}},PP={getLocalState(s){return yt(s)},resetChildState(s){return this.resetChildPositionState(s).resetChildVisibleState(s).resetChildAlphaState(s).resetChildActiveState(s),this},resetChildrenState(s){for(var t=0,e=s.length;t<e;t++)this.resetChildState(s[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},ov=Phaser.Math.RotateAround,MP={worldToLocal(s){return s.x-=this.x,s.y-=this.y,ov(s,0,0,-this.rotation),s.x/=this.scaleX,s.y/=this.scaleY,s},localToWorld(s){return s.x*=this.scaleX,s.y*=this.scaleY,ov(s,0,0,this.rotation),s.x+=this.x,s.y+=this.y,s}};var Na=function(s,t){return s===t?1:s/t};const AP={updateChildPosition(s){s.isRexContainerLite&&(s.syncChildrenEnable=!1);var t=yt(s),e=t.parent;return t.syncPosition&&(s.x=t.x,s.y=t.y,e.localToWorld(s)),t.syncRotation&&(s.rotation=t.rotation+e.rotation),t.syncScale&&(s.scaleX=t.scaleX*e.scaleX,s.scaleY=t.scaleY*e.scaleY),s.isRexContainerLite&&(s.syncChildrenEnable=!0,s.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(s){var t=yt(s),e=t.parent;return t.x=s.x,t.y=s.y,e.worldToLocal(t),t.scaleX=Na(s.scaleX,e.scaleX),t.scaleY=Na(s.scaleY,e.scaleY),t.rotation=s.rotation-e.rotation,this},setChildPosition(s,t,e){return s.x=t,s.y=e,this.resetChildPositionState(s),this},setChildLocalPosition(s,t,e){var r=yt(s);return r.x=t,r.y=e,this.updateChildPosition(s),this},resetLocalPositionState(){var s=yt(this).parent;return s&&s.resetChildPositionState(this),this}},RP=Phaser.Math.DegToRad,OP={updateChildRotation(s){var t=yt(s),e=t.parent;return t.syncRotation&&(s.rotation=e.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(s){var t=yt(s),e=t.parent;return t.rotation=s.rotation-e.rotation,this},setChildRotation(s,t){return s.rotation=t,this.resetChildRotationState(s),this},setChildAngle(s,t){return s.angle=t,this.resetChildRotationState(s),this},setChildLocalRotation(s,t){var e=yt(s);return e.rotation=t,this.updateChildRotation(s),this},setChildLocalAngle(s,t){var e=yt(s);return e.rotation=RP(t),this.updateChildRotation(s),this},resetLocalRotationState(){var s=yt(this).parent;return s&&s.resetChildRotationState(this),this}},LP={updateChildScale(s){var t=yt(s),e=t.parent;return t.syncScale&&(s.scaleX=e.scaleX*t.scaleX,s.scaleY=e.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(s){var t=yt(s),e=t.parent;return t.scaleX=Na(s.scaleX,e.scaleX),t.scaleY=Na(s.scaleY,e.scaleY),this},setChildScale(s,t,e){return e===void 0&&(e=t),s.scaleX=t,s.scaleY=e,this.resetChildScaleState(s),this},setChildLocalScale(s,t,e){e===void 0&&(e=t);var r=yt(s);return r.scaleX=t,r.scaleY=e,this.updateChildScale(s),this},setChildDisplaySize(s,t,e){return s.setDisplaySize(t,e),this.resetChildScaleState(s),this},resetLocalScaleState(){var s=yt(this).parent;return s&&s.resetChildScaleState(this),this}},bP={updateChildVisible(s){var t=yt(s),e=t.parent,r=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return s.visible=e.visible&&t.visible&&r,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(s){var t=yt(s);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=s.visible,this},setChildVisible(s,t){return this.setChildLocalVisible(s,t),this},setChildLocalVisible(s,t){t===void 0&&(t=!0);var e=yt(s);return e.visible=t,this.updateChildVisible(s),this},setChildMaskVisible(s,t){t===void 0&&(t=!0);var e=yt(s);return e.maskVisible=t,this.updateChildVisible(s),this},resetLocalVisibleState(){var s=yt(this).parent;return s&&s.resetChildVisibleState(this),this}},wP={updateChildAlpha(s){var t=yt(s),e=t.parent;return t.syncAlpha&&(s.alpha=e.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(s){var t=yt(s),e=t.parent;return t.alpha=Na(s.alpha,e.alpha),this},setChildAlpha(s,t){return s.alpha=t,this.resetChildAlphaState(s),this},setChildLocalAlpha(s,t){var e=yt(s);return e.alpha=t,this.updateChildAlpha(s),this},resetLocalAlphaState(){var s=yt(this).parent;return s&&s.resetChildAlphaState(this),this}},FP={updateChildActive(s){var t=yt(s),e=t.parent;return s.active=e.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(s){var t=yt(s);return t.active=s.active,this},setChildActive(s,t){return s.active=t,this.resetChildActiveState(s),this},setChildLocalActive(s,t){t===void 0&&(t=!0);var e=yt(s);return e.active=t,this.updateChildActive(s),this},resetLocalActiveState(){var s=yt(this).parent;return s&&s.resetChildActiveState(this),this}},DP={updateChildScrollFactor(s){var t=yt(s),e=t.parent;return s.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},IP={updateChildMask(s){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==s&&(s.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(s){return this.mask=s,this},clearMask(s){return s===void 0&&(s=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),s&&this.mask&&this.mask.destroy(),this}};var Or=function(s,t){if(s.length===0)return s;t===void 0&&(t=!1);var e=s[0].scene,r=e.sys.displayList;return r.depthSort(),t?s.sort(function(i,n){return r.getIndex(n)-r.getIndex(i)}):s.sort(function(i,n){return r.getIndex(i)-r.getIndex(n)}),s};const BP={setDepth(s,t){if(this.depth=s,!t&&this.children)for(var e=this.getAllChildren(),r=0,i=e.length;r<i;r++)e[r].depth=s;return this},swapDepth(s){var t=this.depth,e=s.depth;return this.setDepth(e),s.setDepth(t),this},incDepth(s){if(this.depth+=s,this.children)for(var t=this.getAllChildren(),e=0,r=t.length;e<r;e++)t[e].depth+=s;return this},bringToTop(){var s=this.displayList,t=this.getAllChildren([this]);Or(t,!1);for(var e=0,r=t.length;e<r;e++){var i=t[e];s.exists(i)&&s.bringToTop(i)}return this},moveDepthBelow(s){var t=this.displayList;if(s.displayList!==t)return this;var e=this.getAllChildren([this]);Or(e,!1);for(var r=0,i=e.length;r<i;r++){var n=e[r];if(t.exists(n)){t.moveBelow(s,n);break}}return this},moveDepthAbove(s){var t=this.displayList;if(s.displayList!==t)return this;var e=this.getAllChildren([this]);Or(e,!0);for(var r=0,i=e.length;r<i;r++){var n=e[r];if(t.exists(n)){t.moveAbove(s,n);break}}return this}};var w0=function(s,t){var e=t(s);if(!e&&s.isRexContainerLite)for(var r=s.children,i=0,n=r.length;i<n;i++)w0(r[i],t)},Yl=function(s,t){for(var e=[s];e.length>0;){var r=e.shift(),i=t(r);!i&&r.isRexContainerLite&&e.push(...r.children)}};const gn=Phaser.Utils.Array,GP={getChildren(s){if(!s)s=this.children;else for(var t=0,e=this.children.length;t<e;t++)s.push(this.children[t]);return s},getAllChildren(s){s===void 0&&(s=[]);var t=this;return Yl(t,function(e){e!==t&&s.push(e)}),s},getAllVisibleChildren(s){s===void 0&&(s=[]);var t=this;return Yl(t,function(e){if(e!==t){if(!e.visible)return!0;s.push(e)}}),s},bfs(s,t){return t===void 0&&(t=this),Yl(t,s),this},dfs(s,t){return t===void 0&&(t=this),w0(t,s),this},contains(s){var t=Xi(s);return t?t===this?!0:this.contains(t):!1},getByName(s,t){if(t){for(var e=[this],r,i;e.length;){r=e.shift();for(var n=0,o=r.children.length;n<o;n++){if(i=r.children[n],i.name===s)return i;i.isRexContainerLite&&e.push(i)}}return null}else return gn.GetFirst(this.children,"name",s)},getRandom(s,t){return gn.GetRandom(this.children,s,t)},getFirst(s,t,e,r){return gn.GetFirstElement(this.children,s,t,e,r)},getAll(s,t,e,r){return gn.GetAll(this.children,s,t,e,r)},count(s,t,e,r){return gn.CountAllMatching(this.children,s,t,e,r)},swap(s,t){return gn.Swap(this.children,s,t),this},setAll(s,t,e,r){return gn.SetAll(this.children,s,t,e,r),this}};var Nl=function(s){for(var t=[],e=0,r=s.length;e<r;e++){var i=s[e];i.hasOwnProperty("rexContainer")&&t.push(i.rexContainer)}return t},YP=function(s){for(var t=0,e=s.length;t<e;t++){var r=s[t].scene;if(r)return r}return null},hv=function(s,t,e){if(!e.parent){s.remove();return}var r=e.parent,i=e.self;switch(t){case"x":case"y":r.updateChildPosition(i);break;case"angle":case"rotation":r.updateChildRotation(i);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":r.updateChildScale(i);break;case"alpha":r.updateChildAlpha(i);break;default:r.updateChildPosition(i),r.updateChildRotation(i),r.updateChildScale(i),r.updateChildAlpha(i);break}};const NP={tweenChild(s){var t=s.targets;Array.isArray(t)||(t=[t]);var e=this.scene||YP(t);if(e){s.targets=Nl(t);var r=e.tweens.add(s);return r.on("update",hv),r}},tweenSelf(s){return s.targets=[this],this.tweenChild(s)},createTweenChildConfig(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=Nl(t));var e=s.onUpdate;return s.onUpdate=function(r,i){e&&e(r,i),hv(r,void 0,i)},s},tween(s){var t=this.scene;return s.targets||(s.targets=this),t.tweens.add(s)},timelineChild(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=Nl(t));for(var e=s.tweens,r=0,i=e.length;r<i;r++)e[r]=this.createTweenChildConfig(e[r]);var n=this.scene.tweens.timeline(s);return n}},XP={addToContainer(s){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return Or(t),s.add(t),this._setParentContainerFlag=!1,this},addToLayer(s){return this.addToContainer(s),this},removeFromContainer(){if(!this.parentContainer)return this;this._setParentContainerFlag=!0;var s=this.getAllChildren([this]);return Or(s),s.reverse(),this.parentContainer.remove(s),this._setParentContainerFlag=!1,this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var s=this.getParent();s;){var t=s.parentContainer;if(t)return t;s=s.getParent()}return null},addToParentContainer(s){if(!s.displayList)return this;var t=this.getParentContainer();return t?(s.isRexContainerLite?s.addToContainer(t):t.add(s),this):this}},zP={enableLayer(){if(this.privateRenderLayer)return this;var s=this.scene.add.layer();return this.moveDepthBelow(s),this.addToLayer(s),this.privateRenderLayer=s,this},getLayer(){return this.privateRenderLayer||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.privateRenderLayer)return this.privateRenderLayer;for(var s=this.getParent();s;){var t=s.privateRenderLayer;if(t)return t;s=s.getParent()}return null},addToRenderLayer(s){if(!s.displayList)return this;var t=this.getRenderLayer();if(!t)return this;s.isRexContainerLite?s.addToLayer(t):t.add(s);var e=yt(s);return e.layer=t,this},removeFromRenderLayer(s){var t=yt(s),e=t.layer;return e?(e.remove(s),t.layer=null,this):this}};var Lt=function(s){return s.displayWidth!==void 0?s.displayWidth:s.width},Ct=function(s){return s.displayHeight!==void 0?s.displayHeight:s.height};const lv=Phaser.Geom.Rectangle,rn=Phaser.Math.Vector2,VP=Phaser.Math.RotateAround;var Qf=function(s,t){if(t===void 0?t=new lv:t===!0&&(Xl===void 0&&(Xl=new lv),t=Xl),s.getBounds)return s.getBounds(t);var e,r,i,n,o,a,h,u;if(s.parentContainer){var l=s.parentContainer.getBoundsTransformMatrix();af(s,t),l.transformPoint(t.x,t.y,t),e=t.x,r=t.y,of(s,t),l.transformPoint(t.x,t.y,t),i=t.x,n=t.y,hf(s,t),l.transformPoint(t.x,t.y,t),o=t.x,a=t.y,lf(s,t),l.transformPoint(t.x,t.y,t),h=t.x,u=t.y}else af(s,t),e=t.x,r=t.y,of(s,t),i=t.x,n=t.y,hf(s,t),o=t.x,a=t.y,lf(s,t),h=t.x,u=t.y;return t.x=Math.min(e,i,o,h),t.y=Math.min(r,n,a,u),t.width=Math.max(e,i,o,h)-t.x,t.height=Math.max(r,n,a,u)-t.y,t},Xl=void 0,af=function(s,t,e){return t===void 0?t=new rn:t===!0&&(fi===void 0&&(fi=new rn),t=fi),s.getTopLeft?s.getTopLeft(t):(t.x=s.x-Lt(s)*s.originX,t.y=s.y-Ct(s)*s.originY,al(s,t,e))},of=function(s,t,e){return t===void 0?t=new rn:t===!0&&(fi===void 0&&(fi=new rn),t=fi),s.getTopRight?s.getTopRight(t):(t.x=s.x-Lt(s)*s.originX+Lt(s),t.y=s.y-Ct(s)*s.originY,al(s,t,e))},hf=function(s,t,e){return t===void 0?t=new rn:t===!0&&(fi===void 0&&(fi=new rn),t=fi),s.getBottomLeft?s.getBottomLeft(t):(t.x=s.x-Lt(s)*s.originX,t.y=s.y-Ct(s)*s.originY+Ct(s),al(s,t,e))},lf=function(s,t,e){return t===void 0?t=new rn:t===!0&&(fi===void 0&&(fi=new rn),t=fi),s.getBottomRight?s.getBottomRight(t):(t.x=s.x-Lt(s)*s.originX+Lt(s),t.y=s.y-Ct(s)*s.originY+Ct(s),al(s,t,e))},fi=void 0,al=function(s,t,e){if(e===void 0&&(e=!1),s.rotation!==0&&VP(t,s.x,s.y,s.rotation),e&&s.parentContainer){var r=s.parentContainer.getBoundsTransformMatrix();r.transformPoint(t.x,t.y,t)}return t};const uv=Phaser.Geom.Rectangle,UP=Phaser.Geom.Rectangle.Union;var WP=function(s,t){t===void 0?t=new uv:t===!0&&(zl===void 0&&(zl=new uv),t=zl),t.setTo(0,0,0,0);for(var e,r=!0,i=0,n=s.length;i<n;i++)if(e=s[i],!!e.getBounds){var o=Qf(e,!0);r?(t.setTo(o.x,o.y,o.width,o.height),r=!1):UP(o,t,t)}return t},zl,mn=Phaser.Utils.Objects.GetValue,F0=function(s){if(s){var t=s.gameObjects,e=s.renderTexture,r=mn(s,"x",void 0),i=mn(s,"y",void 0),n=mn(s,"width",void 0),o=mn(s,"height",void 0),a=mn(s,"originX",0),h=mn(s,"originY",0),u=mn(s,"padding",0),l,f;if(n===void 0||o===void 0||r===void 0||i===void 0){var c=WP(t,!0),d=r!==void 0&&i!==void 0;d?(n=Math.max(r-c.left,c.right-r)*2,o=Math.max(i-c.top,c.bottom-i)*2,a=.5,h=.5):(r=c.x,i=c.y,n=c.width,o=c.height,a=0,h=0),l=c.x,f=c.y}else l=r+(0-a)*n,f=i+(0-h)*o;l-=u,f-=u,n+=u*2,o+=u*2;var v=!e;if(v){var p=t[0].scene;e=p.add.renderTexture(0,0,n,o)}e.setPosition(r,i),(e.width!==n||e.height!==o)&&e.setSize(n,o),e.setOrigin(a,h),e.camera.setScroll(l,f),t=Or(Ls(t)),e.draw(t);var g=s.saveTexture;return g&&e.saveTexture(g),v&&g&&e.destroy(),e}};const HP={snapshot(s){var t=this.scaleX,e=this.scaleY,r=t===1&&e===1;r||this.setScale(1),s===void 0&&(s={}),s.gameObjects=this.getAllVisibleChildren(),s.x=this.x,s.y=this.y,s.originX=this.originX,s.originY=this.originY;var i=F0(s),n=!!i.scene;return r||(this.setScale(t,e),n&&i.setScale(t,e)),n?i:this}},fv=Phaser.Utils.Objects.GetValue;var D0=function(s,t,e){var r=s.getBounds||s.width!==void 0&&s.height!==void 0;if(r){var i,n;typeof e=="number"?i=e:(i=fv(e,"color"),n=fv(e,"lineWidth")),i===void 0&&(i=16777215),n===void 0&&(n=1),ms[0]=af(s,ms[0]),ms[1]=of(s,ms[1]),ms[2]=lf(s,ms[2]),ms[3]=hf(s,ms[3]),t.lineStyle(n,i).strokePoints(ms,!0,!0)}},ms=[void 0,void 0,void 0,void 0];const kP=Phaser.Utils.Objects.GetValue;var $P=function(s,t){for(var e=kP(t,"drawContainer",!0),r=this.getAllVisibleChildren([this]),i=0,n=r.length;i<n;i++){var o=r[i];!e&&o.isRexContainerLite||D0(o,s,t)}return this};const ZP=Phaser.Math.RotateAround;var KP=function(s,t,e){e===void 0&&(e=t);var r={x:(t-s.originX)*s.displayWidth,y:(e-s.originY)*s.displayHeight};return ZP(r,0,0,s.rotation),s.originX=t,s.originY=e,s.x=s.x+r.x,s.y=s.y+r.y,s},JP=function(s,t){this.syncChildrenEnable=!1,KP(this,s,t),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),r=0,i=e.length;r<i;r++)this.resetChildPositionState(e[r]);return this},I0={changeOrigin:JP,drawBounds:$P};Object.assign(I0,TP,CP,EP,PP,MP,AP,OP,LP,bP,wP,FP,DP,IP,BP,GP,NP,XP,zP,HP);class Vi extends to{constructor(t,e,r,i,n,o){Array.isArray(i)&&(o=i,i=void 0,n=void 0),super(t,e,r,i,n),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,o&&this.add(o)}destroy(t){this.scene&&(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,e){return this.setSize(t,e),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return Xi(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Xi(this);return t?t.setParentContainerFlag:!1}}Object.assign(Vi.prototype,I0);Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;const bo=Phaser.Utils.Objects.GetValue;var Th=function(s,t){return t===void 0?s:s[t]},qs=function(s,t,e){s===void 0&&(s={}),t===void 0&&(t=0);var r=typeof t;return r==="string"?s[t]=e:r==="number"?(s.left=t,s.right=t,s.top=t,s.bottom=t):(s.left=bo(t,"left",0),s.right=bo(t,"right",0),s.top=bo(t,"top",0),s.bottom=bo(t,"bottom",0)),s};let jf=class{constructor(t,e){this.setParent(t),this.type=e,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,e){return!1}};Object.assign(jf.prototype,el);const QP={renderContent(){},render(){if(!this.willRender)return this;var s=this.context;if(s.save(),s.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,e=this.drawY;this.autoRound&&(t=Math.round(t),e=Math.round(e)),s.translate(t,e),s.scale(this.scaleX,this.scaleY),s.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),s.restore(),this}},jP=Phaser.Math.RotateAround;var qP=function(s,t,e,r){return r===void 0?r={}:r===!0&&(Vl===void 0&&(Vl={}),r=Vl),r.x=(s-e.drawX)/e.scaleX,r.y=(t-e.drawY)/e.scaleY,e.rotation!==0&&jP(r,0,0,-e.rotation),r},Vl;const _P=Phaser.Geom.Rectangle;var tM=function(s,t){if(this.width===0||this.height===0)return!1;var e=qP(s,t,this,!0);return eM(this).contains(e.x,e.y)},eM=function(s){wo===void 0&&(wo=new _P);var t=s.drawTLX,e=s.drawTLY;return wo.setTo(t,e,s.drawTRX-t,s.drawBLY-e),wo},wo;const iM=Phaser.Math.RotateAround;var B0=function(s,t,e,r){return r===void 0?r={}:r===!0&&(Ul===void 0&&(Ul={}),r=Ul),r.x=t,r.y=e,s.rotation!==0&&iM(r,0,0,s.rotation),r.x=r.x*s.scaleX+s.drawX,r.y=r.y*s.scaleY+s.drawY,r},Ul;const dv=Phaser.GameObjects.Components.TransformMatrix;var sM=function(s,t,e,r){r===void 0?r={}:r===!0&&(r=nM);var i=t-s.width*s.originX,n=e-s.height*s.originY;return ta===void 0&&(ta=new dv,cv=new dv),s.parentContainer?s.getWorldTransformMatrix(ta,cv):ta.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),ta.transformPoint(i,n,r),r},ta,cv,nM={},rM=function(s,t,e,r,i){var n=B0(t,e,r,!0),o=sM(s,n.x,n.y,i);return o},G0=function(s,t,e,r,i){typeof e!="number"&&(i=e,e=0,r=0);var n=t.drawCenterX+e,o=t.drawCenterY+r;return rM(s,t,n,o,i)},aM=function(s,t,e){return G0(this.parent,this,s,t,e)},Y0={contains:tM,getWorldPosition:aM};Object.assign(Y0,QP);const oM=Phaser.Math.DegToRad,hM=Phaser.Math.RadToDeg,Fo=Phaser.Utils.Objects.GetValue;class Jn extends jf{constructor(t,e){super(t,e),this.renderable=!0,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setInitialPosition(t,e){return this.x0=t,this.y0=e,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return hM(this._rotation)}set angle(t){this.rotation=oM(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Fo(t,"width",void 0),r=Fo(t,"height",void 0),i=Fo(t,"scaleX",void 0),n=Fo(t,"scaleY",void 0);return e!==void 0?r===void 0&&n===void 0?this.setWidth(e,!0):this.setWidth(e):i!==void 0&&this.setScaleX(i),r!==void 0?e===void 0&&i===void 0?this.setHeight(r,!0):this.setHeight(r):n!==void 0&&this.setScaleY(n),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){return this.x+this.leftSpace+this.offsetX-this.originX*this.width}get drawY(){return this.y+this.offsetY}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(Jn.prototype,Y0);var Qs=function(s,t,e){return t.hasOwnProperty(s)?t[s]:e[s]};const xn=Phaser.Utils.Objects.GetValue;class lM extends Jn{constructor(t,e){super(t,"background"),this.setColor(xn(e,"color",null),xn(e,"color2",null),xn(e,"horizontalGradient",!0)),this.setStroke(xn(e,"stroke",null),xn(e,"strokeThickness",2)),this.setCornerRadius(xn(e,"cornerRadius",0),xn(e,"cornerIteration",null))}set color(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,r){return r===void 0&&(r=!0),this.color=t,this.color2=e,this.horizontalGradient=r,this}set stroke(t){t=dt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return t!=null&&e===void 0&&(e=2),this.stroke=t,this.strokeThickness=e,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,Qs("color2",t,this),Qs("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Qs("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,Qs("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,e){return this.cornerRadius=t,this.cornerIteration=e,this}renderContent(){ym(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Ys=Phaser.Utils.Objects.GetValue;class uM extends Jn{constructor(t,e){super(t,"innerbounds"),this.setColor(Ys(e,"color",null),Ys(e,"color2",null),Ys(e,"horizontalGradient",!0)),this.setStroke(Ys(e,"stroke",null),Ys(e,"strokeThickness",2))}set color(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,r){return r===void 0&&(r=!0),this.color=t,this.color2=e,this.horizontalGradient=r,this}set stroke(t){t=dt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return t!=null&&e===void 0&&(e=2),this.stroke=t,this.strokeThickness=e,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Ys(t,"color2",null),Ys(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Ys(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,e=t.left,r=t.top,i=this.parent.width-t.left-t.right,n=this.parent.height-t.top-t.bottom,o=this.context;if(this.color!=null){var a;if(this.color2!=null){var h;this.horizontalGradient?h=o.createLinearGradient(0,0,i,0):h=o.createLinearGradient(0,0,0,n),h.addColorStop(0,this.color),h.addColorStop(1,this.color2),a=h}else a=this.color;o.fillStyle=a,o.fillRect(e,r,i,n)}this.stroke!=null&&this.strokeThickness>0&&(o.strokeStyle=this.stroke,o.lineWidth=this.strokeThickness,o.strokeRect(e,r,i,n))}}const jt=Phaser.Utils.Objects.GetValue;class ol{constructor(t,e){this.parent=t,this.set(e)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(jt(t,"bold",!1)),this.setItalic(jt(t,"italic",!1)),this.setFontSize(jt(t,"fontSize","16px")),this.setFontFamily(jt(t,"fontFamily","Courier")),this.setColor(jt(t,"color","#fff")),this.setStrokeStyle(jt(t,"stroke",null),jt(t,"strokeThickness",0)),this.setShadow(jt(t,"shadowColor",null),jt(t,"shadowOffsetX",0),jt(t,"shadowOffsetY",0),jt(t,"shadowBlur",0)),this.setOffset(jt(t,"offsetX",0),jt(t,"offsetY",0)),this.setSpace(jt(t,"leftSpace",0),jt(t,"rightSpace",0)),this.setAlign(jt(t,"align",void 0)),this.setBackgroundColor(jt(t,"backgroundColor",null)),this.setBackgroundHeight(jt(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(jt(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Qs("stroke",t,this),Qs("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Qs("shadowOffsetX",t,this),Qs("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new ol(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=dt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,e){return this.stroke=dt(t),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=dt(t),this}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=0),this.shadowOffsetX=t,this.shadowOffsetY=e,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,e,r,i){return this.setShadowColor(t).setShadowOffset(e,r).setShadowBlur(i),this}setBackgroundColor(t){return this.backgroundColor=dt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,e){return this.setOffsetX(t).setOffsetY(e),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,e){return this.setLeftSpace(t).setRightSpace(e),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var e=this.hasFill,r=this.hasStroke;return t.fillStyle=e?this.color:"#000",t.strokeStyle=r?this.stroke:"#000",t.lineWidth=r?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,e){return this.syncFont(t).syncStyle(t),t.measureText(e)}}var fM=function(s,t){s===void 0&&(s=0),t===void 0&&(t=0);var e=this.fixedWidth!==s||this.fixedHeight!==t;return e?(this.fixedWidth=s,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(s>0?s:this.width,t>0?t:this.height),this):this},dM=function(s,t){var e=this.padding,r=e.left,i=e.right,n=e.top,o=e.bottom;return qs(e,s,t),this.dirty=this.dirty||r!=e.left||i!=e.right||n!=e.top||o!=e.bottom,this},cM=function(s){return Th(this.padding,s)},vM=function(s){return this.textStyle.modify(s),this},pM=function(s){return this.defaultTextStyle.modify(s),this},gM=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},mM=function(s){return this.testString=s,this};const xM=Phaser.Utils.Array.Remove;var yM=function(s){return this.poolManager.free(s),xM(this.children,s),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},TM=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const CM=Phaser.Utils.Array.Remove;var SM=function(s){return CM(this.children,s),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},EM=function(){return this.setText(),this},N0=function(s,t){var e=Array.isArray(s);return t===void 0||t===this.children.length?e?this.children.push(...s):this.children.push(s):e?this.children.splice(t,0,...s):this.children.splice(t,0,s),this.lastAppendedChildren.length=0,e?this.lastAppendedChildren.push(...s):this.lastAppendedChildren.push(s),this};const un="text",X0="image",z0="drawer",V0="space",qf="command";var U0=function(s){return s.type===un&&s.text===`
`},W0=function(s){return s.type===un&&s.text==="\f"},PM=function(s){return s.type===un&&s.text===" "},Fr=function(s){return s.type===un},MM=function(s){return s.type===qf};class H0 extends Jn{constructor(t,e,r){super(t,un),this.updateTextFlag=!1,this.style=new ol(this,r),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0;else{var e=this.style.getTextMetrics(this.context,this.text);this.textWidth=e.width;var r,i;"actualBoundingBoxAscent"in e?(r=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent):(r=0,i=0),this.textHeight=r+i,this.ascent=r,this.descent=i}return this.updateTextFlag=!1,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){var t=this.text;return t===`
`||t==="\f"?!1:super.willRender}renderContent(){var t=this.context,e=this.style;if(e.hasBackgroundColor){t.fillStyle=e.backgroundColor;var r=this.drawTLX,i=this.drawTRX-r,n=e.backgroundBottomY;n==null&&(n=this.drawBLY);var o=e.backgroundHeight;o==null&&(o=n-this.drawTLY);var a=n-o;t.fillRect(r,a,i,o)}var h=e.hasFill,u=e.hasStroke;!h&&!u||(e.syncFont(t).syncStyle(t),u&&(e.syncShadow(t),t.strokeText(this.text,0,0)),h&&(e.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var AM=function(s,t){t&&this.textStyle.modify(t);var e=this.poolManager.allocate(un);return e===null?e=new H0(this,s,this.textStyle):e.setParent(this).setActive().modifyStyle(this.textStyle).setText(s),e},RM=function(s,t){t&&this.textStyle.modify(t);for(var e=[],r=0,i=s.length;r<i;r++){var n=s.charAt(r),o=this.poolManager.allocate(un);o===null?o=new H0(this,n,this.textStyle):o.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),e.push(o)}return e},eo=function(s,t){var e=this.createCharChildren(s,t);return this.addChild(e),this},OM=function(s,t){return s===void 0&&(s=""),this.removeChildren(),eo.call(this,s,t),this.dirty=!0,this},LM=function(s,t,e){var r=this.createCharChildren(t,e);return s=this.getCharChildIndex(s,!0),this.addChild(r,s),this},bM=function(s,t){t===void 0&&(t=1);for(var e=0;e<t;e++){var r=this.getCharChildIndex(s,!0);if(r===void 0)break;this.removeChild(this.children[r])}return this},wM=function(s){var t="";return this.forEachCharChild(function(e){t+=e.text},void 0,s),t};class FM extends Jn{constructor(t,e,r){super(t,X0),this.setTexture(e,r)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,e){return this.key=t,this.frame=e,this.frameObj=this.scene.sys.textures.getFrame(t,e),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}renderContent(){var t=this.context,e=this.frameObj,r=this.frameWidth,i=this.frameHeight;t.drawImage(e.source.image,e.cutX,e.cutY,r,i,0,0,r,i)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var DM=function(s,t,e){var r=this.poolManager.allocate(X0);return r===null?r=new FM(this,s,t):r.setParent(this).setActive().setTexture(s,t),r.modifyPorperties(e),r},k0=function(s,t,e){var r=this.createImageChild(s,t,e);return this.addChild(r),this};class IM extends Jn{constructor(t,e,r,i){super(t,z0),this.setRenderCallback(e),this.setDrawerSize(r,i)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,e){return t===!0?(this.toLocalPosition=!1,t=void 0,e=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),e===void 0&&(e=t),this.drawerWidth=t,this.drawerHeight=e,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var BM=function(s,t,e){var r=this.poolManager.allocate(z0);return r===null?r=new IM(this,s,t,e):r.setParent(this).setActive().setRenderCallback(s).setDrawerSize(t,e),r},GM=function(s,t,e){var r=this.createDrawerChild(s,t,e);return this.addChild(r),this};let YM=class extends Jn{constructor(t,e){super(t,V0),this.setSpaceWidth(e)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}};var NM=function(s){var t=this.poolManager.allocate(V0);return t===null?t=new YM(this,s):t.setParent(this).setActive().setSpaceWidth(s),t},$0=function(s){var t=this.createSpaceChild(s);return this.addChild(t),this};class XM extends jf{constructor(t,e,r,i,n){super(t,qf),this.setName(e).setParameter(i).setCallback(r,n)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,e){return this.callback=t,this.scope=e,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var zM=function(s,t,e,r){var i=this.poolManager.allocate(qf);return i===null?i=new XM(this,s,t,e,r):i.setParent(this).setActive().setName(s).setCallback(t,r).setParameter(e),i},gt=function(s,t,e,r){var i=this.createCommandChild(s,t,e,r);return this.addChild(i),this},VM=function(s){return s===void 0?s={}:typeof s=="object"&&(s=pi(s)),this.wrapConfig=s,this},UM=function(s,t,e,r){r===void 0&&(r={word:[],width:0}),r.word.length=0;for(var i=s.length,n=t,o=r.word,a=0;n<i;){var h=s[n];if(!h.renderable){o.push(h),n++;continue}var u=h.type===un?h.text:null;if(u!==null&&u!==" "&&u!==`
`&&u!=="\f")o.push(h),a+=h.outerWidth,n++;else{n===t&&(o.push(h),a+=h.outerWidth);break}if(e)break}return r.width=a,r},Z0=function(s){for(var t=0,e=s.length;t<e;t++){var r=s[t];if(r.align!==void 0)return r.align}},K0=function(s,t,e){if(!(t===0&&e===0))for(var r=0,i=s.length;r<i;r++){var n=s[r];n.renderable&&(n.x+=t,n.y+=e)}},WM=function(s,t,e){var r=s.hAlign,i=s.vAlign,n,o,a=s.linesHeight;switch(i){case 1:case"center":o=(e-a)/2;break;case 2:case"bottom":o=e-a;break;default:o=0;break}for(var h=s.lines,u=0,l=h.length;u<l;u++){var f=h[u],c=f.width,d=f.children,v=Z0(d);switch(v===void 0&&(v=r),v){case 1:case"center":n=(t-c)/2;break;case 2:case"right":n=t-c;break;default:n=0;break}K0(d,n,o)}},vv=function(){var s=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,e;return"actualBoundingBoxAscent"in s?(t=s.actualBoundingBoxAscent,e=s.actualBoundingBoxDescent):(t=0,e=0),Do.ascent=t,Do.descent=e,Do.height=t+e,Do},Do={};const Qe=Phaser.Utils.Objects.GetValue;var HM=function(s){var t=Qe(s,"start",0);qs(this.wrapPadding,Qe(s,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,r=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=Qe(s,"lineHeight"),n=Qe(s,"ascent",i),o;if(i===void 0){var a=Qe(s,"useDefaultTextHeight",!1);if(o=Qe(s,"maxLines",0),this.fixedHeight>0&&!a){var H=this.fixedHeight-e;if(o>0)i=H/o;else{var h=vv.call(this);i=h.height,n=h.ascent,o=Math.floor((H-n)/i)}}else{var h=vv.call(this);i=h.height,n=h.ascent}}else if(this.fixedHeight>0){if(o=Qe(s,"maxLines"),o===void 0){var H=this.fixedHeight-e;o=Math.floor(H/i)}}else o=Qe(s,"maxLines",0);n===void 0&&(n=i);var u=o===0,l=Qe(s,"wrapWidth",void 0);l===void 0&&(this.fixedWidth>0?l=this.fixedWidth-r:l=1/0);for(var f=Qe(s,"letterSpacing",0),c=Qe(s,"hAlign",0),d=Qe(s,"vAlign",0),v=Qe(s,"charWrap",!1),p={callback:"runWordWrap",start:t,isLastPage:!1,padding:this.wrapPadding,ascent:n,lineHeight:i,maxLines:o,wrapWidth:l,letterSpacing:f,hAlign:c,vAlign:d,charWrap:v,children:[],lines:[],maxLineWidth:0,linesHeight:0},g=this.children,m=0,x=g.length;m<x;m++)g[m].setActive(!1);l+=f;for(var y=this.padding.left+this.wrapPadding.left,T=this.padding.top+this.wrapPadding.top+n,C=y,S=T,E=l,P=t,M=g.length,R=p.children,A=p.lines,O=[],b=0,w=0,I;P<M;){I=UM(g,P,v,I);var Y=I.word,z=Y.length,V=I.width+z*f;P+=z;var W=U0(Y[0]),F=W0(Y[0]),L=W||F;if(E<V||L){if(L){var D=Y[0];D.setActive().setPosition(C,S),R.push(D),O.push(D)}C=y,S+=i,E=l,A.push({children:O,width:b}),w=Math.max(w,b),b=0,O=[];var B=F||!u&&A.length===o;if(B)break;if(L)continue}E-=V,b+=V;for(var m=0,x=Y.length;m<x;m++){var G=Y[m];G.setActive(),R.push(G),O.push(G),G.renderable&&(G.setPosition(C,S),C+=G.outerWidth+f)}}O.length>0&&(A.push({children:O,width:b}),w=Math.max(w,b)),p.start+=R.length,p.isLastPage=p.start===M,p.maxLineWidth=w,p.linesHeight=A.length*i;var N=this.fixedWidth>0?this.fixedWidth:p.maxLineWidth+r,X=this.fixedHeight>0?this.fixedHeight:p.linesHeight+e,U=N-r,H=X-e;WM(p,U,H),this.setCanvasSize(N,X);for(var m=0,x=R.length;m<x;m++){var G=R[m];G.renderable&&(G.x0=G.x,G.y0=G.y)}return p};const kM=Phaser.Utils.Objects.Merge;var $M=function(s){return s===void 0&&(s={}),HM.call(this,kM(s,this.wrapConfig))},ZM=function(s,t,e){var r=s.hAlign,i=s.vAlign,n,o,a=s.rtl,h=s.lines,u=s.lineWidth,l=s.linesWidth;switch(r){case 1:case"center":n=(t-l)/2;break;case 2:case"right":n=t-l;break;default:n=0;break}a&&(n+=u);for(var f=0,c=h.length;f<c;f++){var d=h[a?c-f-1:f],v=d.children,p=d.height,g=Z0(v);switch(g===void 0&&(g=i),g){case 1:case"center":o=(e-p)/2;break;case 2:case"bottom":o=e-p;break;default:o=0;break}K0(v,n,o),n+=u}};const je=Phaser.Utils.Objects.GetValue;var KM=function(s){var t=je(s,"start",0);qs(this.wrapPadding,je(s,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,r=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=je(s,"lineWidth",void 0),n;if(i===void 0)if(n=je(s,"maxLines",0),this.fixedWidth>0){var D=this.fixedWidth-r;i=D/n}else i=0;else if(this.fixedWidth>0){if(n=je(s,"maxLines",void 0),n===void 0){var D=this.fixedWidth-r;n=Math.floor(D/i)+1}}else n=je(s,"maxLines",0);var o=n===0,a=je(s,"fixedChildHeight",void 0);if(a===void 0){var h=je(s,"charPerLine",void 0);if(h!==void 0){var B=this.fixedHeight-e;a=Math.floor(B/h)}}var u=je(s,"wrapHeight",void 0);u===void 0&&(this.fixedHeight>0?u=this.fixedHeight-e:u=1/0);for(var l=je(s,"letterSpacing",0),f=je(s,"rtl",!0),c=je(s,"hAlign",f?2:0),d=je(s,"vAlign",0),v={callback:"runVerticalWrap",start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:i,maxLines:n,fixedChildHeight:a,wrapHeight:u,letterSpacing:l,hAlign:c,vAlign:d,rtl:f,children:[],lines:[],maxLineHeight:0,linesWidth:0},p=this.children,g=0,m=p.length;g<m;g++)p[g].setActive(!1);u+=l;for(var x=this.padding.left+this.wrapPadding.left,y=this.padding.top+this.wrapPadding.top,T=x,C=y,S=u,E=t,P=p.length,M=v.children,R=v.lines,A=[],O=0,b=0;E<P;){var w=p[E];if(E++,!G.renderable){w.setActive(),M.push(w),A.push(w);continue}var I=(a!==void 0?a:w.height)+l,Y=U0(w),z=W0(w),V=Y||z;if(S<I||V){Y&&(w.setActive().setPosition(T,C).setOrigin(.5),M.push(w),A.push(w)),T=x,C=y,S=u,R.push({children:A,height:O}),b=Math.max(b,O),O=0,A=[];var W=z||!o&&R.length===n;if(W)break;if(V)continue}S-=I,O+=I,w.setActive().setPosition(T,C).setOrigin(.5),M.push(w),A.push(w),C+=I}A.length>0&&(R.push({children:A,height:O}),b=Math.max(b,O)),v.start+=M.length,v.isLastPage=v.start===P,v.maxLineHeight=b,v.linesWidth=R.length*i;var F=this.fixedWidth>0?this.fixedWidth:v.linesWidth+r,L=this.fixedHeight>0?this.fixedHeight:v.maxLineHeight+e,D=F-r,B=L-e;ZM(v,D,B),this.setCanvasSize(F,L);for(var g=0,m=M.length;g<m;g++){var G=M[g];G.renderable&&(G.x0=G.x,G.y0=G.y)}return v};const JM=Phaser.Utils.Objects.Merge;var QM=function(s){return s===void 0&&(s={}),KM.call(this,JM(s,this.wrapConfig))};const pv=Phaser.Utils.Objects.GetValue;var jM=function(s){var t=pv(this.wrapConfig,"callback");return t||(t=pv(s,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,s)};const qM={setVAlign(s){return this.wrapConfig.vAlign=s,this},setHAlign(s){return this.wrapConfig.hAlign=s,this}};var _M=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var s,t=0,e=this.children.length;t<e;t++)s=this.children[t],s.active&&s.render();this.innerBounds.active&&this.innerBounds.render()},tA=function(s,t,e){e===void 0&&(e=!0);for(var r=this.children,i=0,n=0,o=r.length;n<o;n++){var a=r[n];if(!(e&&!a.active)){var h;if(t?h=s.call(this,a,i,r):h=s(a,i,r),i++,h)break}}return this},eA=function(s,t,e){e===void 0&&(e=!0);for(var r=this.children,i=0,n=0,o=r.length;n<o;n++){var a=r[n];if(!(e&&!a.active)&&a.renderable&&!a.removed){var h;if(t?h=s.call(this,a,i,r):h=s(a,i,r),i++,h)break}}return this},iA=function(s,t,e){e===void 0&&(e=!0);for(var r=this.children,i=0,n=0,o=r.length;n<o;n++){var a=r[n];if(!(e&&!a.active)&&Fr(a)&&!a.removed){var h;if(t?h=s.call(this,a,i,r):h=s(a,i,r),i++,h)break}}return this},sA=function(){return this.children};const nA=Phaser.Utils.Array.GetAll;var rA=function(){return nA(this.children,"active",!0)},aA=function(s,t){return t===void 0&&(t=[]),this.forEachCharChild(function(e){t.push(e)},void 0,s),t},oA=function(){return this.lastAppendedChildren},hA=function(s,t,e,r){typeof t!="number"&&(r=t,t=0,e=0);var i=s.drawCenterX+t,n=s.drawCenterY+e;return B0(s,i,n,r)};const lA=Phaser.Math.Distance.BetweenPointsSquared;var uA=function(s,t){var e={x:s,y:t},r=1/0,i=null;return this.forEachRenderableChild(function(n){var o=lA(e,hA(n,!0));r>o&&(r=o,i=n)}),i},fA=function(s,t,e,r){return typeof s=="number"&&(s=this.getCharChild(s,!0)),G0(this,s,t,e,r)},dA=function(){for(var s=this.children,t=0,e=0,r=0,i=s.length;r<i;r++){var n=s[r];if(!(!n.renderable||!n.active||!n.visible)){var o=n.x0!==void 0?n.x0:n.x,a=n.y0!==void 0?n.y0:n.y;t=Math.max(t,o),e=Math.max(e,a)}}var h=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,u=e+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==h||this.height!==u)&&(this.dirty=!0,this.setCanvasSize(h,u)),this},cA=function(s,t){t===void 0&&(t=!0);for(var e=this.children,r=0,i=e.length;r<i;r++){var n=e[r];if(!(t&&!n.active)&&Fr(n)&&!n.removed){if(s===0)return r;s--}}},vA=function(s,t){t===void 0&&(t=!0);for(var e=this.children,r=0,i=e.length;r<i;r++){var n=e[r];if(!(t&&!n.active)&&Fr(n)&&!n.removed){if(s===0)return n;s--}}},pA=function(s,t){if(typeof s!="number"&&(s=this.children.indexOf(s),s<0))return null;t===void 0&&(t=!0);var e=this.children;s>=e.length&&(s=e.length);for(var r=0,i=0;i<s;i++){var n=e[i];t&&!n.active||Fr(n)&&!n.removed&&r++}return r},gA=function(s){return s===void 0&&(s=!0),this.childrenInteractiveEnable!==s&&(this.lastOverChild=null),this.childrenInteractiveEnable=s,this},_f=function(r,t,e){for(var r=r,i=0,n=r.length;i<n;i++){var o=r[i];if(!(!o.active||!o.renderable)&&o.contains(t,e))return o}return null},mA=function(){return this.on("pointerdown",xA,this).on("pointerdown",yA,this).on("pointermove",Wl,this).on("pointerover",Wl,this).on("pointerout",function(s,t){Wl.call(this,s,null,null,t)},this),this},xA=function(s,t,e,r){if(this.childrenInteractiveEnable){var i=_f(this.children,t,e);i&&this.emit("child.pointerdown",i,s,t,e,r)}},yA=function(s,t,e,r){if(this.childrenInteractiveEnable){var i=_f(this.children,t,e);i&&this.emit("child.pointerup",i,s,t,e,r)}},Wl=function(s,t,e,r){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,s,t,e,r),this.lastOverChild=null);return}var i=_f(this.children,t,e);i!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,s,t,e,r),i!==null&&this.emit("child.pointerover",i,s,t,e,r),this.lastOverChild=i)}};const TA=Phaser.GameObjects.GameObject;var CA=function(s,t,e){var r=!!this.input;return TA.prototype.setInteractive.call(this,s,t,e),r||mA.call(this),this};const SA=Phaser.Utils.Array.BringToTop,EA=Phaser.Utils.Array.SendToBack,PA=Phaser.Utils.Array.MoveUp,MA=Phaser.Utils.Array.MoveDown,AA=Phaser.Utils.Array.MoveAbove,RA=Phaser.Utils.Array.MoveBelow,OA={moveChildToFist(s){return EA(this.children,s),this},moveChildToLast(s){return SA(this.children,s),this},movechildUp(s){return PA(this.children,s),this},movechildDown(s){return MA(this.children,s),this},movechildAbove(s,t){return AA(this.children,s,t),this},movechildBelow(s,t){return RA(this.children,s,t),this}},LA={setBackgroundColor(s,t,e){return this.background.setColor(s,t,e),this},setBackgroundStroke(s,t){return this.background.setStroke(s,t),this},setBackgroundCornerRadius(s,t){return this.background.setCornerRadius(s,t),this}},bA={setInnerBoundsColor(s,t,e){return this.innerBounds.setColor(s,t,e),this},setInnerBoundsStroke(s,t){return this.innerBounds.setStroke(s,t),this}};var J0={setFixedSize:fM,setPadding:dM,getPadding:cM,modifyTextStyle:vM,modifyDefaultTextStyle:pM,resetTextStyle:gM,setTestString:mM,removeChild:yM,removeChildren:TM,popChild:SM,clearContent:EM,addChild:N0,createCharChild:AM,createCharChildren:RM,setText:OM,appendText:eo,insertText:LM,removeText:bM,getText:wM,createImageChild:DM,appendImage:k0,createDrawerChild:BM,appendDrawer:GM,createSpaceChild:NM,appendSpace:$0,createCommandChild:zM,appendCommand:gt,setWrapConfig:VM,runWordWrap:$M,runVerticalWrap:QM,runWrap:jM,renderContent:_M,forEachChild:tA,forEachRenderableChild:eA,forEachCharChild:iA,getChildren:sA,getActiveChildren:rA,getCharChildren:aA,getLastAppendedChildren:oA,getNearestChild:uA,getCharWorldPosition:fA,setToMinSize:dA,getCharChildIndex:cA,getCharChild:vA,getCharIndex:pA,setChildrenInteractiveEnable:gA,setInteractive:CA};Object.assign(J0,OA,LA,bA,qM);const wA=Phaser.Utils.Objects.GetFastValue;var FA={};class DA{constructor(t){this.pools=wA(t,"pools",FA)}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new Yr),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,r=t.length;e<r;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const gv=Phaser.Utils.Objects.IsPlainObject,Ye=Phaser.Utils.Objects.GetValue;class td extends $n{constructor(t,e,r,i,n,o){gv(e)?(o=e,e=Ye(o,"x",0),r=Ye(o,"y",0),i=Ye(o,"width",0),n=Ye(o,"height",0)):gv(i)&&(o=i,i=Ye(o,"width",0),n=Ye(o,"height",0));var a=i===0?1:i,h=n===0?1:n;super(t,e,r,a,h),this.type="rexDynamicText",this.autoRound=!0,this.padding=qs(),this.wrapPadding=qs();var u=Ye(o,"style",void 0);this.defaultTextStyle=new ol(null,u),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(Ye(o,"testString","|Mqgy")),this.background=new lM(this,Ye(o,"background",void 0)),this.innerBounds=new uM(this,Ye(o,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new DA(o),this.setFixedSize(i,n),this.setPadding(Ye(o,"padding",0)),this.setWrapConfig(Ye(o,"wrap",void 0)),this.setChildrenInteractiveEnable(Ye(o,"childrenInteractive",!1));var l=Ye(o,"text",void 0);l&&this.setText(l)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,e){return this.setFixedSize(t,e),this}}Object.assign(td.prototype,J0);var IA=function(s){return Xn(s)?s.sys.sound:s.sound};const BA=Phaser.Sound.BaseSound;var ed=function(s){return s instanceof BA};const mv=Phaser.Utils.Objects.GetValue,xv=Phaser.Utils.Objects.GetAdvancedValue,GA=Phaser.Math.Linear;let Q0=class extends Xr{constructor(t,e,r){ed(t)&&(r=e,e=t,t=void 0),e.active=!0,e.scene=t,e.game=e.manager.game,super(e,r),this.volume={},this.resetFromJSON(r)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(mv(t,"mode",0)),this.setEnable(mv(t,"enable",!0)),this.setVolumeRange(xv(t,"volume.start",this.parent.volume),xv(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=YA[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,e){t.volume=GA(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}};const YA={stop:1,destroy:2};var j0=function(s,t,e,r,i){ed(s)&&(i=r,r=e,e=t,t=s,s=void 0),r===void 0&&(r=1),i===void 0&&(i=0);var n={mode:0,volume:{start:i,end:r},duration:e};typeof t=="string"&&(t=s.sys.sound.add(t));var o;return t.hasOwnProperty("_fade")?(o=t._fade,o.stop().resetFromJSON(n)):(o=new Q0(s,t,n),t._fade=o),o.start(),t.isPlaying||t.setVolume(i).play(),t},uf=function(s,t,e,r){ed(s)&&(r=e,e=t,t=s,s=void 0),r===void 0&&(r=!0);var i={mode:r?2:1,volume:{start:t.volume,end:0},duration:e},n;return t.hasOwnProperty("_fade")?(n=t._fade,n.stop().resetFromJSON(i)):(n=new Q0(s,t,i),t._fade=n),n.start(),t.isPlaying||t.play(),t};const NA={setBackgroundMusicLoopValue(s){return this.backgroundMusicLoopValue=s,this},setBackgroundMusicFadeTime(s){return this.backgroundMusicFadeTime=s,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(s){return this.backgroundMusic=s,s&&(s.setLoop(this.backgroundMusicLoopValue),s.once("complete",function(){this.backgroundMusic===s&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===s&&(this.backgroundMusic=void 0)},this),s.isPlaying||s.play()),this},playBackgroundMusic(s){return this.backgroundMusic&&this.backgroundMusic.key===s?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.sound.add(s)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(s){return this.backgroundMusic&&j0(this.backgroundMusic,s,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(s,t){return this.backgroundMusic&&uf(this.backgroundMusic,s,t),this},crossFadeBackgroundMusic(s,t){var e=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(s).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=e,this},setBackgroundMusicVolume(s){return this.backgroundMusicVolume=s,this}},yv=Phaser.Utils.Array.Remove,XA={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(s){var t=this.sound.add(s);return t.setVolume(this.soundEffectsVolume),this.soundEffects.push(t),t.once("complete",function(){t.destroy(),this.sound&&yv(this.soundEffects,t)},this).once("destroy",function(){this.sound&&yv(this.soundEffects,t)},this).play(),this},fadeInSoundEffect(s){var t=this.getLastSoundEffect();return t&&j0(t,s,this.soundEffectsVolume,0),this},fadeOutSoundEffect(s,t){var e=this.getLastSoundEffect();return e&&uf(e,s,t),this},fadeOutAllSoundEffects(s,t){for(var e=this.soundEffects.length-1;e>=0;e--)uf(this.soundEffects[e],s,t);return this},setSoundEffectVolume(s,t){if(t===void 0&&(t=!1),t){var e=this.getLastSoundEffect();e&&e.setVolume(s)}else this.soundEffectsVolume=s;return this}},ea=Phaser.Utils.Objects.GetValue;class q0{constructor(t,e){this.sound=IA(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=ea(e,"bgm.volume",1),this.soundEffects=[],this._soundEffectsVolume=ea(e,"soundEffect.volume",1),this.setBackgroundMusicLoopValue(ea(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(ea(e,"bgm.fade",500));var r=ea(e,"bgm.initial",void 0);r&&this.setCurrentBackgroundMusic(r)}destroy(){if(this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();return this.soundEffects.length=0,this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.sound=void 0,this}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var e=this.soundEffects,r=0,i=e.length;r<i;r++)e[r].setVolume(t)}}Object.assign(q0.prototype,NA,XA);const Hl=Phaser.Utils.Objects.GetValue;class zA extends nl{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=Hl(t,"isRunning",!1),this.timeScale=Hl(t,"timeScale",1),this.now=Hl(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class _0 extends zA{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var VA=function(s,t){return t===void 0&&(t=.5),s<=t?s=s/t:s=1-(s-t)/(1-t),s};const Tv=Phaser.Math.Clamp;class UA{constructor(t,e){this.setTimeline(t).reset(e)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,e,r,i){return this.target=t,this.onStart=e,this.onProgress=r,this.onComplete=i,this}setDuration(t,e){return e===void 0&&(e=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=e,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Tv(t,0,1),this.yoyo&&(t=VA(t)),t}setProgress(t){t=Tv(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var r=this.remainder<=0;return r&&this.runCallback(this.onComplete),r}}let WA=class extends Yr{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var e=0,r=t.length;e<r;e++)this.free(t[e]);return this}};const HA=Phaser.Utils.Objects.GetValue,kA=new WA;class $A extends _0{constructor(t,e){super(t,e),this.addedTimers=[],this.timers=[],this.timerPool=HA(e,"pool",kA)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(t):e=new UA(this,t),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(t,e,r,i){var n=this.addTimer({duration:t,onComplete:function(o,a,h){r===void 0&&(r=[]),r.push(h),e.apply(i,r)}});return n}getTimers(t){for(var e=[],r=[this.addedTimers,this.timers],i=0,n=r.length;i<n;i++)for(var o=r[i],a=0,h=o.length;a<h;a++){var u=o[a];u.name===t&&e.push(u)}return e}update(t,e){super.update(t,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var r=[],i=0,n=this.timers.length;i<n;i++){var o=this.timers[i],a=o.update(this.now,this.delta);a?this.timerPool.free(o):r.push(o)}this.timers=r,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const ZA=Phaser.Utils.Objects.GetValue;var KA=function(s,t){var e=ZA(t,"sounds");return e!==!1&&(this.soundManager=new q0(s,e)),this.gameObjectManagers={},this.timeline=new $A(this),this.managersScene=s,this};const JA={hasProperty(s){var t=this.gameObject;if(t.hasOwnProperty(s))return!0;var e=t[s];return e!==void 0},getProperty(s){return this.gameObject[s]},setProperty(s,t){return this.gameObject[s]=t,this},easeProperty(s,t,e,r,i,n,o){var a=this.tweens,h=a[s];h&&h.remove();var u=this.gameObject,l={targets:u,duration:e,ease:r,repeat:i,yoyo:n,onComplete:function(){a[s].remove(),a[s]=null,o&&o(u,s)},onCompleteScope:this};return l[s]=t,h=this.scene.tweens.add(l),h.timeScale=this.timeScale,a[s]=h,this}},QA={hasMethod(s){return typeof this.gameObject[s]=="function"},call(s,...t){if(!this.hasMethod(s))return this;var e=this.gameObject;return e[s].apply(e,t),this}},jA={hasData(s){var t=this.gameObject;return t.data?t.data.has(s):!1},getData(s){return this.gameObject.getData(s)},setData(s,t){return this.gameObject.setData(s,t),this}};class id{constructor(t,e,r){this.GOManager=t,this.tweens={},this.setGO(e,r)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,e;for(var r in t)e=t[r],e&&e.remove(),t[r]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,e){return t.setName(e),this.gameObject=t,this.name=e,this.freeTweens(),this}setTimeScale(t){var e=this.tweens;for(var r in e){var i=e[r];i&&(i.timeScale=t)}return this}}Object.assign(id.prototype,JA,QA,jA);var Xa=function(s){for(var t in s)return!1;return!0};const qA={tint:0,alpha:1},_A={setGOFadeMode(s){return typeof s=="string"&&(s=qA[s]),this.fadeMode=s,this},setGOFadeTime(s){return this.fadeTime=s,this},hasTintFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&s.setTint!==void 0},hasAlphaFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&s.setAlpha!==void 0},fadeBob(s,t,e,r){var i=s.gameObject;return this.hasTintFadeEffect(i)?(t!==void 0&&s.setProperty("tintGray",255*t),s.easeProperty("tintGray",Math.floor(255*e),this.fadeTime,"Linear",0,!1,r)):this.hasAlphaFadeEffect(i)?(t!==void 0&&s.setProperty("alpha",t),s.easeProperty("alpha",e,this.fadeTime,"Linear",0,!1,r)):r&&r(i),this}},tR=~(255<<16)&16777215,eR=~(255<<8)&16777215,iR=16776960;var sR=function(s,t){return(t&255)<<16|s&tR},nR=function(s,t){return(t&255)<<8|s&eR},rR=function(s,t){return t&255|s&iR},aR=function(s,t,e,r){return(t&255)<<16|(e&255)<<8|r&255},oR=function(s,t){if(s.hasOwnProperty("tintR"))return s;t===void 0&&(t=16777215);var e=Ba(t),r=Ga(t),i=Ya(t);return Object.defineProperty(s,"tint",{get:function(){return t},set:function(n){n=Math.floor(n)&16777215,s.setTint&&s.setTint(n),t!==n&&(t=n,e=Ba(t),r=Ga(t),i=Ya(t))}}),Object.defineProperty(s,"tintR",{get:function(){return e},set:function(n){n=Math.floor(n)&255,e!==n&&(e=n,s.tint=sR(t,n))}}),Object.defineProperty(s,"tintG",{get:function(){return r},set:function(n){n=Math.floor(n)&255,r!==n&&(r=n,s.tint=nR(t,n))}}),Object.defineProperty(s,"tintB",{get:function(){return i},set:function(n){n=Math.floor(n)&255,i!==n&&(i=n,s.tint=rR(t,n))}}),Object.defineProperty(s,"tintGray",{get:function(){return Math.floor((e+r+i)/3)},set:function(n){n=Math.floor(n)&255,(e!==n||r!==n||i!==n)&&(e=n,r=n,i=n,s.tint=aR(t,n,n,n))}}),s.tint=t,s};const hR=Phaser.Events.EventEmitter;var lR=function(s){if(s.events)return s;var t=new hR,e=s.x;Object.defineProperty(s,"x",{get:function(){return e},set:function(o){e!==o&&(e=o,t.emit("update",s))}});var r=s.y;Object.defineProperty(s,"y",{get:function(){return r},set:function(o){r!==o&&(r=o,t.emit("update",s))}});var i=s.width;Object.defineProperty(s,"width",{get:function(){return i},set:function(o){i!==o&&(i=o,t.emit("update",s))}});var n=s.height;return Object.defineProperty(s,"height",{get:function(){return n},set:function(o){n!==o&&(n=o,t.emit("update",s))}}),s.events=t,s},uR=function(s,t,e,r){return r===void 0?r={}:r===!0&&(r=fR),r.x=e.x+e.width*s,r.y=e.y+e.height*t,r},fR={},dR=function(s,t,e,r,i){if(s.hasOwnProperty("vp"))return s;e===void 0&&(e=.5),r===void 0&&(r=.5),i===void 0&&(i=uR),lR(t);var n=t.events;s.vp=t;var o=function(){i(e,r,t,s)};n.on("update",o),s.once("destroy",function(){n.off("update",o),s.vp=void 0}),Object.defineProperty(s,"vpx",{get:function(){return e},set:function(a){e!==a&&(e=a,o())}}),Object.defineProperty(s,"vpy",{get:function(){return r},set:function(a){r!==a&&(r=a,o())}}),o()};const cR=Phaser.Utils.Array.Remove,vR={has(s){return this.bobs.hasOwnProperty(s)},get(s){return this.bobs[s]},getGO(s){var t=this.get(s);return t?t.gameObject:null},addGO(s,t){this.remove(s,!0),this.hasTintFadeEffect(t)&&oR(t),this.viewportCoordinateEnable&&dR(t,this.viewport),t.once("destroy",function(){cR(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var e=new this.BobClass(this,t,s);return this.bobs[s]=e,this},add(s,...t){var e=this.createGameObjectCallback,r=this.createGameObjectScope,i=e.call(r,this.scene,...t);this.addGO(s,i);var n=this.get(s);return this.fadeBob(n,0,1),this},forEachGO(s,t){for(var e in this.bobs){var r=this.bobs[e].gameObject,i;if(t?i=s.call(t,r,e,this):i=s(r,e,this),i)break}return this}},pR={remove(s,t){if(!this.has(s))return this;var e=this.get(s);return delete this.bobs[s],this.removedGOs.push(e.gameObject),t?e.destroy():this.fadeBob(e,void 0,0,function(){e.destroy()}),this},removeAll(){var s=this.bobs;for(var t in s)this.remove(t);return this},clear(s){s===void 0&&(s=!0);var t=this.bobs;for(var e in t)s&&t[e].destroy(),delete t[e];return this.removedGOs.length=0,this}},gR={hasProperty(s,t){return this.has(s)?this.get(s).hasProperty(t):!1},getProperty(s,t){if(this.has(s))return this.get(s).getProperty(t)},isNumberProperty(s,t){var e=this.getProperty(s,t);return typeof e=="number"},setProperty(s,t,e){return this.has(s)?(this.symbols&&typeof e=="string"&&this.isNumberProperty(s,t)&&(e in this.symbols?e=this.symbols[e]:console.warn(`Can't find symbol ${e}`)),this.get(s).setProperty(t,e),this):this},easeProperty(s,t,e,r,i,n,o,a){return this.has(s)?(r===void 0&&(r=1e3),i===void 0&&(i="Linear"),n===void 0&&(n=0),o===void 0&&(o=!1),this.symbols&&typeof e=="string"&&this.isNumberProperty(s,t)&&(e in this.symbols?e=this.symbols[e]:console.warn(`Can't find symbol ${e}`)),this.get(s).easeProperty(t,e,r,i,n,o,a),this):this},hasTweenTask(s,t){if(!this.has(s))return!1;var e=this.get(s).tweens;return e.hasOwnProperty(t)},getTweenTask(s,t){if(!this.has(s))return null;var e=this.get(s).tweens,r=e[t];return r||null}},mR={hasMethod(s,t){return this.has(s)?this.get(s).hasMethod(t):!1},call(s,t,...e){return this.has(s)?(this.get(s).call(t,...e),this):this}},xR={hasData(s,t){return this.has(s)?this.get(s).hasData(t):!1},getData(s,t){if(this.has(s))return this.get(s).getData(t)},setData(s,t,e){return this.has(s)?(this.get(s).setData(t,e),this):this}};var yR=function(s,t){return this.forEachGO(function(e){e.drawBounds?e.drawBounds(s,t):D0(e,s,t)}),this},tx={drawGameObjectsBounds:yR};Object.assign(tx,_A,vR,pR,gR,mR,xR);const TR=Phaser.Cameras.Scene2D.BaseCamera;var CR=function(s){return s instanceof TR};const ex=Phaser.Geom.Rectangle;var io=function(s,t,e){CR(t)||(e=t,t=void 0),e===void 0?e=new ex:e===!0&&(e=SR);var r=s.sys.scale,i=r.baseSize,n=r.parentSize,o=r.canvasBounds,a=r.displayScale,h=o.x>=0?0:-(o.x*a.x),u=o.y>=0?0:-(o.y*a.y),l;n.width>=o.width?l=i.width:l=i.width-(o.width-n.width)*a.x;var f;return n.height>=o.height?f=i.height:f=i.height-(o.height-n.height)*a.y,e.setTo(h,u,l,f),t&&(e.width/=t.zoomX,e.height/=t.zoomY,e.centerX=t.centerX+t.scrollX,e.centerY=t.centerY+t.scrollY),e},SR=new ex;const yi=Phaser.Utils.Objects.GetValue;class sd{constructor(t,e){this.scene=t,this.BobClass=yi(e,"BobClass",id),this.setCreateGameObjectCallback(yi(e,"createGameObject"),yi(e,"createGameObjectScope")),this.setEventEmitter(yi(e,"eventEmitter",void 0));var r=yi(e,"fade",500);typeof r=="number"?(this.setGOFadeMode(),this.setGOFadeTime(r)):(this.setGOFadeMode(yi(r,"mode")),this.setGOFadeTime(yi(r,"time",500)));var i=yi(e,"viewportCoordinate",!1);i!==!1?(this.setViewportCoordinateEnable(yi(e,"enable",!0)),this.setViewport(yi(i,"viewport"))):this.setViewportCoordinateEnable(!1),this.setSymbols(yi(e,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var e=this.bobs;for(var r in e)e[r].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,e){return this.createGameObjectCallback=t,this.createGameObjectScope=e,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=io(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return Xa(this.bobs)&&this.removedGOs.length===0}}Object.assign(sd.prototype,Nr,tx);var nd=function(s,t){s===void 0&&(s={}),t===void 0&&(t=sd),s.createGameObjectScope||(s.createGameObjectScope=this);var e=new t(this.managersScene,s);return this.gameObjectManagers[s.name]=e,this},ER=function(s){return this.gameObjectManagers[s]},PR=function(){var s=[];for(var t in this.gameObjectManagers)s.push(t);return s},MR=function(s){this.timeline.timeScale=s;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(s);return this},AR=function(){return this.timeline.timeScale},RR=function(s){this.soundManager&&this.soundManager.destroy(),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(s),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0};const OR={addGameObjectManager:nd,getGameObjectManager:function(s){return this.gameObjectManagers[s]},getGameObjectManagerNames:function(){var s=[];for(var t in this.gameObjectManagers)s.push(t);return s}},LR={createGameObject(s,t,...e){return this.getGameObjectManager(s).add(t,...e),this},destroyGameObject(s,t){var e=this.getGameObjectManager(s);return t===void 0?e.removeAll():e.remove(t),this},callGameObjectMethod(s,t,e,...r){return this.getGameObjectManager(s).call(t,e,...r),this},setGameObjectProperty(s,t,e,r){return this.getGameObjectManager(s).setProperty(t,e,r),this},easeGameObjectProperty(s,t,e,r,i,n,o,a){return this.getGameObjectManager(s).easeProperty(t,e,r,i,n,o,a),this},getGameObject(s,t,e){var r=this.getGameObjectManager(s);if(typeof t=="string")return r.getGO(t);var i=t;i===void 0&&(i=r.bobs),e===void 0&&(e={});for(t in i)e[t]=r.getGO(t);return e},addGameObject(s,t,e){var r=this.getGameObjectManager(s);if(typeof t=="string")r.addGO(t,e);else{var i=t;for(t in i)r.addGO(t,i[t])}return this},drawGameObjectsBounds(s,t,e){s instanceof Phaser.GameObjects.Graphics&&(e=t,t=s,s=void 0),s===void 0&&(s=this.getGameObjectManagerNames()),Array.isArray(s)||(s=[s]);for(var r=0,i=s.length;r<i;r++)this.getGameObjectManager(s[r]).drawGameObjectsBounds(t,e);return this}};var bR=function(s){class t extends s{}var e={initManagers:KA,addGameObjectManager:nd,getGameObjectManager:ER,getGameObjectManagerNames:PR,setTimeScale:MR,getTimeScale:AR,destroyManagers:RR};return Object.assign(t.prototype,e,OR,LR),t},wR=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,FR=/^0x[0-9A-F]+$/i,ix=function(s){return typeof s!="string"||(s===""?s=null:wR.test(s)?s=parseFloat(s):FR.test(s)?s=parseInt(s,16):s==="false"?s=!1:s==="true"&&(s=!0)),s},Nh=function(s){return s.replace(DR,"\\$&").replace(IR,"\\x2d")},DR=/[|\\{}()[\]^$+*?.]/g,IR=/-/g;let sx=class{constructor(t){this.setEventEmitter(K(t,"eventEmitter",void 0)),this.setValueConverter(K(t,"valueConvert",!0)),this.setLoopEnable(K(t,"loop",!1)),this.setMultipleLinesTagEnable(K(t,"multipleLinesTag",!1));var e=K(t,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,e){e===void 0&&(e=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=e,t=Nh(this.delimiterLeft),e=Nh(this.delimiterRight);var r=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${e}`,r),this}setValueConverter(t){return t===!0?t=ix:t||(t=BR),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,e=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var r=this.reSplit.exec(t);if(!r){if(this.progressIndex<e&&(this.onContent(t.substring(this.progressIndex,e)),this.isPaused)){this.progressIndex=e;break}this.onComplete(),this.isRunning=!1;return}var i=this.reSplit.lastIndex,n=i-r[0].length;if(this.progressIndex<n&&(this.onContent(t.substring(this.progressIndex,n)),this.isPaused)){this.progressIndex=n;break}if(this.onTag(r[1]),this.progressIndex=i,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,e){return this.isPaused?this:(this.pause(),t.once(e,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const BR=function(s){return s};Object.assign(sx.prototype,Nr);var GR=function(s,t){if(s==null)return[];for(var e=s.split(","),r=0,i=e.length;r<i;r++)e[r]=t(e[r]);return e};class YR extends sx{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(K(t,"regex.tag",void 0)),this.setValueExpression(K(t,"regex.value",void 0));var e=K(t,"delimiters","<>");this.setDelimiters(e[0],e[1])}setTagExpression(t){return t||(t=Io),this.tagExpression=t,this}setValueExpression(t){return t||(t=Io),this.valueExpression=t,this}setDelimiters(t,e){super.setDelimiters(t,e);var r=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(r,"i"),this.tagExpression!==Io||this.valueExpression!==Io){var i=`${this.tagExpression}(=${this.valueExpression})?`,n=`/${this.tagExpression}`;t=Nh(this.delimiterLeft),e=Nh(this.delimiterRight);var o=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${i})|(${n}))${e}`,o)}return this}onTag(t){var e=t.match(this.reTag),r=e[1],i=r.charAt(0)==="/";if(i&&(r=r.substring(1,r.length)),this.skipEventFlag=!1,i)this.emit(`-${r}`),this.skipEventFlag||this.emit("-",r),this.lastTagEnd=r;else{var n=GR(e[3],this.valueConverter);this.emit(`+${r}`,...n),this.skipEventFlag||this.emit("+",r,...n),this.lastTagStart=r}}}const Io="[^=]+";var NR=function(s,t,e){var r="color",i;t.on("start",function(){i=s.textStyle.color}).on(`+${r}`,function(n){s.textStyle.setColor(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setColor(i),t.skipEvent()}).on("complete",function(){s.textStyle.setColor(i)})},XR=function(s,t,e){var r="stroke",i;t.on("start",function(){i=s.textStyle.stroke,s.textStyle.setStrokeStyle(null)}).on(`+${r}`,function(n){n===void 0&&(n=i),s.textStyle.setStrokeStyle(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){s.textStyle.setStrokeStyle(i)})},zR=function(s,t,e){var r="b";t.on("start",function(){s.textStyle.setBold(!1)}).on(`+${r}`,function(){s.textStyle.setBold(!0),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setBold(!1),t.skipEvent()})},VR=function(s,t,e){var r="i";t.on("start",function(){s.textStyle.setItalic(!1)}).on(`+${r}`,function(){s.textStyle.setItalic(!0),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setItalic(!1),t.skipEvent()})},UR=function(s,t,e){var r="size",i;t.on("start",function(){i=s.textStyle.fontSize}).on(`+${r}`,function(n){s.textStyle.setFontSize(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setFontSize(i),t.skipEvent()}).on("complete",function(){s.textStyle.setFontSize(i)})},WR=function(s,t,e){var r="y",i;t.on("start",function(){i=s.textStyle.offsetY,s.textStyle.setOffsetY(0)}).on(`+${r}`,function(n){n===void 0&&(n=i),s.textStyle.setOffsetY(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetY(0)})},HR=function(s,t,e){var r="x",i;t.on("start",function(){i=s.textStyle.offsetY,s.textStyle.setOffsetX(0)}).on(`+${r}`,function(n){n===void 0&&(n=i),s.textStyle.setOffsetX(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetX(0)})},kR=function(s,t,e){var r="left",i;t.on("start",function(){i=s.textStyle.leftSpace,s.textStyle.setLeftSpace(0)}).on(`+${r}`,function(n){n===void 0&&(n=i),s.textStyle.setLeftSpace(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setLeftSpace(0)})},$R=function(s,t,e){var r="right",i;t.on("start",function(){i=s.textStyle.rightSpace,s.textStyle.setRightSpace(0)}).on(`+${r}`,function(n){n===void 0&&(n=i),s.textStyle.setRightSpace(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setRightSpace(0)})},ZR=function(s,t,e){var r="shadow",i;t.on("start",function(){i=s.textStyle.shadowColor,s.textStyle.setShadowColor(null)}).on(`+${r}`,function(n){n===void 0&&(n=i),s.textStyle.setShadowColor(n),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){s.textStyle.setShadowColor(i)})},KR=function(s,t,e){var r="align";t.on(`+${r}`,function(i){s.textStyle.setAlign(i),t.skipEvent()}).on(`-${r}`,function(){s.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){s.textStyle.setAlign()})},JR=function(s,t,e){var r="img";t.on(`+${r}`,function(i){var n=s.imageManager.get(i);k0.call(s,n.key,n.frame,{width:n.width,hieght:n.height,leftSpace:n.left,rightSpace:n.right}),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},QR=function(s,t,e){var r="space";t.on(`+${r}`,function(i){$0.call(s,i),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},jR=function(s,t,e){var r="speed";t.on(`+${r}`,function(i){Cv(s,i),t.skipEvent()}).on(`-${r}`,function(){Cv(s,void 0),t.skipEvent()})},qR=function(s){this.typeWriter.setTypingSpeed(s)},Cv=function(s,t){gt.call(s,"speed",qR,t,s)},_R=function(s,t,e){var r="se";t.on(`+${r}`,function(i,n){gt.call(s,"se",tO,[i,n],s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},tO=function(s){if(!this.skipSoundEffect){var t=s[0],e=s[1];this.soundManager.playSoundEffect(t),e&&this.soundManager.fadeInSoundEffect(e)}},eO=function(s,t,e){var r="se.fadein";t.on(`+${r}`,function(i){gt.call(s,"se.fadein",iO,i,s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},iO=function(s){this.soundManager.fadeInSoundEffect(s)},sO=function(s,t,e){var r="se.fadeout";t.on(`+${r}`,function(i,n){n=n==="stop",gt.call(s,"se.fadeout",nO,[i,n],s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},nO=function(s){this.soundManager.fadeOutSoundEffect(...s)},rO=function(s,t,e){var r="se.volume";t.on(`+${r}`,function(i){gt.call(s,"se.volume",aO,i,s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},aO=function(s){this.soundManager.setSoundEffectVolume(s,!0)},oO=function(s,t,e){var r="bgm";t.on(`+${r}`,function(i,n){gt.call(s,"bgm",hO,[i,n],s),t.skipEvent()}).on(`-${r}`,function(){gt.call(s,"bgm.stop",lO,void 0,s),t.skipEvent()})},hO=function(s){var t=s[0],e=s[1];this.soundManager.playBackgroundMusic(t),e&&this.soundManager.fadeInBackgroundMusic(e)},lO=function(){this.soundManager.stopBackgroundMusic()},uO=function(s,t,e){var r="bgm.fadein";t.on(`+${r}`,function(i){gt.call(s,"bgm.fadein",fO,i,s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},fO=function(s){this.soundManager.fadeInBackgroundMusic(s)},dO=function(s,t,e){var r="bgm.fadeout";t.on(`+${r}`,function(i,n){n=n==="stop",gt.call(s,"bgm.fadeout",cO,[i,n],s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},cO=function(s){this.soundManager.fadeOutBackgroundMusic(...s)},vO=function(s,t,e){var r="bgm.cross";t.on(`+${r}`,function(i,n){gt.call(s,"bgm.cross",pO,[i,n],s),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},pO=function(s){this.soundManager.crossFadeBackgroundMusic(...s)};Phaser.Utils.Objects.GetValue;var gO=function(s,t,e){var r="bgm.pause";t.on(`+${r}`,function(){gt.call(s,"bgm.pause",mO,void 0,s),t.skipEvent()}).on(`-${r}`,function(){gt.call(s,"bgm.resume",xO,void 0,s),t.skipEvent()})},mO=function(){this.soundManager.pauseBackgroundMusic()},xO=function(){this.soundManager.resumeBackgroundMusic()},yO=function(s,t,e){var r="camera.fadein";t.on(`+${r}`,function(i,n,o,a){gt.call(s,"camera.fadein",TO,[i,n,o,a],s),t.skipEvent()})},TO=function(s){this.targetCamera.fadeIn(...s)},CO=function(s,t,e){var r="camera.fadeout";t.on(`+${r}`,function(i,n,o,a){gt.call(s,"camera.fadeout",SO,[i,n,o,a],s),t.skipEvent()})},SO=function(s){this.targetCamera.fadeOut(...s)},EO=function(s,t,e){var r="camera.shake";t.on(`+${r}`,function(i,n){gt.call(s,"camera.shake",PO,[i,n],s),t.skipEvent()})},PO=function(s){this.targetCamera.shake(...s)},MO=function(s,t,e){var r="camera.flash";t.on(`+${r}`,function(i,n,o,a){gt.call(s,"camera.flash",AO,[i,n,o,a],s),t.skipEvent()})},AO=function(s){this.targetCamera.flash(...s)},RO=function(s,t,e){var r="camera.zoom";t.on(`+${r}`,function(i){gt.call(s,"camera.zoom",OO,i,s),t.skipEvent()}).on(`+${r}.to`,function(i,n,o){gt.call(s,"camera.zoom.to",LO,[i,n,o],s),t.skipEvent()})},OO=function(s){this.targetCamera.setZoom(s)},LO=function(s){this.targetCamera.zoomTo(...s)};const Sv=Phaser.Math.DegToRad;var bO=function(s,t,e){var r="camera.rotate";t.on(`+${r}`,function(i){i=Sv(i),gt.call(s,"camera.rotate",wO,i,s),t.skipEvent()}).on(`+${r}.to`,function(i,n,o){i=Sv(i),gt.call(s,"camera.rotate.to",FO,[i,n,o],s),t.skipEvent()})},wO=function(s){this.targetCamera.setRotation(s)},FO=function(s){var t=s[0],e=s[1],r=s[2];this.targetCamera.rotateTo(t,!1,e,r)},DO=function(s,t,e){var r="camera.scroll";t.on(`+${r}`,function(i,n){gt.call(s,"camera.scroll",IO,[i,n],s),t.skipEvent()}).on(`+${r}.to`,function(i,n,o,a){gt.call(s,"camera.scroll.to",BO,[i,n,o,a],s),t.skipEvent()})},IO=function(s){this.targetCamera.setScroll(...s)},BO=function(s){var t=s[0],e=s[1],r=s[2],i=s[3],n=this.targetCamera,o=n.scrollX,a=n.scrollY;n.setScroll(t,e),t+=n.centerX,e+=n.centerY,n.setScroll(o,a),n.pan(t,e,r,i)},GO=function(s,t,e){var r="wait",i="click";t.on(`+${r}`,function(n){Ev(s,n),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()}).on(`+${i}`,function(){Ev(s,"click"),t.skipEvent()}).on(`-${i}`,function(){t.skipEvent()})},YO=function(s){this.typeWriter.wait(s)},Ev=function(s,t){gt.call(s,"wait",YO,t,s)},NO=function(s,t,e){var r="r";t.on(`+${r}`,function(){eo.call(s,`
`),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})},XO=function(s,t,e){for(var r=["pagebreak","pb"],i=0,n=r.length;i<n;i++){var o=r[i];t.on(`+${o}`,function(){eo.call(s,"\f"),t.skipEvent()}).on(`-${o}`,function(){t.skipEvent()})}},zO=function(s,t,e){var r="content.off";t.on(`+${r}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},VO=function(s,t,e){var r="content.on";t.on(`+${r}`,function(){t.setContentOutputEnable(),t.skipEvent()})},UO=function(s,t,e){t.on("content",function(r){if(t.contentOutputEnable)eo.call(s,r);else{var i=`+${t.lastTagStart}`;s.emit(`parser.${i}#content`,t,r)}})},WO=function(s,t,e){t.on("start",function(){s.emit("parser.start",t)}).on("+",function(r,...i){if(!t.skipEventFlag){var n=`+${r}`,o=i;s.emit(`parser.${n}`,t,...i,o),Pv(s,n,o)}}).on("-",function(r){if(!t.skipEventFlag){var i=`-${r}`,n=[];s.emit(`parser.${i}`,t,n),Pv(s,i,n)}}).on("complete",function(){s.emit("parser.complete",t)})},HO=function(s,t){var e=`tag.${t}`;s==null?this.emit(e):this.emit(e,...s)},Pv=function(s,t,e){gt.call(s,t,HO,e,s)};const Mv=[NR,XR,zR,VR,UR,ZR,KR,WR,HR,kR,$R,JR,QR,jR,_R,eO,sO,rO,oO,uO,dO,vO,gO,yO,CO,EO,MO,RO,bO,DO,GO,NO,XO,zO,VO,UO,WO];var kO=function(s,t,e){for(var r=0,i=Mv.length;r<i;r++)Mv[r](s,t,e)},$O=function(s,t){for(var e=s.commentLineStart,r=t.split(`
`),i=0,n=r.length;i<n;i++){var o=r[i];o===""||(o.trim().length===0||e&&o.startsWith(e))&&(r[i]="")}return r.join("")};const ZO=Phaser.Utils.Objects.GetValue;class KO extends YR{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),kO(t,this,e),this.setCommentLineStartSymbol(ZO(e,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start($O(this,t)),this}}const JO={setDefaultTypingSpeed(s){return this.defaultSpeed=s,this},setTypingSpeed(s){return s===void 0&&(s=this.defaultSpeed),this.speed=s,this}},ia="page.fadeout";var QO=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(ia),this;var s=this.children.filter(function(r){return r.renderable}),t=this.fadeOutPageCallback(s,this.fadeOutPageDuration);if(!t)this.emit(ia);else if(t.once)t.once("complete",function(){this.emit(ia)},this);else if(t.then){var e=this;t.then(function(){e.emit(ia)})}else this.emit(ia);return this},nx=function(s,t){return new Promise(function(e,r){s.once(t,function(){e()})})},Se=function(s){return nx(s,"complete")},jO=function(s){return this.children=s,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(s),this.typing(),Se(this)};const qO="delay",rx="anim";var ax=function(s){s===void 0&&(s=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(e.renderable){var r=this.animationConfig;if(r.duration>0){var i=this.timeline.addTimer({name:rx,target:e,duration:r.duration,yoyo:r.yoyo,onStart:r.onStart,onProgress:r.onProgress,onComplete:r.onComplete});this.skipTypingAnimation&&i.seek(1)}else r.onStart&&r.onStart(e,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",e);var n=this.nextChild;if(n&&!(this.skipSpaceEnable&&PM(n))){if(t+=this.speed+s,s=0,t>0){this.typingTimer=this.timeline.addTimer({name:qO,target:this,duration:t,onComplete:function(o,a,h){o.typingTimer=void 0,ax.call(o,h.remainder)}});break}}}else MM(e)&&e.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},_O=function(){return this.timeline.pause(),this},tL=function(){return this.timeline.resume(),this},eL=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},iL=function(s){return this.isTypingPaused?(s===void 0&&(s=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=s):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(s)),this):this};const Di="_remove.wait",ff="_remove.play",Av=[Di,ff];var fn=function(s,t,e,r,i){return function(){s.emit(Di,i),t.apply(r,e)}},Rv=function(s,t,e,r,i){var n=fn(s,e,r,i,"custom"),o=t?`wait.${t}`:"wait";s.emit(o,n)},sL=function(s,t,e,r,i){var n=fn(s,e,r,i,"time"),o;s.once(Di,function(){o&&(o.remove(),o=void 0)}),o=s.timeline.delayCall(t,n),s.emit("wait.time",t)},nL=function(s,t,e,r){var i=s.clickEE;if(i){var n=fn(s,t,e,r,"click");s.once(Di,function(){i.off("pointerdown",n,s)}),i.once("pointerdown",n,s),s.emit("wait.click")}},Ov=function(s,t,e,r,i){var n=fn(s,e,r,i,"music");t&&(s.once(Di,function(){t.off("complete",n,s)}),t.once("complete",n,s)),s.emit("wait.music",t),t||n()},rL=function(s){switch(s){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},aL=function(s,t,e,r,i){var n=fn(s,e,r,i,`camera.${t}`),o=s.targetCamera,a,h;switch(t){case"camera.fadein":a=o.fadeEffect,h="camerafadeincomplete";break;case"camera.fadeout":a=o.fadeEffect,h="camerafadeoutcomplete";break;case"camera.flash":a=o.flashEffect,h="cameraflashcomplete";break;case"camera.shake":a=o.shakeEffect,h="camerashakecomplete";break;case"camera.zoom":a=o.zoomEffect,h="camerazoomcomplete";break;case"camera.rotate":a=o.rotateToEffect,h="camerarotatecomplete";break;case"camera.scroll":a=o.panEffect,h="camerapancomplete";break}a.isRunning?(s.once(Di,function(u){o.off(h,n,s)}),o.once(h,n,s),s.emit("wait.camera",t)):(s.emit("wait.camera",t),n())},oL=function(s,t,e,r,i){var n=fn(s,e,r,i,"keydown"),o=`keydown-${t.toUpperCase()}`,a=s.scene.input.keyboard;s.once(Di,function(){a.off(o,n,s)}),a.once(o,n,s),s.emit("wait.keydown",t)},hL=function(s,t){var e=t.split(".");return s.gameObjectManagers.hasOwnProperty(e[0])},lL=function(s,t,e,r,i){var n=fn(s,e,r,i),o=t.split("."),a=o[0],h=s.getGameObjectManager(a),u=`wait.${a}`;switch(o.length){case 1:h.isEmpty?(s.emit(u),n()):(s.once(Di,function(C){h.off("empty",n,s)}),h.once("empty",n,s),s.emit(u));return;case 2:var c=o[1];if(!h.has(c))s.emit(u,c),n();else{var l=h.get(c),f=l.gameObject;s.once(Di,function(){f.off("destroy",n,s)}),f.once("destroy",n,s),s.emit(u,c)}return;case 3:var c=o[1],d=o[2],v=h.getProperty(c,d);if(typeof v=="number"){var p=h.getTweenTask(c,d);p?(s.once(Di,function(){p.off("complete",n,s)}),p.once("complete",n,s),s.emit(u,c,d)):(s.emit(u,c,d),n());return}var g=d,m=g.startsWith("!");if(m&&(g=g.substring(1)),h.hasData(c,g)){var f=h.getGO(c),x=f.getData(g),y=!m;if(x===y)s.emit(u,c,d),n();else{var T=`changedata-${g}`,e=function(E,P,M){P=!!P,P===y&&n.call(s)};s.once(Di,function(){f.off(T,e)}),f.on(T,e),s.emit(u,c,d)}return}}};const uL=Phaser.Input.Keyboard.KeyCodes;var ox=function(s,t,e,r,i){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var n=0,o=t.length;n<o;n++){var a=t[n];if(a==null||a==="wait")Rv(s,void 0,e,r,i);else if(typeof a=="number"||!isNaN(a))sL(s,parseFloat(a),e,r,i);else if(a==="click")nL(s,e,r,i);else if(a==="se"){var h=s.soundManager.getLastSoundEffect();Ov(s,h,e,r,i)}else if(a==="bgm"){var h=s.soundManager.getBackgroundMusic();Ov(s,h,e,r,i)}else uL.hasOwnProperty(a.toUpperCase())?oL(s,a,e,r,i):rL(a)?aL(s,a,e,r,i):hL(s,a)?lL(s,a,e,r,i):Rv(s,a,e,r,i)}},fL=function(s){return this.ignoreWait?this:(this.pauseTyping(),ox(this.textPlayer,s,this.resumeTyping,[],this),this)},dL=function(s){return s===void 0&&(s=!0),this.ignoreWait=s,this},cL=function(s){return s===void 0&&(s=!0),this.skipSpaceEnable=s,this},vL=function(s){if(s===void 0&&(s=!0),this.skipTypingAnimation=s,s)for(var t=this.timeline.getTimers(rx),e=0,r=t.length;e<r;e++)t[e].seek(1);return this},pL=function(s){if(s===void 0&&(s=!0),this.skipSoundEffect=s,s){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},gL=function(){return this.typingTimer&&this.typingTimer.seek(1),this},hx={fadeOutPage:QO,start:jO,typing:ax,pause:_O,resume:tL,pauseTyping:eL,resumeTyping:iL,wait:fL,setIgnoreWait:dL,setSkipSpaceEnable:cL,setSkipTypingAnimation:vL,setSkipSoundEffect:pL,skipCurrentTypingDelay:gL};Object.assign(hx,JO);const sr=Phaser.Utils.Objects.GetValue;class lx{constructor(t,e){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(sr(e,"onTypingStart",xL)),this.setDefaultTypingSpeed(sr(e,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(sr(e,"skipSpace",!1)),this.setAnimationConfig(sr(e,"animation",void 0)),this.setMinSizeEnable(sr(e,"minSizeEnable",!1)),this.setFadeOutPageCallback(sr(e,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=mL),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var mL=function(s){s.setVisible&&s.setVisible()},xL=function(s){for(var t=0,e=s.length;t<e;t++){var r=s[t];r.setVisible&&r.setVisible(!1)}};Object.assign(lx.prototype,Nr,hx);class yL extends id{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const TL={playAnimation(s,t){return this.has(s)||this.add(s),this.get(s).playAnimation(t),this},stopAnimation(s){return this.has(s)?(this.get(s).stopAnimation(),this):this},chainAnimation(s,t){return this.has(s)?(this.get(s).chainAnimation(t),this):this},pauseAnimation(s){return this.has(s)?(this.get(s).pauseAnimation(),this):this}};var ux={};Object.assign(ux,TL);class fx extends sd{constructor(t,e){e===void 0&&(e={}),e.BobClass=yL,super(t,e)}setCreateGameObjectCallback(t,e){return!t||t==="sprite"?t=CL:t==="image"&&(t=SL),super.setCreateGameObjectCallback(t,e),this}}var CL=function(s,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),s.add.sprite(0,0,t,e)},SL=function(s,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),s.add.image(0,0,t,e)};Object.assign(fx.prototype,ux);var Lv=function(s,t){return s.length===3&&s[0]===t&&s[2]==="play"},EL=function(s,t){return s.length===3&&s[0]===t&&s[2]==="stop"},PL=function(s,t,e){var r=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var o=i.split("."),a;if(Lv(o,r))a=o[1];else return;gt.call(s,`${r}.play`,ML,[r,a,n],s),t.skipEvent()}}).on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(EL(n,r))o=n[1];else return;gt.call(s,`${r}.stop`,bv,[r,o],s),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(Lv(n,r))o=n[1];else return;gt.call(s,`${r}.stop`,bv,[r,o],s),t.skipEvent()}})},ML=function(s){var t,e,r;[t,e,r]=s;var i=r.shift(),n=this.getGameObjectManager(t);n.playAnimation(e,i),r.length>0&&n.chainAnimation(e,r)},bv=function(s){var t,e;[t,...e]=s;var r=this.getGameObjectManager(t);r.stopAnimation(...e)},AL=function(s,t){return s.length===3&&s[0]===t&&s[2]==="pause"},RL=function(s,t,e){var r=e.name;t.on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(AL(n,r))o=n[1];else return;gt.call(s,`${r}.pause`,OL,[r,o],s),t.skipEvent()}})},OL=function(s){var t,e;[t,...e]=s;var r=this.getGameObjectManager(t);r.pauseAnimation(...e)},LL=function(s,t){return s.length===3&&s[0]===t&&s[2]==="chain"},bL=function(s,t,e){var r=e.name;t.on("+",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(LL(n,r))o=n[1];else return;var a=Array.prototype.slice.call(arguments,1);gt.call(s,`${r}.chain`,wL,[r,o,a],s),t.skipEvent()}})},wL=function(s){var t,e;[t,...e]=s;var r=this.getGameObjectManager(t);r.chainAnimation(...e)};const FL=[PL,RL,bL];var DL=function(s){s===void 0&&(s={}),s.name="sprite",s.parseCallbacks=FL,this.addGameObjectManager(s,fx)},wv=function(s,t){return s.length===2&&s[0]===t},IL=function(s,t,e){var r=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var o=i.split("."),a;if(wv(o,r))a=o[1];else return;gt.call(s,`${r}.add`,BL,[r,a,...n],s),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var n=i.split("."),o;if(wv(n,r))o=n[1];else return;gt.call(s,`${r}.remove`,GL,[r,o],s),t.skipEvent()}})},BL=function(s){var t,e;[t,...e]=s;var r=this.getGameObjectManager(t);r.add(...e)},GL=function(s){var t,e;[t,...e]=s;var r=this.getGameObjectManager(t);r.remove(...e)},YL=function(s,t,e){var r=e.name;t.on("-",function(i){t.skipEventFlag||i===r&&(gt.call(s,`${r}.removeall`,NL,r,s),t.skipEvent())})},NL=function(s){var t=this.getGameObjectManager(s);t.removeAll()},XL=function(s,t){return s.length===3&&s[0]===t},zL=function(s,t,e){var r=e.name;t.on("+",function(i,...n){if(!t.skipEventFlag){var o=i.split("."),a,h;if(XL(o,r))a=o[1],h=o[2];else return;gt.call(s,`${r}.call`,VL,[r,a,h,...n],s),t.skipEvent()}})},VL=function(s){var t,e,r,i;[t,e,r,...i]=s;var n=`${t}.${r}`;if(this.emit(n,e,...i),!(this.listenerCount(n)>0)){var o=this.getGameObjectManager(t);o.hasMethod(e,r)?o.call(e,r,...i):o.setProperty(e,r,i[0])}},UL={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},WL=function(s,t){return s.length===4&&s[0]===t&&UL[s[3]]},HL=function(s,t,e){var r=e.name;s.getGameObjectManager(r),t.on("+",function(i,n,o,a,h){if(!t.skipEventFlag){var u=i.split("."),l,f,c;if(WL(u,r))l=u[1],f=u[2],c=u[3];else return;typeof a=="number"&&(h=a,a=void 0),gt.call(s,`${r}.ease`,kL,[r,l,f,n,o,a,h,c],s),t.skipEvent()}})},kL=function(s){var t,e,r,i,n,o,a,h;[t,e,r,i,n,o,a,h]=s;var u=this.getGameObjectManager(t),l=u.getProperty(e,r);if(typeof l=="number"){h.endsWith("Left")||h.endsWith("Up")?h.startsWith("to")||h.startsWith("yoyo")?i=l-i:h.startsWith("from")&&(u.setProperty(e,r,l-i),i=l):h.endsWith("Right")||h.endsWith("Down")?h.startsWith("to")||h.startsWith("yoyo")?i=l+i:h.startsWith("from")&&(u.setProperty(e,r,l+i),i=l):h==="from"&&(u.setProperty(e,r,i),i=l);var f=h.startsWith("yoyo");u.easeProperty(e,r,i,n,o,a,f)}};const Fv=[IL,YL,zL,HL],$L={addGameObjectManager(s,t){s===void 0&&(s={});var e=s.name;e||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),nd.call(this,s,t);var r=s.parseCallbacks;r?r=[...r,...Fv]:r=Fv;for(var i=0,n=r.length;i<n;i++)r[i](this,this.parser,s);return this}};var ZL=function(s){return this.clickTarget=s,s?Xn(s)?this.clickEE=s.input:this.clickEE=s.setInteractive():this.clickEE=null,this},KL=function(s){return this.targetCamera=s,this},JL=function(s){var t=this;s?typeof s=="function"?this.nextPageInput=function(e,r,i){var n=fn(t,e,r,i);s.call(t,n)}:this.nextPageInput=function(e,r,i){ox(t,s,e,r,i)}:this.nextPageInput=null},QL=function(s,t){return this.imageManager.add(s,t),this};const jL={play(s){return this.isPlaying?this:(this.removeChildren(),this.parser.start(s),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(s){var t=Se(this);return this.play(s),t}};Phaser.Utils.Objects.GetValue;var df=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once("page.fadeout",qL,this).fadeOutPage(),this)},qL=function(){var s=this.runWrap(this.lastWrapResult);this.lastWrapResult=s,this.emit("page.start");var t=function(){this.emit(ff),s.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?df.call(this):this.nextPageInput&&this.nextPageInput(df,[],this))};this.once(ff,function(){this.typeWriter.off("complete",t,this)}),this.typeWriter.once("complete",t,this).start(s.children)};const _L={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},t2={resume(){return this.timeline.resume(),this},resumeTyping(s){return this.typeWriter.resumeTyping(s),this}};var e2=function(s){return this.typeWriter.wait(s),this};const i2={setDefaultTypingSpeed(s){return this.defaultTypingSpeed=s,this},setTypingSpeed(s){return this.typingSpeed=s,this}};var s2=function(s){return this.typeWriter.setIgnoreWait(s),this},n2=function(s){return s===void 0&&(s=!0),this.ignoreNextPageInput=s,this},r2=function(){if(!this.isPlaying||!this.isPageTyping)return this;var s=this.typeWriter.speed,t=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,r=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(s).setIgnoreWait(t).setSkipTypingAnimation(e).setSkipSoundEffect(r)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const a2={getSprite(s){return this.getGameObject("sprite",s)},addSprite(s,t){return this.addGameObject("sprite",s,t),this}},o2={setContentOutputEnable(s){return this.parser.setContentOutputEnable(s),this},setContentCallback(s,t){return this.contentCallback=s,this.contentCallbackScope=t,this}};var dx={setClickTarget:ZL,setTargetCamera:KL,setNextPageInput:JL,addImage:QL,typingNextPage:df,wait:e2,setIgnoreWait:s2,setIgnoreNextPageInput:n2,showPage:r2};Object.assign(dx,$L,jL,_L,t2,i2,a2,o2);var h2=function(s){for(var t=0,e=Av.length;t<e;t++)s.emit(Av[t])};const Dv=Phaser.Utils.Objects.IsPlainObject,Ns=Phaser.Utils.Objects.GetValue;class l2 extends bR(td){constructor(t,e,r,i,n,o){Dv(e)?o=e:Dv(i)&&(o=i),o===void 0&&(o={});var a=o.text;delete o.text,super(t,e,r,i,n,o),this.type="rexTextPlayer",this.parser=new KO(this,Ns(o,"parser",void 0)),this.typeWriter=new lx(this,Ns(o,"typing",void 0)),this._imageManager=void 0;var h=Ns(o,"images",void 0);h&&this.addImage(h),this.setTargetCamera(Ns(o,"camera",this.scene.sys.cameras.main)),this.initManagers(t,o);var u=Ns(o,"sprites");u!==!1&&u!==null&&DL.call(this,u),this.setIgnoreNextPageInput(Ns(o,"ignoreNextPageInput",!1)),this.setClickTarget(Ns(o,"clickTarget",this)),this.setNextPageInput(Ns(o,"nextPageInput",null)),this.isPlaying=!1,a&&this.play(a)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Sm(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){this.scene&&(h2(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.targetCamera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(l2.prototype,dx);var u2=function(s){var t=s.parent,e=s.isOpened?s.selectionStart:null,r=s.isOpened?s.selectionEnd:null,i=s.prevSelectionStart,n=s.prevSelectionEnd;if(!(i===e&&n===r)){var o,a;i===null?(o=e,a=r):(o=Math.min(i,e),a=Math.max(n,r));for(var h=o;h<a;h++){var u=i===null?!1:h>=i&&h<n,l=h>=e&&h<r;if(!(u&&l)){var f=t.getCharChild(h);f&&(u?t.emit("cursorout",f,h,t):t.emit("cursorin",f,h,t))}}s.prevSelectionStart=e,s.prevSelectionEnd=r}},f2=function(s){var t=s.parent,e=t.text,r=s.cursorPosition;if(s.prevCursorPosition!==r){if(s.prevCursorPosition!==null&&s.prevCursorPosition>e.length&&(s.prevCursorPosition=null),s.prevCursorPosition!==null){var i=t.getCharChild(s.prevCursorPosition);i&&t.emit("cursorout",i,s.prevCursorPosition,t)}if(r!=null){var i=t.getCharChild(r);i&&t.emit("cursorin",i,r,t)}t.emit("movecursor",r,s.prevCursorPosition,t),s.prevCursorPosition=r}},Iv=function(s){var t=s.prevSelectionStart;if(t!==null){for(var e=s.prevSelectionEnd,r=s.parent,i=t;i<e;i++){var n=r.getCharChild(i);n&&r.emit("cursorout",n,i,r)}s.prevSelectionStart=null,s.prevSelectionEnd=null}},Bv=function(s){var t=s.prevCursorPosition;if(t!==null){var e=s.parent,r=e.getCharChild(t);r&&e.emit("cursorout",r,t,e),s.prevCursorPosition=null}};const d2=Phaser.Utils.Objects.GetValue;class c2 extends y0{constructor(t,e){super(t,e),this.setSelectAllWhenFocusEnable(d2(e,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(r,i,n,o){var a=t.getNearestChild(i,n),h=t.getCharIndex(a);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(h),this.cursorMoveStartIndex=h,this.firstClickAfterOpen=!1},this).on("pointermove",function(r,i,n,o){if(r.isDown){var a=t.getNearestChild(i,n),h=t.getCharIndex(a);this.cursorMoveStartIndex<h?this.selectText(this.cursorMoveStartIndex,h+1):this.selectText(h,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")},this)}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,e=this.text;if(this.onUpdateCallback){var r=this.onUpdateCallback(e,t,this);r!=null&&(e=r)}return t.text!==e&&(t.setText(e),t.emit("textchange",e,t,this)),this.isOpened?this.selectionStart!==this.selectionEnd?(Bv(this),u2(this)):(Iv(this),f2(this)):(Iv(this),Bv(this)),this}setNumberInput(){return this.onUpdateCallback=lE,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}}const v2=Phaser.Utils.Objects.GetValue,p2=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var g2=function(s,t){var e=v2(t,"edit");return e===void 0&&(e={}),Ks(t,e,p2),new c2(s,e)},Js=function(s,t){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var e=t.split("."),r=s,i=0;i<e.length;i++)if(r.hasOwnProperty(e[i]))r=r[e[i]];else return!1;return!0}else return!1},cx=function(s){return s==null||s===""||s.length===0},m2=function(s,t,e){var r=s;if(!cx(t)){typeof t=="string"&&(t=t.split("."));for(var i,n=0,o=t.length;n<o;n++){if(i=t[n],r[i]==null||typeof r[i]!="object"){var a;n===o-1?e===void 0?a={}:a=e:a={},r[i]=a}r=r[i]}}return r},Ue=function(s,t,e,r){if(r===void 0&&(r="."),typeof s=="object"){if(cx(t)){if(e==null)return;typeof e=="object"&&(s=e)}else{typeof t=="string"&&(t=t.split(r));var i=t.pop(),n=m2(s,t);n[i]=e}return s}},x2=function(s){var t=!s.textArea;if(!Js(s,"wrap.vAlign")){var e=t?"center":"top";Ue(s,"wrap.vAlign",e)}if(Js(s,"wrap.charWrap")||Ue(s,"wrap.charWrap",!0),!Js(s,"wrap.maxLines")){var e=t?1:void 0;Ue(s,"wrap.maxLines",e)}if(Js(s,"wrap.useDefaultTextHeight")||Ue(s,"wrap.useDefaultTextHeight",!0),s.edit||(s.edit={}),!Js(s.edit,"inputType")){var e=t?"text":"textarea";Ue(s.edit,"inputType",e)}return s},cf=function(s,t,e,r){if(e===void 0&&(e="."),r===void 0&&(r={}),!s)return r;if(t in s)return Object.assign(r,s[t]);t+=e;for(var i in s)i.startsWith(t)&&(r[i.replace(t,"")]=s[i]);return r},rd=function(s,t,e){if(e===void 0&&(e={}),Array.isArray(t))for(var r,i=0,n=t.length;i<n;i++)r=t[i],e[r]=s[r];else for(var r in t)e[r]=s[r];return e},ad=function(s,t){for(var e in s)if(!(e in t)||s[e]!==t[e])return!1;for(var e in t)if(!(e in s))return!1;return!0},y2=function(s){Xa(s)||this.setCursorStyle(s).on("cursorin",function(t){var e=this.cursorStyle,r=rd(t.style,e);ad(e,r)||(t.styleSave=r,t.modifyStyle(e))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},T2=function(s){Xa(s)||this.setFocusStyle(s).on("open",function(){var t=this.background,e=this.focusStyle,r=rd(t,e);ad(e,r)||(t.styleSave=r,t.modifyStyle(e))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},C2=function(s){var t=s.createCharChild("|");return t.text="",N0.call(s,t),t};function bs(){}bs.prototype={diff(s,t,e={}){let r=e.callback;typeof e=="function"&&(r=e,e={}),this.options=e;let i=this;function n(d){return r?(setTimeout(function(){r(void 0,d)},0),!0):d}s=this.castInput(s),t=this.castInput(t),s=this.removeEmpty(this.tokenize(s)),t=this.removeEmpty(this.tokenize(t));let o=t.length,a=s.length,h=1,u=o+a;e.maxEditLength&&(u=Math.min(u,e.maxEditLength));let l=[{newPos:-1,components:[]}],f=this.extractCommon(l[0],t,s,0);if(l[0].newPos+1>=o&&f+1>=a)return n([{value:this.join(t),count:t.length}]);function c(){for(let d=-1*h;d<=h;d+=2){let v,p=l[d-1],g=l[d+1],m=(g?g.newPos:0)-d;p&&(l[d-1]=void 0);let x=p&&p.newPos+1<o,y=g&&0<=m&&m<a;if(!x&&!y){l[d]=void 0;continue}if(!x||y&&p.newPos<g.newPos?(v=E2(g),i.pushComponent(v.components,void 0,!0)):(v=p,v.newPos++,i.pushComponent(v.components,!0,void 0)),m=i.extractCommon(v,t,s,d),v.newPos+1>=o&&m+1>=a)return n(S2(i,v.components,t,s,i.useLongestToken));l[d]=v}h++}if(r)(function d(){setTimeout(function(){if(h>u)return r();c()||d()},0)})();else for(;h<=u;){let d=c();if(d)return d}},pushComponent(s,t,e){let r=s[s.length-1];r&&r.added===t&&r.removed===e?s[s.length-1]={count:r.count+1,added:t,removed:e}:s.push({count:1,added:t,removed:e})},extractCommon(s,t,e,r){let i=t.length,n=e.length,o=s.newPos,a=o-r,h=0;for(;o+1<i&&a+1<n&&this.equals(t[o+1],e[a+1]);)o++,a++,h++;return h&&s.components.push({count:h}),s.newPos=o,a},equals(s,t){return this.options.comparator?this.options.comparator(s,t):s===t||this.options.ignoreCase&&s.toLowerCase()===t.toLowerCase()},removeEmpty(s){let t=[];for(let e=0;e<s.length;e++)s[e]&&t.push(s[e]);return t},castInput(s){return s},tokenize(s){return s.split("")},join(s){return s.join("")}};function S2(s,t,e,r,i){let n=0,o=t.length,a=0,h=0;for(;n<o;n++){let l=t[n];if(l.removed){if(l.value=s.join(r.slice(h,h+l.count)),h+=l.count,n&&t[n-1].added){let f=t[n-1];t[n-1]=t[n],t[n]=f}}else{if(!l.added&&i){let f=e.slice(a,a+l.count);f=f.map(function(c,d){let v=r[h+d];return v.length>c.length?v:c}),l.value=s.join(f)}else l.value=s.join(e.slice(a,a+l.count));a+=l.count,l.added||(h+=l.count)}}let u=t[o-1];return o>1&&typeof u.value=="string"&&(u.added||u.removed)&&s.equals("",u.value)&&(t[o-2].value+=u.value,t.pop()),t}function E2(s){return{newPos:s.newPos,components:s.components.slice(0)}}const P2=new bs;function M2(s,t,e){return P2.diff(s,t,e)}const Gv=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,Yv=/\S/,vx=new bs;vx.equals=function(s,t){return this.options.ignoreCase&&(s=s.toLowerCase(),t=t.toLowerCase()),s===t||this.options.ignoreWhitespace&&!Yv.test(s)&&!Yv.test(t)};vx.tokenize=function(s){let t=s.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let e=0;e<t.length-1;e++)!t[e+1]&&t[e+2]&&Gv.test(t[e])&&Gv.test(t[e+2])&&(t[e]+=t[e+2],t.splice(e+1,2),e--);return t};const px=new bs;px.tokenize=function(s){let t=[],e=s.split(/(\n|\r\n)/);e[e.length-1]||e.pop();for(let r=0;r<e.length;r++){let i=e[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};const A2=new bs;A2.tokenize=function(s){return s.split(/(\S.+?[.!?])(?=\s+|$)/)};const R2=new bs;R2.tokenize=function(s){return s.split(/([{}:;,]|\s+)/)};const O2=Object.prototype.toString,za=new bs;za.useLongestToken=!0;za.tokenize=px.tokenize;za.castInput=function(s){const{undefinedReplacement:t,stringifyReplacer:e=(r,i)=>typeof i>"u"?t:i}=this.options;return typeof s=="string"?s:JSON.stringify(vf(s,null,null,e),e,"  ")};za.equals=function(s,t){return bs.prototype.equals.call(za,s.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function vf(s,t,e,r,i){t=t||[],e=e||[],r&&(s=r(i,s));let n;for(n=0;n<t.length;n+=1)if(t[n]===s)return e[n];let o;if(O2.call(s)==="[object Array]"){for(t.push(s),o=new Array(s.length),e.push(o),n=0;n<s.length;n+=1)o[n]=vf(s[n],t,e,r,i);return t.pop(),e.pop(),o}if(s&&s.toJSON&&(s=s.toJSON()),typeof s=="object"&&s!==null){t.push(s),o={},e.push(o);let a=[],h;for(h in s)s.hasOwnProperty(h)&&a.push(h);for(a.sort(),n=0;n<a.length;n+=1)h=a[n],o[h]=vf(s[h],t,e,r,h);t.pop(),e.pop()}else o=s;return o}const pf=new bs;pf.tokenize=function(s){return s.slice()};pf.join=pf.removeEmpty=function(s){return s};const L2=Phaser.Utils.Array.Remove;var b2=function(s,t){var e=s.text;if(t!==e){if(L2(s.children,s.lastInsertCursor),t==="")s.removeChildren();else for(var r=M2(e,t),i=0,n=0,o=r.length;n<o;n++){var a=r[n];a.removed?s.removeText(i,a.count):(a.added&&s.insertText(i,a.value),i+=a.count)}s.children.push(s.lastInsertCursor),s.runWordWrap()}};const Nv=Phaser.Utils.Objects.IsPlainObject;class w2 extends td{constructor(t,e,r,i,n,o){Nv(e)?o=e:Nv(i)&&(o=i),o===void 0&&(o={}),x2(o);var a=o.text;a&&delete o.text;var h=cf(o.background,"focus"),u=cf(o.style,"cursor");super(t,e,r,i,n,o),this.type="rexCanvasInput",this._text="",this.textEdit=g2(this,o),o.focusStyle&&Object.assign(h,o.focusStyle),T2.call(this,h),o.cursorStyle&&Object.assign(u,o.cursorStyle),y2.call(this,u);var l=o.onAddChar;l&&this.on("addchar",l);var f=o.onCursorOut;f&&this.on("cursorout",f);var c=o.onCursorIn;c&&this.on("cursorin",c);var d=o.onMoveCursor;d&&this.on("movecursor",d),this.setParseTextCallback(o.parseTextCallback),this.lastInsertCursor=C2(this),a?this.setText(a):this.runWordWrap()}addChild(t,e){if(super.addChild(t,e),Array.isArray(t))for(var r=t,i=0,n=r.length;i<n;i++){var t=r[i];Fr(t)&&this.emit("addchar",t,e+i,this)}else Fr(t)&&this.emit("addchar",t,e,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(b2(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}setSize(t,e){return this.width===t&&this.height===e?this:(super.setSize(t,e),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=F2),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}}var F2=function(s){return s};const D2=Phaser.Math.Linear,Xv=Phaser.Math.Percent,I2={setValue(s,t,e){return s==null?this:(t!==void 0&&(s=Xv(s,t,e)),this.value=s,this)},addValue(s,t,e){return t!==void 0&&(s=Xv(s,t,e)),this.value+=s,this},getValue(s,t){var e=this.value;return s!==void 0&&(e=D2(s,t,e)),e}},B2=Phaser.Math.Percent;var G2=function(s){return this.easeValuePropName=s,this},Y2=function(s){return this.easeValueDuration=s,this},N2=function(s){return this.easeFunction=s,this},X2=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},z2=function(s,t,e){return s==null?this:(t!==void 0&&(s=B2(s,t,e)),this.easeValueTask===void 0&&(this.easeValueTask=new Kn(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:s,duration:this.easeValueDuration,ease:this.easeFunction}),this)},V2=function(s,t,e,r){return e===void 0&&(e=-1),r===void 0&&(r=0),this.easeValueTask===void 0&&(this.easeValueTask=new Kn(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:s,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:e,repeatDelay:r}),this};const U2={setEaseValuePropName:G2,setEaseValueDuration:Y2,setEaseValueFunction:N2,stopEaseValue:X2,easeValueTo:z2,easeValueRepeat:V2},sa=Phaser.Utils.Objects.GetValue,W2=Phaser.Math.Clamp;function Qn(s){class t extends s{bootProgressBase(r){this.eventEmitter=sa(r,"eventEmitter",this);var i=sa(r,"valuechangeCallback",null);if(i!==null){var n=sa(r,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",i,n)}return this.setEaseValuePropName("value").setEaseValueDuration(sa(r,"easeValue.duration",0)).setEaseValueFunction(sa(r,"easeValue.ease","Linear")),this}get value(){return this._value}set value(r){r=W2(r,0,1);var i=this._value,n=i!=r;this.dirty=this.dirty||n,this._value=r,n&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}}return Object.assign(t.prototype,I2,U2),t}const H2=Phaser.Math.RadToDeg,k2={buildShapes(){this.addShape(new rf().setName("track")).addShape(new sl().setName("bar")).addShape(new rf().setName("center"))},updateShapes(){var s=this.radius,t=this.thickness*this.radius,e=this.radius-t/2,r=this.radius-t,i=this.getShape("track");this.trackColor!=null&&t>0?i.setCenterPosition(s,s).setRadius(e).lineStyle(t,this.trackColor):i.reset();var n=this.getShape("bar");if(this.barColor!=null&&e>0){var o,a,h;if(this.value===1)o=!1,a=0,h=361;else{o=this.anticlockwise,a=H2(this.startAngle);var u=360*(o?1-this.value:this.value);h=u+a}n.setCenterPosition(s,s).setRadius(e).setAngle(a,h,o).lineStyle(t,this.barColor)}else n.reset();var l=this.getShape("center");this.centerColor&&r>0?l.setCenterPosition(s,s).setRadius(r).fillStyle(this.centerColor):l.reset()}},Ui=Phaser.Utils.Objects.GetValue,$2=Phaser.Utils.Objects.IsPlainObject,Z2=Phaser.Math.Clamp,K2=Phaser.Math.DegToRad(270);let gx=class extends Qn(Zn){constructor(t,e,r,i,n,o,a){$2(e)&&(a=e,e=Ui(a,"x",0),r=Ui(a,"y",0),i=Ui(a,"radius",1),n=Ui(a,"barColor",void 0),o=Ui(a,"value",0)),i===void 0&&(i=1);var h=i*2;super(t,e,r,h,h),this.type="rexCircularProgress",this.bootProgressBase(a),this.setRadius(i),this.setTrackColor(Ui(a,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(Ui(a,"centerColor",void 0)),this.setThickness(Ui(a,"thickness",.2)),this.setStartAngle(Ui(a,"startAngle",K2)),this.setAnticlockwise(Ui(a,"anticlockwise",!1)),this.buildShapes(),this.setValue(o)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Z2(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(gx.prototype,k2);var kl=function(s,t,e,r,i,n,o,a,h,u,l,f){u===void 0&&(u=0),l===void 0&&(l=2*Math.PI),f===void 0&&(f=!1),t.beginPath(),t.ellipse(e,r,i,n,0,u,l,f),o!=null&&(t.fillStyle=o,t.fill()),a!=null&&(t.strokeStyle=a,t.lineWidth=h,t.stroke())},J2=function(s,t,e,r,i,n,o,a,h,u,l){h===void 0&&a!=null&&(h=2),u===void 0&&(u="start"),l===void 0&&(l="alphabetic"),t.font=n,t.textAlign=u,t.textBaseline=l,t.fillStyle=o,t.strokeStyle=a,t.lineWidth=h,t.lineCap="round",t.lineJoin="round",a!=null&&a!=="none"&&h>0&&t.strokeText(i,e,r),o!=null&&o!=="none"&&t.fillText(i,e,r)},Q2=function(){var s=this.radius,t=this.thickness*this.radius,e=this.radius-t/2,r=this.radius-t,i=this.canvas,n=this.context;if(this.trackColor&&t>0&&(n.save(),kl(i,n,s,s,e,e,void 0,this.trackColor,t),n.restore()),this.barColor&&e>0){var o,a,h;if(this.value===1)o=!1,a=0,h=2*Math.PI;else{o=this.anticlockwise,a=this.startAngle;var u=2*Math.PI*(o?1-this.value:this.value);h=u+a}n.save(),kl(i,n,s,s,e,e,void 0,this.barColor,t,a,h,o),n.restore()}if(this.centerColor&&r>0){var l;this.centerColor2?(l=this.context.createRadialGradient(s,s,0,s,s,r),l.addColorStop(0,this.centerColor),l.addColorStop(1,this.centerColor2)):l=this.centerColor,n.save(),kl(i,n,s,s,r,r,l),n.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(n.save(),J2(i,n,s,s,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),n.restore())};const qt=Phaser.Utils.Objects.GetValue,j2=Phaser.Utils.Objects.IsPlainObject,q2=Phaser.Math.Clamp,_2=Phaser.Math.DegToRad(270);class T9 extends Qn($n){constructor(t,e,r,i,n,o,a){j2(e)&&(a=e,e=qt(a,"x",0),r=qt(a,"y",0),i=qt(a,"radius",1),n=qt(a,"barColor",void 0),o=qt(a,"value",0));var h=i*2;super(t,e,r,h,h),this.type="rexCircularProgressCanvas",this.bootProgressBase(a),this.setRadius(i),this.setTrackColor(qt(a,"trackColor",void 0)),this.setBarColor(n),this.setCenterColor(qt(a,"centerColor",void 0)),this.setThickness(qt(a,"thickness",.2)),this.setStartAngle(qt(a,"startAngle",_2)),this.setAnticlockwise(qt(a,"anticlockwise",!1)),this.setTextColor(qt(a,"textColor",void 0)),this.setTextStrokeColor(qt(a,"textStrokeColor",void 0),qt(a,"textStrokeThickness",void 0));var u=qt(a,"textFont",void 0);u?this.setTextFont(u):this.setTextFont(qt(a,"textSize","16px"),qt(a,"textFamily","Courier"),qt(a,"textStyle","")),this.setTextFormatCallback(qt(a,"textFormatCallback",void 0),qt(a,"textFormatCallbackScope",void 0)),this.setValue(o)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=q2(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,e){return this.centerColor=t,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,e){return e===void 0&&(e=2),this.textStrokeColor=t,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,e,r){var i;return e===void 0?i=t:i=r+" "+t+" "+e,this.textFont=i,this}setTextFormatCallback(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),Q2.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(t):e=this.textFormatCallback.call(this.textFormatCallbackScope,t),e}}var tb=function(){var s=this.skewX,t=this.width-Math.abs(s),e=this.height,r=this.getShape("trackFill");r.fillStyle(this.trackColor),r.isFilled&&$l(r,0,0,t,e,s).close();var i=this.getShape("bar");if(i.fillStyle(this.barColor),i.isFilled){var n,o;this.rtl?(n=t*(1-this.value),o=t):(n=0,o=t*this.value),$l(i,n,0,o,e,s).close()}var a=this.getShape("trackStroke");a.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),a.isStroked&&$l(a,0,0,t,e,s).end()},$l=function(s,t,e,r,i,n){return n>=0?s.startAt(t+n,e).lineTo(r+n,e).lineTo(r,i).lineTo(t,i).lineTo(t+n,e):s.startAt(t,e).lineTo(r,e).lineTo(r-n,i).lineTo(t-n,i).lineTo(t,e),s};const fe=Phaser.Utils.Objects.GetValue,Zl=Phaser.Utils.Objects.IsPlainObject;let eb=class extends Qn(Zn){constructor(t,e,r,i,n,o,a,h){Zl(e)?(h=e,e=fe(h,"x",0),r=fe(h,"y",0),i=fe(h,"width",2),n=fe(h,"height",2),o=fe(h,"barColor",void 0),a=fe(h,"value",0)):Zl(i)?(h=i,i=fe(h,"width",2),n=fe(h,"height",2),o=fe(h,"barColor",void 0),a=fe(h,"value",0)):Zl(o)&&(h=o,o=fe(h,"barColor",void 0),a=fe(h,"value",0)),super(t,e,r,i,n,h),this.type="rexLineProgress",this.bootProgressBase(h),this.addShape(new Rr().setName("trackFill")).addShape(new Rr().setName("bar")).addShape(new Rr().setName("trackStroke")),this.setTrackColor(fe(h,"trackColor",void 0)),this.setBarColor(o),this.setTrackStroke(fe(h,"trackStrokeThickness",2),fe(h,"trackStrokeColor",void 0)),this.setSkewX(fe(h,"skewX",0)),this.setRTL(fe(h,"rtl",!1)),this.setValue(a)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,e){return this.trackStrokeThickness=t,this.trackStrokeColor=e,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}};var ib={updateShapes:tb};Object.assign(eb.prototype,ib);var Ch=function(s,t,e,r,i,n,o){o===void 0&&(o="round"),t.beginPath(),t.lineJoin=o;var a=e[0];t.moveTo(a.x,a.y);for(var h=1,u=e.length;h<u;h++)a=e[h],t.lineTo(a.x,a.y);t.closePath(),r!=null&&(t.fillStyle=r,t.fill()),i!=null&&(t.strokeStyle=i,t.lineWidth=n,t.stroke())},sb=function(){var s=this.skewX,t=this.width-Math.abs(s),e=this.height,r=this.canvas,i=this.context;(this.trackColor||this.trackStrokeColor)&&zv(0,0,t,e,s,this.trackPoints);var n,o;if(this.barColor&&(this.rtl?(n=t*(1-this.value),o=t):(n=0,o=t*this.value),zv(n,0,o,e,s,this.barPoints)),this.trackColor&&(i.save(),Ch(r,i,this.trackPoints,this.trackColor),i.restore()),this.barColor){i.save();var a;if(this.barColor2){var h;if(this.isHorizontalGradient){var u=e/2;h=i.createLinearGradient(n,u,o,u)}else{var l=t/2;h=i.createLinearGradient(l,0,l,e)}h.addColorStop(0,this.rtl?this.barColor:this.barColor2),h.addColorStop(1,this.rtl?this.barColor2:this.barColor),a=h}else a=this.barColor;Ch(r,i,this.barPoints,a),i.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(i.save(),Ch(r,i,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),i.restore())},zv=function(s,t,e,r,i,n){n===void 0&&(n=[]),n.length=4;for(var o=0;o<4;o++)n[o]||(n[o]={});var a;return i>=0?(a=n[0],a.x=s+i,a.y=t,a=n[1],a.x=e+i,a.y=t,a=n[2],a.x=e,a.y=r,a=n[3],a.x=s,a.y=r):(a=n[0],a.x=s,a.y=t,a=n[1],a.x=e,a.y=t,a=n[2],a.x=e-i,a.y=r,a=n[3],a.x=s-i,a.y=r),n};const _t=Phaser.Utils.Objects.GetValue,Kl=Phaser.Utils.Objects.IsPlainObject;class nb extends Qn($n){constructor(t,e,r,i,n,o,a,h){Kl(e)?(h=e,e=_t(h,"x",0),r=_t(h,"y",0),i=_t(h,"width",2),n=_t(h,"height",2),o=_t(h,"barColor",void 0),a=_t(h,"value",0)):Kl(i)?(h=i,i=_t(h,"width",2),n=_t(h,"height",2),o=_t(h,"barColor",void 0),a=_t(h,"value",0)):Kl(o)&&(h=o,o=_t(h,"barColor",void 0),a=_t(h,"value",0)),super(t,e,r,i,n),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(h),this.setTrackColor(_t(h,"trackColor",void 0)),this.setBarColor(o,_t(h,"barColor2",void 0),_t(h,"isHorizontalGradient",void 0)),this.setTrackStroke(_t(h,"trackStrokeThickness",2),_t(h,"trackStrokeColor",void 0)),this.setSkewX(_t(h,"skewX",0)),this.setRTL(_t(h,"rtl",!1)),this.setValue(a)}get trackColor(){return this._trackColor}set trackColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,e){return this.trackStrokeThickness=t,this.trackStrokeColor=e,this}get barColor(){return this._barColor}set barColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,e,r){return r===void 0&&(r=!0),this.barColor=t,this.barColor2=e,this.isHorizontalGradient=r,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),sb.call(this),super.updateTexture(),this}}Phaser.Math.Wrap;const nr=Phaser.Math.Linear;var rb=function(){var s=this.getShape("triangle"),t=this.padding,e=this.width-t.right,r=0+t.left,i=this.height-t.bottom,n=0+t.top,o=(r+e)/2,a=(n+i)/2,h={0:{a:{x:r,y:n},b:{x:e,y:a},c:{x:r,y:i}},1:{a:{x:r,y:n},b:{x:o,y:i},c:{x:e,y:n}},2:{a:{x:e,y:n},b:{x:r,y:a},c:{x:e,y:i}},3:{a:{x:r,y:i},b:{x:o,y:n},c:{x:e,y:i}}},u,l,f,c,d,v;if(this.previousDirection===void 0){var p=h[this.direction],g=p.a,m=p.b,x=p.c;u=g.x,l=g.y,f=m.x,c=m.y,d=x.x,v=x.y}else{var y=h[this.previousDirection],T=h[this.direction],C=this.easeDirectionProgress;u=nr(y.a.x,T.a.x,C),l=nr(y.a.y,T.a.y,C),f=nr(y.b.x,T.b.x,C),c=nr(y.b.y,T.b.y,C),d=nr(y.c.x,T.c.x,C),v=nr(y.c.y,T.c.y,C)}s.startAt(u,l).lineTo(f,c).lineTo(d,v),this.arrowOnly?s.end():s.close()};const ab=Phaser.Math.DegToRad,Bo=ab(120);var ob=function(t){var t=this.getShape("triangle"),e=this.width/2,r=this.height/2,i=Math.min(e,r)*this.radius,n=this.verticeRotation;t.startAt(e+i*Math.cos(n+Bo),r+i*Math.sin(n+Bo)).lineTo(e+i*Math.cos(n),r+i*Math.sin(n)).lineTo(e+i*Math.cos(n-Bo),r+i*Math.sin(n-Bo)),this.arrowOnly?t.end():t.close()};const hb={buildShapes(){this.addShape(new Rr().setName("triangle"))},updateShapes(){var s=this.getShape("triangle");this.arrowOnly?s.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):s.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?rb.call(this):ob.call(this)}},lb={setEaseDuration(s){return s===void 0&&(s=0),this.easeDuration=s,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Kn(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},rr=Phaser.Utils.Objects.GetValue,ub=Phaser.Utils.Objects.IsPlainObject,fb=Phaser.Math.DegToRad,db=Phaser.Math.RadToDeg;class mx extends Zn{constructor(t,e,r,i,n,o,a){var h,u,l,f,c,d,v,p;if(ub(e)){var g=e;e=g.x,r=g.y,i=g.width,n=g.height,o=g.color,a=g.alpha,h=g.strokeColor,u=g.strokeAlpha,l=g.strokeWidth,f=g.arrowOnly,c=g.direction,d=g.easeDuration,v=g.padding,p=g.radius}e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=1),n===void 0&&(n=i),f===void 0&&(f=!1),c===void 0&&(c=0),d===void 0&&(d=0),v===void 0&&(v=0),p===void 0&&(p=void 0),super(t,e,r,i,n),this.type="rexTriangle",this.setFillStyle(o,a),h!==void 0&&l===void 0&&(l=2),this.setStrokeStyle(l,h,u),this.setArrowOnly(f),this.setDirection(c,d),this.setPadding(v),this.setRadius(p),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=vb(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,e){return e!==void 0&&this.setEaseDuration(e),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,e,r,i){if(typeof t=="object"){var n=t,o=rr(n,"x",null);o!==null?(t=o,r=o):(t=rr(n,"left",0),r=rr(n,"right",t));var a=rr(n,"y",null);a!==null?(e=a,i=a):(e=rr(n,"top",0),i=rr(n,"bottom",e))}else t===void 0&&(t=0),e===void 0&&(e=t),r===void 0&&(r=t),i===void 0&&(i=e);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=e||this.padding.right!=r||this.padding.bottom!=i,this.padding.left=t,this.padding.top=e,this.padding.right=r,this.padding.bottom=i,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return db(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=fb(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const cb={right:0,down:1,left:2,up:3};var vb=function(s){return typeof s=="string"&&(s=cb[s]),s=s%4,s};Object.assign(mx.prototype,hb,lb);var hl=function(s){return s.hasOwnProperty("rexSizer")||(s.rexSizer={}),s.rexSizer};function pb(s){return s===void 0&&(s=this),hl(s)}var gb=function(s){var t=hl(s);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},mb=function(s){return s===void 0&&(s=io(this.scene)),this.left=Math.max(this.left,s.left),this.right=Math.min(this.right,s.right),this.top=Math.max(this.top,s.top),this.bottom=Math.min(this.bottom,s.bottom),this};const Ne=Phaser.Display.Align,Vr={center:Ne.CENTER,left:Ne.LEFT_CENTER,right:Ne.RIGHT_CENTER,top:Ne.TOP_CENTER,bottom:Ne.BOTTOM_CENTER,"left-top":Ne.TOP_LEFT,"left-center":Ne.LEFT_CENTER,"left-bottom":Ne.BOTTOM_LEFT,"center-top":Ne.TOP_CENTER,"center-center":Ne.CENTER,"center-bottom":Ne.BOTTOM_CENTER,"right-top":Ne.TOP_RIGHT,"right-center":Ne.RIGHT_CENTER,"right-bottom":Ne.BOTTOM_RIGHT};var gf=new Phaser.GameObjects.Zone({sys:{queueDepthSort:We,events:{once:We}}},0,0,1,1);gf.setOrigin(0);var ws={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},od=function(s){var t=Ct(s);return s.y+t-t*s.originY},hd=function(s){var t=Lt(s);return s.x-t*s.originX+t*.5},ld=function(s,t){var e=Ct(s);return s.y=t-e+e*s.originY,s},ud=function(s,t){var e=Lt(s),r=e*s.originX;return s.x=t+r-e*.5,s},xb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),ud(s,hd(t)+e),ld(s,od(t)+r),s},fd=function(s){var t=Lt(s);return s.x-t*s.originX},dd=function(s,t){var e=Lt(s);return s.x=t+e*s.originX,s},yb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),dd(s,fd(t)-e),ld(s,od(t)+r),s},cd=function(s){var t=Lt(s);return s.x+t-t*s.originX},vd=function(s,t){var e=Lt(s);return s.x=t-e+e*s.originX,s},Tb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),vd(s,cd(t)+e),ld(s,od(t)+r),s},pd=function(s,t){var e=Ct(s),r=e*s.originY;return s.y=t+r-e*.5,s},Cb=function(s,t,e){return ud(s,t),pd(s,e)},gd=function(s){var t=Ct(s);return s.y-t*s.originY+t*.5},Sb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Cb(s,hd(t)+e,gd(t)+r),s},Eb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),dd(s,fd(t)-e),pd(s,gd(t)+r),s},Pb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),vd(s,cd(t)+e),pd(s,gd(t)+r),s},md=function(s){var t=Ct(s);return s.y-t*s.originY},xd=function(s,t){var e=Ct(s);return s.y=t+e*s.originY,s},Mb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),ud(s,hd(t)+e),xd(s,md(t)-r),s},Ab=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),dd(s,fd(t)-e),xd(s,md(t)-r),s},Rb=function(s,t,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),vd(s,cd(t)+e),xd(s,md(t)-r),s},os=[];os[ws.BOTTOM_CENTER]=xb;os[ws.BOTTOM_LEFT]=yb;os[ws.BOTTOM_RIGHT]=Tb;os[ws.CENTER]=Sb;os[ws.LEFT_CENTER]=Eb;os[ws.RIGHT_CENTER]=Pb;os[ws.TOP_CENTER]=Mb;os[ws.TOP_LEFT]=Ab;os[ws.TOP_RIGHT]=Rb;var xx=function(s,t,e,r,i){return os[e](s,t,r,i)},so=function(s,t,e,r,i,n){gf.setPosition(t,e).setSize(r,i),xx(s,gf,n)};const ar=Phaser.Utils.Objects.GetValue,Ob=Phaser.GameObjects.Group;var Lb=function(s,t){var e=s.scene,r,i,n,o,a;if(typeof t=="number")r=t;else{r=ar(t,"color"),i=ar(t,"lineWidth");var h=ar(t,"name",!1);h&&(n=ar(h,"createTextCallback",bb),o=ar(h,"createTextCallbackScope",void 0),a=ar(h,"align","left-top"),typeof a=="string"&&(a=Vr[a]))}if(r===void 0&&(r=16777215),i===void 0&&(i=1),n&&!s.children){s.children=new Ob(e),s.once("destroy",function(p,g){p.children.destroy(!g),p.children=void 0});var u=s.clear.bind(s);s.clear=function(){u(),s.children.clear(!1,!0)}}for(var l=this.getAllShownChildren([this]),f,c,d=0,v=l.length;d<v;d++){if(f=l[d],f.getBounds||f.width!==void 0&&f.height!==void 0)yn=Qf(f,yn);else continue;r!=null&&s.lineStyle(i,r).strokeRectShape(yn),f.name&&n&&(o?c=n.call(o,e):c=n(e),c&&(c.setText(f.name),s.children.add(c),so(c,yn.x,yn.y,yn.width,yn.height,a)))}return this},bb=function(s,t,e){return s.add.text(0,0,"")},yn=void 0;const Go=Phaser.Utils.Objects.GetValue;var Ur=function(s,t){return t===void 0&&(t={}),typeof s=="number"?(t.left=s,t.right=s,t.top=s,t.bottom=s):(t.left=Go(s,"left",0),t.right=Go(s,"right",0),t.top=Go(s,"top",0),t.bottom=Go(s,"bottom",0)),t};const wb=Vi.prototype.add;var no=function(s){return wb.call(this,s),this.sizerEventsEnable&&(s.emit("sizer.add",s,this),this.emit("add",s,this)),this};const Fb={addBackground(s,t,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(e=t,t=void 0),t===void 0&&(t=0),no.call(this,s),this.backgroundChildren.push(s);var r=this.getSizerConfig(s);return r.padding=Ur(t),e!==void 0&&this.addChildrenMap(e,s),this},isBackground(s){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(s)!==-1}};var Va=function(s,t){var e;if(t===void 0)s.hasOwnProperty("rexContainer")&&(e=s.rexContainer.parent,e&&!e.isRexSizer&&(e=null));else for(e=Va(s);e&&e.name!==t;)e=Va(e);return e},Db=function(s){for(var t=Va(s);t;)s=t,t=Va(t);return s};const ro={getParentSizer(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),Va(s,t)},getTopmostSizer(s){return s===void 0&&(s=this),Db(s)}},Ib={removeFromParentSizer(){var s=ro.getParentSizer(gameObject);return s&&s.remove(this),this}};var Vv=function(s,t){return this.childrenMap[s]=t,this},Bb=function(s){if(typeof s=="object"){var t=s;for(var s in this.childrenMap)if(this.childrenMap[s]===t)return delete this.childrenMap[s],this}return delete this.childrenMap[s],this},Gb=function(s,t){if(typeof s=="string"&&(s=s.split(".")),s.length!==0){var e=s.shift(),r=null;if(e.charAt(0)==="#")e=e.substring(1),r=this.getByName(e,t);else if(e.indexOf("[")===-1)this.childrenMap&&(r=this.childrenMap[e]);else{var i=e.match(Yb);if(i!=null&&this.childrenMap){var n=this.childrenMap[i[1]];n&&(r=n[i[2]])}}return s.length===0?r:r&&r.childrenMap?r.getElement(s):null}};const Yb=/(\S+)\[(\d+)\]/i,Nb={getInnerPadding(s){return Th(this.space,s)},setInnerPadding(s,t){return qs(this.space,s,t),this},getOuterPadding(s){return Th(this.getSizerConfig(this).padding,s)},setOuterPadding(s,t){return qs(this.getSizerConfig(this).padding,s,t),this},getChildOuterPadding(s,t){return typeof s=="string"&&(s=this.getElement(s)),Th(this.getSizerConfig(s).padding,t)},setChildOuterPadding(s,t,e){return typeof s=="string"&&(s=this.getElement(s)),qs(this.getSizerConfig(s).padding,t,e),this}};var yd=function(s){return s===void 0&&(s=Math.max(this.childrenWidth,this.minWidth)),s},Xb=function(s){var t,e;for(var r in this.sizerChildren)t=this.sizerChildren[r],t&&t.isRexSizer&&!t.ignoreLayout&&(e=this.getExpandedChildWidth(t,s),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},Td=function(s){var t=Math.max(this.childrenHeight,this.minHeight);return s===void 0&&(s=t),s},zb=function(s,t){},Vb=function(s){var t;return s.isRexSizer?t=Math.max(s.minWidth,s.childrenWidth):s.minWidth!==void 0?t=s.minWidth:t=Lt(s),t},Ub=function(s){var t;return s.isRexSizer?t=Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?t=s.minHeight:t=Ct(s),t},Wb=function(s,t){return t},Hb=function(s,t){return t},kb=function(){return 0},$b=function(){return 0},Zb=function(s){s===void 0&&(s=[]);for(var t=s.length,e=this.getChildrenSizers(s),r=s.length,i=t;i<r;i++)e[i].getAllChildrenSizers(s);return s},Kb=function(s){return s===void 0&&(s=[]),s};const Jb={getShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,e,r=0,i=t.length;r<i;r++)e=t[r],!(e.rexSizer&&e.rexSizer.hidden)&&s.push(e);return s},getAllShownChildren(s){s===void 0&&(s=[]);for(var t=[this];t.length>0;){var e=t.shift();e.rexSizer&&e.rexSizer.hidden||(e!==this&&s.push(e),e.isRexContainerLite&&t.push(...e.children))}return s}};var ao=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var s=this.getChildrenSizers(),t,e=0,r=s.length;e<r;e++)t=s[e],!t.ignoreLayout&&t.preLayout()},Qb=function(){var s=this.scaleX,t=this.scaleY,e=s===1&&t===1;return e||this.setScale(1),this.runLayout(),e||this.setScale(s,t),this},jb=function(s,t,e){if(this.ignoreLayout)return this;var r=!s;return r&&this.preLayout(),t=this.resolveWidth(t),r&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),e=this.resolveHeight(e),this.postResolveSize(t,e),this.resize(t,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},qb=function(){},_b=function(s,t,e){return this._anchor&&this._anchor.updatePosition(),this},yx=function(s){var t,e;for(var r in this.sizerChildren)t=this.sizerChildren[r],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(e=this.getExpandedChildWidth(t,s),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};class tw extends Qt{constructor(t,e){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var e,r;t.x!==void 0?(e=null,r=t.x):t.left!==void 0?(e=0,r=t.left):t.right!==void 0?(e=1,r=t.right):t.centerX!==void 0&&(e=.5,r=t.centerX);var i,n;t.y!==void 0?(i=null,n=t.y):t.top!==void 0?(i=0,n=t.top):t.bottom!==void 0?(i=1,n=t.bottom):t.centerY!==void 0&&(i=.5,n=t.centerY);var o,a;r!==void 0&&(r=r.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),o=parseFloat(r[0])/100,a=r[1]===""?0:parseFloat(r[1]));var h,u;n!==void 0&&(n=n.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),h=parseFloat(n[0])/100,u=n[1]===""?0:parseFloat(n[1]));var l=t.width,f,c;l!==void 0&&(l=l.split("%"),f=parseFloat(l[0])/100,c=l[1]===""?0:parseFloat(l[1]));var d=t.height,v,p;d!==void 0&&(d=d.split("%"),v=parseFloat(d[0])/100,p=d[1]===""?0:parseFloat(d[1])),this.setAlign(e,i),this.setPercentage(o,h),this.setOffset(a,u),this.setSizePercentage(f,v),this.setSizePadding(c,p);var g=t.onResizeCallback,m=t.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,m);var x=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return x!==void 0&&this.setUpdateViewportCallback(x,y),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,e){return this.alignX=t,this.alignY=e,this}setPercentage(t,e){return this.percentageX=t,this.percentageY=e,this}setOffset(t,e){return this.offsetX=t,this.offsetY=e,this}setSizePercentage(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}setSizePadding(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}setResizeCallback(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,e=this.onResizeCallbackScope,r=this.anchorWidth,i=this.anchorHeight;if(!(r===void 0&&i===void 0||!t)){var n=this.parent;r===void 0&&(r=n.width),i===void 0&&(i=n.height),e?t.call(e,r,i,n,this):t(r,i,n,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=io(this.scene,t,this.viewport);var e=this.viewport,r=this.onUpdateViewportCallback,i=this.onUpdateViewportCallbackScope;r&&(i?r.call(i,e,this.parent,this):r(e,this.parent,this))}}var ew=function(s){s===void 0&&(s={});var t=s.hasOwnProperty("width"),e=s.hasOwnProperty("height"),r=s.hasOwnProperty("onResizeCallback");return(t||e)&&!r&&(s.onResizeCallback=function(i,n,o){t&&o.setMinWidth(i),e&&o.setMinHeight(n),o.layout()}),this._anchor===void 0?this._anchor=new tw(this,s):this._anchor.resetFromJSON(s),this};const iw=Phaser.Utils.Objects.GetValue,or=Phaser.Utils.Objects.GetAdvancedValue,Uv=Phaser.Math.Linear;class Ua extends Xr{constructor(t,e){super(t,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(iw(t,"mode",0)),this.setScaleRange(or(t,"start",void 0),or(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=sw[t]),this.mode=t,this}setScaleRange(t,e){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=or(t,"x",this.parent.scaleX),this.startY=or(t,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=or(e,"x",void 0),this.endY=or(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var e=this.repeat;return this.mode===2&&e!==-1&&(e=(e+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(e),super.start(),this}updateGameObject(t,e){var r=e.t;e.isOddIteration&&(r=1-r),r=this.easeFn(r),this.hasScaleX&&(t.scaleX=Uv(this.startX,this.endX,r)),this.hasScaleY&&(t.scaleY=Uv(this.startY,this.endY,r))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const sw={stop:0,destroy:1,yoyo:2};var Tx=function(s,t,e,r,i){r===void 0&&(r="Cubic");var n,o;switch(e){case 0:case"x":n={x:0},o={x:s.scaleX};break;case 1:case"y":n={y:0},o={y:s.scaleY};break;default:n=0,o=s.scale;break}var a={mode:0,start:n,end:o,duration:t,ease:r};return i===void 0?i=new Ua(s,a):i.resetFromJSON(a),i.restart(),i},nw=function(s,t,e,r,i,n){r===void 0&&(r="Linear"),i instanceof Ua&&(n=i,i=void 0),i===void 0&&(i=!0);var o={};switch(o.mode=i?1:0,e){case 0:case"x":o.end={x:0};break;case 1:case"y":o.end={y:0};break;default:o.end=0;break}return o.duration=t,o.ease=r,n===void 0?n=new Ua(s,o):n.resetFromJSON(o),n.restart(),n},rw=function(s,t,e,r,i,n,o){e===void 0&&(e=1.2),r===void 0&&(r=0),n===void 0&&(n="Cubic");var a,h;switch(i){case 0:case"x":a={x:s.scaleX},h={x:e};break;case 1:case"y":a={y:s.scaleX},h={y:e};break;default:a=s.scaleX,h=e;break}var u={mode:2,start:a,end:h,duration:t/2,ease:n,repeat:r};return o===void 0?o=new Ua(s,u):o.resetFromJSON(u),o.restart(),o};const Jl=Phaser.Utils.Objects.IsPlainObject;var Ql=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=ro.getParentSizer(s);e&&e.resetChildPositionState(s)})};const Cd={popUp(s,t,e){if(Jl(s)){var r=s;s=r.duration,t=r.orientation,e=r.ease}var i=this._scaleBehavior===void 0;return this._scaleBehavior=Tx(this,s,t,e,this._scaleBehavior),i&&Ql(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(s,t,e){return this.popUp(s,t,e),Se(this._scaleBehavior)},scaleDownDestroy(s,t,e,r){if(Jl(s)){var i=s;s=i.duration,t=i.orientation,e=i.ease,r=i.destroy}var n=this._scaleBehavior===void 0;return this._scaleBehavior=nw(this,s,t,e,r,this._scaleBehavior),n&&Ql(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(s,t,e,r){return this.scaleDownDestroy(s,t,e,r),Se(this._scaleBehavior)},scaleDown(s,t,e){return this.scaleDownDestroy(s,t,e,!1),this},scaleDownPromise(s,t,e){return this.scaleDown(s,t,e),Se(this._scaleBehavior)},scaleYoyo(s,t,e,r,i){if(Jl(s)){var n=s;s=n.duration,t=n.peakValue,e=n.repeat,r=n.orientation,i=n.ease}var o=this._scaleBehavior===void 0;return this._scaleBehavior=rw(this,s,t,e,r,i,this._scaleBehavior),o&&Ql(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(s,t,e,r,i){return this.scaleYoyo(s,t,e,r,i),Se(this._scaleBehavior)}},aw=Phaser.Utils.Objects.GetValue,Wv=Phaser.Utils.Objects.GetAdvancedValue,ow=Phaser.Math.Linear;let mf=class extends Xr{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(aw(t,"mode",0)),this.setAlphaRange(Wv(t,"start",this.parent.alpha),Wv(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=hw[t]),this.mode=t,this}setAlphaRange(t,e){return this.alphaStart=t,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var r=e.t;e.isOddIteration&&(r=1-r),t.alpha=ow(this.alphaStart,this.alphaEnd,r)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const hw={stop:0,destroy:1,yoyo:2},lw=Phaser.Utils.Objects.IsPlainObject;var uw=function(s,t,e,r){var i,n;lw(e)?(i=e.start,n=e.end):n=e,i===void 0&&(i=0),n===void 0&&(n=1);var o={mode:0,start:i,end:n,duration:t};return r===void 0?r=new mf(s,o):r.resetFromJSON(o),r.restart(),r},fw=function(s,t,e,r){e instanceof mf&&(r=e,e=void 0),e===void 0&&(e=!0);var i={mode:e?1:0,end:0,duration:t};return r===void 0?r=new mf(s,i):r.resetFromJSON(i),r.restart(),r};const Hv=Phaser.Utils.Objects.IsPlainObject;var kv=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=ro.getParentSizer(s);e&&e.resetChildAlphaState(s)})};const dw={fadeIn(s,t){if(Hv(s)){var e=s;s=e.duration,t=e.alpha}var r=this._fade===void 0;return this._fade=uw(this,s,t,this._fade),r&&kv(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(s,t){return this.fadeIn(s,t),Se(this._fade)},fadeOutDestroy(s,t){if(Hv(s)){var e=s;s=e.duration,t=e.destroy}var r=this._fade===void 0;return this._fade=fw(this,s,t,this._fade),r&&kv(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(s,t){return this.fadeOutDestroy(s,t),Se(this._fade)},fadeOut(s){return this.fadeOutDestroy(s,!1),this},fadeOutPromise(s){return this.fadeOut(s),Se(this._fade)}},cw=Phaser.Utils.Objects.GetValue,hr=Phaser.Utils.Objects.GetAdvancedValue,$v=Phaser.Math.Linear;class Xh extends Xr{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(cw(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=hr(t,"x",void 0),r=hr(t,"y",void 0);this.setTargetPosition(e,r)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=vw[t]),this.mode=t,this}setTargetPosition(t,e){if(typeof t=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=e;else{var r=t;this.startX=hr(r,"startX",void 0),this.startY=hr(r,"startY",void 0),this.endX=hr(r,"endX",void 0),this.endY=hr(r,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var r=e.t;e.isOddIteration&&(r=1-r),r=this.easeFn(r),this.hasMoveX&&(t.x=$v(this.startX,this.endX,r)),this.hasMoveY&&(t.y=$v(this.startY,this.endY,r))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const vw={stop:0,destroy:1,yoyo:2};var zh=function(s,t){if(typeof s=="number")return s;var e=s[0],r=parseFloat(s.substr(2));switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r}},pw=function(s,t,e,r,i,n,o){n instanceof Xh&&(o=n,n=void 0),n===void 0&&(n=!1);var a={};return a.mode=n?1:0,e!==void 0&&(a.startX=s.x,a.endX=zh(e,s.x)),r!==void 0&&(a.startY=s.y,a.endY=zh(r,s.y)),a.duration=t,a.ease=i===void 0?"Linear":i,o===void 0?o=new Xh(s,a):o.resetFromJSON(a),o.restart(),o},gw=function(s,t,e,r,i,n,o){n instanceof Xh&&(o=n,n=void 0),n===void 0&&(n=!1);var a={};return a.mode=n?1:0,e!==void 0&&(a.startX=zh(e,s.x),a.endX=s.x),r!==void 0&&(a.startY=zh(r,s.y),a.endY=s.y),a.duration=t,a.ease=i===void 0?"Linear":i,o===void 0?o=new Xh(s,a):o.resetFromJSON(a),o.restart(),o};const Zv=Phaser.Utils.Objects.IsPlainObject,Kv=Phaser.Math.Distance.Between;var Jv=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var e=ro.getParentSizer(s);e&&e.resetChildPositionState(s)})};const mw={moveFrom(s,t,e,r,i){if(Zv(s)){var n=s;t=n.x,e=n.y,n.hasOwnProperty("speed")?s=Kv(t,e,this.x,this.y)*1e3/n.speed:s=n.duration,r=n.ease}var o=this._easeMove===void 0;return this._easeMove=gw(this,s,t,e,r,i,this._easeMove),o&&Jv(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(s,t,e,r,i){return this.moveFrom(s,t,e,r,i),Se(this._easeMove)},moveFromDestroy(s,t,e,r){return this.moveFrom(s,t,e,r,!0),this},moveFromDestroyPromise(s,t,e,r){return this.moveFromDestroy(s,t,e,r),Se(this._easeMove)},moveTo(s,t,e,r,i){if(Zv(s)){var n=s;t=n.x,e=n.y,n.hasOwnProperty("speed")?s=Kv(t,e,this.x,this.y)*1e3/n.speed:s=n.duration,r=n.ease}var o=this._easeMove===void 0;return this._easeMove=pw(this,s,t,e,r,i,this._easeMove),o&&Jv(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(s,t,e,r,i){return this.moveTo(s,t,e,r,i),Se(this._easeMove)},moveToDestroy(s,t,e,r){return this.moveTo(s,t,e,r,!0),this},moveToDestroyPromise(s,t,e,r){return this.moveToDestroy(s,t,e,r,!0),Se(this._easeMove)},moveStop(s){return this._easeMove?(this._easeMove.stop(s),this):this}},Ti=Phaser.Utils.Objects.GetValue;class oo extends nl{constructor(t,e){super(t,e),this.timer=new P0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Ti(t,"timer")),this.setEnable(Ti(t,"enable",!0)),this.setMode(Ti(t,"mode",1)),this.isRunning=Ti(t,"isRunning",!1),this.setMagnitudeMode(Ti(t,"magnitudeMode",1)),this.setDuration(Ti(t,"duration",500)),this.setMagnitude(Ti(t,"magnitude",10)),this.ox=Ti(t,"ox",void 0),this.oy=Ti(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=xw[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=yw[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,e){if(typeof t!="number"){var r=t;e=Ti(r,"magnitude",void 0),t=Ti(r,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,e){return this.start(t,e),this}update(t,e){if(!this.isRunning||!this.enable)return this;var r=this.parent;if(!r.active)return this;if(this.timer.update(t,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=r.x,this.oy=r.y);var i=this.magnitude;this.magnitudeMode===1&&(i*=1-this.timer.t);var n=Math.random()*Math.PI*2,o=Math.cos(n)*i,a=Math.sin(n)*i;r.setPosition(this.ox+o,this.oy+a)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y?this:(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const xw={effect:0,behavior:1},yw={constant:0,decay:1},Tw=Phaser.Utils.Objects.IsPlainObject;var Cw=function(s,t){t.on("complete",function(){s.emit("shake.complete",s)})};const Sw={shake(s,t,e){if(Tw(s)){var r=s;s=r.duration,t=r.magnitude,e=r.magnitudeMode}return this._shake===void 0&&(this._shake=new oo(this,{mode:0,magnitudeMode:1}),Cw(this,this._shake)),s!==void 0&&this._shake.setDuration(s),t!==void 0&&this._shake.setMagnitude(t),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(s,t){return this.shake(s,t),Se(this._shake)}},Qv=Phaser.Utils.Objects.IsPlainObject;class Ew extends Qt{constructor(t,e){super(t,e),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var e=this.easeTasks[t];return e===void 0&&(e=new Kn(this.parent),this.easeTasks[t]=e,e.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),e}easeTo(t,e,r,i){if(Qv(t)){var n=t;t=n.key,e=n.value,r=n.duration,i=n.ease;var o=n.speed;r===void 0&&o!==void 0&&(r=Math.abs(e-this.parent.data.values[t])/o*1e3)}r===void 0&&(r=1e3),i===void 0&&(i="Linear");var a=this.getEaseTask(t);return a.restart({key:t,to:e,duration:r,ease:i}),this}easeFrom(t,e,r,i){if(Qv(t)){var n=t;t=n.key,e=n.value,r=n.duration,i=n.ease;var o=n.speed;r===void 0&&o!==void 0&&(r=Math.abs(e-this.parent.data.values[t])/o*1e3)}r===void 0&&(r=1e3),i===void 0&&(i="Linear");var a=this.getEaseTask(t);return a.restart({key:t,from:e,duration:r,ease:i}),this}stopEase(t,e){e===void 0&&(e=!0);var r=this.easeTasks[t];return r&&r.stop(e),this}stopAll(t){t===void 0&&(t=!0);for(var e in this.easeTasks)this.stopEase(e,t);return this}}var Pw=function(s,t){t.on("complete",function(e){s.emit(`easedata.${e}.complete`,s),s.emit("easedata.complete",e,s)})};const Mw={easeDataTo(s,t,e,r){return this._easeData||(this._easeData=new Ew(this),Pw(this,this._easeData)),this._easeData.easeTo(s,t,e,r),this},easeDataToPromise(s,t,e,r){return this.easeDataTo(s,t,e,r),nx(this._easeData,`complete-${s}`)},stopEaseData(s,t){return this._easeData?(this._easeData.stopEase(s,t),this):this},stopAllEaseData(s){return this._easeData?(this._easeData.stopAll(s),this):this}};var Fn=function(s){Sx(s,!1)},Dn=function(s){Sx(s,!0)},Cx=function(s){if(!s)return!1;var t=hl(s);return!t.hidden},Sx=function(s,t){if(s){var e=hl(s);e.hidden=t;var r=Xi(s);r?r.setChildVisible(s,!t):s.setVisible(!t)}};const Aw={show(s){return s===void 0&&(s=this),Fn(s),this},hide(s){return s===void 0&&(s=this),Dn(s),this},isShow(s){return s===void 0&&(s=this),Cx(s)}};var Vh=function(s,t,e,r,i){if(!s||!s.getBounds||r&&!r(s,t,e))return!1;var n=Qf(s,!0);return!(!n.contains(t,e)||i&&!i(s,t,e))},Ex=function(s,t,e,r){if(t)return Vh(s,t.worldX,t.worldY,e,r);for(var i=s.scene.input.manager,n=i.pointersTotal,o=i.pointers,a=0;a<n;a++)if(t=o[a],Vh(s,t.worldX,t.worldY,e,r))return!0;return!1},Rw=function(s,t){return t===void 0&&(t=this),Ex(t,s)},ho=function(s){return s&&typeof s=="function"},se=function(s){return Object.prototype.toString.call(s)==="[object Array]"},xf=function(s,t,e,r,i){return Vh(s,t,e,Ow(r),Lw(i))},jv=function(s){var t=s.rexSizer&&s.rexSizer.hidden;return!t},Ow=function(s){return s?function(t,e,r){return jv(t)?(s(t,e,r),!0):!1}:jv},Lw=function(s){return s},bw=function(s,t,e,r,i){if(ho(e)||(i=e,e=void 0,r=void 0),i===void 0&&(this.sizerChildren?i=this.sizerChildren:i=this.children),se(i)){for(var n,o=0,a=i.length;o<a;o++)if(n=i[o],xf(n,s,t,e,r))return n}else{var n;for(var h in i)if(n=i[h],xf(n,s,t,e,r))return n}return null},an=function(s,t,e){!s||t===void 0&&e===void 0||(s.resize?(t===void 0&&(t=s.width),e===void 0&&(e=s.height),s.resize(t,e)):(t!==void 0&&(s.displayWidth=t),e!==void 0&&(s.displayHeight=e)))},ww=function(s,t){return t===void 0?t={}:t===!0&&(t=Fw),t.x=s.x,t.y=s.y,t.scaleX=s.scaleX,t.scaleY=s.scaleY,t.width=s.width,t.height=s.height,t.displayWidth=s.displayWidth,t.displayHeight=s.displayHeight,t},Fw={},lo=function(s){this.sizerEventsEnable&&(ww(s,this.getChildPrevState(s)),this.layoutedChildren.push(s))},uo=function(s,t,e,r,i,n,o,a){so(s,t,e,r,i,n),o!==void 0&&(s.x+=o),a!==void 0&&(s.y+=a),this.resetChildPositionState(s),this.sizerEventsEnable&&s.emit("sizer.postlayout",s,this)};const Dw=Phaser.Display.Align.CENTER;var Iw=function(){if(this.backgroundChildren!==void 0)for(var s=this.backgroundChildren,t=this.left,e=this.top,r=this.width,i=this.height,n,o,a,h,u,l,f,c=0,d=s.length;c<d;c++)n=s[c],o=n.rexSizer,!o.hidden&&(a=o.padding,lo.call(this,n),h=t+a.left,u=e+a.top,l=r-a.left-a.right,f=i-a.top-a.bottom,an(n,l,f),uo.call(this,n,h,u,l,f,Dw))},Bw=function(s,t){var e=typeof s;if(e==="string"){var r=s;if(s=this.getElement(r),!s)return console.error(`Can get element '${r}'`),this}else(s===void 0||e!="object")&&(t=s,s=this);return t===void 0&&(t=!0),s.input&&s.input._dragTopmostSizer?s.input.draggable=t:t&&(s.setInteractive(),s.scene.input.setDraggable(s),s.on("drag",function(i,n,o){var a=this.getTopmostSizer();a.x+=n-s.x,a.y+=o-s.y,a.emit("sizer.drag",i,n,o)},this).on("dragstart",function(i,n,o){var a=this.getTopmostSizer();a.emit("sizer.dragstart",i,n,o)},this).on("dragend",function(i,n,o,a){var h=this.getTopmostSizer();h.emit("sizer.dragend",i,n,o,a)},this),s.input._dragTopmostSizer=!0),this};const Px={onClick(s,t,e,r){return s?(typeof s=="function"&&(r=e,e=t,t=s,s=this),s._click===void 0&&(s._click=new zr(s,r)),s._click.on("click",t,e),this):this},offClick(s,t,e){return typeof s=="function"&&(e=t,t=s,s=this),s._click===void 0?this:(s._click.off("click",t,e),this)},enableClick(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._click===void 0?this:(s._click.setEnable(t),this)},disableClick(s){return s&&typeof s!="object"&&(s=this),s._click===void 0?this:(s._click.setEnable(!1),this)}},Yo=Phaser.Utils.Objects.GetValue;class Gw extends Qt{constructor(t,e){super(t,e),this._enable=void 0;var r=Yo(e,"inputConfig",void 0);r&&t.setInteractive(r),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Yo(t,"enable",!0)),this.setMode(Yo(t,"mode",1)),this.setClickInterval(Yo(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var e=this.parent.scene;e.input.off("pointerdown",this.onPress,this),e.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=Yw[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var e=this.parent,r=e.input?m0:Ex;return r(e,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,e){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,e),this;var r=this.lastClickTime;return r!==void 0&&t-r<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,e),this)}}const Yw={press:0,pointerdown:0,release:1,pointerup:1},Nw={onClickOutside(s,t,e,r){return s?(typeof s=="function"&&(r=e,e=t,t=s,s=this),s._clickOutside===void 0&&(s._clickOutside=new Gw(s,r)),s._clickOutside.on("clickoutside",t,e),this):this},offClickOutside(s,t,e){return typeof s=="function"&&(e=t,t=s,s=this),s._clickOutside===void 0?this:(s._clickOutside.off("clickoutside",t,e),this)},enableClickOutside(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._clickOutside===void 0?this:(s._clickOutside.setEnable(t),this)},disableClickOutside(s){return s&&typeof s!="object"&&(s=this),s._clickOutside===void 0?this:(s._clickOutside.setEnable(!1),this)}},Xw=["next","exit","enter"];let Mx=class{constructor(t){var e=K(t,"states",void 0);e&&this.addStates(e);var r=K(t,"extend",void 0);if(r)for(var i in r)(!this.hasOwnProperty(i)||this[i]===void 0)&&(this[i]=r[i]);var n=K(t,"eventEmitter",void 0),o=K(t,"EventEmitterClass",void 0);this.setEventEmitter(n,o),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(K(t,"enable",!0)),this.start(K(t,"start",void 0));var e=K(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,r=this[e];r&&r.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var i="enter_"+this._state,n=this[i];n&&n.call(this),this.emit(i,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(typeof e=="string"?t=e:t=e.call(this)),this.goto(t),this}get stateProperties(){return Xw}addState(t,e){typeof t!="string"&&(e=t,t=e.name);for(var r=this.stateProperties,i=0,n=r.length;i<n;i++){var o=r[i],a=e[o];a&&(this[`${o}_${t}`]=a)}return this}addStates(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;e++)this.addState(t[e]);else for(var i in t)this.addState(i,t[i]);return this}runMethod(t,e,r,i,n,o){var a=this[t+"_"+this.state];if(a){var h=arguments.length;switch(h){case 1:return a.call(this);case 2:return a.call(this,e);case 3:return a.call(this,e,r);case 4:return a.call(this,e,r,i);case 5:return a.call(this,e,r,i,n);case 6:return a.call(this,e,r,i,n,o)}for(var u=new Array(h-1),l=1;l<h;l++)u[l-1]=arguments[l];return a.apply(this,u)}}};Object.assign(Mx.prototype,Nr);var jl=function(s,t,e,r,i){i===void 0&&(i=!1);var n=s._events[t];if(!n)return!1;for(var o=0,a=n.length;o<a;o++){var h=n[o];if(h.fn===e&&h.context===r&&h.once===i)return!0}return!1};const zw=["next","exit","enter","update","preupdate","postupdate"];class jn extends Mx{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=K(t,"scene",void 0),this}get stateProperties(){return zw}update(t,e){this.runMethod("update",t,e)}preupdate(t,e){this.runMethod("preupdate",t,e)}postupdate(t,e){this.runMethod("postupdate",t,e)}startUpdate(t){t||(t=this._scene);var e=t.sys.events;return jl(e,"update",this.update,this)?this:(this._scene=t,e.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var e=t.sys.events;return jl(e,"preupdate",this.preupdate,this)?this:(this._scene=t,e.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var e=t.sys.events;return jl(e,"postupdate",this.postupdate,this)?this:(this._scene=t,e.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}class Vw extends jn{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const ql=Phaser.Utils.Objects.GetValue;class yf extends Qt{constructor(t,e){super(t,e),this._enable=void 0,this.cooldown=new Vw,this.parent.setInteractive(ql(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouching=!1,this.setEnable(ql(t,"enable",!0)),this.setCooldown(ql(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,e,r){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,e){this.cooldown.update(t,e),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}const Uw={onTouching(s,t,e,r){return s?(typeof s=="function"&&(r=e,e=t,t=s,s=this),s._inTouching===void 0&&(s._inTouching=new yf(s,r)),s._inTouching.on("intouch",t,e),this):this},offTouching(s,t,e){return typeof s=="function"&&(e=t,t=s,s=this),s._inTouching===void 0?this:(s._inTouching.off("intouch",t,e),this)},enableTouching(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._inTouching===void 0?this:(s._inTouching.setEnable(t),this)},disableTouching(s){return s&&typeof s!="object"&&(s=this),s._inTouching===void 0?this:(s._inTouching.setEnable(!1),this)}};var Ax=function(s,t,e){for(var r,i=0,n=s.length;i<n;i++)if(r=s[i],!!xf(r,t,e))return r.pointToChild(t,e);return null},ns=function(s,t,e,r,i,n,o){var a;i===void 0?a=r:a=Ax(e,r,i),a&&s.emit(t,a,n,o)};const Ww=Phaser.Utils.Objects.GetValue;var Hw=function(s){var t=Ww(s,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",kw,this))},kw=function(s,t,e,r){var i=this._childrenInteractive;ns(i.eventEmitter,`${i.eventNamePrefix}down`,i.targetSizers,s.worldX,s.worldY,s,r)};const $w=Phaser.Utils.Objects.GetValue;var Zw=function(s){var t=$w(s,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",Kw,this))},Kw=function(s,t,e,r){var i=this._childrenInteractive;ns(i.eventEmitter,`${i.eventNamePrefix}up`,i.targetSizers,s.worldX,s.worldY,s,r)};const Jw=Phaser.Utils.Objects.GetValue;var Qw=function(s){var t=Jw(s,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",qv,this).on("pointerover",qv,this).on("pointerout",jw,this))},qv=function(s,t,e,r){var i=this._childrenInteractive,n=Ax(i.targetSizers,s.worldX,s.worldY),o=i.lastOverChild;n&&o&&n===o||(i.lastOverChild=n,ns(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,o,void 0,s,r),ns(i.eventEmitter,`${i.eventNamePrefix}over`,i.targetSizers,n,void 0,s,r))},jw=function(s,t){var e=this._childrenInteractive,r=e.lastOverChild;e.lastOverChild=null,ns(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,r,void 0,s,t)};const qw=Phaser.Utils.Objects.GetValue;var _w=function(s){var t=qw(s,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var e=this._childrenInteractive;this._click=new zr(this,t),this._click.on("click",function(r,i,n,o){ns(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,n.worldX,n.worldY,n,o)},this)}};const _l=Phaser.Utils.Objects.GetValue;class Sd extends nl{constructor(t,e){var r=c0(t);r===t&&(t=void 0),super(r,e),this.gameObject=t,t&&t.setInteractive(_l(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(_l(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(_l(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=tu,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){if(this.enable&&this.pointer===void 0){var r=this.bounds?this.bounds.contains(t.x,t.y):!0;r&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=_v,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;e&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=tu,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,r=this.pointer===t;!r&&e||(r&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===_v&&this.onDragEnd(),this.pointer=void 0,this.tracerState=tu,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=tF,this}}const tu=0,_v=1,tF="IDLE",Tn=Phaser.Utils.Objects.GetValue,eF=Phaser.Math.Distance.Between;class Ed extends Sd{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.stop(),r.tapsCount=0,r.x=0,r.y=0,r.worldX=0,r.worldY=0},exit:function(){var n=r.lastPointer;r.x=n.x,r.y=n.y,r.worldX=n.worldX,r.worldY=n.worldY}},BEGIN:{enter:function(){r.start(),r.tapsCount=0,r.emit("tappingstart",r,r.gameObject,r.lastPointer)}},RECOGNIZED:{enter:function(){r.start(),r.emit("tap",r,r.gameObject,r.lastPointer),r.emit(`${r.tapsCount}tap`,r,r.gameObject,r.lastPointer)}}},init:function(){this.state=Cn},eventEmitter:!1};this.setRecongizedStateObject(new jn(i))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Tn(t,"time",250)),this.setTapInterval(Tn(t,"tapInterval",200)),this.setDragThreshold(Tn(t,"threshold",9)),this.setTapOffset(Tn(t,"tapOffset",10));var e=Tn(t,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(Tn(t,"maxTaps",void 0)),this.setMinTaps(Tn(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Cn:this.state=lr;break;case lr:var t=this.lastPointer,e=eF(t.upX,t.upY,t.x,t.y);e>this.tapOffset&&(this.state=ur,this.state=lr);break;case ur:this.state=lr;break}}onDragEnd(){this.state===lr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=ur))}onDrag(){this.state!==Cn&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Cn)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===lr){var r=this.lastPointer;if(r.isDown){var i=t-r.downTime;i>this.holdTime&&(this.state=Cn)}else{var n=t-r.upTime;n>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=ur:this.state=Cn)}}}postUpdate(t,e){!this.isRunning||!this.enable||this.state===ur&&(this.state=Cn)}get isTapped(){return this.state===ur}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return e===void 0&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}}const Cn="IDLE",lr="BEGIN",ur="RECOGNIZED",tp=Phaser.Utils.Objects.GetValue;class Pd extends Sd{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.x=0,r.y=0,r.worldX=0,r.worldY=0},exit:function(){var n=r.lastPointer;r.x=n.x,r.y=n.y,r.worldX=n.worldX,r.worldY=n.worldY}},BEGIN:{enter:function(){r.start()},exit:function(){r.stop()}},RECOGNIZED:{enter:function(){r.emit("pressstart",r,r.gameObject,r.lastPointer)},exit:function(){r.emit("pressend",r,r.gameObject,r.lastPointer)}}},init:function(){this.state=No},eventEmitter:!1};this.setRecongizedStateObject(new jn(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(tp(t,"threshold",9)),this.setHoldTime(tp(t,"time",251)),this}onDragStart(){this.state=ep,this.holdTime===0&&(this.state=eu)}onDragEnd(){this.state=No}onDrag(){this.state!==No&&this.pointer.getDistance()>this.dragThreshold&&(this.state=No)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===ep){var r=t-this.pointer.downTime;r>=this.holdTime&&(this.state=eu)}}get isPressed(){return this.state===eu}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const No="IDLE",ep="BEGIN",eu="RECOGNIZED";Phaser.Utils.Objects.GetValue;const iF=Phaser.Math.Distance.Between,sF=Phaser.Math.Angle.Between,nF={getDt:function(){var s=T0(this.scene);return s},getVelocity:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=iF(t.x,t.y,s.x,s.y),r=e/(this.getDt()*.001);return r},getVelocityX:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(s.x-t.x),r=e/(this.getDt()*.001);return r},getVelocityY:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(s.y-t.y),r=e/(this.getDt()*.001);return r},getVelocityAngle:function(){var s=this.pointer.position,t=this.pointer.prevPosition,e=sF(t.x,t.y,s.x,s.y);return e}},rF={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var aF=function(s,t,e){switch(e===void 0?e={}:e===!0&&(e=oF),e.left=!1,e.right=!1,e.up=!1,e.down=!1,s=(s+360)%360,t){case 0:s<180?e.down=!0:e.up=!0;break;case 1:s>90&&s<=270?e.left=!0:e.right=!0;break;case 2:s>45&&s<=135?e.down=!0:s>135&&s<=225?e.left=!0:s>225&&s<=315?e.up=!0:e.right=!0;break;case 3:s>22.5&&s<=67.5?(e.down=!0,e.right=!0):s>67.5&&s<=112.5?e.down=!0:s>112.5&&s<=157.5?(e.down=!0,e.left=!0):s>157.5&&s<=202.5?e.left=!0:s>202.5&&s<=247.5?(e.left=!0,e.up=!0):s>247.5&&s<=292.5?e.up=!0:(s>292.5&&s<=337.5&&(e.up=!0),e.right=!0);break}return e},oF={};const iu=Phaser.Utils.Objects.GetValue,hF=Phaser.Math.RadToDeg;class ll extends Sd{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.x=0,r.y=0,r.worldX=0,r.worldY=0},exit:function(){var n=r.lastPointer;r.x=n.x,r.y=n.y,r.worldX=n.worldX,r.worldY=n.worldY}},BEGIN:{enter:function(){r.validDrag=!1}},RECOGNIZED:{enter:function(){r.start(),r.updateDirectionStates(),r.emit("swipe",r,r.gameObject,r.lastPointer)},exit:function(){r.stop(),r.clearDirectionStates()}}},init:function(){this.state=su},eventEmitter:!1};this.setRecongizedStateObject(new jn(i)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(iu(t,"threshold",10)),this.setVelocityThreshold(iu(t,"velocityThreshold",1e3)),this.setDirectionMode(iu(t,"dir","8dir")),this}onDragStart(){this.state=ip}onDragEnd(){this.state=su}onDrag(){this.state===ip&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=nu))}postUpdate(t,e){!this.isRunning||!this.enable||this.state===nu&&(this.state=su)}get isSwiped(){return this.state===nu}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=rF[t]),this.dirMode=t,this}updateDirectionStates(){var t=hF(this.getVelocityAngle());return aF(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(ll.prototype,nF);const su="IDLE",ip="BEGIN",nu="RECOGNIZED",ru=Phaser.Utils.Objects.GetValue,lF=Phaser.Utils.Array.SpliceOne,uF=Phaser.Math.Distance.Between,fF=Phaser.Math.Angle.Between;class Rx{constructor(t,e){var r=t.input.manager.pointersTotal-1;r<2&&t.input.addPointer(2-r),this.scene=t,this.setEventEmitter(ru(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(ru(t,"enable",!0)),this.bounds=ru(t,"bounds",void 0),this.tracerState=Xo,this.pointers.length=0,ui(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,ui(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(e){var r=this.pointers.indexOf(t);if(r===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Xo:this.tracerState=ra,this.onDrag1Start();break;case ra:this.tracerState=Wi,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(e){var r=this.pointers.indexOf(t);if(r!==-1)switch(delete this.movedState[t.id],lF(this.pointers,r),this.tracerState){case ra:this.tracerState=Xo,this.onDrag1End();break;case Wi:this.tracerState=ra,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,r=this.pointers.indexOf(t)!==-1;if(!(!r&&e)){if(r&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case ra:this.onDrag1();break;case Wi:this.onDrag2();break}}}}dragCancel(){return this.tracerState===Wi&&this.onDrag2End(),this.pointers.length=0,ui(this.movedState),this.tracerState=Xo,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Wi)return 0;var t=this.pointers[0],e=this.pointers[1];return uF(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==Wi)return 0;var t=this.pointers[0],e=this.pointers[1];return fF(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,r=t.prevPosition;na.x=e.x-r.x,na.y=e.y-r.y}else na.x=0,na.y=0;return na}get centerX(){if(this.tracerState!==Wi)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==Wi)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==Wi)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==Wi)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=dF,this}}Object.assign(Rx.prototype,Nr);var na={};const Xo=0,ra=1,Wi=2,dF="IDLE";Phaser.Utils.Objects.GetValue;const cF=Phaser.Math.RotateAround;var sp=function(s,t,e,r){return cF(s,t,e,r),s.rotation+=r,s},vF=function(s,t,e,r){return r===void 0?r={}:r===!0&&(r=pF),e.getWorldPoint(s,t,r),r},pF={},gF=function(s,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var e=this.movementCenterX,r=this.movementCenterY,i=vF(this.centerX,this.centerY,t,!0),n=i.x,o=i.y,a=this.rotation;if(Array.isArray(s))for(var h=s,u=0,l=h.length;u<l;u++)s=h[u],s.x+=e,s.y+=r,sp(s,n,o,a);else s.x+=e,s.y+=r,sp(s,n,o,a);return this};const mF=Phaser.Utils.Objects.GetValue,au=Phaser.Math.Angle.WrapDegrees,np=Phaser.Math.Angle.ShortestBetween,ou=Phaser.Math.RadToDeg,xF=Phaser.Math.DegToRad;let yF=class extends Rx{constructor(t,e){super(t,e);var r=this,i={states:{IDLE:{enter:function(){r.prevAngle=void 0,r.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){r.emit("rotatestart",r)},exit:function(){r.emit("rotateend",r)}}},init:function(){this.state=rp},eventEmitter:!1};this.setRecongizedStateObject(new jn(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(mF(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=au(ou(this.angleBetween)),this.state=ap,this.dragThreshold===0&&(this.state=zo)}onDrag2End(){this.state=rp}onDrag2(){switch(this.state){case ap:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=au(ou(this.angleBetween));this.angle=np(this.prevAngle,t),this.prevAngle=t,this.state=zo}break;case zo:var t=au(ou(this.angleBetween));this.angle=np(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===zo}get rotation(){return xF(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}};var TF={spinObject:gF};Object.assign(yF.prototype,TF);const rp="IDLE",ap="BEGIN",zo="RECOGNIZED",CF=Phaser.Utils.Objects.GetValue;var SF=function(s){var t=CF(s,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var e=this._childrenInteractive;this._tap=new Ed(this,t),this._tap.on("tap",function(r,i,n){ns(e.eventEmitter,`${e.eventNamePrefix}${r.tapsCount}tap`,e.targetSizers,r.worldX,r.worldY,n)},this)}};const EF=Phaser.Utils.Objects.GetValue;var PF=function(s){var t=EF(s,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var e=this._childrenInteractive;this._press=new Pd(this,t),this._press.on("pressstart",function(r,i,n){ns(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,r.worldX,r.worldY,n)},this).on("pressend",function(r,i,n){ns(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,r.worldX,r.worldY,n)},this)}};const MF=Phaser.Utils.Objects.GetValue;var AF=function(s){var t=MF(s,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var e=this._childrenInteractive;this._swipe=new ll(this,t),this._swipe.on("swipe",function(r,i,n){var o=r.left?"left":r.right?"right":r.up?"up":"down";ns(e.eventEmitter,`${e.eventNamePrefix}swipe${o}`,e.targetSizers,r.worldX,r.worldY,n)},this)}};const hu=Phaser.Utils.Objects.GetValue;var RF=function(s,t){return s.setInteractive(),s._childrenInteractive={targetSizers:hu(t,"targets",[s]),eventEmitter:hu(t,"eventEmitter",s),eventNamePrefix:hu(t,"inputEventPrefix","child.")},Hw.call(s,t),Zw.call(s,t),Qw.call(s,t),_w.call(s,t),SF.call(s,t),PF.call(s,t),AF.call(s,t),s},OF=function(s){return RF(this,s),this},LF=function(){for(var s=this.getAllChildren([this]),t=0,e=s.length;t<e;t++){var r=s[t];r.emit.apply(r,arguments)}return this},Ox={getSizerConfig:pb,getChildPrevState:gb,pushIntoBounds:mb,drawBounds:Lb,resolveWidth:yd,resolveChildrenWidth:Xb,resolveHeight:Td,postResolveSize:zb,getChildWidth:Vb,getChildHeight:Ub,getExpandedChildWidth:Wb,getExpandedChildHeight:Hb,getChildrenWidth:kb,getChildrenHeight:$b,addChildrenMap:Vv,addElement:Vv,removeChildrenMap:Bb,getElement:Gb,getAllChildrenSizers:Zb,getChildrenSizers:Kb,preLayout:ao,layout:Qb,runLayout:jb,layoutChildren:qb,runWidthWrap:yx,layoutBackgrounds:Iw,postLayout:_b,setAnchor:ew,isInTouching:Rw,pointToChild:bw,setDraggable:Bw,setChildrenInteractive:OF,broadcastEvent:LF};Object.assign(Ox,Nb,Fb,Ib,ro,Cd,dw,mw,Sw,Mw,Px,Nw,Uw,Aw,Jb);const fr=Phaser.Utils.Objects.GetValue;let qn=class extends Vi{constructor(t,e,r,i,n,o){super(t,e,r,2,2),this.isRexSizer=!0,this.setMinSize(i,n),this.setName(fr(o,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var a=fr(o,"anchor",void 0);a&&this.setAnchor(a),this.setInnerPadding(fr(o,"space",0));var h=fr(o,"draggable",!1);h&&this.setDraggable(h),this.setSizerEventsEnable(fr(o,"sizerEvents",!1)),this.setDirty(!0),fr(o,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(this.scene){if(t)for(var e=this.getAllChildrenSizers([this]),r=0,i=e.length;r<i;r++)e[r].sizerEventsEnable=!1;super.destroy(t),ui(this.backgroundChildren),ui(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,e){return this.setMinWidth(t).setMinHeight(e),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Lt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Lt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Lt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Ct(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Ct(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Ct(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}};Object.assign(qn.prototype,Ox);var bF=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,e,r,i;for(var n in t)e=t[n],r=e.rexSizer.padding,i=this.getChildWidth(e)+r.left+r.right,s=Math.max(i,s);return s+this.space.left+this.space.right},wF=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,e,r,i;for(var n in t)e=t[n],i=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:Ct(e),r=e.rexSizer.padding,i+=r.top+r.bottom,s=Math.max(i,s);return s+this.space.top+this.space.bottom},FF=function(s,t){t===void 0&&(t=this.width);var e,r=s.rexSizer;if(r.expandWidth){var i=t-this.space.left-this.space.right,n=r.padding;e=i-n.left-n.right}return e},DF=function(s,t){t===void 0&&(t=this.height);var e,r=s.rexSizer;if(r.expandHeight){var i=t-this.space.top-this.space.bottom,n=r.padding;e=i-n.top-n.bottom}return e},IF=function(s){s===void 0&&(s=[]);var t=this.sizerChildren,e;for(var r in t)e=t[r],e.isRexSizer&&s.push(e);return s},Md=function(s,t){s.width<s.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${s.constructor.name}`),s.height<s.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${s.constructor.name}`)},BF=function(){var s,t,e,r=this.innerLeft,i=this.innerTop,n=this.innerWidth,o=this.innerHeight,a,h,u,l,f,c,d=this.sizerChildren;for(var v in d)s=d[v],!s.rexSizer.hidden&&(t=s.rexSizer,e=t.padding,lo.call(this,s),s.isRexSizer?(s.runLayout(this,this.getExpandedChildWidth(s),this.getExpandedChildHeight(s)),Md(s,this)):(f=void 0,c=void 0,t.expandWidth&&(f=n-e.left-e.right),t.expandHeight&&(c=o-e.top-e.bottom),an(s,f,c)),a=r+e.left,u=n-e.left-e.right,h=i+e.top,l=o-e.top-e.bottom,uo.call(this,s,a,h,u,l,t.align,t.alignOffsetX,t.alignOffsetY))};const op=Phaser.Utils.Objects.IsPlainObject,Hi=Phaser.Utils.Objects.GetValue,hp=Phaser.Display.Align.CENTER,GF=Phaser.Utils.String.UUID;var YF=function(s,t,e,r,i,n,o,a,h){if(no.call(this,s),op(t)){var l=t;t=Hi(l,"key",void 0),e=Hi(l,"align",hp),a=Hi(l,"offsetX",0),h=Hi(l,"offsetY",0),r=Hi(l,"padding",0),i=Hi(l,"expand",!0),s.isRexSizer||(n=Hi(l,"minWidth",s._minWidth),o=Hi(l,"minHeight",s._minHeighted))}var u=t!==void 0;u||(t=GF()),typeof e=="string"&&(e=Vr[e]),e===void 0&&(e=hp),a===void 0&&(a=0),h===void 0&&(h=0),r===void 0&&(r=0),i===void 0&&(i=!0),s.isRexSizer||(n===void 0&&(n=s._minWidth),o===void 0&&(o=s._minHeight));var l=this.getSizerConfig(s);return l.align=e,l.alignOffsetX=a,l.alignOffsetY=h,l.padding=Ur(r),op(i)?(l.expandWidth=Hi(i,"width",!1),l.expandHeight=Hi(i,"height",!1)):(l.expandWidth=i,l.expandHeight=i),s.isRexSizer||(l.expandWidth&&(s.minWidth=n===void 0?Lt(s):n),l.expandHeight&&(s.minHeight=o===void 0?Ct(s):o)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=s,u&&this.addChildrenMap(t,s),this};const NF={add:YF},XF=Phaser.Utils.Array.Remove,zF=Vi.prototype.remove;var ul=function(s,t){return this.isBackground(s)&&XF(this.backgroundChildren,s),zF.call(this,s,t),!t&&this.sizerEventsEnable&&(s.emit("sizer.remove",s,this),this.emit("remove",s,this)),this};const VF=Vi.prototype.clear;var fl=function(s){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!s&&this.sizerEventsEnable,e;if(t&&(e=this.getChildren([])),VF.call(this,s),t)for(var r,i=0,n=e.length;i<n;i++)r=e[i],r.emit("sizer.remove",r,this),this.emit("remove",r,this);return this};const UF={remove(s,t){var e;if(typeof s=="string"){if(e=s,s=this.sizerChildren[e],!s)return this}else{if(this.getParentSizer(s)!==this)return this;e=this.childToKey(s)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),ul.call(this,s,t),this},removeAll(s){for(var t in this.sizerChildren)this.remove(t,s);return this},clear(s){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return fl.call(this,s),this}};var Lx={getChildrenWidth:bF,getChildrenHeight:wF,getExpandedChildWidth:FF,getExpandedChildHeight:DF,getChildrenSizers:IF,layoutChildren:BF};Object.assign(Lx,NF,UF);var dl=function(s,t){if(Array.isArray(s))return s.indexOf(t);for(var e in s)if(s[e]===t)return e;return null};const lp=Phaser.Utils.Objects.IsPlainObject,dr=Phaser.Utils.Objects.GetValue;class Fs extends qn{constructor(t,e,r,i,n,o){lp(e)?(o=e,e=dr(o,"x",0),r=dr(o,"y",0),i=dr(o,"width",void 0),n=dr(o,"height",void 0)):lp(i)&&(o=i,i=dr(o,"width",void 0),n=dr(o,"height",void 0)),super(t,e,r,i,n,o),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var e=t;if(this.sizerChildren.hasOwnPropery(e))return e}else return dl(this.sizerChildren,t);return null}}Object.assign(Fs.prototype,Lx);var WF=Phaser.Math.Distance.Between,Uh=function(s,t,e){var r=s.width/2;return WF(r,r,t,e)<=r};const HF=Phaser.Math.Angle.Between,kF=Phaser.Math.Angle.Normalize;var up=function(s,t,e){if(this.enable&&s.isDown){var r=this.sizerChildren.knob;if(Uh(r,t,e)){var i=r.width/2,n=r.startAngle,o=HF(i,i,t,e),a=r.anticlockwise?n-o:o-n,h=kF(a)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-h)<.1?this.value=h:this.easeValueTo(h)}}},$F=function(){var s=this.sizerChildren.knob;s.on("pointerdown",up,this).on("pointermove",up,this).setInteractive()};const fp=Phaser.Math.Angle.Between,ZF=Phaser.Math.Angle.Wrap;var KF=function(s,t,e){if(!(!this.enable||this.panPointer)){var r=this.sizerChildren.knob;Uh(r,t,e)&&bx.call(this,s)}},JF=function(s,t,e){if(this.enable&&s.isDown){var r=this.sizerChildren.knob;switch(this.panState){case Ad:Uh(r,t,e)&&bx.call(this,s);break;case Fx:Uh(r,t,e)?jF.call(this):wx.call(this);break}}},QF=function(s,t,e){!this.enable||this.panPointer!==s||wx.call(this)},bx=function(s){this.panPointer=s,this.panState=Fx},wx=function(){this.panPointer=void 0,this.panState=Ad},jF=function(){var s=this.panPointer.prevPosition,t=this.panPointer.position,e=this.sizerChildren.knob,r=fp(e.x,e.y,s.x,s.y),i=fp(e.x,e.y,t.x,t.y),n=e.anticlockwise?r-i:i-r,o=ZF(n)/(Math.PI*2);this.stopEaseValue(),this.value+=o};const Ad=0,Fx=1;var qF=function(){var s=this.sizerChildren.knob;s.on("pointerdown",KF,this).on("pointermove",JF,this).on("pointerup",QF,this).setInteractive(),this.panPointer=void 0,this.panState=Ad},_F=function(s,t){return this.textFormatCallback=s,this.textFormatCallbackScope=t,this},Dx=function(s){s===void 0&&(s=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(s):t=this.textFormatCallback.call(this.textFormatCallbackScope,s),t},tD=function(s){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(Dx.call(this,s)),t.layout&&t.layout()),this};const eD={setTextFormatCallback:_F,getFormatText:Dx,updateText:tD},Ci=Phaser.Utils.Objects.GetValue,iD=Phaser.Math.Snap.To;class sD extends Qn(Fs){constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexKnob",this.bootProgressBase(e);var r=Ci(e,"background",void 0),i=Ci(e,"text",void 0);r&&this.addBackground(r),i&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Ci(e,"textFormatCallback",void 0),Ci(e,"textFormatCallbackScope",void 0)));var n=new gx(t,e);n.setDepth(Ci(e,"knobDepth",0)),n._value=-1,t.add.existing(n),this.add(n,"knob"),i&&(this.add(i,"text","center",0,!1),t.children.moveBelow(n,i)),this.addChildrenMap("background",r),this.addChildrenMap("knob",n),this.addChildrenMap("text",i),this.setEnable(Ci(e,"enable",void 0)),this.setGap(Ci(e,"gap",void 0)),this.setValue(Ci(e,"value",0),Ci(e,"min",void 0),Ci(e,"max",void 0));var o=Ci(e,"input",0);switch(typeof o=="string"&&(o=nD[o]),o){case 0:qF.call(this);break;case 1:$F.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=iD(t,this.gap));var e=this.value;this.sizerChildren.knob.value=t;var r=this.value;e!==r&&(this.updateText(),this.eventEmitter.emit("valuechange",r,e,this.eventEmitter))}}const nD={pan:0,drag:0,click:1,none:-1};Object.assign(sD.prototype,eD);const rD={arc:sl,circle:rf,curve:EE,ellipse:PE,line:ME,lines:Rr,rectangle:HE,roundRectangle:Yh,triangle:$E},dp=Phaser.Utils.Objects.GetValue,aD=Phaser.Utils.Objects.IsPlainObject,oD=function(){for(var s=this.getShapes(),t=0,e=s.length;t<e;t++)s[t].lineStyle().fillStyle()},hD={createShape(s,t){var e=rD[s],r=new e;return t&&r.setName(t),r},buildShapes(s){var t=dp(s,"create",void 0);if(aD(t)){var e=t;for(var r in e){var i=e[r];switch(typeof i){case"number":for(var n=0;n<i;n++)this.addShape(this.createShape(r));break;case"string":this.addShape(this.createShape(r,i));break;default:for(var o=i,n=0,a=o.length;n<a;n++)this.addShape(this.createShape(r,o[n]));break}}}else if(Array.isArray(t))for(var e=t,n=0,a=e.length;n<a;n++){var h=e[n];this.addShape(this.createShape(h.type,h.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(dp(s,"update"))},setUpdateShapesCallback(s){return s===void 0&&(s=oD),this.dirty=this.dirty||this.updateCallback!==s,this.updateCallback=s,this},updateShapes(){this.updateCallback.call(this)}},cp=Phaser.GameObjects.Components.TransformMatrix,lD=Phaser.Math.TransformXY;var uD=function(s,t,e,r,i){r===void 0&&(r=s.scene.cameras.main),i===void 0?i={}:i===!0&&(i=fD);var n=r.scrollX,o=r.scrollY,a=t+n*s.scrollFactorX-n,h=e+o*s.scrollFactorY-o;return s.parentContainer?(Vo===void 0&&(Vo=new cp,vp=new cp),s.getWorldTransformMatrix(Vo,vp),Vo.applyInverse(a,h,i)):lD(a,h,s.x,s.y,s.rotation,s.scaleX,s.scaleY,i),i.x+=s.displayOriginX,i.y+=s.displayOriginY,i},Vo,vp,fD={};const aa=Phaser.Utils.Objects.GetValue,dD=Phaser.Utils.Objects.IsPlainObject;class Ix extends Zn{constructor(t,e,r,i,n,o){dD(e)&&(o=e,e=aa(o,"x",0),r=aa(o,"y",0),i=aa(o,"width",2),n=aa(o,"height",2)),super(t,e,r,i,n),this.type=aa(o,"type","rexCustomShapes"),this.buildShapes(o)}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}worldToLocalXY(t,e,r,i){return typeof r=="boolean"&&(i=r,r=void 0),uD(this,t,e,r,i)}}Object.assign(Ix.prototype,hD);const oa=Phaser.Utils.Objects.GetValue,cD=Phaser.Utils.Objects.IsPlainObject;class A9 extends Qn(Ix){constructor(t,e,r,i,n,o){cD(e)&&(o=e,e=oa(o,"x",0),r=oa(o,"y",0),i=oa(o,"width",2),n=oa(o,"height",2)),o===void 0&&(o={}),o.type||(o.type="rexCustomProgress"),super(t,e,r,i,n,o),this.bootProgressBase(o),this.setValue(oa(o,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}const vD={setTransitionStartCallback(s,t){return this.onStartCallback=s,this.onStartCallbackScope=t,this},setTransitionProgressCallback(s,t){return this.onProgressCallback=s,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(s,t){return this.onCompleteCallback=s,this.onCompleteCallbackScope=t,this}},pD=Phaser.Utils.Objects.IsPlainObject,ai=Phaser.Utils.Objects.GetValue;var gD={out:0,in:1};const mD={setTransitionDirection(s){return typeof s=="string"&&(s=gD[s]),this.dir=s,this},setDuration(s){return this.duration=s,this},setEaseFunction(s){return this.easeFunction=s,this},setNextTexture(s,t){return this.nextImage.setTexture(s,t),this},transit(s,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),pD(s)){var e=s;s=ai(e,"key",void 0),t=ai(e,"frame",void 0),this.setDuration(ai(e,"duration",this.duration)).setEaseFunction(ai(e,"ease",this.easeFunction)).setTransitionDirection(ai(e,"dir",this.dir));var r=ai(e,"mask",void 0);r&&this.setMaskGameObject(r),this.setMaskEnable(r===!0);var i=ai(e,"onStart",void 0),n=ai(e,"onProgress",void 0),o=ai(e,"onComplete",void 0);(i!==void 0||n!==void 0||o!==void 0)&&this.setTransitionStartCallback(i,ai(e,"onStartScope",void 0)).setTransitionProgressCallback(n,ai(e,"onProgressScope",void 0)).setTransitionCompleteCallback(o,ai(e,"onCompleteScope",void 0))}return this.setNextTexture(s,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Kn(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var pp=function(s,t,e,r,i){switch(this.clear().fillStyle(16777215),this.shape){case 1:var n=Math.min(s,t)/2;this.fillCircle(-s*(r-.5),-t*(i-.5),n+e);break;default:this.fillRect(-(s*r)-e,-(t*i)-e,s+2*e,t+2*e);break}};const xD=Phaser.GameObjects.Graphics;class Tf extends xD{constructor(t,e,r){e===void 0&&(e=0),typeof e=="string"&&(e=yD[e]),r===void 0&&(r=0),super(t.scene),this.parent=t,this.shape=e,this.padding=r,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){var r=this.parent;return t===void 0&&(t=r.x),e===void 0&&(e=r.y),super.setPosition(t,e),this}resize(t,e,r){var i=this.parent;return t===void 0&&(t=i.width),e===void 0&&(e=i.height),r===void 0&&(r=this.padding),this.widthSave===t&&this.heightSave===e&&this.paddingSave===r?this:(this.widthSave=t,this.heightSave=e,this.paddingSave=r,this.originXSave=i.originX,this.originYSave=i.originY,pp.call(this,t,e,r,i.originX,i.originY),this)}setOrigin(t,e){e===void 0&&(e=t);var r=this.parent;return t===void 0&&(t=r.originX),e===void 0&&(e=r.originY),this.originXSave===t&&this.originYSave===e?this:(this.originXSave=t,this.originYSave=e,pp.call(this,this.widthSave,this.heightSave,this.paddingSave,t,e),this)}}const yD={rectangle:0,circle:1},TD={setMaskGameObject(s){if(!s)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(s===!0&&this.maskGameObject instanceof Tf)return this;if(this.maskGameObject===s)return this;this.removeMaskGameObject()}return s===!0&&(s=new Tf(this)),this.maskGameObject=s,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(s,t,e){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(s.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):s.clearMask(),this},setCurrentImageMaskEnable(s,t){return this.setImageMaskEnable(this.currentImage,s,t),this},setNextImageMaskEnable(s,t){return this.setImageMaskEnable(this.nextImage,s,t),this},setCellImagesMaskEnable(s,t){for(var e=this.getCellImages(),r=0,i=e.length;r<i;r++)this.setImageMaskEnable(e[r],s,t);return this},setMaskEnable(s,t){return this.setImageMaskEnable(this.backImage,s,t),this.setImageMaskEnable(this.frontImage,s,t),this.setCellImagesMaskEnable(s,t),this}};var CD=function(s,t){t===void 0&&(t=",");var e;return s==="__BASE"?e=function(r,i){return`${r}${t}${i}`}:e=function(r,i){return`${s}_${r}${t}${i}`},e},SD=function(s,t,e,r,i,n){e==null&&(e="__BASE"),n||(n=CD(e,n));for(var o=s.sys.textures.get(t),a=o.source[0].isRenderTexture,h=typeof e=="object"?e:o.get(e),u=h.width,l=h.height,f,c,d,v=u/r,p=l/i,g=0,m=0,x=0;x<i;x++){g=0;for(var y=0;y<r;y++)d=n(y,x),f=g+h.cutX,a?c=l-m-p+h.cutY:c=m+h.cutY,o.add(d,0,f,c,v,p),g+=v;m+=p}return{getFrameNameCallback:n,cellWidth:v,cellHeight:p,columns:r,rows:i}};const xs=Phaser.Utils.Objects.GetValue,ED=Phaser.GameObjects.Image,PD=Phaser.Utils.Objects.IsPlainObject,MD=Phaser.Math.RotateAround;var AD=function(s,t,e,r){PD(t)&&(r=t,t=xs(r,"columns",1),e=xs(r,"rows",1));var i=xs(r,"onCreateImage");if(!i){var n=xs(r,"ImageClass",ED);i=function(z,V,W){return new n(z,0,0,V,W)}}for(var o=xs(r,"originX",.5),a=xs(r,"originY",.5),h=xs(r,"add",!0),u=xs(r,"align",h),l=xs(r,"objectPool",void 0),f=s.scene,c=s.texture,d=s.frame,v=SD(f,c,d,t,e),p=v.getFrameNameCallback,g=s.scaleX,m=s.scaleY,x=s.rotation,y=s.getTopLeft(),T=y.x,C=y.y,S=[],E=v.cellWidth*g,P=v.cellHeight*m,M=0;M<e;M++)for(var R=0;R<t;R++){var A,O=p(R,M);l&&l.length>0?A=l.pop().setTexture(c,O):A=i(f,c,O),h&&f.add.existing(A);var b=T+E*R,w=C+P*M,I=b+o*E,Y=w+a*P;u&&(A.setOrigin(o,a).setPosition(I,Y).setScale(g,m).setRotation(x),MD(A,T,C,x)),S.push(A)}return S};const RD={gridCutImage(s,t,e,r){r===void 0&&(r={}),r.objectPool=this.imagesPool;for(var i=AD(s,t,e,r),n,o=0,a=i.length;o<a;o++)n=i[o],n.setVisible(!0),this.add(n);return this.cellImages=i,this.setChildLocalVisible(s,!1),i},gridCutCurrentImage(s,t,e){return this.gridCutImage(this.currentImage,s,t,e)},gridCutNextImage(s,t,e){return this.gridCutImage(this.nextImage,s,t,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var s=this.cellImages[0].texture,t=this.cellImages,e,r,i=0,n=t.length;i<n;i++)e=t[i],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),r=e.frame.name,e.setTexture(),s.remove(r);return this.imagesPool.push(...t),t.length=0,this}},OD={setFlipX(s){return this.flipX=s,this},setFlipY(s){return this.flipY=s,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(s,t){return this.flipX=s,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var Bx={};Object.assign(Bx,vD,mD,TD,RD,OD);var LD=function(s,t,e,r){},bD=function(s,t,e,r){s.setChildLocalAlpha(t,1-r).setChildLocalAlpha(e,r)},wD=function(s,t,e,r){s.setChildLocalAlpha(t,1)};const gp=Phaser.Utils.Objects.IsPlainObject,ne=Phaser.Utils.Objects.GetValue,FD=Phaser.Math.Clamp;class DD extends Vi{constructor(t,e,r,i,n,o){gp(e)?(o=e,e=ne(o,"x",0),r=ne(o,"y",0),i=ne(o,"key",void 0),n=ne(o,"frame",void 0)):gp(n)&&(o=n,n=void 0);var a=ne(o,"back",void 0),h=ne(o,"front",void 0);a||(a=t.add.image(e,r,i,n)),h||(h=t.add.image(e,r,i,n));var u=ne(o,"width",h.width),l=ne(o,"height",h.height);super(t,e,r,u,l),a.setVisible(!1),this.addMultiple([a,h]),this.type="rexTransitionImage",this.backImage=a,this.frontImage=h,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var f=ne(o,"onStart",void 0),c=ne(o,"onProgress",void 0),d=ne(o,"onComplete",void 0),v=ne(o,"dir",0);f===void 0&&c===void 0&&d===void 0&&(f=LD,c=bD,d=wD,v=0),this.setTransitionStartCallback(f,ne(o,"onStartScope",void 0)).setTransitionProgressCallback(c,ne(o,"onProgressScope",void 0)).setTransitionCompleteCallback(d,ne(o,"onCompleteScope",void 0)).setTransitionDirection(v).setDuration(ne(o,"duration",1e3)).setEaseFunction(ne(o,"ease","Linear"));var p=ne(o,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){this.scene&&(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=FD(t,0,1),this._t!==t){this._t=t;var e=this.currentImage,r=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),lu(this.onStartCallback,this.onStartCallbackScope,this,e,r,t)),lu(this.onProgressCallback,this.onProgressCallbackScope,this,e,r,t),t===1){lu(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,r,t);var i=r.texture.key,n=r.frame.name;this.frontImage.setTexture(i,n),this.backImage.setTexture(i,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,e){return super.setOrigin(t,e),this.backImage.setOrigin(t,e),this.frontImage.setOrigin(t,e),this.maskGameObject&&this.maskGameObject.setOrigin(t,e),this}setTexture(t,e){return this.frontImage.setTexture(t,e),this.backImage.setTexture(t,e).setVisible(!1),this}}var lu=function(s,t,e,r,i,n){s&&(t?s.call(t,e,r,i,n):s(e,r,i,n))};Object.assign(DD.prototype,Bx);Phaser.GameObjects.Rectangle;const uu=Phaser.Utils.Objects.GetValue;class ID extends Qt{constructor(t,e){super(t,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setHitAreaMode(uu(t,"hitAreaMode",0)),this.setEnable(uu(t,"enable",!0)),this.setStopMode(uu(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,e,r,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointerup",function(t,e,r,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointermove",function(t,e,r,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointerover",function(t,e,r,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointerout",function(t,e){this.stopAllLevels&&e.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=BD[t]);var e=this.parent;return e.input&&e.removeInteractive(),t===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var BD={default:0,fullWindow:1};Phaser.Utils.Objects.GetValue;var GD=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,e=this.sizerChildren,r,i,n;if(this.orientation===0)for(var o=this.space.item,a=!0,h=0,u=e.length;h<u;h++)r=e[h],!r.rexSizer.hidden&&(r.rexSizer.proportion===0||s?n=this.getChildWidth(r):n=0,i=r.rexSizer.padding,n+=i.left+i.right,a?a=!1:n+=o,t+=n);else for(var h=0,u=e.length;h<u;h++)r=e[h],r.hasOwnProperty("rexSizer")&&(r.rexSizer.hidden||(i=r.rexSizer.padding,n=this.getChildWidth(r)+i.left+i.right,t=Math.max(n,t)));return t+this.space.left+this.space.right},YD=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,e=this.sizerChildren,r,i,n;if(this.orientation===0)for(var o=0,a=e.length;o<a;o++)r=e[o],!r.rexSizer.hidden&&(i=r.rexSizer.padding,n=this.getChildHeight(r)+i.top+i.bottom,t=Math.max(n,t));else for(var h=this.space.item,u=!0,o=0,a=e.length;o<a;o++)r=e[o],r.hasOwnProperty("rexSizer")&&(r.rexSizer.hidden||(r.rexSizer.proportion===0||s?n=this.getChildHeight(r):n=0,i=r.rexSizer.padding,n+=i.top+i.bottom,u?u=!1:n+=h,t+=n));return t+this.space.top+this.space.bottom},ND=function(s,t){t===void 0&&(t=this.width);var e,r=s.rexSizer,i=r.padding;if(this.orientation===0)r.proportion>0&&this.proportionLength>0&&(e=r.proportion*this.proportionLength);else if(r.expand){var n=t-this.space.left-this.space.right;e=n-i.left-i.right}return e},XD=function(s,t){t===void 0&&(t=this.height);var e,r=s.rexSizer,i=r.padding;if(this.orientation===0){if(r.expand){var n=t-this.space.top-this.space.bottom;e=n-i.top-i.bottom}}else r.proportion>0&&this.proportionLength>0&&(e=r.proportion*this.proportionLength);return e},zD=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,r=0,i=t.length;r<i;r++)e=t[r],e.isRexSizer&&s.push(e);return s},VD=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,ao.call(this),this};const UD=Phaser.Math.Wrap;var WD=function(){for(var s=this.sizerChildren,t,e,r,i=this.innerLeft,n=this.innerTop,o=this.innerWidth,a=this.innerHeight,h=i,u=n,l,f,c,d,v,p,g,m=this.startChildIndex,x=0,y=s.length;x<y;x++)m===0?g=x:g=UD(x+m,0,y),this.rtl&&(g=y-g-1),t=s[g],!t.rexSizer.hidden&&(e=t.rexSizer,r=e.padding,lo.call(this,t),t.isRexSpace?(v=0,p=0):(v=this.getExpandedChildWidth(t),p=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,v,p),Md(t,this)):an(t,v,p),v===void 0&&(v=Lt(t)),p===void 0&&(p=Ct(t)),this.orientation===0?(l=h+r.left,e.proportion===0||this.proportionLength===0?c=v:c=e.proportion*this.proportionLength,f=u+r.top,d=a-r.top-r.bottom):(l=h+r.left,c=o-r.left-r.right,f=u+r.top,e.proportion===0||this.proportionLength===0?d=p:d=e.proportion*this.proportionLength),uo.call(this,t,l,f,c,d,e.align),this.orientation===0?h+=c+r.left+r.right+this.space.item:u+=d+r.top+r.bottom+this.space.item)},HD=function(t){var t=yd.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var e=t-this.childrenWidth;e>0?(e=t-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t},kD=function(t){var t=Td.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var e=t-this.childrenHeight;e>0?(e=t-this.getChildrenHeight(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t};const $D=Phaser.GameObjects.Zone;class ZD extends $D{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var KD=function(s,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var r=-1,i=1/0,n=0,o=e.length;n<o;n++){var a=e[n],h;this.orientation===0?h=Math.abs(a.left-s):h=Math.abs(a.top-t),i>h&&(i=h,r=n)}var a=e[e.length-1],h;return this.orientation===0?h=Math.abs(a.right-s):h=Math.abs(a.bottom-t),i>h&&(i=h,r=n+1),r};const Gx=Phaser.Utils.Objects.IsPlainObject,Xs=Phaser.Utils.Objects.GetValue,mp=Phaser.Display.Align.CENTER,JD={min:0,full:-1};var fu=function(s,t,e,r,i,n,o,a,h){no.call(this,s);var u=s.isRexSpace,l=typeof t;if(t===null)return this;if(l!=="number"){if(l==="string")t=JD[t];else if(Gx(t)){var f=t;t=Xs(f,"proportion",void 0),e=Xs(f,"align",mp),r=Xs(f,"padding",0),i=Xs(f,"expand",!1),n=Xs(f,"key",void 0),o=Xs(f,"index",void 0),s.isRexSizer||(a=Xs(f,"minWidth",void 0),h=Xs(f,"minHeight",void 0))}}typeof e=="string"&&(e=Vr[e]),t===void 0&&(t=u?1:0),e===void 0&&(e=mp),r===void 0&&(r=0),i===void 0&&(i=!1),a===void 0&&(u?a=0:s.isRexSizer||(a=s._minWidth)),h===void 0&&(u?h=0:s.isRexSizer||(h=s._minHeight));var f=this.getSizerConfig(s);return f.proportion=t,f.align=e,f.padding=Ur(r),f.expand=i,o===void 0||o>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(o,0,s),s.isRexSizer||(t>0&&(this.orientation===0?s.minWidth=a===void 0?Lt(s):a:s.minHeight=h===void 0?Ct(s):h),i&&(this.orientation===0?s.minHeight=h:s.minWidth=a)),n!==void 0&&this.addChildrenMap(n,s),this};const QD={add:fu,addSpace(s){return this.insertSpace(void 0,s),this},insertSpace(s,t){return t===void 0&&(t=1),fu.call(this,new ZD(this.scene),{proportion:t,minWidth:0,minHeight:0,index:s}),this},insert(s,t,e,r,i,n,o,a){return Gx(e)&&(e.index=s),fu.call(this,t,e,r,i,n,o,s,a),this},insertAtPosition(s,t,e,r,i,n,o,a,h){var u=KD.call(this,s,t);return u===-1&&(u=void 0),this.insert(u,e,r,i,n,o,a,h),this}},jD=Phaser.Utils.Array.Remove,qD={remove(s,t){return this.getParentSizer(s)!==this?this:(jD(this.sizerChildren,s),ul.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,fl.call(this,s),this}},_D={getChildAlign(s){return this.getSizerConfig(s).align},setChildAlign(s,t){return typeof t=="string"&&(t=Vr[t]),this.getSizerConfig(s).align=t,this}},tI={getChildProportion(s){return this.getSizerConfig(s).proportion},setChildProportion(s,t){return this.getSizerConfig(s).proportion=t,this}},eI={getChildExpand(s){return this.getSizerConfig(s).expand},setChildExpand(s,t){return this.getSizerConfig(s).expand=t,this}};var Yx={getChildrenWidth:GD,getChildrenHeight:YD,getExpandedChildWidth:ND,getExpandedChildHeight:XD,getChildrenSizers:zD,preLayout:VD,layoutChildren:WD,resolveWidth:HD,resolveHeight:kD};Object.assign(Yx,QD,qD,_D,tI,eI);var iI=function(){for(var s=0,t=this.sizerChildren,e,r,i=0,n=t.length;i<n;i++)e=t[i],!e.rexSizer.hidden&&(r=e.rexSizer.proportion,r>0&&(s+=r));return s},sI={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},cl=function(s){return typeof s=="string"&&(s=sI[s]),s};const du=Phaser.Utils.Objects.IsPlainObject,oi=Phaser.Utils.Objects.GetValue;class wt extends qn{constructor(t,e,r,i,n,o,a){du(e)?(a=e,e=oi(a,"x",0),r=oi(a,"y",0),i=oi(a,"width",void 0),n=oi(a,"height",void 0),o=oi(a,"orientation",0)):du(i)?(a=i,i=oi(a,"width",void 0),n=oi(a,"height",void 0),o=oi(a,"orientation",0)):du(o)&&(a=o,o=oi(a,"orientation",0)),o===void 0&&(o=0),super(t,e,r,i,n,a),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(o),this.setItemSpacing(oi(a,"space.item",0)),this.setStartChildIndex(oi(a,"startChildIndex",0)),this.setRTL(oi(a,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=cl(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=iI.call(this)),this._childrenProportion}}Object.assign(wt.prototype,Yx);const nI=Phaser.GameObjects.GameObject;var Nx=function(s){return s instanceof nI},_s=function(s,t){var e=new kn(s,t);return s.add.existing(e),e};const rI=Phaser.GameObjects.Text;var Xx=function(s,t){var e=new rI(s,0,0,"",t);return s.add.existing(e),e};const aI=Phaser.GameObjects.Image;var Wh=function(s,t){var e=new aI(s,0,0,"");return s.add.existing(e),e},Rd=function(s,t){return t=t?pi(t):{},t.background=_s(s,t.background),t.text=Xx(s,t.text),t.icon!==null&&(t.icon=Wh(s,t.icon)),t.action!==null&&(t.action=Wh(s,t.action)),t},Dr=function(s,t,e,r){var i=new Tf(t,e,r);if(s&&!s.isRexSizer){var n=i.createGeometryMask();s.setMask(n),this.once("destroy",function(){s.setMask(),n.destroy()})}return this.pin(i),i},Uo=function(s,t,e){if(s){var r=t==null,i=e==null;return r&&i||(r||(s.displayWidth=t),i||(s.displayHeight=e),r&&(s.scaleX=s.scaleY),i&&(s.scaleY=s.scaleX)),s}};const de=Phaser.Utils.Objects.GetValue;let fo=class extends wt{constructor(t,e){super(t,e),this.type="rexLabel";var r=de(e,"background",void 0),i=de(e,"icon",void 0),n=de(e,"iconMask",void 0),o=de(e,"text",void 0),a=de(e,"action",void 0),h=de(e,"actionMask",void 0),u=de(e,"align",void 0),l=de(e,"space.icon",0),f=de(e,"space.text",0);if(r&&this.addBackground(r),(u==="right"||u==="bottom"||u==="center")&&this.addSpace(),i){var c;this.orientation===0?(o||a)&&(c={right:l}):(o||a)&&(c={bottom:l}),this.add(i,{proportion:0,padding:c}),n&&(n=Dr.call(this,i,i,1))}var d=de(e,"iconSize");if(this.setIconSize(de(e,"iconWidth",d),de(e,"iconHeight",d)),o){var v=de(e,"expandTextWidth",!1),p=de(e,"expandTextHeight",!1),g,c,m;this.orientation===0?(g=v?1:0,a&&(c={right:f}),m=p):(g=p?1:0,a&&(c={bottom:f}),m=v),this.add(o,{proportion:g,expand:m,padding:c})}a&&(this.add(a),h&&(h=Dr.call(this,a,a,1)));var x=de(e,"actionSize");this.setActionSize(de(e,"actionWidth",x),de(e,"actionHeight",x)),u==="center"&&this.addSpace(),this.addChildrenMap("background",r),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",n),this.addChildrenMap("text",o),this.addChildrenMap("action",a),this.addChildrenMap("actionMask",h)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var e=this.childrenMap.text;e!==void 0&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setIconTexture(t,e){var r=this.childrenMap.icon;return r===void 0?this:(r.setTexture(t,e),Uo(r,this.iconWidth,this.iconHeight),this.resetChildScaleState(r),this)}setTexture(t,e){return this.setIconTexture(t,e),this}setIconSize(t,e){return this.iconWidth=t,this.iconHeight=e,this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}setActionTexture(t,e){var r=this.childrenMap.action;return r===void 0?this:(r.setTexture(t,e),Uo(r,this.actionWidth,this.actionHeight),this.resetChildScaleState(r),this)}get actionTexture(){var t=this.childrenMap.action;if(t!==void 0)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t!==void 0)return t.frame}setActionSize(t,e){return this.actionWidth=t,this.actionHeight=e,this}preLayout(){super.preLayout(),Uo(this.childrenMap.icon,this.iconWidth,this.iconHeight),Uo(this.childrenMap.action,this.actionWidth,this.actionHeight)}runLayout(t,e,r){if(this.ignoreLayout)return this;super.runLayout(t,e,r);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,e){super.resize(t,e);var r=this.childrenMap.iconMask;r&&r.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}resetDisplayContent(t){t===void 0&&(t={});var e=t.text||"";this.setText(e);var r=this.childrenMap.icon;r&&(t.icon===void 0?this.hide(r):this.show(r),t.iconSize&&r.setDisplaySize(t.iconSize,t.iconSize),this.setIconTexture(t.icon,t.iconFrame));var i=this.childrenMap.action;return i&&(t.action===void 0?this.hide(i):this.show(i),t.actionSize&&i.setDisplaySize(t.actionSize,t.actionSize),this.setActionTexture(t.action,t.actionFrame)),this}};var zx=function(s,t){t=Rd(s,t);var e=new fo(s,t);return s.add.existing(e),e},co=function(s,t){t=t?pi(t):{};var e=new w2(s,t);return s.add.existing(e),e};const ki=Phaser.Utils.Objects.GetValue,oI=Phaser.Display.Color,hI=Phaser.Display.Color.ColorToRGBA,lI=Phaser.Display.Color.HSVToRGB,Sn=Phaser.Math.Clamp;class uI extends wt{constructor(t,e){e===void 0&&(e={}),e.orientation=0,super(t,e),this.type="rexColorComponents",this.colorObject=new oI;var r=ki(e,"background",void 0),i=ki(e,"formatLabel",void 0);Nx(i)||(i=zx(t,i).resetDisplayContent());var n=[];if(e.inputText0&&e.inputText1&&e.inputText2)n.push(e.inputText0),n.push(e.inputText1),n.push(e.inputText2);else for(var o=ki(e,"inputText"),a=0;a<3;a++){var h=co(t,o).setMaxLength(3).setNumberInput();n.push(h)}r&&this.addBackground(r);var l=ki(e,"proportion.formatLabel",0),u=!!i.isRexContainerLite,f=ki(e,"expand.formatLabel",u);this.add(i,{proportion:l,expand:f});for(var l=ki(o,"width")===void 0?1:0,f=ki(o,"height")===void 0,a=0,c=n.length;a<c;a++)this.add(n[a],{proportion:l,expand:f});this.addChildrenMap("background",r),this.addChildrenMap("formatLabel",i),this.addChildrenMap("components",n),this.onClick(i,this.toggleColorFormat,this);for(var a=0,c=n.length;a<c;a++)n[a].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var d=ki(e,"valuechangeCallback",null);if(d!==null){var v=ki(e,"valuechangeCallbackScope",void 0);this.on("valuechange",d,v)}i.setText("RGB"),this.setValue(ki(e,"value",16777215))}get value(){return this._value}set value(t){t=Sn(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(hI(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,e,r,i;return this.colorFormat==="RGB"?(e=this.colorObject.red,r=this.colorObject.green,i=this.colorObject.blue):(e=Math.floor(this.colorObject.h*360),r=Math.floor(this.colorObject.s*100),i=Math.floor(this.colorObject.v*100)),t[0].setValue(e),t[1].setValue(r),t[2].setValue(i),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var e=Sn(t[0].value,0,255),r=Sn(t[1].value,0,255),i=Sn(t[2].value,0,255);this.colorObject.setTo(e,r,i)}else{var n=Sn(t[0].value,0,359)/360,o=Sn(t[1].value,0,100)/100,a=Sn(t[2].value,0,100)/100;this.colorObject.setFromRGB(lI(n,o,a))}return this}}var fI=function(s,t){if(t===!1)return null;if(Nx(t))return t;var e=new kn(s,t);return s.add.existing(e),e.expandSquare=!0,e};const xp=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],dI=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var Cf={},yp;for(var Wo=0,cI=xp.length;Wo<cI;Wo++)yp=xp[Wo].toLowerCase(),Cf[yp]=dI[Wo];var vI=function(s){return s=s.toLowerCase(),Cf.hasOwnProperty(s)?Cf[s]:null},pI=function(s){return typeof s!="string"||(s.startsWith("#")?s=parseInt(s.substring(1),16):s.startsWith("0x")?s=parseInt(s.substring(2),16):s=vI(s)),s};const gI=Phaser.Utils.String.Pad;var Tp=function(s,t){t===void 0&&(t="0x");var e=s.toString(16).toUpperCase();return e=gI(e,6,0,1),e=t+e,e},mI=function(s,t){s&&(s.setTint?s.setTint(t):s.setFillStyle&&s.setFillStyle(t))};const zs=Phaser.Utils.Objects.GetValue,xI=Phaser.Math.Clamp;let yI=class extends wt{constructor(t,e){e===void 0&&(e={}),e.orientation=0,super(t,e),this.type="rexColorInputLite";var r=zs(e,"background",void 0),i=fI(t,zs(e,"swatch")),n=zs(e,"inputText"),o=co(t,n);r&&this.addBackground(r),i&&this.add(i,{proportion:0,expand:!1});var a=zs(n,"width")===void 0?1:0,h=zs(n,"height")===void 0;this.add(o,{proportion:a,expand:h}),this.addChildrenMap("background",r),this.addChildrenMap("swatch",i),this.addChildrenMap("inputText",o),o.on("close",function(){this.setValue(o.value)},this);var u=zs(e,"valuechangeCallback",null);if(u!==null){var l=zs(e,"valuechangeCallbackScope",void 0);this.on("valuechange",u,l)}this.setValue(zs(e,"value",0))}preLayout(){var t=this.childrenMap.swatch;t&&t.expandSquare&&t.resize(1,1)}postResolveSize(t,e){var r=this.childrenMap.swatch;if(r&&r.expandSquare){var i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(r,"top")-this.getChildOuterPadding(r,"bottom");r.resize(i,i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=pI(t),t==null){var r=this.childrenMap.inputText;r.setText(Tp(this._value));return}}else t=xI(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var e=this.childrenMap.swatch;e&&mI(e,t);var r=this.childrenMap.inputText;r.setText(Tp(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}};var TI={setCreateColorPickerBackgroundCallback(s){return this.colorPickerCreateBackgroundCallback=s,this},setColorPickerHPalettePosition(s){return this.colorPickerHPalettePosition=s,this},setColorPickerExpandDirection(s){return typeof s=="string"&&(s=CI[s]),this.colorPickerExpandDirection=s,this},setColorPickerEaseInDuration(s){return s===void 0&&(s=0),this.colorPickerEaseInDuration=s,this},setColorPickerEaseOutDuration(s){return s===void 0&&(s=0),this.colorPickerEaseOutDuration=s,this},setColorPickerTransitInCallback(s){return this.colorPickerTransitInCallback=s,this},setColorPickerTransitOutCallback(s){return this.colorPickerTransitOutCallback=s,this},setColorPickerBounds(s){return this.colorPickerBounds=s,this},setColorPickerWidth(s){return this.colorPickerWidth=s,this},setColorPickerHeight(s){return this.colorPickerHeight=s,this},setColorPickerSize(s,t){return this.setColorPickerWidth(s).setColorPickerHeight(t),this},setColorPickerSpace(s){return s===void 0&&(s={}),this.colorPickerSpace=s,this},setColorComponentsHeight(s){return this.colorComponentsHeight=s,this},setColorComponentsFormatLabelConfig(s){return this.colorComponentsFormatLabelConfig=s,this},setColorComponentsInputTextConfig(s){return this.colorComponentsInputTextConfig=s,this},setColorComponentsSpace(s){return s===void 0&&(s={}),this.colorComponentsSpace=s,this}};const CI={down:0,up:1},Vx=Phaser.Display.Color,Hh=Phaser.Math.Percent;var SI=function(s,t,e){e===void 0&&(e=!1);var r=s.width,i=s.height,n=new Vx;if(e)for(var o=0;o<i;o++){var a=Hh(o,0,i);n.setFromHSV(a,1,1),t.fillStyle=n.rgba,t.fillRect(0,o,r,1)}else for(var h=0;h<r;h++){var a=Hh(h,0,r);n.setFromHSV(a,1,1),t.fillStyle=n.rgba,t.fillRect(h,0,1,i)}},EI=function(s,t,e){for(var r=s.width,i=s.height,n=t.getImageData(0,0,r,i),o=n.data,a=new Vx,h=0;h<i;h++)for(var u=0;u<r;u++){var l=Hh(u,0,r),f=1-Hh(h,0,i);a.setFromHSV(e,l,f);var c=(h*r+u)*4;o[c]=a.red,o[c+1]=a.green,o[c+2]=a.blue,o[c+3]=255}t.putImageData(n,0,0)};const PI=Phaser.Display.Color,Cp=Phaser.Math.Percent,MI=Phaser.Display.Color.ColorToRGBA,AI=Phaser.Display.Color.HSVToRGB;class RI extends $n{constructor(t,e,r,i,n,o){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=2),n===void 0&&(n=2),super(t,e,r,i,n),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new PI,this.setOrientation(o),this.setSize(i,n)}setOrientation(t){return this.orientation=cl(t),this}updateTexture(){return SI(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,e){return t===void 0?this.hue:(this.orientation===0?this.hue=Cp(t,0,this.width):this.hue=Cp(e,0,this.height),this.hue)}getColor(t,e){if(t===void 0)return this.color;var r=this.getHue(t,e);return this.colorObject.setFromRGB(AI(r,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,e){return e===void 0?e={}:e===!0&&(cu===void 0&&(cu={}),e=cu),this.colorObject.setFromRGB(MI(t)),this.orientation===0?(e.x=this.width*this.colorObject.h,e.y=this.height/2):(e.x=this.width/2,e.y=this.height*this.colorObject.h),e}}var cu=void 0,OI=Phaser.Math.RotateAround,Ux=function(s,t,e,r){r===void 0?r={}:r===!0&&(vu===void 0&&(vu={}),r=vu),t-=s.width*s.originX,e-=s.height*s.originY;var i={x:t*s.scaleX,y:e*s.scaleY};return OI(i,0,0,-s.rotation),r.x=s.x+t,r.y=s.y+e,r},vu;class LI extends Fs{constructor(t,e){e===void 0&&(e={}),super(t,e);var r=e.width!=null?1:0,i=new RI(t).setOrientation(r);t.add.existing(i),this.type="rexColorPicker.HPalette",i.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var n=new kn(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(n),this.add(i,{key:"paletteCanvas",expand:!0}).add(n,{key:"marker",expand:!1})}resize(t,e){if(this.width===t&&this.height===e)return this;super.resize(t,e);var r=Math.min(t,e);return this.childrenMap.marker.setSize(r,r),this}onPaletteCanvasPointerDown(t,e,r,i){if(t.isDown){var n=this.childrenMap.paletteCanvas,o=n.getColor(e,r);this.setMarkerPosition(o),this.emit("input",o)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var e=this.childrenMap.paletteCanvas;return e.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var e=this.childrenMap.paletteCanvas,r=this.childrenMap.marker,i=e.colorToLocalPosition(t,!0);return Ux(e,i.x,i.y,r),this.resetChildPositionState(r),this}getHue(t,e){var r=this.childrenMap.paletteCanvas;return r.getHue(t,e)}}const bI=Phaser.Display.Color,Sp=Phaser.Math.Percent,Ep=Phaser.Display.Color.ColorToRGBA,wI=Phaser.Display.Color.HSVToRGB;class FI extends $n{constructor(t,e,r,i,n,o){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=2),n===void 0&&(n=2),super(t,e,r,i,n),this.type="rexColorPicker.SVPaletteCanvas",o===void 0&&(o=1),this.colorObject=new bI,this.setHue(o),this.setSize(i,n)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return EI(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,e){if(t===void 0)return this.colorObject.color;var r=Sp(t,0,this.width),i=1-Sp(e,0,this.height);return this.colorObject.setFromRGB(wI(this.hue,r,i)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(Ep(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,e){return e===void 0?e={}:e===!0&&(pu===void 0&&(pu={}),e=pu),this.colorObject.setFromRGB(Ep(t)),e.x=this.width*this.colorObject.s,e.y=this.height*(1-this.colorObject.v),e}}var pu=void 0;class DI extends Fs{constructor(t,e){super(t,e);var r=new FI(t);t.add.existing(r),this.type="rexColorPicker.SVPalette",r.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var i=new kn(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(i),this.add(r,{key:"paletteCanvas",expand:!0}).add(i,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,e,r,i){if(t.isDown){var n=this.childrenMap.paletteCanvas,o=n.getColor(e,r);this.setMarkerPosition(o),this.emit("input",o)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var e=this.childrenMap.paletteCanvas;return e.setHue(t),this}setColor(t){if(this.color===t)return this;var e=this.childrenMap.paletteCanvas;return e.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var e=this.childrenMap.paletteCanvas,r=this.childrenMap.marker,i=e.colorToLocalPosition(t,!0);return Ux(e,i.x,i.y,r),this.resetChildPositionState(r),this}}const Si=Phaser.Utils.Objects.GetValue;class II extends wt{constructor(t,e){super(t,e),this.type="rexColorPicker",this.freezePalettes=!1;var r=Si(e,"hPalette.position",0);typeof r=="string"&&(r=BI[r]);var i=r===0||r===2?1:0;this.setOrientation(i);var n=Si(e,"background",void 0),o,a;if(this.orientation===0){var o=Si(e,"hPalette.width",void 0);o===void 0&&(o=Si(e,"hPalette.size",10))}else a=Si(e,"hPalette.height",void 0),a===void 0&&(a=Si(e,"hPalette.size",10));var h=new LI(t,{width:o,height:a});t.add.existing(h);var u=Si(e,"svPalette.width",void 0),l=Si(e,"svPalette.height",void 0),f=new DI(t,{width:u,height:l});t.add.existing(f),n&&this.addBackground(n);var c={proportion:0,expand:!0},d,v;this.orientation===0?(d=u===void 0?1:0,v=l===void 0):(d=l===void 0?1:0,v=u===void 0);var p={proportion:d,expand:v};r===0||r===3?this.add(f,p).add(h,c):this.add(h,c).add(f,p),h.on("input",function(){f.setHue(h.getHue()),this.setValue(f.color,!0)},this),f.on("input",function(){this.setValue(f.color,!0)},this),this.addChildrenMap("background",n),this.addChildrenMap("hPalette",h),this.addChildrenMap("svPalette",f);var g=Si(e,"valuechangeCallback",null);if(g!==null){var m=Si(e,"valuechangeCallbackScope",void 0);this.on("valuechange",g,m)}this.setValue(Si(e,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var e=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,e,this)}}setValue(t,e){return this.freezePalettes=!!e,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}runLayout(t,e,r){return this.ignoreLayout?this:(super.runLayout(t,e,r),this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this)}}var BI={bottom:0,left:1,top:2,right:3};const gu=Phaser.Utils.Objects.GetValue;class GI extends wt{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexColorInput.ColorPickerPanel";var r=gu(e,"background",void 0),i=new II(t,{hPalette:e.hPalette||{},svPalette:e.svPalette||{},space:{item:gu(e,"space.hPalette",8)}});t.add.existing(i);var n;e.colorComponents&&(n=new uI(t,e.colorComponents),t.add.existing(n)),r&&(this.addBackground(r),new ID(r,{stopAllLevels:!1})),this.add(i,{proportion:1,expand:!0}),n&&this.add(n,{proportion:0,expand:!0}),this.addChildrenMap("background",r),this.addChildrenMap("colorPicker",i),this.addChildrenMap("colorComponents",n),i.on("valuechange",function(o){this.setValue(o)},this),n&&n.on("valuechange",function(o){this.setValue(o)},this),this.setValue(gu(e,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var e=this.childrenMap.colorPicker;e.setValue(t);var r=this.childrenMap.colorComponents;r&&r.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var YI=function(t){var t=this.scene,e,r=this.colorPickerCreateBackgroundCallback;r&&(e=r.call(this,t),t.add.existing(e));var i=this.colorPickerWidth;i===void 0&&(i=this.width);var n=this.colorPickerHeight;n===void 0&&(n=i);var o;this.colorComponentsHeight>0?o={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:o=!1;var a=new GI(t,{width:i,height:n,background:e,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:o,value:this.value});return t.add.existing(a),a};let NI=class extends jn{constructor(t,e){super(e),this.parent=t;var r=e.initState||"IDLE";this.start(r)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var e=t.runTransitionInCallback();t.delayCall(e,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var e=t.runTransitionOutCallback();t.delayCall(e,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var Wx=function(s,t,e,r,i){var n=s.scene,o=n.sys.events,a=n.time.delayedCall(t,o.once,["postupdate",function(){e.call(r,i)}],o);return a};const XI={delayCall(s,t,e){return this.delayCallTimer=Wx(this,s,t,e),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},zI={setTransitInTime(s){return this.transitInTime=s,this},setTransitOutTime(s){return this.transitOutTime=s,this},setTransitInCallback(s){return s||(s=We),this.transitInCallback=s,this},setTransitOutCallback(s){return s||(s=We),this.transitOutCallback=s,this}},VI={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(s,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?s:this.parent;var e=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=e,this}},UI={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(s,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?s:this.parent;var e=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=e,this}};var Hx={};Object.assign(Hx,XI,zI,VI,UI);const cr=Phaser.Utils.Objects.GetValue;class Od extends Qt{constructor(t,e){super(t,e),this.setTransitInTime(cr(e,"duration.in",200)),this.setTransitOutTime(cr(e,"duration.out",200)),this.setTransitInCallback(cr(e,"transitIn")),this.setTransitOutCallback(cr(e,"transitOut")),this.oneShotMode=cr(e,"destroy",!1),this.delayCallTimer=void 0,this._state=new NI(this,{eventEmitter:!1,initState:cr(e,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(Od.prototype,Hx);var WI=function(s,t,e,r,i){r===void 0&&(r="Linear");var n={};switch(n.mode=0,e){case 0:case"x":n.end={x:0};break;case 1:case"y":n.end={y:0};break;default:n.end=0;break}return n.duration=t,n.ease=r,i===void 0?i=new Ua(s,n):i.resetFromJSON(n),i.restart(),i},HI=function(s,t,e,r,i){return Js(s,t)?K(s,t):e&&Js(s,e)?K(s,e):r&&Js(s,r)?K(s,r):i};const ha=Phaser.Utils.Objects.GetValue;var kI=function(s,t){var e=ha(t,"expandDirection",void 0);typeof e=="string"&&(e=$I[e]);var r=HI(t,"alignTarget","alignTargetX"),i=ha(t,"alignTargetY",r),n=ha(t,"alignOffsetX",0),o=ha(t,"alignOffsetY",0),a=ha(t,"bounds"),h=e===0,u=e===1,l=!h&&!u,f=h||l?0:1;s.setOrigin(0,f);var c=r.getTopLeft().x,d=i.getBottomLeft().y;s.setPosition(c+n,d+o);var v=a;v||(v=io(s.scene)),l&&s.getBottomLeft().y>v.bottom&&(d=i.getTopLeft().y,s.setOrigin(0,1).setPosition(c+n,d+o))};const $I={down:0,up:1},Pp=Phaser.Utils.Objects.GetValue;class kx extends Od{constructor(t,e){e===void 0&&(e={}),e.transitIn==null&&(e.transitIn=function(n,o){Tx(n,o,"y","Cubic")}),e.transitOut==null&&(e.transitOut=function(n,o){WI(n,o,"y","Linear")}),e.manualClose=!0,e.clickOutsideClose=!0,e.destroy=!0,super(t,e),kI(t,e),t.isRexSizer&&t.layout();var r=Pp(e,"touchOutsideClose",!1),i=Pp(e,"anyTouchClose",!1);i&&(r=!1),i?this.once("open",this.anyTouchClose,this):r&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Vh(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var ZI=function(){if(!this.colorPicker){var s=YI.call(this),t=new kx(s,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){s.on("valuechange",function(e){this.setValue(e)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=s,this.dropDownBehavior=t,this.pin(s),this}},$x={openColorPicker:ZI};Object.assign($x,TI);const ce=Phaser.Utils.Objects.GetValue;let Zx=class extends yI{constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexColorInput",e.hasOwnProperty("colorPicker")||(e.colorPicker={background:{color:0}});var r=e.colorPicker,i=r!==!1&&r!==null;if(i){this.setColorPickerSize(ce(r,"width",160),ce(r,"height",170));var n,o=ce(r,"background");o?n=function(d){return _s(d,o)}:n=ce(r,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(n),this.setColorPickerHPalettePosition(ce(r,"hPalettePosition",0)),this.setColorPickerExpandDirection(ce(r,"expandDirection")),this.setColorPickerEaseInDuration(ce(r,"easeIn",500)),this.setColorPickerEaseOutDuration(ce(r,"easeOut",500)),this.setColorPickerTransitInCallback(ce(r,"transitIn")),this.setColorPickerTransitOutCallback(ce(r,"transitOut")),this.setColorPickerBounds(ce(r,"bounds"));var a=ce(r,"space");a===void 0&&(a={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(a)}var h=e.colorComponents,u=h!==!1&&h!==null;if(i&&u){this.setColorComponentsHeight(ce(h,"height",30)),this.setColorComponentsFormatLabelConfig(ce(h,"formatLabel"));var l=ce(h,"inputText");l||(l=ce(e,"inputText")),this.setColorComponentsInputTextConfig(l);var f=ce(h,"space");f===void 0&&(f={item:8}),this.setColorComponentsSpace(f)}var c=this.childrenMap.swatch;c&&i&&this.onClick(c,this.openColorPicker,this)}};Object.assign(Zx.prototype,$x);var KI=function(s){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,JI(this,s)),this},JI=function(s,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var e=t.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var r=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(r=!0,e.animation={});var i=e.animation;r&&(i.duration=0);var n=i.onProgress;i.onProgress=function(a){n&&n(a),s.needRedraw()};var o=i.onComplete;return i.onComplete=function(a){o&&o(a),s.needRedraw()},t},QI=function(s){if(this.chart!==void 0)if(typeof s=="string"){for(var t=this.chart.data.datasets,e,r=0,i=t.length;r<i;r++)if(e=t[r],e.label===s)return e}else return this.chart.data.datasets[s]},jI=function(s,t){var e=this.getChartDataset(s);if(e!==void 0){if(typeof t=="string"){var r=this.chart.data.labels;if(t=r.indexOf(t),t===-1)return}return e.data[t]}},qI=function(s,t,e){if(this.chart===void 0)return this;var r=this.getChartDataset(s);if(typeof t=="string"){var i=this.chart.data.labels;if(t=i.indexOf(t),t===-1)return this}return r.data[t]=e,this},_I=function(){return this.chart===void 0?this:(this.chart.update(),this)};let tB=class extends $n{constructor(t,e,r,i,n,o){super(t,e,r,i,n),this.type="rexChart",this.chart=void 0,o!==void 0&&this.setChart(o)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,e){if(t===this.width&&e===this.height)return this;if(super.resize(t,e),this.chart){var r=this.chart;r.height=this.canvas.height,r.width=this.canvas.width,r.aspectRatio=r.height?r.width/r.height:null,r.update()}return this}};var eB={setChart:KI,getChartDataset:QI,getChartData:jI,setChartData:qI,updateChart:_I};Object.assign(tB.prototype,eB);var Kx=function(){return Array.prototype.reduce.call(arguments,iB,0)},iB=function(s,t){return s+t},sB=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,e,r=this.sizerChildren,i,n,o,a,h=0;h<this.columnCount;h++){if(a=this.columnProportions[h],e=0,a===0||s){for(var u=0;u<this.rowCount;u++)i=r[u*this.columnCount+h],i&&(i.rexSizer.hidden||(n=i.rexSizer.padding,o=this.getChildWidth(i)+n.left+n.right,e=Math.max(e,o)));t+=e}this.columnWidth[h]=e}var l=this.space,f=Math.max(l.indentLeftOdd,l.indentLeftEven);return t+Kx(l.left,f,...l.column,l.right)},nB=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,e,r=this.sizerChildren,i,n,o,a,h=0;h<this.rowCount;h++){if(a=this.rowProportions[h],e=0,a===0||s){for(var u=0;u<this.columnCount;u++)i=r[h*this.columnCount+u],i&&(i.rexSizer.hidden||(o=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:Ct(i),n=i.rexSizer.padding,o+=n.top+n.bottom,e=Math.max(e,o)));t+=e}this.rowHeight[h]=e}var l=this.space,f=Math.max(l.indentTopOdd,l.indentTopEven);return t+Kx(l.top,f,...l.row,l.bottom)},rB=function(s,t){var e,r=s.rexSizer;if(r.expand){var i=r.padding;e=t-i.left-i.right}return e},aB=function(s,t){var e,r=s.rexSizer;if(r.expand){var i=r.padding;e=t-i.top-i.bottom}return e},oB=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,r=0,i=t.length;r<i;r++)e=t[r],e&&e.isRexSizer&&s.push(e);return s},hB=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,ao.call(this),this},lB=function(){for(var s,t,e,r=this.innerLeft,i=this.innerTop,n,o=i,a,h,u,l,f,c,d=this.space.column,v=this.space.row,p=this.space.indentLeftOdd,g=this.space.indentLeftEven,m=this.space.indentTopOdd,x=this.space.indentTopEven,y,T,C,S,E=0;E<this.rowCount;E++){T=this.getRowHeight(E),C=E%2?g:p,n=r+C;for(var P=0;P<this.columnCount;P++){if(y=this.getColumnWidth(P),s=this.getChildAt(P,E),!s||s.rexSizer.hidden){n+=y+d[P];continue}lo.call(this,s),f=this.getExpandedChildWidth(s,y),c=this.getExpandedChildHeight(s,T),s.isRexSizer?(s.runLayout(this,f,c),Md(s,this)):an(s,f,c),t=s.rexSizer,e=t.padding,a=n+e.left,u=y-e.left-e.right,S=P%2?x:m,h=o+S+e.top,l=T-e.top-e.bottom,uo.call(this,s,a,h,u,l,t.align),n+=y+d[P]}o+=T+v[E]}},uB=function(t){var t=yd.call(this,t);if(this.proportionWidthLength===void 0){var e=this.totalColumnProportions;if(e>0){var r=t-this.getChildrenWidth(!1);r>=0&&(this.proportionWidthLength=r/e)}else this.proportionWidthLength=0}return t},fB=function(t){var t=Td.call(this,t);if(this.proportionHeightLength===void 0){var e=this.totalRowProportions;if(e>0){var r=t-this.getChildrenHeight(!1);r>=0&&(this.proportionHeightLength=r/e)}else this.proportionHeightLength=0}return t},dB=function(s){var t,e,r;for(var i in this.sizerChildren)t=this.sizerChildren[i],t&&t.isRexSizer&&!t.ignoreLayout&&(r=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,r),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},cB=function(s){var t,e,r;for(var i in this.sizerChildren)t=this.sizerChildren[i],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(r=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,r),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};const vB=Phaser.Utils.Objects.IsPlainObject,vr=Phaser.Utils.Objects.GetValue,Mp=Phaser.Display.Align.CENTER;var Ap=function(s,t,e,r,i){if(typeof s=="number"||typeof t=="number")if(s===void 0){for(var n,o=0;o<r;o++)if(n=t*r+o,!e[n])return n}else if(t===void 0){for(var n,o=0;o<i;o++)if(n=o*r+s,!e[n])return n}else{var n=t*r+s;if(!e[n])return n}else if(t===!0){for(var n,o=0;o<r;o++)for(var a=0;a<i;a++)if(n=a*r+o,!e[n])return n}else for(var o=0,h=e.length;o<h;o++)if(!e[o])return o;return null},pB=function(s,t,e,r,i,n,o){if(no.call(this,s),vB(t)){var h=t;t=vr(h,"column",void 0),e=vr(h,"row",void 0),r=vr(h,"align",Mp),i=vr(h,"padding",0),n=vr(h,"expand",!1),o=vr(h,"key",void 0)}var a=Ap(t,e,this.sizerChildren,this.columnCount,this.rowCount);if(a===null){if(typeof t=="number"&&typeof e=="number")return this;e===!0||typeof e=="number"?this.addEmptyColumn():this.addEmptyRow(),a=Ap(t,e,this.sizerChildren,this.columnCount,this.rowCount)}typeof r=="string"&&(r=Vr[r]),r===void 0&&(r=Mp),i===void 0&&(i=0),n===void 0&&(n=!0);var h=this.getSizerConfig(s);return h.align=r,h.padding=Ur(i),h.expand=n,this.sizerChildren[a]=s,o!==void 0&&this.addChildrenMap(o,s),this};const gB={add:pB};var Sr=function(s,t,e,r){e===void 0&&(e=0),r===void 0&&(r=s.length-1);for(var i=e;i<=r;i++)s[i]=t;return s};const mB={remove(s,t){if(this.getParentSizer(s)!==this)return this;var e=this.sizerChildren.indexOf(s);return e!==-1&&(this.sizerChildren[e]=null),ul.call(this,s,t),this},removeAt(s,t,e){var r=this.getChildAt(s,t);return r&&this.remove(r,e),this},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--){var e=this.sizerChildren[t];e&&this.remove(e,s)}return this},clear(s){return Sr(this.sizerChildren,null),fl.call(this,s),this}},Rp=Phaser.Utils.Objects.GetValue;var xB=function(s,t,e,r,i){if(e===void 0&&(e=0),r===void 0&&(r=0),this.columnCount=s,this.rowCount=t,this.gridCount=s*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=s*t,Sr(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=s,typeof e=="number")Sr(this.columnProportions,e);else for(var n=0;n<s;n++)this.columnProportions[n]=e[n]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof r=="number")Sr(this.rowProportions,r);else for(var n=0;n<t;n++)this.rowProportions[n]=r[n]||0;this.columnWidth=[],this.columnWidth.length=s,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=s-1;var o=Rp(i,"column",0);if(typeof o=="number")Sr(this.space.column,o);else for(var n=0,a=this.space.column.length;n<a;n++)this.space.column[n]=o[n]||0;this.space.row=[],this.space.row.length=t-1;var h=Rp(i,"row",0);if(typeof h=="number")Sr(this.space.row,h);else for(var n=0,a=this.space.row.length;n<a;n++)this.space.row[n]=h[n]||0;return this},Jx=function(s,t,e){t===void 0&&(t=this.rowProportions[0]||0),e===void 0&&(e=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var r=[s*this.columnCount,0],i=0;i<this.columnCount;i++)r.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,r),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(s,0,e),this},yB=function(s,t){return Jx.call(this,this.rowCount,s,t),this},Qx=function(s,t,e){t===void 0&&(t=this.columnProportions[0]||0),e===void 0&&(e=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var r=this.rowCount-1;r>=0;r--){var i=r*this.columnCount+s;this.sizerChildren.splice(i,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(s,0,e),this},TB=function(s,t){return Qx.call(this,this.columnCount,s,t),this},jx={getChildrenWidth:sB,getChildrenHeight:nB,getExpandedChildWidth:rB,getExpandedChildHeight:aB,getChildrenSizers:oB,preLayout:hB,layoutChildren:lB,resolveWidth:uB,resolveHeight:fB,resolveChildrenWidth:dB,runWidthWrap:cB,resetGrid:xB,inseryEmptyRow:Jx,addEmptyRow:yB,insertEmptyColumn:Qx,addEmptyColumn:TB};Object.assign(jx,gB,mB);var CB=function(){for(var s=0,t,e=0;e<this.columnCount;e++)t=this.columnProportions[e],t>0&&(s+=t);return s},SB=function(){for(var s=0,t,e=0;e<this.rowCount;e++)t=this.rowProportions[e],t>0&&(s+=t);return s};const Ho=Phaser.Utils.Objects.IsPlainObject,bt=Phaser.Utils.Objects.GetValue;class Wr extends qn{constructor(t,e,r,i,n,o,a,h,u,l){Ho(e)?(l=e,e=bt(l,"x",0),r=bt(l,"y",0),i=bt(l,"width",void 0),n=bt(l,"height",void 0),o=bt(l,"column",l.col||0),a=bt(l,"row",0),h=bt(l,"columnProportions",0),u=bt(l,"rowProportions",0)):Ho(i)?(l=i,i=bt(l,"width",void 0),n=bt(l,"height",void 0),o=bt(l,"column",l.col||0),a=bt(l,"row",0),h=bt(l,"columnProportions",0),u=bt(l,"rowProportions",0)):Ho(o)?(l=o,o=bt(l,"column",l.col||0),a=bt(l,"row",0),h=bt(l,"columnProportions",0),u=bt(l,"rowProportions",0)):Ho(h)&&(l=h,h=bt(l,"columnProportions",0),u=bt(l,"rowProportions",0)),super(t,e,r,i,n,l),this.type="rexGridSizer",this.resetGrid(o,a,h,u,bt(l,"space",void 0)),this.setIndentLeft(bt(l,"space.indentLeftOdd",0),bt(l,"space.indentLeftEven",0)),this.setIndentTop(bt(l,"space.indentTopOdd",0),bt(l,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var f=bt(l,"createCellContainerCallback");if(f)for(var r=0,c=this.rowCount;r<c;r++)for(var e=0,d=this.columnCount;e<d;e++){var v={column:e,row:r},p=f(t,e,r,v);p&&this.add(p,v)}}destroy(t){this.scene&&(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIndentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setColumnProportion(t,e){return t>=this.columnProportions.length?this:(this.columnProportions[t]=e,this)}setRowProportion(t,e){return t>=this.rowProportions.length?this:(this.rowProportions[t]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=CB.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=SB.call(this)),this._totalRowProportions}getChildAt(t,e){return this.sizerChildren[e*this.columnCount+t]}childToGridIndex(t,e){if(!t)return null;var r=this.sizerChildren.indexOf(t);return r===-1?null:(e===void 0&&(e={}),e.x=r%this.columnCount,e.y=Math.floor(r/this.columnCount),e)}getColumnWidth(t){var e=this.columnProportions[t],r=e===0?this.columnWidth[t]:e*this.proportionWidthLength;return r}getRowHeight(t){var e=this.rowProportions[t],r=e===0?this.rowHeight[t]:e*this.proportionHeightLength;return r}}Object.assign(Wr.prototype,jx);var EB=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},PB=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},MB=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,e,r=0,i=t.length;r<i;r++)e=t[r],e!==`
`&&e.isRexSizer&&s.push(e);return s},AB=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,ao.call(this),this},RB=function(){for(var s=this.innerWidth,t=this.justifyPercentage,e=this.space.item,r=this.space.line,i=this.space.indentLeftOdd,n=this.space.indentLeftEven,o=this.space.indentTopOdd,a=this.space.indentTopEven,h,u,l,f=0,c,d,v=this.innerLeft,p=this.innerTop,g,m,x,y,T=this.widthWrapResult.lines,C,S,E,P,M=p,R=0,A=T.length;R<A;R++){switch(C=T[R],S=C.children,this.rtl&&S.reverse(),c=R%2?n:i,P=v+c,E=s-C.width,this.align){case 0:break;case 1:P+=E;break;case 2:P+=E/2;break;case 3:f=mu(s,E,t,S.length);break;case 4:f=mu(s,E,t,S.length),f===0&&(P+=E);break;case 5:f=mu(s,E,t,S.length),f===0&&(P+=E/2);break}for(var O=!0,b=0,w=S.length;b<w;b++)h=S[b],!h.rexSizer.hidden&&(u=h.rexSizer,l=u.padding,lo.call(this,h),g=P+l.left,O?O=!1:g+=e,d=b%2?a:o,m=M+d+l.top,x=Lt(h),y=Ct(h),P=g+x+l.right+f,uo.call(this,h,g,m,x,y,u.align));M+=C.height+r}},mu=function(s,t,e,r){return t/s<=e?t/(r-1):0},OB=function(s,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var e=this.sizerChildren,r=this.space.item,i=this.space.line,n=this.space.indentLeftOdd,o=this.space.indentLeftEven,a=this.space.indentTopOdd,h=this.space.indentTopEven,u,l,f,c=0,d,v=t.lines,p=void 0,g,m=0,x=e.length;m<x;m++){if(u=e[m],u===`
`)u=void 0,l=0,g=!0;else{if(u.rexSizer.hidden)continue;u.isRexSizer&&u.layout(),l=LB(u),g=c<l||p===void 0}if(g){p&&(p.width=s-(c+r),t.width=Math.max(t.width,p.width),t.height+=p.height+i),p={children:[],height:0},v.push(p);var d=v.length%2?n:o;c=s-d}c-=l+r,u&&(p.children.push(u),f=bB(u),p.height=Math.max(p.height,f))}return p&&(p.width=s-(c+r),t.width=Math.max(t.width,p.width),t.height+=p.height),t.height+=Math.max(a,h),t},LB=function(s){var t=s.rexSizer.padding;return Lt(s)+t.left+t.right},bB=function(s){var t=s.rexSizer.padding;return Ct(s)+t.top+t.bottom},wB=function(s){var t=s-this.space.left-this.space.right;this.widthWrapResult=OB.call(this,t,this.widthWrapResult),yx.call(this,s)};const Op=Phaser.Math.Distance.Between;var FB=function(s,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var r=-1,i=1/0,n=0,o=e.length;n<o;n++){var a=e[n];if(!(Math.abs(a.centerY-t)>a.height/2)){var u=Op(a.left,a.centerY,s,t);i>u&&(i=u,r=n);var h=e[n+1];if(!(h&&h.y===a.y)){var u=Op(a.right,a.centerY,s,t);i>u&&(i=u,r=n+1)}}}return r};const DB=Phaser.Utils.Objects.IsPlainObject,xu=Phaser.Utils.Objects.GetValue,IB=Phaser.Display.Align.CENTER;var yu=function(s,t,e,r){if(s===`
`)return this.addNewLine(),this;if(no.call(this,s),DB(t)){var i=t;t=xu(i,"padding",0),e=xu(i,"key",void 0),r=xu(i,"index",void 0)}t===void 0&&(t=0);var i=this.getSizerConfig(s);return i.align=IB,i.padding=Ur(t),r===void 0||r>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(r,0,s),e!==void 0&&this.addChildrenMap(e,s),this};const BB={add(s,t,e){if(se(s))for(var r=s,i=0,n=r.length;i<n;i++)yu.call(this,r[i],t);else yu.call(this,s,t,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(s,t,e,r){return yu.call(this,t,e,r,s),this},insertAtPosition(s,t,e,r,i){var n=FB.call(this,s,t);return n===-1&&(n=void 0),this.insert(n,e,r,i),this}},GB=Phaser.Utils.Array.Remove,YB={remove(s,t){return this.getParentSizer(s)!==this?this:(GB(this.sizerChildren,s),ul.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,fl.call(this,s),this}};var qx={getChildrenWidth:EB,getChildrenHeight:PB,getChildrenSizers:MB,preLayout:AB,layoutChildren:RB,runWidthWrap:wB};Object.assign(qx,BB,YB);var NB=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,e,r,i=0,n=s.length;i<n;i++)e=s[i],e!==`
`&&(r=this.getChildWidth(e),t=Math.max(r,t));return t},XB=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,e,r,i=0,n=s.length;i<n;i++)e=s[i],e!==`
`&&(r=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:Ct(e),t=Math.max(r,t));return t};const Lp=Phaser.Utils.Objects.IsPlainObject,ye=Phaser.Utils.Objects.GetValue;class vo extends qn{constructor(t,e,r,i,n,o){Lp(e)?(o=e,e=ye(o,"x",0),r=ye(o,"y",0),i=ye(o,"width",void 0),n=ye(o,"height",void 0)):Lp(i)&&(o=i,i=ye(o,"width",void 0),n=ye(o,"height",void 0)),super(t,e,r,i,n,o),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(ye(o,"orientation",0)),this.setItemSpacing(ye(o,"space.item",0)),this.setLineSpacing(ye(o,"space.line",0)),this.setIntentLeft(ye(o,"space.indentLeftOdd",0),ye(o,"space.indentLeftEven",0)),this.setIntentTop(ye(o,"space.indentTopOdd",0),ye(o,"space.indentTopEven",0)),this.setAlign(ye(o,"align",0)),this.setJustifyPercentage(ye(o,"justifyPercentage",.25)),this.setRTL(ye(o,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=cl(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIntentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setAlign(t){return typeof t=="string"&&(t=zB[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=NB.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=XB.call(this)),this._maxChildHeight}}const zB={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(vo.prototype,qx);Phaser.Utils.Objects.GetValue;const Pt=Phaser.Utils.Objects.GetValue,VB=Phaser.Utils.Objects.IsPlainObject;var UB=function(s,t){var e=Pt(t,"background",void 0),r=Pt(t,"icon",void 0),i=Pt(t,"iconMask",void 0),n=Pt(t,"nameText",void 0),o=Pt(t,"valueText",void 0),a=Pt(t,"bar",void 0),h=Pt(t,"action",void 0),u=Pt(t,"actionMask",void 0);VB(a)&&(a=new nb(s,a),s.add.existing(a),n&&s.children.moveBelow(a,n),o&&s.children.moveBelow(a,o));var l=n||o||a;if(e&&this.addBackground(e),r){var f=void 0;this.orientation===0?(l||h)&&(f={right:Pt(t,"space.icon",0),top:Pt(t,"space.iconTop",0),bottom:Pt(t,"space.iconBottom",0)}):(l||h)&&(f={bottom:Pt(t,"space.icon",0),left:Pt(t,"space.iconLeft",0),right:Pt(t,"space.iconRight",0)}),this.add(r,{proportion:0,padding:f}),i&&(i=Dr.call(this,r,r,1))}if(l){var c=new wt(s,{orientation:1}),d;if(n||o){if(d=new wt(s,{orientation:0}),n){n.text===""&&n.setText(" "),n.setOrigin(0,n.originY);var f={left:Pt(t,"space.name",0)};d.add(n,{padding:f})}if(o){o.text===""&&o.setText(" "),o.setOrigin(1,o.originY),d.addSpace();var f={right:Pt(t,"space.value",0)};d.add(o,{padding:f}),this.setValueTextFormatCallback(Pt(t,"valueTextFormatCallback",WB),Pt(t,"valueTextFormatCallbackScope",void 0))}c.add(d,{expand:!0})}if(a){var f={top:d?Pt(t,"space.bar",0):0,bottom:Pt(t,"space.barBottom",0),left:Pt(t,"space.barLeft",0),right:Pt(t,"space.barRight",0)};c.add(a,{expand:!0,padding:f})}var f=void 0;h&&(f={right:Pt(t,"space.text",0)});var v=Pt(t,"align.text","bottom");this.add(c,{proportion:1,align:v,padding:f})}if(h){var f;this.orientation===0?f={top:Pt(t,"space.actionTop",0),bottom:Pt(t,"space.actionBottom",0)}:f={left:Pt(t,"space.actionLeft",0),right:Pt(t,"space.actionRight",0)},this.add(h,{proportion:0,padding:f}),u&&(u=Dr.call(this,h,h,1))}this.addChildrenMap("background",e),this.addChildrenMap("icon",r),this.addChildrenMap("iconMask",i),this.addChildrenMap("name",n),this.addChildrenMap("value",o),this.addChildrenMap("bar",a),this.addChildrenMap("action",h),this.addChildrenMap("actionMask",u)},WB=function(s,t,e){return s.toString()},HB=function(s,t){return this.valueTextFormatCallback=s,this.valueTextFormatCallbackScope=t,this},_x=function(s,t,e){s===void 0&&(s=this.value),t===void 0&&(t=this.minValue),e===void 0&&(e=this.maxValue);var r;return this.valueTextFormatCallbackScope?r=this.valueTextFormatCallback(s,t,e):r=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,s,t,e),r},kB=function(s,t,e){var r=this.childrenMap.value;return r&&this.valueTextFormatCallback&&(r.setText(_x.call(this,s,t,e)),r.layout&&r.layout()),this};const $B=Phaser.Math.Clamp;var ZB=function(s,t,e){return s=$B(s,t,e),this.value=s,this.minValue=t,this.maxValue=e,this.updateValueText(s,t,e),this.setBarValue(s,t,e),this};const KB={setValueTextFormatCallback:HB,getFormatValueText:_x,updateValueText:kB,setValue:ZB};class JB extends wt{constructor(t,e){super(t,e),this.type="rexNameValueLabel",UB.call(this,t,e)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var e=this.childrenMap.name;e!==void 0&&e.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var e=this.childrenMap.value;e!==void 0&&e.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var e=this.childrenMap.bar;e!==void 0&&e.setValue(t)}setBarValue(t,e,r){var i=this.childrenMap.bar;return i===void 0?this:(i.setValue(t,e,r),this)}easeBarValueTo(t,e,r){var i=this.childrenMap.bar;return i===void 0?this:(i.easeValueTo(t,e,r),this)}setTexture(t,e){var r=this.childrenMap.icon;if(r!==void 0)return r.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,e,r){if(this.ignoreLayout)return this;super.runLayout(t,e,r);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var n=this.childrenMap.actionMask;return n&&(n.setPosition(),this.resetChildPositionState(n)),this}resize(t,e){super.resize(t,e);var r=this.childrenMap.iconMask;r&&r.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}}Object.assign(JB.prototype,KB);const ko=wt.prototype.add,bp=wt.prototype.addSpace;var Tu=function(s){var t=!s.isRexSpace,e=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var r=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");r&&bp.call(this),ko.call(this,s,{proportion:e,expand:!0});var i=!this.buttonsExpand&&this.buttonsAlign==="center";i&&bp.call(this),this.hasTailSpace=i}else ko.call(this,s,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var n=this.sizerChildren.length-1;ko.call(this,s,{index:n,proportion:e,expand:!0})}else ko.call(this,s,{proportion:e,expand:!0});return t&&this.buttonGroup.add(s),this};const QB={addButton(s){if(se(s))for(var t=s,e=0,r=t.length;e<r;e++)Tu.call(this,t[e]);else Tu.call(this,s);return this},addButtons(s){for(var t=0,e=s.length;t<e;t++)Tu.call(this,s[t]);return this}},jB=wt.prototype.remove,qB=wt.prototype.clear;var Cu=function(s,t){return this.getParentSizer(s)!==this?this:(this.buttonGroup.remove(s),jB.call(this,s,t),this)};const _B={remove(s,t){if(se(s))for(var e=s,r=0,i=e.length;r<i;r++)Cu.call(this,e[r],t);else Cu.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,qB.call(this,s),this},removeButton(e,t){var e=this.getButton(e);return e?(this.remove(e,t),this):this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)Cu.call(this,t[e],s);return this}},tG={add(s){if(this.buttons.push(s),this.buttonsType){var t=s.name;t===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(t)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${t}'`),this.buttonMap[t]=s,this.dataManager.set(t,void 0).set(t,!1)}return s._buttonBehavior=new zr(s,this.clickConfig),s._buttonBehavior.on("click",function(e,r,i,n){this.fireEvent("button.click",r,i,n)},this).on("enable",function(e,r){this.fireEvent("button.enable",r)},this).on("disable",function(e,r){this.fireEvent("button.disable",r)},this),s.on("pointerover",function(e,r,i,n){this.fireEvent("button.over",s,e,n)},this).on("pointerout",function(e,r){this.fireEvent("button.out",s,e,r)},this),this},addMultiple(s){for(var t=0,e=s.length;t<e;t++)this.add(gameObject[t]);return this}},eG=Phaser.Utils.Array.Remove,iG={remove(s){if(eG(this.buttons,s),this.buttonsType){var t=s.name;delete this.buttonMap[t],this.dataManager.remove(t)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var s in this.buttonMap)delete this.buttonMap[s],this.dataManager.remove(s);return this}};var sG=function(s,t,...e){var r;if(typeof t=="number"){if(r=t,t=this.buttons[r],!t)return}else if(r=this.buttons.indexOf(t),r===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(s,t,r,...e),this.groupName!==void 0?this.eventEmitter.emit(s,t,this.groupName,r,...e):this.eventEmitter.emit(s,t,r,...e)};const Er=Phaser.Utils.Objects.GetValue;var wp=function(s){var t=Er(s,"dataManager",void 0);if(t===void 0){var e=this.parent;e.setDataEnabled(),t=e.data}this.dataManager=t;var r,i;r=Er(s,"setValueCallback",void 0),i=Er(s,"setValueCallbackScope",void 0),r===void 0&&(r=Er(s,"setButtonStateCallback",void 0),i=Er(s,"setButtonStateCallbackScope",void 0)),this.setValueCallback=r,this.setValueCallbackScope=i,t.events.on("changedata",function(n,o,a,h){var u=this.buttonMap[o];if(u){var l=this.setValueCallback,f=this.setValueCallbackScope;l&&(f?l.call(f,u,a,h):l(u,a,h)),this.fireEvent("button.statechange",u,a,h)}},this)};const nG={setButtonsType(s){s===void 0&&(s={});var t=Er(s,"buttonsType",s.type);switch(this.buttonsType=t,t){case"radio":this.setRadioType(s);break;case"checkboxes":this.setCheckboxesType(s);break}return this},setRadioType(s){wp.call(this,s);var t=void 0,e=this.parent,r=this.buttons,i=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return t},set:function(n){n!==t&&(t=n,r.forEach(function(o){var a=o.name,h=i.get(a);a===n?h||i.set(a,!0):h&&i.set(a,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(n){e.value=n.name}),this},setCheckboxesType(s){wp.call(this,s);var t=this.parent,e=this.dataManager;return t.on("button.click",function(r){e.toggle(r.name)}),this},clearAllButtonsState(){for(var s in this.buttonMap)this.dataManager.set(s,!1);return this},getAllButtonsState(){var s={};for(var t in this.buttonMap)s[t]=this.dataManager.get(t);return s},setSelectedButtonName(s){return this.parent.value=s,this},getSelectedButtonName(){return this.parent.value},setButtonState(s,t){return t===void 0&&(t=!0),this.dataManager.set(s,t),this},getButtonState(s){return this.dataManager.get(s)}};var rG=function(s,t){if(s)if(se(s)){for(var e,r=0,i=s.length;r<i;r++)if(e=Fp(s[r],t),e)return e}else{var e;for(var n in s)if(e=Fp(s[n],t),e)return e}else return null},Fp=function(s,t){return s?s.hasOwnProperty("name")?s.name===t?s:null:GetElementByName(s,t):null};const vl={getButton(s){var t=this.buttons,e,r=typeof s;switch(r){case"number":e=t[s];break;case"string":e=rG(t,s);break;default:e=s,t.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(s,t){var e=this.buttons;if(s===void 0||typeof s=="boolean"){t=s;for(var r=0,i=e.length;r<i;r++)e[r]._buttonBehavior.setEnable(t)}else this.getButton(s)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(s){var t=this.buttons;if(s===void 0||typeof s=="boolean")for(var e=0,r=t.length;e<r;e++)t[e]._buttonBehavior.toggleEnable();else this.getButton(s)._buttonBehavior.toggleEnable();return this},getButtonEnable(s){return s===void 0&&(s=0),this.getButton(s)._buttonBehavior.enable},emitButtonClick(s){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",s),this},showButton(s){return Fn(this.getButton(s)),this},hideButton(s){return Dn(this.getButton(s)),this},isButtonShown(s){return Cx(this.getButton(s)),this},forEachButtton(s,t){for(var e=this.buttons,r=0,i=e.length;r<i;r++)t?s.call(t,e[r],r,e):s(e[r],r,e);return this}};class pl{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var aG={fireEvent:sG};Object.assign(pl.prototype,tG,iG,nG,vl,aG);const Ld={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(s){return this.buttonGroup.setSelectedButtonName(s),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(s,t){return this.buttonGroup.setButtonState(s,t),this},getButtonState(s){return this.buttonGroup.getButtonState(s)}},En=Phaser.Utils.Objects.GetValue;let Re=class extends wt{constructor(t,e){e===void 0&&(e={});var r=e.space;typeof r=="number"&&(e.space={item:r}),super(t,e),this.type="rexButtons",this.buttonGroup=new pl({parent:this,eventEmitter:En(e,"eventEmitter",this),groupName:En(e,"groupName",void 0),clickConfig:En(e,"click",void 0)}).setButtonsType(e);var i=En(e,"background",void 0),n=En(e,"buttons",void 0);this.buttonsExpand=En(e,"expand",!1),this.buttonsAlign=En(e,"align",void 0),i&&this.addBackground(i),n&&this.addButtons(n),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Re.prototype,QB,_B,vl,Ld);const oG=Wr.prototype.add,hG={addButton(s,t,e){return oG.call(this,s,t,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(s),this},addButtons(s,t){for(var e=0,r=s;e<r;e++)this.addButton(s[e],void 0,t);return this}},lG=Wr.prototype.remove,uG=Wr.prototype.clear;var Su=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),lG.call(this,e,t),this):this};const fG={remove(s,t){if(se(s))for(var e=s,r=0,i=e.length;r<i;r++)Su.call(this,e[r],t);else Su.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,uG.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)Su.call(this,t[e],s);return this}},$i=Phaser.Utils.Objects.GetValue;class ty extends Wr{constructor(t,e){e===void 0&&(e={});var r=$i(e,"row",0),i=$i(e,"column",e.col||0),n=$i(e,"createCellContainerCallback"),o=$i(e,"buttons",void 0),a=$i(e,"expand",!0),h=a?1:0;if(n&&(e.createCellContainerCallback=void 0),o!==void 0){r=Math.max(r,o.length);for(var u=0,l=o.length;u<l;u++)i=Math.max(i,o[u].length)}e.row=r,e.column=i,e.columnProportions=h,e.rowProportions=h,super(t,e),this.type="rexGridButtons",this.buttonGroup=new pl({parent:this,eventEmitter:$i(e,"eventEmitter",this),groupName:$i(e,"groupName",void 0),clickConfig:$i(e,"click",void 0)}).setButtonsType(e);var f=$i(e,"background",void 0);if(this.buttonsExpand=a,$i(e,"space",void 0),f&&this.addBackground(f),o)for(var c,d,v=0,p=o.length;v<p;v++){c=o[v];for(var g=0,m=c.length;g<m;g++)d=c[g],d&&this.addButton(d,g,v)}else if(n)for(var x=0;x<r;x++)for(var y=0;y<i;y++){var d=n(t,y,x);d&&this.addButton(d,y,x)}this.addChildrenMap("background",f),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(ty.prototype,hG,fG,vl,Ld);const ey=vo.prototype.add;var $o=function(s){return ey.call(this,s),this.buttonGroup.add(s),this};const dG={addButton(s){if(se(s))for(var t=s,e=0,r=t.length;e<r;e++)$o.call(this,t[e]);else $o.call(this,s);return this},addButtons(s){if(se(s[0]))for(var t=s,e,r=0,i=t.length-1;r<=i;r++){e=t[r];for(var n=0,o=e.length;n<o;n++)$o.call(this,e[n]);r>i&&ey.addNewLine(this)}else for(var n=0,o=s.length;n<o;n++)$o.call(this,s[n]);return this}},cG=vo.prototype.remove,vG=vo.prototype.clear;var Eu=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),cG.call(this,e,t),this):this};const pG={remove(s,t){if(se(s))for(var e=s,r=0,i=e.length;r<i;r++)Eu.call(this,e[r],t);else Eu.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,vG.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)Eu.call(this,t[e],s);return this}},pr=Phaser.Utils.Objects.GetValue;class Wa extends vo{constructor(t,e){e===void 0&&(e={});var r=e.space;typeof r=="number"&&(e.space={item:r,line:r}),super(t,e),this.type="rexFixWidthButtons",this.buttonGroup=new pl({parent:this,eventEmitter:pr(e,"eventEmitter",this),groupName:pr(e,"groupName",void 0),clickConfig:pr(e,"click",void 0)}).setButtonsType(e);var i=pr(e,"background",void 0),n=pr(e,"buttons",void 0);this.buttonsAlign=pr(e,"align",void 0),i&&this.addBackground(i),n&&this.addButtons(n),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Wa.prototype,dG,pG,vl,Ld);const gG={getChoice(s){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(s)},getAction(s){return this.childrenMap.actionsSizer.getButton(s)},getToolbar(s){return this.childrenMap.toolbarSizer.getButton(s)},getLeftToolbar(s){return this.childrenMap.leftToolbarSizer.getButton(s)},setChoiceEnable(s,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonEnable(s,t),this},setActionEnable(s,t){return this.childrenMap.actionsSizer.setButtonEnable(s,t),this},setToolbarEnable(s,t){return this.childrenMap.toolbarSizer.setButtonEnable(s,t),this},setLeftToolbarEnable(s,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(s,t),this},toggleChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(s),this},toggleActionEnable(s){return this.childrenMap.actionsSizer.toggleButtonEnable(s),this},toggleToolbarEnable(s){return this.childrenMap.toolbarSizer.toggleButtonEnable(s),this},toggleLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(s),this},getChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(s):!1},getActionEnable(s){return this.childrenMap.actionsSizer.getButtonEnable(s)},getToolbarEnable(s){return this.childrenMap.toolbarSizer.getButtonEnable(s)},getLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.getButtonEnable(s)},emitChoiceClick(s){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(s),this},emitActionClick(s){return this.childrenMap.actionsSizer.emitButtonClick(s),this},emitToolbarClick(s){return this.childrenMap.toolbarSizer.emitButtonClick(s),this},emitLeftToolbarClick(s){return this.childrenMap.leftToolbarSizer.emitButtonClick(s),this},showChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.showButton(s),this},showAction(s){return this.childrenMap.actionsSizer.showButton(s),this},showToolbar(s){return this.childrenMap.toolbarSizer.showButton(s),this},showLeftToolbar(s){return this.childrenMap.leftToolbarSizer.showButton(s),this},hideChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(s),this},hideAction(s){return this.childrenMap.actionsSizer.hideButton(s),this},hideToolbar(s){return this.childrenMap.toolbarSizer.hideButton(s),this},hideLeftToolbar(s){return this.childrenMap.leftToolbarSizer.hideButton(s),this},addChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.addButton(s),this},addAction(s){return this.childrenMap.actionsSizer.addButton(s),this},addToolbar(s){return this.childrenMap.toolbarSizer.addButton(s),this},addLeftToolbar(s){return this.childrenMap.leftToolbarSizer.addButton(s),this},removeChoice(s,t){var e=this.childrenMap.choicesSizer;return e&&e.removeButton(s,t),this},removeAction(s,t){return this.childrenMap.actionsSizer.removeButton(s,t),this},removeToolbar(s,t){return this.childrenMap.toolbarSizer.removeButton(s,t),this},removeLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.removeButton(s,t),this},clearChoices(s){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(s),this},clearActions(s){return this.childrenMap.actionsSizer.clearButtons(s),this},clearToolbar(s){return this.childrenMap.toolbarSizer.clearButtons(s),this},clearLeftToolbar(s){return this.childrenMap.leftToolbarSizer.clearButtons(s),this},forEachChoice(s,t){var e=this.childrenMap.choicesSizer;return e&&e.forEachButtton(s,t),this},forEachAction(s,t){return this.childrenMap.actionsSizer.forEachButtton(s,t),this},forEachToolbar(s,t){return this.childrenMap.toolbarSizer.forEachButtton(s,t),this},forEachLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.forEachButtton(s,t),this},setAllButtonsEnable(s){return s===void 0&&(s=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(s),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(s),this.childrenMap.actionsSizer&&this.setActionEnable(s),this.childrenMap.choicesSizer&&this.setChoiceEnable(s),this},getChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s?s.getAllButtonsState():{}},getChoicesButtonState(s){var t=this.childrenMap.choicesSizer;return s===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(s):!1},setChoicesButtonState(s,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonState(s,t),this},clearChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s&&s.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var s=this.childrenMap.choicesSizer;return s?s.getSelectedButtonName():""},setChoicesSelectedButtonName(s){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(s),this}},st=Phaser.Utils.Objects.GetValue;class mG extends wt{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexDialog",this.eventEmitter=st(e,"eventEmitter",this);var r=st(e,"background",void 0),i=st(e,"title",void 0),n=st(e,"toolbar",void 0),o=st(e,"toolbarBackground",void 0),a=st(e,"leftToolbar",void 0),h=st(e,"leftToolbarBackground",void 0),u=st(e,"content",void 0),l=st(e,"description",void 0),f,c=st(e,"choices",void 0),d=st(e,"choicesBackground",void 0),v,p=st(e,"actions",void 0),g=st(e,"actionsBackground",void 0),m=st(e,"click",void 0);r&&this.addBackground(r);var x;n&&(x=new Re(t,{groupName:"toolbar",background:o,buttons:n,orientation:0,space:{item:st(e,"space.toolbarItem",0)},click:m,eventEmitter:this.eventEmitter}));var y;if(a&&(y=new Re(t,{groupName:"leftToolbar",background:h,buttons:a,orientation:0,space:{item:st(e,"space.leftToolbarItem",0)},click:m,eventEmitter:this.eventEmitter})),i||n||a){var T=!!i&&st(e,"expand.title",!0),C=st(e,"align.title","center"),S=i&&!T&&C==="center"||!i&&(n||a),E=!S,P;E?P=new wt(t,{orientation:0}):P=new Fs(t);var M=E?!0:{height:!0};if(y&&P.add(y,{align:"left",expand:M}),i){E&&!T&&C==="right"&&P.addSpace();var A={left:st(e,"space.titleLeft",0),right:st(e,"space.titleRight",0)},O=T?1:0;P.add(i,{align:C,proportion:O,expand:M,padding:A}),E&&!T&&C==="left"&&P.addSpace()}x&&(E&&!i&&P.addSpace(),P.add(x,{align:"right",expand:M}));var R=st(e,"space.title",0),A;(u||l||c||p)&&(A={bottom:R});var O=st(e,"proportion.title",0);this.add(P,{padding:A,proportion:O,expand:!0})}if(u){var b=st(e,"align.content","center"),w=st(e,"space.content",0),A={left:st(e,"space.contentLeft",0),right:st(e,"space.contentRight",0),bottom:l||c||p?w:0},O=st(e,"proportion.content",0),I=st(e,"expand.content",!0);this.add(u,{align:b,padding:A,proportion:O,expand:I})}if(l){var b=st(e,"align.description","center"),Y=st(e,"space.description",0),A={left:st(e,"space.descriptionLeft",0),right:st(e,"space.descriptionRight",0),bottom:c||p?Y:0},O=st(e,"proportion.description",0),I=st(e,"expand.description",!0);this.add(l,{align:b,padding:A,proportion:O,expand:I})}if(c){var z=st(e,"choicesType","").split("-"),V=la(z,"wrap")?Wa:la(z,"grid")?ty:Re,W=la(z,"radio")?"radio":la(z,"checkboxes")?"checkboxes":void 0,F={left:st(e,"space.choicesBackgroundLeft",0),right:st(e,"space.choicesBackgroundRight",0),top:st(e,"space.choicesBackgroundTop",0),bottom:st(e,"space.choicesBackgroundBottom",0)},L=st(e,"space.choice",0);V===Re?F.item=L:V===Wa?(F.item=L,F.line=st(e,"space.choiceLine",L)):(F.column=st(e,"space.choiceColumn",L),F.row=st(e,"space.choiceRow",L));var D={width:st(e,"choicesWidth",void 0),height:st(e,"choicesHeight",void 0),groupName:"choices",buttonsType:W,background:d,buttons:c,space:F,click:m,eventEmitter:this.eventEmitter,setValueCallback:st(e,"choicesSetValueCallback",void 0),setValueCallbackScope:st(e,"choicesSetValueCallbackScope",void 0)};V===Re&&(D.orientation=la(z,"x")?0:1),f=new V(t,D);var B=st(e,"space.choices",0),A={left:st(e,"space.choicesLeft",0),right:st(e,"space.choicesRight",0),bottom:p?B:0},b=st(e,"align.choices","center"),O=st(e,"proportion.choices",0),I=st(e,"expand.choices",!0);this.add(f,{align:b,padding:A,proportion:O,expand:I})}if(p){v=new Re(t,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:st(e,"space.action",0)},expand:st(e,"expand.actions",!1),align:st(e,"align.actions","center"),click:m,eventEmitter:this.eventEmitter});var A={left:st(e,"space.actionsLeft",0),right:st(e,"space.actionsRight",0)},O=st(e,"proportion.action",0);this.add(v,{align:"center",padding:A,proportion:O,expand:!0})}ua(this,"click"),ua(this,"over"),ua(this,"out"),ua(this,"enable"),ua(this,"disalbe"),this.addChildrenMap("background",r),this.addChildrenMap("title",i),this.addChildrenMap("toolbar",n),this.addChildrenMap("leftToolbar",a),this.addChildrenMap("content",u),this.addChildrenMap("description",l),this.addChildrenMap("choices",f?f.buttons:void 0),this.addChildrenMap("actions",v?v.buttons:void 0),this.addChildrenMap("choicesSizer",f),this.addChildrenMap("actionsSizer",v),this.addChildrenMap("toolbarSizer",x),this.addChildrenMap("leftToolbarSizer",y)}}var la=function(s,t){return s.indexOf(t)!==-1},Dp={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},ua=function(s,t){s.on(`button.${t}`,function(e,r,i,n,o){Dp.hasOwnProperty(r)&&s.emit(`${Dp[r]}.${t}`,e,i,n,o)})};Object.assign(mG.prototype,gG);Phaser.Utils.Objects.GetValue;const xG={getButtonsSizer(s){return this.childrenMap[`${s}ButtonsSizer`]},getButton(s,t){var e=this.getButtonsSizer(s);return e?e.getButton(t):void 0},setButtonEnable(s,t,e){return this.getButtonsSizer(s).setButtonEnable(t,e),this},setLeftButtonEnable(s,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(s,t),this},setRightButtonEnable(s,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(s,t),this},setTopButtonEnable(s,t){return this.childrenMap.topButtonsSizer.setButtonEnable(s,t),this},setBottomButtonEnable(s,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(s,t),this},toggleButtonEnable(s,t){return this.getButtonsSizer(s).toggleButtonEnable(t),this},toggleLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(s),this},toggleRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(s),this},toggleTopButtonEnable(s){return this.childrenMap.topButtonsSizer.toggleButtonEnable(s),this},toggleBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(s),this},getButtonEnable(s,t){return this.getButtonsSizer(s).getButtonEnable(t)},getLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.getButtonEnable(s)},getRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.getButtonEnable(s)},getTopButtonEnable(s){return this.childrenMap.topButtonsSizer.getButtonEnable(s)},getBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.getButtonEnable(s)},emitButtonClick(s,t){var e=this.getButtonsSizer(s);return e?(e.emitButtonClick(t),this):this},emitLeftButtonClick(s){return this.childrenMap.leftButtonsSizer.emitButtonClick(s),this},emitRightButtonClick(s){return this.childrenMap.rightButtonsSizer.emitButtonClick(s),this},emitTopButtonClick(s){return this.childrenMap.topButtonsSizer.emitButtonClick(s),this},emitBottomButtonClick(s){return this.childrenMap.bottomButtonsSizer.emitButtonClick(s),this},getLeftButton(s){return this.childrenMap.leftButtonsSizer.getButton(s)},getRightButton(s){return this.childrenMap.rightButtonsSizer.getButton(s)},getTopButton(s){return this.childrenMap.topButtonsSizer.getButton(s)},getBottomButton(s){return this.childrenMap.bottomButtonsSizer.getButton(s)},showButton(s,t){return Fn(this.getButton(s,t)),this},showLeftButton(s){return Fn(this.getLeftButton(s)),this},showRightButton(s){return Fn(this.getRightButton(s)),this},showTopButton(s){return Fn(this.getTopButton(s)),this},showBottomButton(s){return Fn(this.getBottomButton(s)),this},hideButton(s,t){return Dn(this.getButton(s,t)),this},hideLeftButton(s){return Dn(this.getLeftButton(s)),this},hideRightButton(s){return Dn(this.getRightButton(s)),this},hideTopButton(s){return Dn(this.getTopButton(s)),this},hideBottomButton(s){return Dn(this.getBottomButton(s)),this},addButton(s,t){return this.getButtonsSizer(s).addButton(t),this},addLeftButton(s){return this.addButton("left",s),this},addRightButton(s){return this.addButton("right",s),this},addTopButton(s){return this.addButton("top",s),this},removeButton(s,t,e){return this.getButtonsSizer(s).removeButton(t,e),this},removeLeftButton(s,t){return this.removeButton("left",s,t),this},removeRightButton(s,t){return this.removeButton("right",s,t),this},removeTopButton(s,t){return this.removeButton("top",s,t),this},removeBottomButton(s,t){return this.removeButton("bottom",s,t),this},clearButtons(s,t){return this.getButtonsSizer(s).clearButtons(t),this},clearLeftButtons(s){return this.clearButtons("left",s),this},clearRightButtons(s){return this.clearButtons("right",s),this},clearTopButtons(s){return this.clearButtons("top",s),this},clearBottomButtonss(s){return this.clearButtons("bottom",s),this},forEachButton(s,t,e){return this.getButtonsSizer(s).forEachButtton(t,e),this},forEachLeftButton(s,t){return this.childrenMap.leftButtonsSizer.forEachButtton(s,t),this},forEachRightButton(s,t){return this.childrenMap.rightButtonsSizer.forEachButtton(s,t),this},forEachTopButton(s,t){return this.childrenMap.topButtonsSizer.forEachButtton(s,t),this},forEachBottomButton(s,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(s,t),this}},Bt=Phaser.Utils.Objects.GetValue;class yG extends Wr{constructor(t,e){e===void 0&&(e={}),e.column=3,e.row=3,super(t,e),this.type="rexTabs",this.eventEmitter=Bt(e,"eventEmitter",this);var r=Bt(e,"background",void 0),i=Bt(e,"panel",void 0),n=Bt(e,"leftButtons",void 0),o=Bt(e,"leftButtonsBackground",void 0),a,h=Bt(e,"rightButtons",void 0),u=Bt(e,"rightButtonsBackground",void 0),l,f=Bt(e,"topButtons",void 0),c=Bt(e,"topButtonsBackground",void 0),d,v=Bt(e,"bottomButtons",void 0),p=Bt(e,"bottomButtonsBackground",void 0),g,m=Bt(e,"click",void 0);if(r&&this.addBackground(r),i&&this.add(i,1,1,"center",0,!0),n){var x=Bt(e,"space.leftButtonsOffset",0),y=Bt(e,"space.leftButton",0);a=new Re(t,{groupName:"left",background:o,buttons:n,orientation:1,space:{item:y},align:Bt(e,"align.leftButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:x};this.add(a,0,1,"top",T,!1)}if(h){var C=Bt(e,"space.rightButtonsOffset",0),S=Bt(e,"space.rightButton",0);l=new Re(t,{groupName:"right",background:u,buttons:h,orientation:1,space:{item:S},align:Bt(e,"align.rightButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={top:C};this.add(l,2,1,"top",T,!1)}if(f){var E=Bt(e,"space.topButtonsOffset",0),P=Bt(e,"space.topButton",0);d=new Re(t,{groupName:"top",background:c,buttons:f,orientation:0,space:{item:P},align:Bt(e,"align.topButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:E};this.add(d,1,0,"left",T,!1)}if(v){var M=Bt(e,"space.bottomButtonsOffset",0),R=Bt(e,"space.bottomButton",0);g=new Re(t,{groupName:"bottom",background:p,buttons:v,orientation:0,space:{item:R},align:Bt(e,"align.bottomButtons",void 0),click:m,eventEmitter:this.eventEmitter});var T={left:M};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",r),this.addChildrenMap("panel",i),this.addChildrenMap("leftButtons",n),this.addChildrenMap("rightButtons",h),this.addChildrenMap("topButtons",f),this.addChildrenMap("bottomButtons",v),this.addChildrenMap("leftButtonsSizer",a),this.addChildrenMap("rightButtonsSizer",l),this.addChildrenMap("topButtonsSizer",d),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(yG.prototype,xG);const Ip=Phaser.Math.Percent;var iy=function(s,t,e){var r;return s.y===t.y?r=Ip(e.x,s.x,t.x):s.x===t.x&&(r=Ip(e.y,s.y,t.y)),r},TG=function(s,t,e){if(this.enable){Pu.x=t,Pu.y=e;var r,i;this.reverseAxis?(r=this.getEndPoint(),i=this.getStartPoint()):(r=this.getStartPoint(),i=this.getEndPoint()),this.value=iy(r,i,Pu)}},Pu={},Bp=function(s,t,e){if(this.enable&&s.isDown){Mu.x=s.worldX,Mu.y=s.worldY;var r,i;this.reverseAxis?(r=this.getEndPoint(),i=this.getStartPoint()):(r=this.getStartPoint(),i=this.getEndPoint());var n=iy(r,i,Mu);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-n)<.1?this.value=n:this.easeValueTo(n)}},Mu={},sy=function(s,t){t===void 0&&(t=CG);var e=this.childrenMap.thumb,r=e.x,i=e.y;return so(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,s),t.x=e.x,t.y=e.y,e.x=r,e.y=i,t},CG={};const SG=Phaser.Display.Align.LEFT_CENTER,EG=Phaser.Display.Align.TOP_CENTER;var PG=function(s){if(s===void 0&&(s=MG),this.childrenMap.thumb){var t=this.orientation===0?SG:EG;sy.call(this,t,s)}else this.orientation===0?(s.x=this.innerLeft+1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerTop+1);return s},MG={};const AG=Phaser.Display.Align.RIGHT_CENTER,RG=Phaser.Display.Align.BOTTOM_CENTER;var OG=function(s){if(s===void 0&&(s=LG),this.childrenMap.thumb){var t=this.orientation===0?AG:RG;sy.call(this,t,s)}else this.orientation===0?(s.x=this.innerRight-1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerBottom-1);return s},LG={};const Gp=Phaser.Math.Linear;var bG=function(s,t,e,r){return r===void 0&&(r=wG),r.x=Gp(t.x,e.x,s),r.y=Gp(t.y,e.y,s),r},wG={},FG=function(s){var t=this.childrenMap.thumb;if(t===void 0)return this;s===void 0&&(s=this.value);var e,r;return this.reverseAxis?(e=this.getEndPoint(),r=this.getStartPoint()):(e=this.getStartPoint(),r=this.getEndPoint()),bG(s,e,r,t),this.resetChildPositionState(t),this};const DG=Phaser.Display.Align.LEFT_CENTER,IG=Phaser.Display.Align.TOP_CENTER,BG=Phaser.Display.Align.RIGHT_CENTER,GG=Phaser.Display.Align.BOTTOM_CENTER;var YG=function(s){var t=this.childrenMap.indicator;if(t===void 0)return this;s===void 0&&(s=this.value);var e=this.reverseAxis,r,i,n=this.childrenMap.thumb;if(n)if(this.orientation===0){var o=Lt(n);if(e){var a=n.x-o*n.originX;r=this.right-a}else{var a=n.x-o*n.originX,h=a+o;r=h-this.left}}else{var u=Ct(n);if(e){var l=n.y-u*n.originY;i=this.bottom-l}else{var l=n.y-u*n.originY,f=l+u;i=f-this.top}}else this.orientation===0?r=this.width*s:i=this.height*s;an(t,r,i);var c;e?c=this.orientation===0?BG:GG:c=this.orientation===0?DG:IG,xx(t,this,c),this.resetChildPositionState(t)};const Ei=Phaser.Utils.Objects.GetValue,NG=Phaser.Math.Clamp,XG=Phaser.Math.Snap.To;let bd=class extends Qn(wt){constructor(t,e){super(t,e),this.type="rexSlider",this.bootProgressBase(e),this.reverseAxis=Ei(e,"reverseAxis",!1);var r=Ei(e,"background",void 0),i=Ei(e,"track",void 0),n=Ei(e,"indicator",void 0),o=Ei(e,"thumb",void 0);r&&this.addBackground(r),i&&this.add(i,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0}),n&&this.pin(n),o&&this.pin(o);var a=Ei(e,"input",0);switch(typeof a=="string"&&(a=zG[a]),a){case 0:o&&(o.setInteractive(),this.scene.input.setDraggable(o),o.on("drag",TG,this).on("dragstart",function(h){this.eventEmitter.emit("inputstart",h)},this).on("dragend",function(h){this.eventEmitter.emit("inputend",h)},this));break;case 1:this.on("pointerdown",Bp,this).on("pointermove",Bp,this).on("pointerdown",function(h){this.eventEmitter.emit("inputstart",h)},this).on("pointerup",function(h){this.eventEmitter.emit("inputend",h)},this).on("pointerover",function(h){h.isDown&&this.eventEmitter.emit("inputstart",h)},this).on("pointerout",function(h){h.isDown&&this.eventEmitter.emit("inputend",h)},this).setInteractive();break}this.addChildrenMap("background",r),this.addChildrenMap("track",i),this.addChildrenMap("indicator",n),this.addChildrenMap("thumb",o),this.setEnable(Ei(e,"enable",void 0)),this.setGap(Ei(e,"gap",void 0)),this.setValue(Ei(e,"value",0),Ei(e,"min",void 0),Ei(e,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,e,r){return t&&e!==void 0&&(t=t/(r-e)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=XG(t,this.gap));var e=this._value;this._value=NG(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}runLayout(t,e,r){return this.ignoreLayout?this:(super.runLayout(t,e,r),this.updateThumb(),this.updateIndicator(),this)}};const zG={pan:0,drag:0,click:1,none:-1};var VG={getStartPoint:PG,getEndPoint:OG,updateThumb:FG,updateIndicator:YG};Object.assign(bd.prototype,VG);const ny={v:0,vertical:0,y:0,h:1,horizontal:1,x:1},UG=Phaser.Utils.Objects.GetValue;var wd=function(s,t){var e=UG(s,"scrollMode",0);return typeof e=="string"&&(e=ny[e]),e};const Xe=Phaser.Utils.Objects.GetValue;class WG extends wt{constructor(t,e){super(t,e),this.type="rexScrollBar";var r=Xe(e,"background",void 0),i=Xe(e,"buttons",void 0),n=Xe(i,"top",Xe(i,"left",void 0)),o=Xe(i,"bottom",Xe(i,"right",void 0)),a,h=Xe(e,"slider",void 0);if(r&&this.addBackground(r),n){this.add(n);var u=new yf(n);u.on("intouch",function(){if(this.enable){var g=a.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=g}},this)}if(h){h.orientation=this.orientation,h.eventEmitter=this,h.value=null;var l;if(this.orientation===0){var f=Xe(h,"width",void 0);l=f===void 0?1:0}else{var c=Xe(h,"height",void 0);l=c===void 0?1:0}a=new bd(t,h),t.add.existing(a),this.add(a,{proportion:l})}if(o){this.add(o);var u=new yf(o);u.on("intouch",function(){if(this.enable){var m=a.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=m}},this)}var d=[n,o];this.addChildrenMap("background",r),this.addChildrenMap("slider",a),this.addChildrenMap("buttons",d);var v=Xe(e,"valuechangeCallback",null);if(v!==null){var p=Xe(e,"valuechangeCallbackScope",void 0);this.on("valuechange",v,p)}this.setEnable(Xe(e,"enable",void 0)),this.setValue(Xe(e,"value",0)),this.setScrollStep(Xe(i,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,r),this}addValue(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,r),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,r){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,r),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class HG extends WG{constructor(t,e){e===void 0&&(e={});var r=Ls(e);e={slider:r},e.orientation=r.orientation,delete r.orientation,e.background=r.background,delete r.background,e.buttons=r.buttons,delete r.buttons,super(t,e);var i=this.childrenMap.slider;this.addChildrenMap("track",i.childrenMap.track),this.addChildrenMap("indicator",i.childrenMap.indicator),this.addChildrenMap("thumb",i.childrenMap.thumb)}}class kG extends jn{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,e=this.parent,r=e.dragState;return r.isDown&&(t=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,e){this.next()}next_DRAGBEGIN(){var t,e=this.parent,r=e.dragState;return r.isDown?t=r.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,e){this.next()}next_DRAG(){var t,e=this.parent,r=e.dragState;return r.isUp&&(e.outOfBounds?t="BACK":e.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,e){var r=this.parent,i=r.dragState;i.justMoved&&r.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,e=this.parent,r=e.dragState;return r.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent,r=e.dragState;return r.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}}const Zo=Phaser.Utils.Objects.GetValue,$G=Phaser.Math.Distance.Between;class ZG extends Qt{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Zo(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Zo(t,"enable",!0)),this.holdThreshold=Zo(t,"holdThreshold",50),this.pointerOutReleaseEnable=Zo(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=T0(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=$G(this.preX,this.preY,this.x,this.y),e=t/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,e,r){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=e,this.localY=r)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,e,r){!this.enable||!t.isDown||this.pointer!==t||(this.localX=e,this.localY=r)}preupdate(t,e){if(this.enable){var r=this.pointer;this.justMoved=!1,r&&!this.isInTouched?(this.x=r.worldX,this.y=r.worldY,this.preX=r.worldX,this.preY=r.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",r,this.localX,this.localY)):r&&this.isInTouched?this.x===r.x&&this.y===r.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=r.worldX,this.y=r.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",r,this.localX,this.localY)):!r&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",r))}}}const Au=Phaser.Utils.Objects.GetValue;class KG{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(Au(t,"value",0)),this.setSpeed(Au(t,"speed",0)),this.setAcceleration(Au(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class JG{constructor(){this.value,this.dir,this.movement=new KG}init(t,e,r,i,n){return this.value=t,this.end=n,n!==void 0?this.dir=t<n:this.dir=e,this.movement.setSpeed(r).setAcceleration(-i),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const te=Phaser.Utils.Objects.GetValue,QG=Phaser.Math.Clamp;class jG extends Qt{constructor(t,e){super(t,e);var r=te(e,"enable",!0);this._state=new kG(this,{enable:r,eventEmitter:!1});var i={inputConfig:te(e,"inputConfig",void 0),enable:r,pointerOutRelease:te(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new ZG(t,i),this._enable=void 0,this._value=void 0,this._slowDown=new JG;var n=te(e,"valuechangeCallback",null);if(n!==null){var o=te(e,"valuechangeCallbackScope",void 0);this.on("valuechange",n,o)}if(n=te(e,"overmaxCallback",null),n!==null){var o=te(e,"overmaxCallbackScope",void 0);this.on("overmax",n,o)}if(n=te(e,"overminCallback",null),n!==null){var o=te(e,"overminCallbackScope",void 0);this.on("overmin",n,o)}this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setOrientationMode(te(t,"orientation",0)),this.setDragThreshold(te(t,"threshold",10)),this.setSlidingDeceleration(te(t,"slidingDeceleration",5e3)),this.setBackDeceleration(te(t,"backDeceleration",2e3));var e=te(t,"dragReverse",!1)?-1:1;this.setDragRatio(e);var r=te(t,"bounds",void 0);return r?this.setBounds(r):this.setBounds(te(t,"max",0),te(t,"min",0)),this.setValue(te(t,"value",this.maxValue||0)),this.setEnable(te(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=qG[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRatio(t){return this.dragRatio=t,this}setBounds(t,e){if(Array.isArray(t)){var r=t;t=r[0],e=r[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var e=this._value,r=this.overMax(t),i=this.overMin(t);r&&this.emit("overmax",t,e),i&&this.emit("overmin",t,e),this.backEnable||(r&&(t=this.maxValue),i&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,e)}}setValue(t,e){return e===void 0&&(e=!1),e&&(t=QG(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,e){return this.setValue(this.value+t,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRatio,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRatio,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var r=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),r)}sliding(t,e){e*=.001;var r=this._slowDown.update(e).value;this.overMax(r)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(r)?(this.value=this.minValue,this._slowDown.stop()):this.value=r}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,r=Math.abs(e-t),i=this.backDeceleration,n=Math.sqrt(2*i*r);this._slowDown.init(t,void 0,n,i,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const qG={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Ko=Phaser.Utils.Objects.GetValue;class _G extends Qt{constructor(t,e){if(super(t,e),this.parent!==this.scene?this.focusMode=Ko(e,"focus",!1):this.focusMode=!1,this.setSpeed(Ko(e,"speed",.1)),this.setEnable(Ko(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(Ko(e,"inputConfig",void 0)).on("wheel",function(i,n,o,a,h){this.enable&&this.scroll(o)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,e,r,i,n,o){this.enable&&this.scroll(i)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const ee=Phaser.Utils.Objects.GetValue;var tY=function(s,t){var e=s.scene,r=wd(t),i=new wt(e,{orientation:r}),n=ee(t,"child.gameObject",void 0),o=0,a=ee(t,"slider",void 0),h,u=0,l=ee(a,"position",0);typeof l=="string"&&(l=eY[l]);var f=l===0,c=ee(t,"scroller",!0),d,v=ee(t,"mouseWheelScroller",!1),p;if(n){var g=ee(t,"space.child",0);if(s.childMargin={},typeof g!="number"){var m=g;r===0?(o={left:ee(m,"left",0),right:ee(m,"right",0)},s.childMargin.top=ee(m,"top",0),s.childMargin.bottom=ee(m,"bottom",0)):(o={top:ee(m,"top",0),bottom:ee(m,"bottom",0)},s.childMargin.top=ee(m,"left",0),s.childMargin.bottom=ee(m,"right",0))}else a&&(r===0?o=f?{right:g}:{left:g}:o=f?{bottom:g}:{top:g}),s.childMargin.top=0,s.childMargin.bottom=0;a?(a===!0&&(a={}),a.orientation=i.orientation===0?1:0,h=new HG(e,a),u=ee(t,"space.slider",0),s.adaptThumbSizeMode=ee(a,"adaptThumbSize",!1),s.minThumbSize=ee(a,"minThumbSize",void 0)):(s.adaptThumbSizeMode=!1,s.minThumbSize=void 0),c&&(c===!0&&(c={}),c.orientation=r,d=new jG(n,c)),v&&(p=new _G(n,v)),h&&!f&&i.add(h,{proportion:0,align:"center",padding:u,expand:!0});var x=ee(t,"child.proportion",1),y=ee(t,"child.expand",!0);i.add(n,{proportion:x,align:"center",padding:o,expand:y}),h&&f&&i.add(h,{proportion:0,align:"center",padding:u,expand:!0})}return h&&h.on("valuechange",function(T){s.t=T,s.emit("scroll",s)}),d&&d.on("valuechange",function(T){s.childOY=T,s.emit("scroll",s)}),p&&p.on("scroll",function(T){s.addChildOY(-T,!0)}),s.addChildrenMap("child",n),s.addChildrenMap("slider",h),s.addChildrenMap("scroller",d),s.addChildrenMap("mouseWheelScroller",p),i},eY={right:0,left:1,bottom:0,top:1},iY=function(){var s=this.topChildOY,t=this.bottomChildOY,e=this.childrenMap.scroller,r=this.childrenMap.slider;return e&&e.setBounds(t,s),r&&r.setEnable(t!==s),this.updateController(),this.adaptThumbSizeMode&&sY.call(this),this},sY=function(){var s=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,e=t.childrenMap.track,r=t.childrenMap.thumb,i=this.minThumbSize;if(this.scrollMode===0){var n=e.displayHeight*s;i!==void 0&&n<i&&(n=i),an(r,void 0,n)}else{var o=e.displayWidth*s;i!==void 0&&o<i&&(o=i),an(r,o,void 0)}nY.call(this)},nY=function(){var s=this.childrenMap.slider,t=s.minWidth,e=s.minHeight;s.minWidth=s.width,s.minHeight=s.height,s.layout(),s.minWidth=t,s.minHeight=e},rY=function(){var s=this.childrenMap.scroller,t=this.childrenMap.slider;s&&s.setValue(this.childOY),t&&t.setValue(this.t)};const Zi=Phaser.Utils.Objects.GetValue,Yp=Phaser.Math.Clamp;class Fd extends wt{constructor(t,e){e===void 0&&(e={});var r=wd(e);e.orientation=r===0?1:0,super(t,e),this.type=Zi(e,"type","rexScrollable");var i=Zi(e,"background",void 0),n=tY(this,e),o=Zi(e,"header",void 0),a=Zi(e,"footer",void 0);if(i&&this.addBackground(i),o){var h=Zi(e,"align.header","center"),u=Zi(e,"space.header",0),l;r===0?l={bottom:u}:l={right:u};var f=Zi(e,"expand.header",!0);this.add(o,{proportion:0,align:h,padding:l,expand:f})}if(n&&this.add(n,{proportion:1,align:"center",padding:0,expand:!0}),a){var h=Zi(e,"align.footer","center"),c=Zi(e,"space.footer",0),l;r===0?l={top:c}:l={left:c};var f=Zi(e,"expand.footer",!0);this.add(a,{proportion:0,align:h,padding:l,expand:f})}this.addChildrenMap("background",i),this.addChildrenMap("header",o),this.addChildrenMap("footer",a),this.runLayoutFlag=!1}runLayout(t,e,r){return this.ignoreLayout?this:(super.runLayout(t,e,r),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var r=this.childrenMap.child,i=r.topChildOY-r.bottomChildOY,n=i+e.top+e.bottom,o=n*t-e.top;t=o/i}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var r=this.childrenMap.child,i=r.topChildOY-r.bottomChildOY,n=i+e.top+e.bottom,o=i*t+e.top;t=o/n}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,e){return e===void 0&&(e=!1),e&&(t=Yp(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,e){return this.setChildOY(this.childOY+t,e),this}setT(t,e){return e===void 0&&(e=!1),e&&(t=Yp(t,0,1)),this.t=t,this}addT(t,e){return this.setT(this.t+t,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var e=this.childrenMap.slider;e&&e.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var e=this.childrenMap.scroller;e&&e.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var e=this.childrenMap.mouseWheelScrollerEnable;e&&e.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=t,this}}var aY={resizeController:iY,updateController:rY};Object.assign(Fd.prototype,aY);let ry=class{constructor(t,e){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Vr[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var e=this.parent;this._deltaHeight===0&&t!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&e.nonZeroDeltaHeightCount--;var r=this._deltaHeight!==t;if(this._deltaHeight=t,r){e.resetTotalRowsHeight();var i=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(i,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}};Object.assign(ry.prototype,el);const Np=Phaser.Utils.Objects.GetValue,oY=Phaser.Utils.Array.SpliceOne;class hY{constructor(t,e){this.parent=t,this.cells=[],this.cellPool=new Yr,this.resetFromJSON(e)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var e=t.cellHeight;e===void 0&&(e=30);var r=t.cellWidth;return r===void 0&&(r=30),this.setDefaultCellHeight(e),this.setDefaultCellWidth(r),this.initCells(Np(t,"cellsCount",0)),this.setColumnCount(Np(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var r=0;r<t;r++)e[r]=null;return this}insertNewCells(t,e){var r=this.cells;if(t===r.length){var i=t+e;r.legth=i;for(var n=t;n<i;n++)r[n]=null}else{var o=[];o.length=e;for(var n=0;n<e;n++)o[n]=null;this.cells.splice(t,0,...o)}return this.resetTotalRowsHeight(),this}removeCells(t,e){for(var r=t+e,i=t;i<r;i++)this.freeCell(i);return r===this.cells.length?this.cells.length=t:(e===1?oY(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var a=t/this.defaultCellHeight;return e?a=Math.ceil(a):a=Math.floor(a),a}for(var r=this.rowCount,i=t,n,o,a=0;;)if(o=this.getRowHeight(a),i-=o,n=a>=0&&a<r,i>0&&n)a+=1;else{if(i===0)return a;if(e){var h=a;a+=1,n=a>=0&&a<r,n||(a=h)}return a}}widthToColIndex(t,e){var r=t/this.defaultCellWidth;return e?r=Math.ceil(r):r=Math.floor(r),r}colRowToCellIndex(t,e){return t>=this.colCount?null:e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var r,i=0,n=t;n<=e;n++)r=this.getRowHeight(n),i+=r;return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var r=0,i,n=0;n<e;n++)i=this.getCellHeight(this.colRowToCellIndex(n,t)),r<i&&(r=i);return r}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var r=this.getCell(t,!1),i=r?r.deltaHeight:0;e=this.defaultCellHeight+i}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(e===void 0&&(e=!0),this.cells[t]===null&&e){var r=this.newCell(t);this.cells[t]=r}return this.cells[t]}newCell(t){var e=this.cellPool.pop();return e===null?e=new ry(this):e.setParent(this),e.index=t,e}buildCellIndex(t){t===void 0&&(t=0);for(var e=this.cells,r,i=t,n=e.length;i<n;i++)r=e[i],r&&(r.index=i);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var lY=function(s){var t=this.table,e=this.topTableOY,r=this.bottomTableOY,i=s>this.topTableOY,n=s<this.bottomTableOY;if(this.clampTableOXY){var o=t.rowCount,a=t.heightToRowIndex(this.instHeight,!0);o<a?s=0:i?s=e:n&&(s=r)}return this._tableOY!==s&&(this._tableOY=s),i&&(this.execeedTopState||this.emit("execeedtop",this,s,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,s,r)),this.execeedBottomState=n,this},uY=function(s){var t=this.table,e=this.leftTableOX,r=this.rightTableOX,i=s>this.leftTableOX,n=s<this.rightTableOX;if(this.clampTableOXY){var o=t.colCount,a=t.widthToColIndex(this.instWidth,!0);o<a?s=0:i?s=e:n&&(s=r)}return this._tableOX!==s&&(this._tableOX=s),i&&(this.execeedLeftState||this.emit("execeedleft",this,s,e)),this.execeedLeftState=i,n&&(this.execeedRightState||this.emit("execeedright",this,s,r)),this.execeedRightState=n,this},ay=function(s){return s.hasOwnProperty("geometryMask")?s.geometryMask:s.bitmapMask};const fY=Phaser.Geom.Intersects.RectangleToRectangle,dY=Phaser.Geom.Rectangle.Overlaps;var cY=function(s,t,e){if(t){e===void 0&&(e=s.getAllChildren());for(var r=s.getBounds(),i=ay(t),n,o,a,h=0,u=e.length;h<u;h++)if(n=e[h],!n.hasOwnProperty("isRexContainerLite")&&n!==i&&vY(n))if(n.getBounds)switch(o=n.getBounds(o),a=pY(r,o),a){case 4:gY(s,n);break;case 0:fY(r,o)||dY(r,o)?Ru(s,n,t):mY(s,n);break;default:Ru(s,n,t);break}else Ru(s,n,t)}},vY=function(s){if(!s.displayList)return!1;for(;;){var t=s.rexContainer;if(t)if(t.visible){var e=t.parent;if(e){s=e;continue}else return!0}else return!1;else return s.visible}},pY=function(s,t){var e=0,r=t.top,i=t.bottom,n=t.left,o=t.right;return e+=s.contains(n,r)?1:0,e+=s.contains(n,i)?1:0,e+=s.contains(o,r)?1:0,e+=s.contains(o,i)?1:0,e},gY=function(s,t,e){s.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},Ru=function(s,t,e){s.setChildMaskVisible(t,!0),t.setMask&&t.setMask(e)},mY=function(s,t,e){s.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const Ou=Phaser.Utils.Objects.GetValue,xY={update:0,everyTick:1},oy={setupChildrenMask(s){return s===!1?this:(this.setMaskUpdateMode(Ou(s,"updateMode",0)),this.enableChildrenMask(Ou(s,"padding",0)),this.setMaskLayer(Ou(s,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(s){return typeof s=="string"&&(s=xY[s]),this.maskUpdateMode=s,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(s){var t=Dr.call(this,null,this,0,s);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(s){return s===void 0&&(s=!0),this.maskChildrenFlag=s,this},setMaskLayer(s){return this.maskLayer=s,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):cY(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var s=ay(this.childrenMask);return s.setPosition().resize(),this.resetChildPositionState(s),this}};var yY=function(){if(this.cellsCount!==0){var s=this.table,t=s.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var e=t,r=s.widthToColIndex(-this.tableOX);r<=0&&(r=0);for(var i=r,n=s.colRowToCellIndex(i,e),o=this.bottomBound,a=this.rightBound,h=s.cellsCount-1,u=s.colCount-1,l=this.getCellTLX(i),f=l,c=this.getCellTLY(e);c<o&&n<=h;){if(this.table.isValidCellIdx(n)){var d=s.getCell(n,!0);this.visibleCells.set(d),this.preVisibleCells.contains(d)||this.showCell(d);var v,p;if(this.scrollMode===0?(v=f,p=c):(v=c,p=f),d.cellContainerAlign==null)d.setXY(v,p);else{var g=d.getContainer();so(g,v,p,d.width,d.height,d.cellContainerAlign),d.setXY(g.x,g.y)}}f<a&&i<u?(f+=s.getColWidth(i),i+=1):(f=l,c+=s.getRowHeight(e),i=r,e+=1),n=s.colRowToCellIndex(i,e)}}},hy=function(s){var t=null,e=s.getContainer();if(e?(t=e,s.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",s,t,this),this.cellContainersPool){var e=s.getContainer();e?t===null?this.cellContainersPool.add(e):t!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},TY=function(s){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,s-1)+t;return e},CY=function(s){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,s-1)+t;return e},SY=function(){var s=this.preVisibleCells,t=this.visibleCells;s.iterate(function(e){t.contains(e)||this.hideCell(e)},this)},ly=function(s){if(this.emit("cellinvisible",s),this.cellContainersPool){var t=s.popContainer();t&&this.cellContainersPool.killAndHide(t)}s.destroyContainer()},EY=function(s){return s===void 0&&(s=!1),s&&(Xp.call(this),this.hideCells()),Xp.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},Xp=function(){var s=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=s,this.visibleCells.clear()},PY=function(s){var t=this.table.getCell(s,!1);return t&&this.visibleCells.contains(t)},uy=function(s,t){t-=this.y+this.topLeftY,s-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?t:s),r=this.tableOX-(this.scrollMode===0?s:t),i=this.table,n=i.heightToRowIndex(-e),o=i.widthToColIndex(-r),a=i.colRowToCellIndex(o,n);return a===null||!this.isCellVisible(a)?null:a},MY=function(s,t){var e=uy.call(this,s,t);if(e!==null)return this.getCellContainer(e)},AY=function(s,t){return this.visibleCells.each(s,t),this},RY=function(s,t){return this.visibleCells.iterate(s,t),this},OY=function(s,t){return this.table.cells.slice().forEach(s,t),this},LY=function(s,t){return this.table.cells.forEach(s,t),this},bY=function(s){var t=this.cellsCount;return t===s?this:(t>s?this.removeCells(s,t-s):this.insertNewCells(t,s-t),this)};const wY=Phaser.Math.Clamp;var FY=function(s,t){return typeof s=="object"&&(s=s.index),t===void 0&&(t=1),t<=0?this:(s=wY(s,0,this.cellsCount),this.table.insertNewCells(s,t),this)},DY=function(s,t){if(typeof s=="object"&&(s=s.index),t===void 0&&(t=1),s<0&&(t+=s,s=0),t<=0)return this;if(s>this.cellsCount)return this;for(var e,r=s,i=s+t;r<i;r++)e=this.getCell(r,!1),e&&(this.visibleCells.contains(e)&&(ly.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(s,t),this},IY=function(s){return this.table.colCount===s?this:(this.table.setColumnCount(s),this)},BY=function(s,t){return this.setCellsCount(s*t),this.table.setColumnCount(s),this},GY=function(s){var t=this.table.getCell(s,!1);return!t||!t.container?this:(hy.call(this,t),this)},fy={setTableOY:lY,setTableOX:uY,showCells:yY,showCell:hy,getCellTLX:TY,getCellTLY:CY,hideCells:SY,hideCell:ly,updateTable:EY,isCellVisible:PY,pointToCellIndex:uy,pointToCellContainer:MY,eachVisibleCell:AY,iterateVisibleCell:RY,eachCell:OY,iterateCell:LY,setCellsCount:bY,insertNewCells:FY,removeCells:DY,setColumnCount:IY,setGridSize:BY,updateVisibleCell:GY};Object.assign(fy,oy);const YY=Phaser.GameObjects.Group,zp=Phaser.Structs.Set,Ki=Phaser.Utils.Objects.GetValue;let dy=class extends Vi{constructor(t,e,r,i,n,o){o===void 0&&(o={}),super(t,e,r,i,n),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new zp,this.preVisibleCells=new zp,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var a=Ki(o,"reuseCellContainer",!1);a&&(this.cellContainersPool=new YY(t));var h=Ki(o,"cellVisibleCallback",null);if(h!==null){var u=Ki(o,"cellVisibleCallbackScope",void 0);this.on("cellvisible",h,u)}if(h=Ki(o,"cellInvisibleCallback",null),h!==null){var u=Ki(o,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",h,u)}Ki(o,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Ki(o,"mask",void 0)),this.setScrollMode(Ki(o,"scrollMode",0)),this.setClampMode(Ki(o,"clamplTableOXY",!0));var l,f,c,d=this.scrollMode===0;if(d?(l=o.cellWidth,f=o.cellHeight,c=o.columns):(l=o.cellHeight,f=o.cellWidth,c=Ki(o,"rows",o.columns)),c||(c=1),this.expandCellSize=l===void 0,this.expandCellSize){var i=d?this.width:this.height;l=i/c}o.cellWidth=l,o.cellHeight=f,o.columns=c,this.table=new hY(this,o),this.updateTable()}destroy(t){this.scene&&(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=NY[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,e){return this.setTableOY(e).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,e){return this.addTableOY(e).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var e=this.table.getCell(t,!1),r;return e&&(r=e.getContainer()),r}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){var r;return typeof t=="number"?r=this.table.getCell(t,!0):r=t,r.height=e,this}setCellWidth(t,e){var r;return typeof t=="number"?r=this.table.getCell(t,!0):r=t,r.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,e=this.tableWidth,r=this.instWidth;return e>r?t=e-r:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,e){return this.width===t&&this.height===e?this:(super.resize(t,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}};Object.assign(dy.prototype,fy);const NY={v:0,vertical:0,h:1,horizontal:1};var XY=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.tableOY},set:function(t){s.tableOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTableOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTableOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.instHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.tableHeight}})},zY=function(s){s.on("cellvisible",function(t,o,r){var i=this.createCellContainerCallback,n=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var o;n?o=i.call(n,t,o,r):o=i(t,o,r),o&&(t.cellContainerAlign==null&&o.setOrigin&&o.setOrigin(0),o.isRexSizer&&o.layout()),t.item=void 0,t.items=void 0,t.setContainer(o)},this)},rs=function(s,t,e,r,i,n,o){var a;if(i===void 0?a=r:a=e.pointToCellIndex(r,i),a!=null){var h=e.getCellContainer(a);h&&s.emit(t,h,a,n,o)}},VY=function(s,t){s.on("pointerdown",function(e,r,i,n){rs(this.eventEmitter,"cell.down",s,e.worldX,e.worldY,e,n)},this).on("pointerup",function(e,r,i,n){rs(this.eventEmitter,"cell.up",s,e.worldX,e.worldY,e,n)},this)},UY=function(s,t){s.on("pointermove",Vp,this).on("pointerover",Vp,this).on("pointerout",WY,this)},Vp=function(s,t,e,r){var i=this.childrenMap.child,n=i.pointToCellIndex(s.worldX,s.worldY);if(n!==i.input.lastOverCellIndex){var o=i.input.lastOverCellIndex;i.input.lastOverCellIndex=n,rs(this.eventEmitter,"cell.out",i,o,void 0,s,r),rs(this.eventEmitter,"cell.over",i,n,void 0,s,r)}},WY=function(s,t){var e=this.childrenMap.child,r=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,rs(this.eventEmitter,"cell.out",e,r,void 0,s,t)};const HY=Phaser.Utils.Objects.GetValue;var kY=function(s,t){var e=HY(t,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,s._click=new zr(s,e),s._click.on("click",function(r,i,n,o){rs(this.eventEmitter,"cell.click",i,n.worldX,n.worldY,n,o)},this))};const $Y=Phaser.Utils.Objects.GetValue;var ZY=function(s,t){var e=$Y(t,"tap",void 0);e!==!1&&(s._tap=new Ed(s,e),s._tap.on("tap",function(r,i,n){var o=`cell.${r.tapsCount}tap`;rs(this.eventEmitter,o,r.gameObject,r.worldX,r.worldY,n)},this))};const KY=Phaser.Utils.Objects.GetValue;var JY=function(s,t){var e=KY(t,"press",void 0);e!==!1&&(s._press=new Pd(s,e),s._press.on("pressstart",function(r,i,n){rs(this.eventEmitter,"cell.pressstart",s,r.worldX,r.worldY,n)},this).on("pressend",function(r,i,n){rs(this.eventEmitter,"cell.pressend",s,r.worldX,r.worldY,n)},this))};const QY=Phaser.Utils.Objects.GetValue;var jY=function(s,t){var e=QY(t,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",s._swipe=new ll(s,e),s._swipe.on("swipe",function(r,i,n){var o=r.left?"left":r.right?"right":r.up?"up":"down";rs(this.eventEmitter,`cell.swipe${o}`,s,r.worldX,r.worldY,n)},this))},qY=function(s,t){s.setInteractive(),VY.call(this,s,t),UY.call(this,s,t),kY.call(this,s,t),ZY.call(this,s,t),JY.call(this,s,t),jY.call(this,s,t)},_Y=function(s){s===void 0?this.items.length=0:this.items=s;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const Ji=Phaser.Utils.Objects.GetValue;class tN extends Fd{constructor(t,e){e===void 0&&(e={});var r=wd(e),i=Ji(e,"table",void 0);i===void 0&&(i={}),i.scrollMode=r,i.clamplTableOXY=Ji(e,"clamplChildOY",!1);var n=Ji(i,"width",void 0),o=Ji(i,"height",void 0),a=new dy(t,0,0,n,o,i);t.add.existing(a);var h,u;r===0?(h=n===void 0?1:0,u=o===void 0):(h=o===void 0?1:0,u=n===void 0),XY(a),a.minWidth=n===void 0?0:void 0,a.minHeight=o===void 0?0:void 0,e.type="rexGridTable",e.child={gameObject:a,proportion:h,expand:u};var l=Ji(e,"space",void 0);l&&(l.child=l.table),super(t,e),this.addChildrenMap("table",a),this.addChildrenMap("tableLayer",a.maskLayer),this.eventEmitter=Ji(e,"eventEmitter",this);var f=Ji(e,"createCellContainerCallback",We),c=Ji(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(f,c),zY.call(this,a),this.resizeControllerFlag=!1;var d=r===0?"cellheightchange":"cellwidthchange";a.on(d,function(){this.resizeControllerFlag=!0},this),Ji(i,"interactive",!0)&&qY.call(this,a,i),this.setItems(Ji(e,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){this.scene&&(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(t){var e=this.childrenMap.child;return e.getCell(t)}getCellContainer(t){var e=this.childrenMap.child;return e.getCellContainer(t)}updateVisibleCell(t){var e=this.childrenMap.child;return e.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var eN={setItems:_Y};Object.assign(tN.prototype,eN);var Dd=function(s,t){return s.sameOrientation?s.orientation=t.orientation:s.orientation=t.orientation===0?1:0,s},iN=function(s,t){s.popUp(Dd(s.root.easeIn,s))},sN=function(s,t){s.scaleDown(Dd(s.root.easeOut,s))};const nN={setTransitInCallback(s){return s===void 0&&(s=iN),this.transitInCallback=s,this},setTransitOutCallback(s){return s===void 0&&(s=sN),this.transitOutCallback=s,this}},rN={delayCall(s,t,e){return this.timer=Wx(this,s,t,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var aN=function(s,t){var r=this.childrenMap.subMenu;if(r&&r.parentButton===s)return this;this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var r=new this.constructor(this.scene,{items:t,orientation:e,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:s});return this.pin(r),this.childrenMap.subMenu=r,this.root.emit("expand",r,s,this),this},oN=function(){var s=this.root;s.emit("collapse",this,this.parentButton,s);var t=s.easeOut.duration;return s.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},hN=function(){var s=this.childrenMap.subMenu;return s===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(s),s.collapse(),this)},cy={expandSubMenu:aN,collapse:oN,collapseSubMenu:hN};Object.assign(cy,nN,rN);var lN=function(s,t,e,r){var i;return e&&(t.scene=s,r?i=e.call(r,t):i=e(t),t.scene=void 0),i},uN=function(s,t,e,r){var i,n=[],o;if(t&&e)for(var a=0,h=t.length;a<h;a++)i=t[a],i.scene=s,r?o=e.call(r,i,a,t):o=e(i,a,t),i.scene=void 0,n.push(o);return n},fN=function(s){s.on(s.root.expandEventName,function(t,e){if(!this._isPassedEvent){var r=this.root.childrenKey,i=this.items[e][r];i&&this.expandSubMenu(t,i)}},s).on("button.click",function(t,e,r,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,e,r,i),this.root._isPassedEvent=!1)},s).on("button.over",function(t,e,r,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,e,r,i),this.root._isPassedEvent=!1)},s).on("button.out",function(t,e,r,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,e,r,i),this.root._isPassedEvent=!1)},s)},Up=function(s,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=cl(t.orientation)===s.orientation:t.sameOrientation=!0,t.destroy=!1,t},dN=function(){var s=this.root,t=s.easeIn.duration;s.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const Ae=Phaser.Utils.Objects.GetValue;class cN extends Re{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var r=e._rootMenu,i=e._parentMenu,n=e._parentButton,o=Ae(e,"popup",!0),a=Ae(e,"items",void 0),h=Ae(e,"createBackgroundCallback",void 0),u=Ae(e,"createBackgroundCallbackScope",void 0);e.background=lN(t,a,h,u);var l=Ae(e,"createButtonCallback",void 0),f=Ae(e,"createButtonCallbackScope",void 0);if(e.buttons=uN(t,a,l,f),super(t,e),this.type="rexMenu",this.items=a,this.root=r===void 0?this:r,this.isRoot=this.root===this,this.parentMenu=i,this.parentButton=n,this.timer=void 0,this.isRoot){this.isPopUpMode=o;var c=e.bounds;c===void 0&&(c=io(t)),this.bounds=c,this.subMenuSide=[this.y<c.centerY?Ef:Eh,this.x<c.centerX?Sf:Sh];var d=Ae(e,"subMenuSide",void 0);d!==void 0&&(typeof d=="string"&&(d=vN[d]),this.subMenuSide[this.orientation]=d),this.toggleOrientation=Ae(e,"toggleOrientation",!1),this.expandEventName=Ae(e,"expandEvent","button.click"),this.easeIn=Up(this,Ae(e,"easeIn",0)),this.easeOut=Up(this,Ae(e,"easeOut",0)),this.setTransitInCallback(Ae(e,"transitIn")),this.setTransitOutCallback(Ae(e,"transitOut")),this.createBackgroundCallback=h,this.createBackgroundCallbackScope=u,this.createButtonCallback=l,this.createButtonCallbackScope=f,this.childrenKey=Ae(e,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Ae(e,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var v=0,p=0;if(!this.root.easeIn.sameOrientation){var g=Dd(this.root.easeIn,this).orientation,m=i?i.orientation:this.orientation,d=this.root.subMenuSide[m];g===0&&d===Sh&&(v=1),g===1&&d===Eh&&(p=1)}if(o&&this.setOrigin(v,p).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var d=this.root.subMenuSide[i.orientation];switch(d){case Sh:this.alignTop(n.top).alignRight(n.left);break;case Sf:this.alignTop(n.top).alignLeft(n.right);break;case Eh:this.alignLeft(n.left).alignBottom(n.top);break;case Ef:this.alignLeft(n.left).alignTop(n.bottom);break}}fN(this),o&&(this.pushIntoBounds(this.root.bounds),dN.call(this))}destroy(t){this.scene&&(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const Sh=2,Sf=0,Eh=3,Ef=1,vN={up:Eh,down:Ef,left:Sh,right:Sf};Object.assign(cN.prototype,cy);var pN={setWrapEnable(s){return s===void 0&&(s=!0),this.listWrapEnable=s,this},setCreateButtonCallback(s){return this.listCreateButtonCallback=s,this},setCreateListBackgroundCallback(s){return this.listCreateBackgroundCallback=s,this},setButtonClickCallback(s){return this.listOnButtonClick=s,this},setButtonOverCallback(s){return this.listOnButtonOver=s,this},setButtonOutCallback(s){return this.listOnButtonOut=s,this},setListExpandDirection(s){return typeof s=="string"&&(s=gN[s]),this.listExpandDirection=s,this},setListEaseInDuration(s){return s===void 0&&(s=0),this.listEaseInDuration=s,this},setListEaseOutDuration(s){return s===void 0&&(s=0),this.listEaseOutDuration=s,this},setListTransitInCallback(s){return this.listTransitInCallback=s,this},settListTransitOutCallback(s){return this.listTransitOutCallback=s,this},setListBounds(s){return this.listBounds=s,this},setListWidth(s){return this.listWidth=s,this},setListHeight(s){return this.listHeight=s,this},setListSize(s,t){return this.setListWidth(s).setListHeight(t),this},setListAlignmentMode(s){return this.listAlignMode=s,this},setListSpace(s){return s===void 0&&(s={}),this.listSpace=s,this},setListDraggable(s){return s===void 0&&(s=!0),this.listDraggable=s,this}};const gN={down:0,up:1};var mN=function(){var s=this.scene,t,e=this.listCreateBackgroundCallback;e&&(t=e.call(this,s),s.add.existing(t));var r=[],i=this.listCreateButtonCallback;if(i)for(var n=this.options,o=0,a=n.length;o<a;o++){var h=i.call(this,s,n[o],o,n);s.add.existing(h),r.push(h)}var u=this.listWidth;u===void 0&&(this.listAlignMode==="text"?u=this.getElement("text").width:u=this.width);var l=this.listHeight,f;return this.listWrapEnable?f=new Wa(s,{width:u,height:l,background:t,buttons:r,space:this.listSpace,draggable:this.listDraggable}):f=new Re(s,{width:u,height:l,orientation:"y",background:t,buttons:r,space:this.listSpace,draggable:this.listDraggable}),s.add.existing(f),f},xN=function(){if(this.listPanel)return this;var s=mN.call(this);s.on("button.over",function(e,r,i,n){this.listOnButtonOver&&this.listOnButtonOver.call(this,e,r,i,n),this.emit("button.over",this,s,e,r,i,n)},this).on("button.out",function(e,r,i,n){this.listOnButtonOut&&this.listOnButtonOut.call(this,e,r,i,n),this.emit("button.out",this,s,e,r,i,n)},this);var t=new kx(s,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:this.getElement(this.listAlignMode),alignTargetY:this,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){s.on("button.click",function(e,r,i,n){this.listOnButtonClick&&this.listOnButtonClick.call(this,e,r,i,n),this.emit("button.click",this,s,e,r,i,n)},this),this.emit("list.open",this,s)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=s,this.dropDownBehavior=t,this.pin(s),this},yN=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},TN=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},vy={openListPanel:xN,closeListPanel:yN,toggleListPanel:TN};Object.assign(vy,pN);const Ut=Phaser.Utils.Objects.GetValue;class py extends fo{constructor(t,e){super(t,e),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Ut(e,"options"));var r=Ut(e,"list");this.setWrapEnable(Ut(r,"wrap",!1)),this.setCreateButtonCallback(Ut(r,"createButtonCallback")),this.setCreateListBackgroundCallback(Ut(r,"createBackgroundCallback")),this.setButtonClickCallback(Ut(r,"onButtonClick")),this.setButtonOverCallback(Ut(r,"onButtonOver")),this.setButtonOutCallback(Ut(r,"onButtonOut")),this.setListExpandDirection(Ut(r,"expandDirection")),this.setListEaseInDuration(Ut(r,"easeIn",500)),this.setListEaseOutDuration(Ut(r,"easeOut",100)),this.setListTransitInCallback(Ut(r,"transitIn")),this.settListTransitOutCallback(Ut(r,"transitOut")),this.setListSize(Ut(r,"width"),Ut(r,"height")),this.setListAlignmentMode(Ut(r,"alignParent","text")),this.setListBounds(Ut(r,"bounds")),this.setListSpace(Ut(r,"space")),this.setListDraggable(Ut(r,"draggable",!1)),this.setValueChangeCallback(Ut(e,"setValueCallback"),Ut(e,"setValueCallbackScope")),this.setValue(Ut(e,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){this.scene&&(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,e){return this.valueChangeCallback=t,this.valueChangeCallbackScope=e,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var e=this._value;this._value=t;var r=this.valueChangeCallback,i=this.valueChangeCallbackScope;r&&(i?r.call(i,this,t,e):r(this,t,e))}}}Object.assign(py.prototype,vy);const CN=Phaser.GameObjects.Text;var gy=function(s){return s instanceof CN};const SN=Phaser.GameObjects.BitmapText;var EN=function(s){return s instanceof SN};const di=0,Bi=1,Gi=2;var gl=function(s){var t;return EN(s)?t=Gi:gy(s)?t=di:t=Bi,t},Id=function(s,t,e){var r=gl(s);switch(r){case di:e=s.getWrappedText(t);break;case Bi:e=s.getPenManager(t,e);break;case Gi:s.maxWidth>0?e=s.setText(t).getTextBounds().wrappedText.split(`
`):e=t.split(`
`);break}return e},PN=function(s,t){s===void 0&&(s=this.startLineIndex),t===void 0&&(t=s+this.pageLinesCount);var e;switch(this.textObjectType){case di:case Gi:e=this.lines.slice(s,t).join(`
`);break;case Bi:var r=this.lines.getLineStartIndex(s),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(r,i,!0);break}return e},Lu=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s};const MN={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var t=this.totalLinesCount;this.sections.push(Lu(e));var e=this.sections.join(`
`);this.lines=Id(this.parent,e,this.lines);for(var r=this.totalLinesCount-t,i=Math.ceil(r/this.pageLinesCount),n=0;n<i;n++)this.pageStartIndexes.push(t+n*this.pageLinesCount);return this},setText(s,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var e=Lu(s).split(this.pageBreak),r=0,i=e.length;r<i;r++)this.appendPage(e[r]);return this},appendText(s){var t=this.content+Lu(s);return this.setText(t,!1),this}},AN=Phaser.Math.Clamp,RN={getPage(s){return s===void 0&&(s=this.pageIndex),this.setPageIndex(s).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(s){return s=AN(s,0,this.pageCount-1),this.pageIndex=s,this.startLineIndex=this.pageStartIndexes[s],this.endLineIndex=this.pageStartIndexes[s+1],this}};var my=function(s,t){var e=gl(s);switch(e){case di:var n=s.style,r=n.wordWrapWidth,i=n.wordWrapCallback;n.wordWrapWidth=0,n.wordWrapCallback=void 0,s.setText(t),n.wordWrapWidth=r,n.wordWrapCallback=i;break;case Bi:var n=s.style,o=n.wrapMode;n.wrapMode=0,s.setText(t),n.wrapMode=o;break;case Gi:var a=s._maxWidth;s._maxWidth=0,s.setText(t),s._maxWidth=a;break}};const ON={showPage(s){return this.displayText(this.getPage(s)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(s){my(this.parent,s)}};var xy={getLines:PN};Object.assign(xy,MN,RN,ON);const fa=Phaser.Utils.Objects.GetValue,LN=Phaser.Math.Clamp;class bN extends Qt{constructor(t,e){super(t,{eventEmitter:!1}),this.textObjectType=gl(this.parent),this.pageStartIndexes=[],this.lines=Id(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(t){return this.setMaxLines(fa(t,"maxLines",void 0)),this.setPageBreak(fa(t,"pageBreak",`\f
`)),this.setText(fa(t,"text","")),this.setStartLineIndex(fa(t,"start",0)),this.setPageIndex(fa(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case di:this.lines.length=0;break;case Bi:this.lines.destroy();break;case Gi:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=LN(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case di:case Bi:var e=this.parent.style.maxLines;e>0?t=e:t=this.totalLinesCount;break;case Gi:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(bN.prototype,xy);Phaser.Utils.Objects.GetFastValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;const wN=Fs.prototype.add;var Wp=function(s,t,e,r,i,n,o,a,h){return s.setVisible(!1),wN.call(this,s,t,e,r,i,n,o,a,h),this};const FN={add:Wp,addPage:Wp};var DN=function(s){return s===void 0?null:this.sizerChildren.hasOwnProperty(s)?this.sizerChildren[s]:null};const Hp=Vi.prototype.setChildVisible;var IN=function(s,t){this._previousKey=this._currentKey;var e=this.previousPage;e&&(this.swapMode===0?(Hp.call(this,e,!1),this.emit("pageinvisible",e,this._previousKey,this)):e.destroy()),s&&!this.sizerChildren.hasOwnProperty(s)&&this.emit("createpage",s,this),this._currentKey=s;var r=this.currentPage;return r&&(Hp.call(this,r,!0),this.emit("pagevisible",r,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&r.setAlpha(0).fadeIn(t,1)),this},BN=function(s){return this.sizerChildren.hasOwnProperty(s)},yy={getPage:DN,swapPage:IN,hasPage:BN};Object.assign(yy,FN);const kp=Phaser.Utils.Objects.GetValue;class Ty extends Fs{constructor(t,e){super(t,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(kp(e,"swapMode",0)),this.setFadeInDuration(kp(e,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=GN[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Ty.prototype,yy);const GN={invisible:0,destroy:1},Cy=Phaser.Math.Vector3,YN=Phaser.Math.Matrix4;var $p=new Cy,Zp=new Cy,Kp=new YN,NN=function(s,t,e,r,i,n,o){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=0),$p.set(t,e,r),Zp.set(i,n,o),Kp.fromRotationXYTranslation(Zp,$p,!0);for(var a=0,h=s.vertices.length;a<h;a++)s.vertices[a].transformMat4(Kp)};const XN=Phaser.GameObjects.Mesh,zN=Phaser.Utils.Objects.IsPlainObject,Pn=Phaser.Utils.Objects.GetValue,VN=Phaser.Geom.Mesh.GenerateGridVerts,bu=Phaser.Math.RadToDeg,Ph=Phaser.Math.DegToRad,Sy=45,UN=1+1/Math.sin(Ph(Sy));let Ey=class extends XN{constructor(t,e,r,i,n,o){zN(e)&&(o=e,e=Pn(o,"x",0),r=Pn(o,"y",0),i=Pn(o,"key",null),n=Pn(o,"frame",null)),super(t,e,r,i,n),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(UN),this.hideCCW=Pn(o,"hideCCW",!0);var a=Pn(o,"gridWidth",32),h=Pn(o,"gridHeight",a);this.resetVerts(a,h)}resetPerspective(){return this.setPerspective(this.width,this.height,Sy),this}resetVerts(t,e){if(t!==void 0&&(this.gridWidth=t),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var r=this.frame.cutWidth,i=this.frame.cutHeight;VN({mesh:this,texture:this.texture.key,frame:this.frame.name,width:r/this.height,height:i/this.height,widthSegments:Math.ceil(r/this.gridWidth),heightSegments:Math.ceil(i/this.gridHeight),flipY:this.frame.source.isRenderTexture});var n=this.transformInfo;return n&&this.transformVerts(n.x,n.y,n.z,n.rotateX,n.rotateY,n.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return bu(this.rotationX)}set angleX(t){this.rotationX=Ph(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return bu(this.rotationY)}set angleY(t){this.rotationY=Ph(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return bu(this.rotationZ)}set angleZ(t){this.rotationZ=Ph(t)}transformVerts(t,e,r,i,n,o){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=e,this.transformInfo.rotateX=i,this.transformInfo.rotateY=n,this.transformInfo.rotateZ=o,NN(this,t,e,r,i,n,o),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,r=0,i=e.length;r<i;r++)e[r].color=t}setTint(t){return this.tint=t,this}};const WN=Phaser.GameObjects.RenderTexture,HN=Phaser.Utils.Objects.IsPlainObject,Jo=Phaser.Utils.Objects.GetValue;class kN extends Ey{constructor(t,e,r,i,n,o){HN(e)&&(o=e,e=Jo(o,"x",0),r=Jo(o,"y",0),i=Jo(o,"width",32),n=Jo(o,"height",32));var a=new WN(t,e,r,i,n).setOrigin(.5);super(t,e,r,a.texture.key,null,o),this.type="rexPerspectiveRenderTexture",this.rt=a}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,e){return e===void 0&&(e={}),e.gameObjects=t,e.renderTexture=this.rt,F0(e),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Ri=function(s,t,e,r){if(Array.isArray(s))for(var i=!1,n=0,o=s.length;n<o;n++){var a=s[n];if(!(r&&!a)&&(e?i=t.call(e,a,n,s):i=t(a,n,s),i))return}else{var i=!1;for(var h in s){var a=s[h];if(!(r&&!a)&&(e?i=t.call(e,a,h,s):i=t(a,h,s),i))return}}};const wu=Phaser.Math.RadToDeg,Fu=Phaser.Math.DegToRad;class $N extends Vi{constructor(t,e,r,i,n,o){super(t,e,r,i,n),this.faces=o,Ri(o,function(a){a.setPosition(e,r),this.add(a)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return wu(this.rotationX)}set angleX(t){this.rotationX=Fu(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return wu(this.rotationY)}set angleY(t){this.rotationY=Fu(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return wu(this.rotationZ)}set angleZ(t){this.rotationZ=Fu(t)}setDebug(t,e){return Ri(this.faces,function(r){r.setDebug(t,e)},null,!0),this}panX(t){return Ri(this.faces,function(e){e.panX(t)},null,!0),this}panY(t){return Ri(this.faces,function(e){e.panY(t)},null,!0),this}panZ(t){return Ri(this.faces,function(e){e.panZ(t)},null,!0),this}transformVerts(t,e,r,i,n,o){return Ri(this.faces,function(a){a.transformVerts(t,e,r,i,n,o)},null,!0),this}forEachFace(t,e,r){return Ri(this.faces,t,e,r),this}}const ZN=Phaser.Utils.Objects.IsPlainObject,KN={key:"__WHITE"},JN={image:Ey,rendertexture:kN};var Jp=function(s,t){t===void 0&&(t=KN);var e;return ZN(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),e=new JN[t.type](s,t),s.add.existing(e)):e=t,e},QN=function(s,t,e){var r;if(e===void 0){r=[];for(var i,n,o=0,a=t.length;o<a;o++)n=t[o],n?i=Jp(s,n):i=null,r.push(i)}else{r={};for(var i,h,o=0,a=e.length;o<a;o++)h=e[o],t.hasOwnProperty(h)?i=Jp(s,t[h]):i=null,r[h]=i}return r};const jN=Phaser.Math.DegToRad,Qp=jN(180);var qN=function(s,t){var e=t.back;e&&(s.orientation===0?e.transformVerts(0,0,0,0,Qp,0):e.transformVerts(0,0,0,Qp,0,0))};const Du=Phaser.Utils.Objects.GetValue,_N=Phaser.Math.Linear;class t3 extends Xr{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Du(t,"ease","Cubic")),this.setFrontToBackDirection(Du(t,"frontToBack",0)),this.setBackToFrontDirection(Du(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=jp[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=jp[t]),this.endAngleBF=t===0?-180:180,this}start(t,e){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var r=e+1,i=this.parent;return i.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*r):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*r),super.start(),this}flip(t,e){return this.isRunning?this:(t===void 0&&(t=this.duration),e===void 0&&(e=0),this.start(t,e),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+e+1)%2,this)}flipRight(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,e),this}flipLeft(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,e),this}updateGameObject(t,e){var r=this.easeFn(e.t),i=_N(this.startAngle,this.endAngle,r);t.orientation===0?t.angleY=i:t.angleX=i}}const jp={right:0,"left-to-right":0,left:1,"right-to-left":1},e3=Phaser.Utils.Objects.IsPlainObject,Mn=Phaser.Utils.Objects.GetValue,i3=["back","front"];class s3 extends $N{constructor(t,e,r,i){e3(e)&&(i=e,e=Mn(i,"x",0),r=Mn(i,"y",0));var n=QN(t,i,i3),o=n.back,a=n.front,h=Mn(i,"width"),u=Mn(i,"height");if(h===void 0||u===void 0){if(h===void 0){var l=a?a.width:0,f=o?o.width:0;h=Math.max(l,f)}if(u===void 0){var c=a?a.height:0,d=o?o.height:0;u=Math.max(c,d)}}super(t,e,r,h,u,n),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,Ri(n,function(p,g){this[`${g}Face`]=p},this);var v=Mn(i,"flip",void 0);v!==!1&&(this.flip=new t3(this,v)),this.setOrientation(Mn(i,"orientation",0)),qN(this,n),this.setFace(Mn(i,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,Ri(this.faces,function(e){e.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,Ri(this.faces,function(e){e.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,Ri(this.faces,function(e){e.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=n3[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=r3[t]),this.currentFaceIndex=t;var e=t===1,r=e?180:0;this.orientation===0?this.angleY=r:this.angleX=r}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const n3={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},r3={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;Phaser.Utils.Objects.GetValue;const a3=Phaser.Utils.Objects.GetValue;var o3=function(s){var t=this.scene;this.setSnapshotPadding(a3(s,"snapshotPadding",0)),s=Ls(s),delete s.width,delete s.height,s.front={width:1,height:1},s.back={width:1,height:1};var e=new s3(t,s);t.add.existing(e);var r=e.flip;if(r){var i=this;r.on("start",function(){i.enterPerspectiveMode()}).on("complete",function(){i.exitPerspectiveMode()})}return e};const h3=["front","back"],l3={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var s=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,s),this.setChildVisible(this.childrenMap.back,!s),this},setSnapshotPadding(s){return this.snapshotPadding=s,this},snapshotFace(s){typeof s=="number"&&(s=h3[s]);var t=this.perspectiveCard.faces[s],e=this.childrenMap[s];t.rt.clear();var r=e.visible;e.visible=!0;var i=e.isRexContainerLite?e.getAllVisibleChildren():e;return t.snapshot(i,{padding:this.snapshotPadding}),e.visible=r,this}},qp=Phaser.Utils.Objects.GetValue;class u3 extends Fs{constructor(t,e){super(t,e),this.type="rexPerspectiveCard";var r=e.back,i=qp(e,"expand.back",!0);this.add(r,{key:"back",expand:i});var n=e.front,o=qp(e,"expand.front",!0);this.add(n,{key:"front",expand:o}),this.perspectiveCard=o3.call(this,e),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var e=t===0,r=this.childrenMap.front,i=this.childrenMap.back;this.setChildVisible(r,e),this.setChildVisible(i,!e)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,e,r,i,n,o){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,e,r,i,n,o),this}forEachFace(t,e,r){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,e,r),this}}Object.assign(u3.prototype,l3);var f3=function(s){var t=this.getElement("tabs.buttons");if(!(s>=t.length))return t[s].name},d3=function(s){for(var t=this.getElement("tabs.buttons"),e=0,r=t.length;e<r;e++)if(t[e].name===s)return e};const c3=Phaser.Utils.Objects.IsPlainObject,Iu=Phaser.Utils.Objects.GetValue,v3=Phaser.Utils.String.UUID;var p3=function(s,t,e){if(c3(s)){var r=s;s=Iu(r,"key"),t=Iu(r,"tab"),e=Iu(r,"page")}return s||(s=v3()),t.name=s,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(e,{key:s}),this},g3=function(s,t){var e;if(typeof s=="number"?e=s:e=this.getPageIndex(s),e!=null){var r;t!==void 0&&(r=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(e),r!==void 0&&(this.childrenMap.pages.fadeInDuration=r)}return this},m3=function(s){return this.swapPage(0,s),this},x3=function(s){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,s),this};const y3={swapPage:g3,swapFirstPage:m3,swapLastPage:x3};var T3=function(s,t){typeof s=="number"&&(s=this.getPageKey(s));var e=this.childrenMap.tabs,r=e.getByName(s),i=this.childrenMap.pages,n=i.getElement(s);return!r||!n?this:(i.removeChildrenMap(s),e.removeButton(r,t),i.remove(n,t),this)};const C3={removePage:T3};var S3=function(s){return typeof s=="number"&&(s=this.getPageKey(s)),this.childrenMap.pages.getPage(s)},E3=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),this.getElement("tabs.buttons")[t]},Py={getPageKey:f3,getPageIndex:d3,addPage:p3,getPage:S3,getTab:E3};Object.assign(Py,y3,C3);const An=Phaser.Utils.Objects.GetValue,Qo=wt.prototype.add;let My=class extends wt{constructor(t,e){e===void 0&&(e={});var r=An(e,"tabPosition","top"),i=r==="left"||r==="right"?"x":"y";e.orientation=i,super(t,e),this.type="rexTabPages";var n=An(e,"background",void 0);n&&this.addBackground(n);var o=An(e,"pages"),a=new Ty(t,o);t.add.existing(a);var h=i==="y",u=h?An(e,"wrapTabs",!1):!1,l=An(e,"tabs",void 0);l===void 0&&(l={});var f=u?Wa:Re;l.orientation=h?"x":"y",l.buttonsType="radio";var c=new f(t,l);t.add.existing(c);var d=u?!0:An(e,"expand.tabs",!1),v=An(e,"align.tabs","left");switch(r){case"top":case"left":Qo.call(this,c,{proportion:0,expand:d,align:v}),Qo.call(this,a,{proportion:1,expand:!0});break;case"bottom":case"right":Qo.call(this,a,{proportion:1,expand:!0}),Qo.call(this,c,{proportion:0,expand:d,align:v});break}this.addChildrenMap("background",n),this.addChildrenMap("tabs",c),this.addChildrenMap("pages",a),c.on("button.click",function(p){var g=p.name;a.hasPage(g)&&a.swapPage(g)}),c.on("button.statechange",function(p,g,m,x){var y=m?"tab.focus":"tab.blur";this.emit(y,p,p.name)},this),a.on("pagevisible",function(p,g,m){this.emit("page.focus",p,g)}),a.on("pageinvisible",function(p,g,m){this.emit("page.blur",p,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(My.prototype,Py);class P3 extends Od{constructor(t,e){e===void 0&&(e={}),e.destroy=!1,super(t,e)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const M3={expand(s){if(this.expanded===!0)return this;s===void 0&&(s=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,e=this.childrenMap.child;this.show(e);var r=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return r.layout(),t.emit("folder.expand",s,this),e.emit("folder.expand",s,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,s),this},collapse(s){if(this.expanded===!1)return this;s===void 0&&(s=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,e=this.childrenMap.child;return t.emit("folder.collapse",s,this),e.emit("folder.collapse",s,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(e,1,1).hide(e);var r=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();r.layout(),this.emit("collapse.complete",this)},this).requestClose(null,s),this},toggle(s){return this.expanded?this.collapse(s):this.expand(s),this}};var A3=function(s,t){Cd.popUp.call(s,t,this.expandDirection)},R3=function(s,t){Cd.scaleDown.call(s,t,this.expandDirection)};const O3={setTransitionDuration(s){return this.transitionDuration=s,this.childTransition.setTransitInTime(s).setTransitOutTime(s),this},setExpandCallback(s){return s===void 0&&(s=A3.bind(this)),this.childTransition.setTransitInCallback(s),this},setCollapseCallback(s){return s===void 0&&(s=R3.bind(this)),this.childTransition.setTransitOutCallback(s),this}},Pi=Phaser.Utils.Objects.GetValue;let Ay=class extends wt{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1),super(t,e),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var r=e.background,i=e.title,n=e.child;r&&this.addBackground(r);var o=this.orientation===1?"left":"top",f=Pi(e,"align.title",o),c=Pi(e,"expand.title",!0);this.add(i,{proportion:0,align:f,expand:c});var a=Pi(e,"toggleByTarget",void 0),h=Pi(e,"toggleClickConfig");a===void 0&&(a=i),a&&Px.onClick.call(a,function(){this.toggle()},this,h),this.childTransition=new P3(n);var u=Pi(e,"customChildOrigin",!1);if(!u){var l=this.rtl?1:0;n.setOrigin(l)}var f=Pi(e,"align.child","left"),c=Pi(e,"expand.child",!0),d=c?1:0;this.add(n,{proportion:d,align:f,expand:c}),this.addChildrenMap("title",i),this.addChildrenMap("child",n),this.addChildrenMap("background",r);var v=e.transition;this.setTransitionDuration(Pi(v,"duration",200)),this.setExpandCallback(Pi(v,"expandCallback",void 0)),this.setCollapseCallback(Pi(v,"collapseCallback",void 0)),this.reLayoutTarget=Pi(e,"reLayoutTarget",void 0);var p=e.onExpandStart;p&&this.on("expand.start",p);var g=e.onExpandComplete;g&&this.on("expand.complete",g);var m=e.onCollapseStart;m&&this.on("collapse.start",m);var x=e.onCollapseComplete;x&&this.on("collapse.complete",x)}};Object.assign(Ay.prototype,M3,O3);var L3=function(s){return s!==void 0&&(this.text=s),this.lines=Id(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},Ry=function(s){return(s-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Oy=function(s){return s*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},b3=function(s){var t=s+this.visibleLinesCount+1,e;switch(this.textObjectType){case di:e=this.lines.slice(s,t).join(`
`);break;case Bi:var r=this.lines.getLineStartIndex(s),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(r,i,!0);break;case Gi:e=this.lines.slice(s,t).join(`
`);break}return e},Ly=function(){var s=this.textObject.rexSizer;this.textObject.y+=s.offsetY-s.preOffsetY,s.preOffsetY=s.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&w3.call(this)},w3=function(){if(this.textObject.setCrop){var s=this.textObject.rexSizer.offsetY,t,e;s<=0?(t=-s,e=this.height):(t=0,e=this.height-s),this.textObject.setCrop(0,t,this.width,e)}},F3=function(){var s=Math.max(Math.floor(Ry.call(this,-this.textOY)),0),t=Oy.call(this,s)+this.textOY,e=b3.call(this,s);return my(this.textObject,e),this.textObject.rexSizer.offsetY=t,Ly.call(this),this},D3=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,ao.call(this),this},I3=function(s,t,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=t,this._textObjectRealHeight=e,this.textObjectType){case di:case Bi:s.setFixedSize(t,e);var r=s.style,i=Math.max(t,0);this.textObjectType===di?r.wordWrapWidth=i:(r.wrapMode===0&&(r.wrapMode=1),r.wrapWidth=i);break;case Gi:s.setMaxWidth(t);break}this.setText()}},B3=function(){var s,t,e,r=this.left,i=this.top,n,o,a,h;s=this.textObject,s.rexSizer.hidden||(t=s.rexSizer,e=t.padding,n=r+e.left,o=i+e.top,a=this.width-e.left-e.right,h=this.height-e.top-e.bottom,I3.call(this,s,a,h),so(s,n,o,a,h,t.align),t.preOffsetY=0,Ly.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const G3={setText:L3,updateTextObject:F3,preLayout:D3,layoutChildren:B3},_p=Phaser.Utils.Objects.IsPlainObject,qe=Phaser.Utils.Objects.GetValue,Y3=Phaser.Display.Align.TOP_LEFT;class by extends qn{constructor(t,e,r,i,n,o){_p(e)?(o=e,e=qe(o,"x",0),r=qe(o,"y",0),i=qe(o,"width",void 0),n=qe(o,"height",void 0)):_p(i)&&(o=i,i=qe(o,"width",void 0),n=qe(o,"height",void 0)),super(t,e,r,i,n,o),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=qe(o,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(qe(o,"clamplTextOY",!0)),this.alwaysScrollable=qe(o,"alwaysScrollable",!1);var a=qe(o,"background",void 0),h=qe(o,"text",void 0);h===void 0&&(h=N3(t)),this.textCropEnable=qe(o,"textCrop",!!h.setCrop);var u=qe(o,"textMask",!this.textCropEnable);a&&this.addBackground(a),this.add(h),this.sizerChildren=[h];var l=this.getSizerConfig(h);l.align=Y3,l.padding=Ur(0),l.expand=!0,this.textObject=h,this.textObjectType=gl(h),l.preOffsetY=0,l.offsetY=0,u&&(this.textMask=Dr.call(this,this.textObject,this)),this.addChildrenMap("background",a),this.addChildrenMap("text",h)}destroy(t){if(this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case di:this.lines.length=0;break;case Bi:this.lines.destroy();break;case Gi:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case di:case Bi:var e=this.textObject.style;t=e.metrics.fontSize+e.strokeThickness;break;case Gi:var r=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*r;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case di:case Bi:t=this.textObject.lineSpacing;break;case Gi:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Ry.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Oy.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var e=this.topTextOY,r=this.bottomTextOY,i=this.textOYExceedTop(t),n=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:i?t=e:n&&(t=r)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,r)),this.execeedBottomState=n}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var N3=function(s){return s.add.text(0,0,"")};Object.assign(by.prototype,G3);var X3=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.textOY},set:function(t){s.textOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTextOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTextOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.textObjectHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.textHeight}})},z3=function(s){var t=this.childrenMap.child;return t.setText(s),this.resizeController(),this},V3=function(s){return this.setText(this.text+s),this};const ys=Phaser.Utils.Objects.GetValue;class U3 extends Fd{constructor(t,e){e===void 0&&(e={});var r=ys(e,"text",void 0),i=ys(e,"textWidth",void 0),n=ys(e,"textHeight",void 0),o=ys(e,"textCrop",!!r.setCrop),a=ys(e,"textMask",!o),h=ys(e,"content",""),u=new by(t,{width:i,height:n,text:r,textMask:a,textCrop:o&&!a,content:h,clamplTextOY:ys(e,"clamplChildOY",!1),alwaysScrollable:ys(e,"alwaysScrollable",!1)});t.add.existing(u);var l=i===void 0?1:0,f=n===void 0;X3(u),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:u,proportion:l,expand:f};var c=ys(e,"space",void 0);c&&(c.child=c.text),super(t,e),this.addChildrenMap("text",r)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var W3={setText:z3,appendText:V3};Object.assign(U3.prototype,W3);var H3=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,e=t.rexSizer;return e.hidden?s=0:this.scrollMode===0?s=this.getChildWidth(t):s=0,s},k3=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,e=t.rexSizer;return e.hidden||this.scrollMode===0?s=0:s=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:Ct(t),s},$3=function(s){return s===void 0&&(s=[]),this.child&&this.child.isRexSizer&&s.push(this.child),s},Z3=function(){var s=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:s+=this.childOY,this.child.setPosition(s,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},K3=function(){var s=this.child,t,e;s.rexSizer.hidden||(this.scrollMode===0?t=this.width:e=this.height,s.isRexSizer?s.runLayout(this,t,e):an(s,t,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},wy={getChildrenWidth:H3,getChildrenHeight:k3,getChildrenSizers:$3,resetChildPosition:Z3,layoutChildren:K3};Object.assign(wy,oy);const tg=Phaser.Utils.Objects.IsPlainObject,Mi=Phaser.Utils.Objects.GetValue,J3=Phaser.Display.Align.TOP_LEFT;class Q3 extends qn{constructor(t,e,r,i,n,o){tg(e)?(o=e,e=Mi(o,"x",0),r=Mi(o,"y",0),i=Mi(o,"width",void 0),n=Mi(o,"height",void 0)):tg(i)&&(o=i,i=Mi(o,"width",void 0),n=Mi(o,"height",void 0)),super(t,e,r,i,n,o),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(Mi(o,"scrollMode",!0)),this.setClampMode(Mi(o,"clamplChildOY",!0));var a=Mi(o,"child",void 0),h=Mi(o,"expand",!0);a.setOrigin&&a.setOrigin(0),this.add(a),this.sizerChildren=[a];var u=this.getSizerConfig(a);u.align=J3,u.expand=h,this.child=a,this.setupChildrenMask(Mi(o,"mask",void 0))}destroy(t){this.scene&&(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=ny[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?Ct(this.child):Lt(this.child)}get childWidth(){return this.scrollMode===0?Lt(this.child):Ct(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var e=this.topChildOY,r=this.bottomChildOY,i=this.childOYExceedTop(t),n=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:i?t=e:n&&(t=r)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,n&&(this.execeedBottomState||this.emit("execeedbottom",this,t,r)),this.execeedBottomState=n}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(Q3.prototype,wy);Phaser.Utils.Objects.GetValue;const jo={popUp:function(s,t){s.popUp(t)},scaleDown:function(s,t){s.scaleDown(t)},fadeIn:function(s,t){s.fadeIn(t)},fadeOut:function(s,t){s.fadeOut(t)}},Mh=Phaser.Utils.Objects.GetValue;var Pf=function(s,t,e){var r=Mh(e,"reverse",!1),i;if(se(s[0]))if(r)for(var o=s.length,n=o-1;n>=0;n--)i=Pf(s[n],t,e);else for(var n=0,o=s.length;n<o;n++)i=Pf(s[n],t,e);else i=j3(s,t,e);return i},j3=function(s,t,e){var r=Mh(e,"argsConvert",void 0),i=Mh(e,"argsConvertScope",void 0),n=s[0];if(Vs=Jf(Vs,s,1),r){r===!0&&(r=ix,i=void 0);for(var o=0,a=Vs.length;o<a;o++)i?Vs[o]=r.call(i,Vs[o],s):Vs[o]=r(Vs[o],s)}var h;typeof n=="string"?(h=t[n],h==null&&(h=Mh(t,n,null))):h=n;var u=h.apply(t,Vs);return u},Vs=[];const Ai=Phaser.Utils.Objects.GetValue;let q3=class extends Qt{constructor(t,e){super(t,e);var r=Ai(e,"clock",void 0);r||(r=new _0(t)),this.clock=r,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(t){return this.clock.resetFromJSON(Ai(t,"clock",void 0)),this.state=Ai(t,"state",0),this.commands=Ai(t,"commands",[]),this.scope=Ai(t,"scope",void 0),this.setTimeUnit(Ai(t,"timeUnit",0)),this.setDtMode(Ai(t,"dtMode",0)),this.index=Ai(t,"index",0),this.nextTime=Ai(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,e,r){this.stop();var i=Ai(r,"timeUnit",void 0);i!==void 0&&this.setTimeUnit(i);var n=Ai(r,"dtMode",void 0);return n!==void 0&&this.setDtMode(n),t=t.filter(function(o){var a=o[0];return!isNaN(a)}).map(function(o){var a=o[0];return typeof a=="string"&&(o[0]=parseFloat(o[0])),o}),this.dtMode===0&&t.sort(function(o,a){var h=o[0],u=a[0];return h>u?1:h<u?-1:0}),this.commands=t,this.scope=e,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var e=this.commands.length-1;;){var r=this.commands[this.index],i=r[1];if(se(i)||(i=Jf(_3,r,1)),Pf(i,this.scope),this.emit("runcommand",i,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=t),e}setDtMode(t){return typeof t=="string"&&(t=eX[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=tX[t]),this.timeUnit=t,this}};var _3=[];const tX={ms:0,s:1,sec:1},eX={abs:0,absolute:0,inc:1,increment:1},da=Phaser.Utils.Objects.GetValue;class iX extends fo{constructor(t,e){e===void 0&&(e={text:createDefaultTextObject(t)}),super(t,e),this.type="rexToast",this.setTransitInTime(da(e,"duration.in",200)),this.setDisplayTime(da(e,"duration.hold",1200)),this.setTransitOutTime(da(e,"duration.out",200)),this.setTransitInCallback(da(e,"transitIn",Us.popUp)),this.setTransitOutCallback(da(e,"transitOut",Us.scaleDown)),this.player=new q3(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){this.scene&&(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Us[t]),t){case Us.popUp:t=jo.popUp;break;case Us.fadeIn:t=jo.fadeIn;break}return t||(t=We),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Us[t]),t){case Us.scaleDown:t=jo.scaleDown;break;case Us.fadeOut:t=jo.fadeOut;break}return t||(t=We),this.transitOutCallback=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX0=t,this.scaleY0=e,super.setScale(t,e),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[We]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[We]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}}const Us={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};class Fy extends fo{constructor(t,e){e=Rd(t,e),super(t,e),this.type="rexTweaker.Title"}setTitle(t){return t=t?pi(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class sX extends Fy{constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexTweaker.FolderTitle";var r=new mx(t,e.expandedIcon);t.add.existing(r),this.addSpace().add(r,{proportion:0,expand:!1,padding:1}),this.addChildrenMap("expandedIcon",r)}preLayout(){var t=this.childrenMap.expandedIcon;t.resize(1,1)}postResolveSize(t,e){var r=this.childrenMap.expandedIcon,i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(r,"top")-this.getChildOuterPadding(r,"bottom");r.resize(i,i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}setExpandedState(t){t===void 0&&(t=!0);var e=t?"down":"right",r=this.childrenMap.expandedIcon;return r.setDirection(e),this}}var Dy=function(s,t){var e=new Uy(s,t);return s.add.existing(e),e},Bd=function(s,t,e){return _s(s,e)};class nX extends Ay{constructor(t,e){super(t,e),this.type="rexTweaker.Folder"}setTitle(t){var e=this.childrenMap.title;return e.setTitle(t),this}setBindingTarget(t){var e=this.childrenMap.child;return e.setBindingTarget(t),this}}const gr=Phaser.Utils.Objects.GetValue;var rX=function(s,t,e){var r=gr(e,"title")||{},i=new sX(s,r);s.add.existing(i),i.on("folder.expand",function(){i.setExpandedState(!0)}).on("folder.collapse",function(){i.setExpandedState(!1)});var n={root:gr(e,"root"),styles:gr(e,"tweaker"),space:gr(e,"space")||{}},o=Dy(s,n),a=gr(e,"background"),h=Bd(s,t,a),u=new nX(s,{orientation:1,title:i,child:o,background:h,transition:{duration:gr(e,"transition.duration",200)}});return s.add.existing(u),u};const eg=Phaser.Utils.Objects.GetValue;var aX=function(s){var t=this.scene,e=eg(this.styles,"folder")||{};e.tweaker=this.styles,e.root=this.root;var r=rX(t,s,e);delete e.tweaker,delete e.root,this.add(r,{expand:!0}),r.setTitle(s);var i=eg(s,"expanded",!0);i?r.expand(0):r.collapse(0);var n=r.getElement("child");return s.key&&this.root.addChildrenMap(s.key,n),n};class oX extends My{setBindingTarget(t){for(var e=this.childrenMap.pages.children,r=0,i=e.length;r<i;r++)e[r].setBindingTarget(t);return this}}var hX=function(s,t){var e=new lX(s,t);return s.add.existing(e),e};class lX extends kn{constructor(t,e){e===void 0&&(e={}),super(t,e);var r=cf(e,"active");for(var i in r){var n=uX[i]||i,o=r[i];delete r[i],r[n]=o}this.activeStyle=r}modifyStyle(t){for(var e in t)this[e]=t[e];return this}setActiveState(t){if(t===void 0&&(t=!0),this.activeState===t)return this;if(this.activeState=t,t){var e=this.activeStyle,r=rd(this,e);if(ad(e,r))return;this.styleSave=r,this.modifyStyle(e)}else{if(!this.styleSave)return this;this.modifyStyle(this.styleSave),this.styleSave=void 0}return this}}const uX={color:"fillColor",alpha:"fillAlpha",strokeColor:"strokeColor",strokeAlpha:"strokeAlpha",strokeWidth:"lineWidth"};var fX=function(s,t){return t=t?pi(t):{},t.background=hX(s,t.background),t.text=Xx(s,t.text),t.icon!==null&&(t.icon=Wh(s,t.icon)),t.action!==null&&(t.action=Wh(s,t.action)),t},Gd=function(s,t){t=fX(s,t);var e=new dX(s,t);return s.add.existing(e),e};class dX extends fo{setActiveState(t){return this.childrenMap.background.setActiveState(t),this}}const qo=Phaser.Utils.Objects.GetValue;var cX=function(s,t,e){var r=new oX(s,e);s.add.existing(r);for(var i=qo(e,"tab"),n={root:qo(e,"root"),styles:qo(e,"tweaker")},o=qo(t,"pages")||[],a=0,h=o.length;a<h;a++){var u=o[a];r.addPage({key:u.title,tab:Gd(s,i).setActiveState(!1).resetDisplayContent({text:u.title}),page:Dy(s,n)})}return r.on("tab.focus",function(l,f){l.setActiveState(!0)}).on("tab.blur",function(l,f){l.setActiveState(!1)}),r};const ig=Phaser.Utils.Objects.GetValue;var vX=function(s){var t=this.scene,e=ig(this.styles,"tab")||{};e.tweaker=this.styles,e.root=this.root;var r=cX(t,s,e);delete e.tweaker,delete e.root,this.add(r,{expand:!0});for(var i=ig(s,"pages")||[],n=[],o=0,a=0,h=i.length;a<h;a++){var u=r.getPage(a),l=i[a].show;l&&(o=a);var f=i[a].key;f&&this.root.addChildrenMap(f,u),n.push(u)}return r.swapPage(o,0),n};const Mf="string",Iy="number",By="range",Gy="list",pX="buttons",Yy="boolean",gX="toggleSwitch",mX="color";var xX=function(s,t){if(t.view)return t.view;if(t.options)return Gy;switch(typeof s){case"number":return yX(t,"min","max")?By:Iy;case"string":return Mf;case"boolean":return Yy;default:return Mf}},yX=function(s,...t){for(var e=0,r=t.length;e<r;e++)if(s[t[e]]===void 0)return!1;return!0};const TX={setupBinding(){var s=this.childrenMap.inputField;return s.on("valuechange",function(t){this.bindingTarget&&(this.bindingTarget[this.bindTargetKey]=t)},this),this},setBindingTarget(s,t){return this.bindingTarget=s,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(s){return this.bindTargetKey=s,this},syncTargetValue(){if(!this.bindingTarget||!this.bindTargetKey)return this;var s=this.childrenMap.inputField;return s.setValue(this.bindingTarget[this.bindTargetKey]),this}},CX={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var s=this.bindingTarget[this.bindTargetKey],t=this.childrenMap.inputField;t.value!==s&&t.setValue(s)}}},sg=Phaser.Utils.Objects.GetValue;class Yd extends wt{constructor(t,e){super(t,e),this.type="rexTweaker.InputRow";var r=e.inputTitle,i=e.inputField,n=e.background,o=sg(e,"proportion.title",1);this.add(r,{proportion:o,expand:!0});var o=sg(e,"proportion.inputField",2);this.add(i,{proportion:o,expand:!0}),n&&this.addBackground(n),this.addChildrenMap("title",r),this.addChildrenMap("inputField",i),this.addChildrenMap("background",n),this.setupBinding()}destroy(t){this.scene&&(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var e=this.childrenMap.title;return e.setTitle(t),this}}Object.assign(Yd.prototype,TX,CX);var Ny=function(s,t,e){var r=new Fy(s,e);return s.add.existing(r),r};class dn extends wt{get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this.emit("valuechange",t))}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this._readOnly}set readOnly(t){this._readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,!0}setTextFormatCallback(t){return this.textFormatCallback=t,this}}let SX=class extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.TextInput";var r=e.inputText,i=co(t,r);this.add(i,{proportion:1,expand:!0}),this.addChildrenMap("inputText",i),i.on("close",function(){this.setValue(i.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(e),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}};var ng=function(s,t,e){var r=new SX(s,e);return s.add.existing(r),r.setInputTextReadOnly(!!t.inputTextReadOnly),r};class EX extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.NumberInput";var r=e.inputNumber||e.inputText,i=co(t,r).setNumberInput();this.add(i,{proportion:1,expand:!0}),this.addChildrenMap("inputText",i),i.on("close",function(){this.setValue(i.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(e),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var PX=function(s,t,e){var r=new EX(s,e);return s.add.existing(r),r.setInputTextReadOnly(!!t.inputTextReadOnly),r},MX=function(s,t){t=t?pi(t):{},t.track&&(t.track=_s(s,t.track)),t.indicator&&(t.indicator=_s(s,t.indicator));var e=t.thumb;return e&&(t.thumb=_s(s,e)),t},AX=function(s,t){t=MX(s,t);var e=new bd(s,t);return s.add.existing(e),e};const Bu=Phaser.Utils.Objects.GetValue,RX=Phaser.Math.Linear,OX=Phaser.Math.Snap.Floor;class LX extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.RangeInput";var r=e.slider,i=this.orientation===0?"track.height":"track.width",n=Bu(r,i),o=AX(t,r),l=Bu(e,"proportion.range.slider",2),a=n===void 0;this.add(o,{proportion:l,expand:a});var h=e.inputNumber||e.inputText,u=co(t,h).setNumberInput(),l=Bu(e,"proportion.range.inputText",1);this.add(u,{proportion:l,expand:!0}),this.addChildrenMap("slider",o),this.addChildrenMap("inputText",u),u.on("close",function(){this.setValue(u.value)},this),o.on("valuechange",function(){var f=RX(this.minValue,this.maxValue,o.value);this.step&&(f=OX(f,this.step,this.minValue)),this.setValue(f)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText("").setText(e),this.childrenMap.slider.setValue(t,this.minValue,this.maxValue),super.value=t}}setRange(t,e,r){return this.minValue=t,this.maxValue=e,this.step=r,this.childrenMap.slider.setGap(r,t,e),this}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var bX=function(s,t,e){var r=new LX(s,e);return s.add.existing(r),r.setRange(t.min,t.max,t.step),r.setInputTextReadOnly(!!t.inputTextReadOnly),r},wX=function(s,t){t=t?pi(t):{};var e=t.label||t.button,r=t.button||t.label;delete t.label,delete t.button;var i=Rd(s,e);return i.list=t,i.list.createButtonCallback=function(n,o){var a=Gd(n,r).resetDisplayContent({text:o.text});return a},i.list.onButtonOver=function(n,o,a,h){n.setActiveState(!0)},i.list.onButtonOut=function(n,o,a,h){n.setActiveState(!1)},i},FX=function(s,t){t=wX(s,t);var e=new py(s,t);return s.add.existing(e),e},Xy=function(s,t){for(var e=0,r=s.length;e<r;e++){var i=s[e];if(i.value===t)return i.text}},zy=function(s,t){for(var e=0,r=s.length;e<r;e++){var i=s[e];if(i.text===t)return i.value}};class DX extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ListInput";var r=FX(t,e.list);this.add(r,{proportion:1,expand:!0}),this.addChildrenMap("list",r),r.on("button.click",function(i,n,o,a,h,u){var l=zy(r.options,o.text);this.setValue(l)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.childrenMap.list,r=Xy(e.options,t);e.resetDisplayContent({text:r}),super.value=t}}setOptions(t){return this.childrenMap.list.setOptions(t),this}}var IX=function(s,t,e){var r=new DX(s,e);return s.add.existing(r),r.setOptions(t.options),r},Vy=function(s,t){var e=new Re(s,t);return s.add.existing(e),e},BX=function(s,t){for(var e=0,r=s.length;e<r;e++){var i=s[e];i&&i.setActiveState(i.text===t)}};const GX=Phaser.Utils.Objects.GetValue;class YX extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ButtonsInput";var r=e.button?pi(e.button):{},i=GX(r,"expand",!0);i&&(r.align="center"),delete r.expand;var n=Vy(t,{expand:i});n.buttonConfig=r,this.add(n,{proportion:1,expand:!0}),this.addChildrenMap("list",n),n.on("button.click",function(o,a,h,u){var l=zy(n.options,o.text);this.setValue(l)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.childrenMap.list,r=Xy(e.options,t);BX(e.childrenMap.buttons,r),super.value=t}}setOptions(t){var e=this.childrenMap.list;e.options=t;var r=this.scene,i=e.buttonConfig;e.clearButtons(!0);for(var n=0,o=t.length;n<o;n++){var a=t[n],h=Gd(r,i).setActiveState(!1).resetDisplayContent({text:a.text});e.addButton(h)}return this}}var NX=function(s,t,e){var r=new YX(s,e);return s.add.existing(r),r.setOptions(t.options),r},XX=function(s,t){var e=new nP(s,t);return s.add.existing(e),e};class zX extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.CheckboxInput";var r=e.checkbox,i=XX(t,r);this.add(i,{proportion:0,expand:!1}),this.addChildrenMap("checkbox",i),i.on("valuechange",function(n){this.setValue(n)},this)}preLayout(){var t=this.childrenMap.checkbox;t.resize(1,1)}postResolveSize(t,e){var r=this.childrenMap.checkbox,i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(r,"top")-this.getChildOuterPadding(r,"bottom");r.resize(i,i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}get value(){return this._value}set value(t){this._value!==t&&(this.childrenMap.checkbox.setValue(t),super.value=t)}}var VX=function(s,t,e){var r=new zX(s,e);return s.add.existing(r),r},UX=function(s,t){var e=new cP(s,t);return s.add.existing(e),e};class WX extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ToggleSwitchInput";var r=e.toggleSwitch,i=UX(t,r);this.addSpace().add(i,{proportion:0,expand:!1}),this.addChildrenMap("toggleSwitch",i),i.on("valuechange",function(n){this.setValue(n)},this)}preLayout(){var t=this.childrenMap.toggleSwitch;t.resize(1,1)}postResolveSize(t,e){var r=this.childrenMap.toggleSwitch,i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(r,"top")-this.getChildOuterPadding(r,"bottom"),n=t-this.getInnerPadding("left")-this.getInnerPadding("right")-this.getChildOuterPadding(r,"left")-this.getChildOuterPadding(r,"right");r.resize(Math.min(i*1.2,n),i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}get value(){return this._value}set value(t){this._value!==t&&(this.childrenMap.toggleSwitch.setValue(t),super.value=t)}}var HX=function(s,t,e){var r=new WX(s,e);return s.add.existing(r),r},kX=function(s,t){t=t?pi(t):{};var e=new Zx(s,t);return s.add.existing(e),e};class $X extends dn{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ColorInput";var r=e.colorInput,i=kX(t,r);this.add(i,{proportion:1,expand:!0}),this.addChildrenMap("colorInput",i),i.on("valuechange",function(n){this.setValue(n)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.childrenMap.colorInput.setValue(t),super.value=t)}}var ZX=function(s,t,e){var r=new $X(s,e);return s.add.existing(r),r},KX=function(s,t,e){var r=t.view,i;switch(r){case Mf:i=ng;break;case Iy:i=PX;break;case By:i=bX;break;case Gy:i=IX;break;case pX:i=NX;break;case Yy:i=VX;break;case gX:i=HX;break;case mX:i=ZX;break;default:i=ho(r)?r:ng;break}var n=i(s,t,e,n);return n.setTextFormatCallback(t.format),n};const rg=Phaser.Utils.Objects.GetValue;var JX=function(s,t,e){var r=rg(e,"title")||{},i=Ny(s,t,r),n=KX(s,t,e),o=rg(e,"background")||{},a=_s(s,o),h=new Yd(s,{...t,...e,inputTitle:i,inputField:n,background:a});return s.add.existing(h),h.setTitle(t),h};const QX=Phaser.Utils.Objects.GetValue;var jX=function(s,t,e){arguments.length===1?(e=s,s=e.bindingTarget,t=e.bindingKey):e===void 0&&(e={}),e.title||(e.title=t),e.view||(e.view=xX(s[t],e));var r=QX(this.styles,"inputRow"),i=JX(this.scene,e,r);return this.add(i,{expand:!0}),i.setBindingTarget(s,t),e.monitor&&i.startMonitorTarget(),e.key&&this.root.addChildrenMap(e.key,i),this};const Gu=Phaser.Utils.Objects.GetValue;var qX=function(s,t,e){for(var r=Gu(e,"title")||{},i=Ny(s,t,r),n=t.buttons,o=Gu(e,"button")||{},a=[],h=0,u=n.length;h<u;h++){var l=zx(s,o);a.push(l);var f=n[h];l.resetDisplayContent({text:f.label}),l.callback=f.callback}var c=Vy(s,{buttons:a,expand:a.length===1}),d=Gu(e,"background")||{},v=_s(s,d),p=new Yd(s,{...e,inputTitle:i,inputField:c,background:v});return s.add.existing(p),p.setTitle(t),c.on("button.click",function(g){g.callback(p.bindingTarget)}),p};const _X=Phaser.Utils.Objects.GetValue;var ag=function(s){var t=this.scene;s===void 0&&(s={}),s.hasOwnProperty("label")&&(s.buttons=[{label:s.label,callback:s.callback}],delete s.label,delete s.callback);var e=s.bindingTarget;delete s.bindingTarget;var r=_X(this.styles,"inputRow")||{},i=qX(t,s,r);return this.add(i,{expand:!0}),e&&i.setBindingTarget(e),s.key&&this.root.addChildrenMap(s.key,i),this};const tz=Phaser.Utils.Objects.GetValue;var ez=function(s){var t=this.scene,e=tz(this.styles,"separator"),r=Bd(t,s,e);return this.add(r,{expand:!0}),this},iz=function(s){for(var t=this.sizerChildren,e=0,r=t.length;e<r;e++){var i=t[e];i.setBindingTarget&&i.setBindingTarget(s)}return this},sz={addFolder:aX,addTab:vX,addInput:jX,addButton:ag,addButtons:ag,addSeparator:ez,setBindingTarget:iz};const nz=Phaser.Utils.Objects.GetValue;class Uy extends wt{constructor(t,e){e===void 0&&(e={}),e.orientation===void 0&&(e.orientation="y"),super(t,e),this.type="rexTweakerShell",this.styles=nz(e,"styles")||{};var r=Bd(t,void 0,e.background);r&&this.addBackground(r)}}Object.assign(Uy.prototype,sz);var rz=function(){return function(s,t,e,r){t!=="panel"&&e.setChildVisible(s,!0)}},az=function(){return function(s,t,e,r){t!=="panel"&&e.setChildVisible(s,!1)}};const oz={show:rz,hide:az};var hz=function(s,t){return t===void 0&&(t=1),function(e,r,i,n){r!=="panel"&&i.fadeChild(e,n?0:s,t)}},lz=function(s,t){return t===void 0&&(t=0),function(e,r,i,n){r!=="panel"&&i.fadeChild(e,n?0:s,t)}};const uz={show:hz,hide:lz};var og=function(s,t){return function(e,r,i,n){r!=="panel"&&i.moveChild(e,n?0:s,t)}};const fz={show:og,hide:og};var hg=function(s,t){return function(e,r,i,n){r==="panel"&&i.moveChild(e,n?0:s,t)}};const dz={show:hg,hide:hg},Yu={visible:oz,fade:uz,move:fz,"move-panel":dz};var cz=function(s){var t,e;[t,...e]=typeof s=="string"?[s]:s;var r,i;return Yu.hasOwnProperty(t)?(r=Yu[t].show.apply(null,e),i=Yu[t].hide.apply(null,e)):(r=We,i=We),{show:r,hide:i}};const vz={showChild(s,t){var e=this.sizerChildren[s];return e&&(this.emit("showchild",e,s,this,t),this.resetChildState(e)),this},hideChild(s,t){var e=this.sizerChildren[s];return e&&(this.emit("hidechild",e,s,this,t),this.resetChildState(e)),this},swapChild(s,t){return this.currentChildKey===s||(this.currentChildKey==="panel"||s==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=s,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(s,t))),this},showPanel(s){return this.swapChild("panel",s),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var s=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(s),this},toggleRightSide(){var s=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(s),this},toggleTopSide(){var s=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(s),this},toggleBottomSide(){var s=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(s),this}},pz=Vi.prototype.setChildVisible,gz={setChildVisible(s,t){var e;if(typeof s=="string"){var e=s;s=this.sizerChildren[e]}else e=dl(this.sizerChildren,s);return t===void 0&&(t=this.currentChildKey===e),pz.call(this,s,t),this}},mz={fadeChild(s,t,e){var r;return typeof s=="string"?(r=s,s=this.sizerChildren[r]):r=dl(this.sizerChildren,s),t===void 0&&(t=500),e===void 0&&(e=this.currentChildKey===r?1:0),s.fadeIn(t,{start:s.alpha,end:e}),this},fadeChildPromise(s,t,e){return typeof s=="string"&&(s=this.sizerChildren[key]),this.fadeChild(s,t,e),s._fade?Se(s._fade):Promise.resolve()}},xz={moveChild(s,t,e,r){var i;typeof s=="string"?(i=s,s=this.sizerChildren[i]):i=dl(this.sizerChildren,s),t===void 0&&(t=500);var n=this.currentChildKey===i;if(r===void 0)switch(i){case"leftSide":case"rightSide":r=Lt(s);break;case"topSide":case"bottomSide":r=Ct(s);break;default:if(n)switch(this.previousChildKey){case"leftSide":case"rightSide":r=Lt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":r=Ct(this.sizerChildren[this.previousChildKey]);break;default:r=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":r=Lt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":r=Ct(this.sizerChildren[this.currentChildKey]);break;default:r=0;break}break}var o,a,h,u;if(n)switch(i){case"panel":switch(this.previousChildKey){case"leftSide":o=!0;break;case"rightSide":a=!0;break;case"topSide":h=!0;break;case"bottomSide":u=!0;break}break;case"leftSide":a=!0;break;case"rightSide":o=!0;break;case"topSide":u=!0;break;case"bottomSide":h=!0;break}else switch(i){case"panel":switch(this.currentChildKey){case"leftSide":a=!0;break;case"rightSide":o=!0;break;case"topSide":u=!0;break;case"bottomSide":h=!0;break}break;case"leftSide":o=!0;break;case"rightSide":a=!0;break;case"topSide":h=!0;break;case"bottomSide":u=!0;break}return o?s.moveTo(t,`-=${r}`,void 0,e):a?s.moveTo(t,`+=${r}`,void 0,e):h?s.moveTo(t,void 0,`-=${r}`,e):u?s.moveTo(t,void 0,`+=${r}`,e):s.moveTo(0),this},moveChildPromise(s,t,e,r){return typeof s=="string"&&(s=this.sizerChildren[key]),this.moveChild(s,t,e,r),s._easeMove?Se(s._easeMove):Promise.resolve()}};var Wy={};Object.assign(Wy,gz,mz,xz);const ze=Phaser.Utils.Objects.GetValue;class yz extends Fs{constructor(t,e){super(t,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var r=ze(e,"showChildCallback",void 0);if(r)if(ho(r)){var i=ze(e,"showChildCallbackScope",void 0);this.on("showchild",r,i);var n=ze(e,"hideChildCallback",void 0),o=ze(e,"hideChildCallbackScope",void 0);this.on("hidechild",n,o)}else{var a=cz(r);this.on("showchild",a.show),this.on("hidechild",a.hide)}var h=ze(e,"background",void 0),u=ze(e,"panel",void 0),l=ze(e,"leftSide",void 0),f=ze(e,"rightSide",void 0),c=ze(e,"topSide",void 0),d=ze(e,"bottomSide",void 0);if(h&&this.addBackground(h),u&&this.add(u,"panel","center",0,!0),l){var v=ze(e,"expand.left",!0);this.add(l,"leftSide","left-top",0,{height:v})}if(f){var v=ze(e,"expand.right",!0);this.add(f,"rightSide","right-top",0,{height:v})}if(c){var v=ze(e,"expand.top",!0);this.add(c,"topSide","left-top",0,{width:v})}if(d){var v=ze(e,"expand.bottom",!0);this.add(d,"bottomSide","left-bottom",0,{width:v})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(yz.prototype,vz,Wy);Phaser.Utils.Objects.GetValue;Phaser.Math.Distance.Between;Phaser.Math.RotateAroundDistance;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.GetAdvancedValue;Phaser.Math.Linear;Phaser.Math.RotateAround;Phaser.Geom.Mesh.Vertex;Phaser.Geom.Mesh.Face;Phaser.GameObjects.Mesh;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Mr=void 0,Tz=function(s){s!==Mr&&(Mr!==void 0&&Mr.close(),Mr=s)},Cz=function(s){s===Mr&&(Mr=void 0)},Sz=function(s,t){if(this.scene.sys.scale.autoRound&&(s=Math.floor(s),t=Math.floor(t)),this.width===s&&this.height===t)return this;var e=this.node.style;return e.width=`${s}px`,e.height=`${t}px`,this.updateSize(),this};const lg={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},ug={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},Ez={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"};var Pz=function(s,t,e){for(let r in e)t.addEventListener(r,function(i){s.emit(e[r],s,i)})};const Mz=Phaser.GameObjects.DOMElement,fg=Phaser.Utils.Objects.IsPlainObject,Ts=Phaser.Utils.Objects.GetValue;class Hy extends Mz{constructor(t,e,r,i,n,o){fg(e)?(o=e,e=Ts(o,"x",0),r=Ts(o,"y",0),i=Ts(o,"width",0),n=Ts(o,"height",0)):fg(i)&&(o=i,i=Ts(o,"width",0),n=Ts(o,"height",0)),o===void 0&&(o={});var a,h=Ts(o,"type","text");h==="textarea"?(a=document.createElement("textarea"),a.style.resize="none"):(a=document.createElement("input"),a.type=h),Gh(lg,o,a);var u=Ts(o,"style",void 0);u=Gh(ug,o,u);var l=a.style;for(var f in o)f in lg||f in ug||f in l&&(u[f]=o[f]);u["box-sizing"]="border-box",super(t,e,r,a,u),this.type="rexInputText",this.resize(i,n),Pz(this,a,Ez),x0(a),Ts(o,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return t===void 0?this.node.select():this.node.setSelectionRange(t,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node.style[t]=e,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var Az={resize:Sz};Object.assign(Hy.prototype,Az);const Cs=Phaser.Utils.Objects.GetValue,Rz=Phaser.Utils.Objects.Clone;var Oz=function(s,t){t===void 0&&(t={}),t=Rz(t);var e=s.scene,r=s.style,i=Cs(t,"backgroundColor",r.backgroundColor);i===null&&(i="transparent"),t.text=Cs(t,"text",s.text),t.fontFamily=Cs(t,"fontFamily",r.fontFamily),t.fontSize=Cs(t,"fontSize",r.fontSize),t.color=Cs(t,"color",r.color),t.backgroundColor=i,t.direction=Cs(t,"rtl",r.rtl)?"rtl":"ltr",t.align=Cs(t,"align",Lz(r)),t.direction==="rtl"&&gy(s)&&(t.align="right");var n=new Hy(e,s.x,s.y,Cs(t,"width",s.width),Cs(t,"height",s.height),t);n.setOrigin(s.originX,s.originY).setScrollFactor(s.scrollFactorX,s.scrollFactorY);var o=s.parentContainer;return o?o.add(n):e.add.existing(n),n},Lz=function(s){return s.hasOwnProperty("align")?s.align:s.hasOwnProperty("halign")?s.halign:"left"};const _o=Phaser.Utils.Objects.GetValue,bz=Phaser.Utils.Objects.Merge;var wz=function(s,t){s===void 0&&(s={}),s=bz(s,this.openConfig),Tz(this),ho(s)&&(t=s,s=void 0),t===void 0&&(t=_o(s,"onClose",void 0));var e=_o(s,"onOpen",void 0),r=_o(s,"onTextChanged",void 0);return this.inputText=Oz(this.parent,s).on("textchange",function(i){var n=i.text;r?r(this.parent,n):this.parent.text=n},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,_o(s,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),e&&e(this.parent),this.emit("open",this.parent)},[],this),this},Fz=function(){return Cz(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},Dz={open:wz,close:Fz};const Iz=Phaser.Utils.Objects.GetValue;class Bz extends Qt{constructor(t,e){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(e);var r=Iz(e,"clickEnable",!0);r&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(Bz.prototype,Dz);Phaser.Utils.Objects.GetValue;/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ky(s){return typeof s>"u"||s===null}function Gz(s){return typeof s=="object"&&s!==null}function Yz(s){return Array.isArray(s)?s:ky(s)?[]:[s]}function Nz(s,t){var e,r,i,n;if(t)for(n=Object.keys(t),e=0,r=n.length;e<r;e+=1)i=n[e],s[i]=t[i];return s}function Xz(s,t){var e="",r;for(r=0;r<t;r+=1)e+=s;return e}function zz(s){return s===0&&Number.NEGATIVE_INFINITY===1/s}var Vz=ky,Uz=Gz,Wz=Yz,Hz=Xz,kz=zz,$z=Nz,Nd={isNothing:Vz,isObject:Uz,toArray:Wz,repeat:Hz,isNegativeZero:kz,extend:$z};function $y(s,t){var e="",r=s.reason||"(unknown reason)";return s.mark?(s.mark.name&&(e+='in "'+s.mark.name+'" '),e+="("+(s.mark.line+1)+":"+(s.mark.column+1)+")",!t&&s.mark.snippet&&(e+=`

`+s.mark.snippet),r+" "+e):r}function Ha(s,t){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=t,this.message=$y(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ha.prototype=Object.create(Error.prototype);Ha.prototype.constructor=Ha;Ha.prototype.toString=function(t){return this.name+": "+$y(this,t)};var In=Ha,Zz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Kz=["scalar","sequence","mapping"];function Jz(s){var t={};return s!==null&&Object.keys(s).forEach(function(e){s[e].forEach(function(r){t[String(r)]=e})}),t}function Qz(s,t){if(t=t||{},Object.keys(t).forEach(function(e){if(Zz.indexOf(e)===-1)throw new In('Unknown option "'+e+'" is met in definition of "'+s+'" YAML type.')}),this.options=t,this.tag=s,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Jz(t.styleAliases||null),Kz.indexOf(this.kind)===-1)throw new In('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')}var Pe=Qz;function dg(s,t){var e=[];return s[t].forEach(function(r){var i=e.length;e.forEach(function(n,o){n.tag===r.tag&&n.kind===r.kind&&n.multi===r.multi&&(i=o)}),e[i]=r}),e}function jz(){var s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,e;function r(i){i.multi?(s.multi[i.kind].push(i),s.multi.fallback.push(i)):s[i.kind][i.tag]=s.fallback[i.tag]=i}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return s}function Af(s){return this.extend(s)}Af.prototype.extend=function(t){var e=[],r=[];if(t instanceof Pe)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new In("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(n){if(!(n instanceof Pe))throw new In("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new In("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new In("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(n){if(!(n instanceof Pe))throw new In("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Af.prototype);return i.implicit=(this.implicit||[]).concat(e),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=dg(i,"implicit"),i.compiledExplicit=dg(i,"explicit"),i.compiledTypeMap=jz(i.compiledImplicit,i.compiledExplicit),i};var qz=Af,_z=new Pe("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return s!==null?s:""}}),tV=new Pe("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return s!==null?s:[]}}),eV=new Pe("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return s!==null?s:{}}}),iV=new qz({explicit:[_z,tV,eV]});function sV(s){if(s===null)return!0;var t=s.length;return t===1&&s==="~"||t===4&&(s==="null"||s==="Null"||s==="NULL")}function nV(){return null}function rV(s){return s===null}var aV=new Pe("tag:yaml.org,2002:null",{kind:"scalar",resolve:sV,construct:nV,predicate:rV,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function oV(s){if(s===null)return!1;var t=s.length;return t===4&&(s==="true"||s==="True"||s==="TRUE")||t===5&&(s==="false"||s==="False"||s==="FALSE")}function hV(s){return s==="true"||s==="True"||s==="TRUE"}function lV(s){return Object.prototype.toString.call(s)==="[object Boolean]"}var uV=new Pe("tag:yaml.org,2002:bool",{kind:"scalar",resolve:oV,construct:hV,predicate:lV,represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"});function fV(s){return 48<=s&&s<=57||65<=s&&s<=70||97<=s&&s<=102}function dV(s){return 48<=s&&s<=55}function cV(s){return 48<=s&&s<=57}function vV(s){if(s===null)return!1;var t=s.length,e=0,r=!1,i;if(!t)return!1;if(i=s[e],(i==="-"||i==="+")&&(i=s[++e]),i==="0"){if(e+1===t)return!0;if(i=s[++e],i==="b"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(!fV(s.charCodeAt(e)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(e++;e<t;e++)if(i=s[e],i!=="_"){if(!dV(s.charCodeAt(e)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;e<t;e++)if(i=s[e],i!=="_"){if(!cV(s.charCodeAt(e)))return!1;r=!0}return!(!r||i==="_")}function pV(s){var t=s,e=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(e=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return e*parseInt(t.slice(2),2);if(t[1]==="x")return e*parseInt(t.slice(2),16);if(t[1]==="o")return e*parseInt(t.slice(2),8)}return e*parseInt(t,10)}function gV(s){return Object.prototype.toString.call(s)==="[object Number]"&&s%1===0&&!Nd.isNegativeZero(s)}var mV=new Pe("tag:yaml.org,2002:int",{kind:"scalar",resolve:vV,construct:pV,predicate:gV,represent:{binary:function(s){return s>=0?"0b"+s.toString(2):"-0b"+s.toString(2).slice(1)},octal:function(s){return s>=0?"0o"+s.toString(8):"-0o"+s.toString(8).slice(1)},decimal:function(s){return s.toString(10)},hexadecimal:function(s){return s>=0?"0x"+s.toString(16).toUpperCase():"-0x"+s.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),xV=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function yV(s){return!(s===null||!xV.test(s)||s[s.length-1]==="_")}function TV(s){var t,e;return t=s.replace(/_/g,"").toLowerCase(),e=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:e*parseFloat(t,10)}var CV=/^[-+]?[0-9]+e/;function SV(s,t){var e;if(isNaN(s))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===s)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===s)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Nd.isNegativeZero(s))return"-0.0";return e=s.toString(10),CV.test(e)?e.replace("e",".e"):e}function EV(s){return Object.prototype.toString.call(s)==="[object Number]"&&(s%1!==0||Nd.isNegativeZero(s))}var PV=new Pe("tag:yaml.org,2002:float",{kind:"scalar",resolve:yV,construct:TV,predicate:EV,represent:SV,defaultStyle:"lowercase"}),MV=iV.extend({implicit:[aV,uV,mV,PV]}),AV=MV,Zy=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ky=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function RV(s){return s===null?!1:Zy.exec(s)!==null||Ky.exec(s)!==null}function OV(s){var t,e,r,i,n,o,a,h=0,u=null,l,f,c;if(t=Zy.exec(s),t===null&&(t=Ky.exec(s)),t===null)throw new Error("Date resolve error");if(e=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(e,r,i));if(n=+t[4],o=+t[5],a=+t[6],t[7]){for(h=t[7].slice(0,3);h.length<3;)h+="0";h=+h}return t[9]&&(l=+t[10],f=+(t[11]||0),u=(l*60+f)*6e4,t[9]==="-"&&(u=-u)),c=new Date(Date.UTC(e,r,i,n,o,a,h)),u&&c.setTime(c.getTime()-u),c}function LV(s){return s.toISOString()}var bV=new Pe("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:RV,construct:OV,instanceOf:Date,represent:LV});function wV(s){return s==="<<"||s===null}var FV=new Pe("tag:yaml.org,2002:merge",{kind:"scalar",resolve:wV}),Xd=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function DV(s){if(s===null)return!1;var t,e,r=0,i=s.length,n=Xd;for(e=0;e<i;e++)if(t=n.indexOf(s.charAt(e)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function IV(s){var t,e,r=s.replace(/[\r\n=]/g,""),i=r.length,n=Xd,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|n.indexOf(r.charAt(t));return e=i%4*6,e===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):e===18?(a.push(o>>10&255),a.push(o>>2&255)):e===12&&a.push(o>>4&255),new Uint8Array(a)}function BV(s){var t="",e=0,r,i,n=s.length,o=Xd;for(r=0;r<n;r++)r%3===0&&r&&(t+=o[e>>18&63],t+=o[e>>12&63],t+=o[e>>6&63],t+=o[e&63]),e=(e<<8)+s[r];return i=n%3,i===0?(t+=o[e>>18&63],t+=o[e>>12&63],t+=o[e>>6&63],t+=o[e&63]):i===2?(t+=o[e>>10&63],t+=o[e>>4&63],t+=o[e<<2&63],t+=o[64]):i===1&&(t+=o[e>>2&63],t+=o[e<<4&63],t+=o[64],t+=o[64]),t}function GV(s){return Object.prototype.toString.call(s)==="[object Uint8Array]"}var YV=new Pe("tag:yaml.org,2002:binary",{kind:"scalar",resolve:DV,construct:IV,predicate:GV,represent:BV}),NV=Object.prototype.hasOwnProperty,XV=Object.prototype.toString;function zV(s){if(s===null)return!0;var t=[],e,r,i,n,o,a=s;for(e=0,r=a.length;e<r;e+=1){if(i=a[e],o=!1,XV.call(i)!=="[object Object]")return!1;for(n in i)if(NV.call(i,n))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}function VV(s){return s!==null?s:[]}var UV=new Pe("tag:yaml.org,2002:omap",{kind:"sequence",resolve:zV,construct:VV}),WV=Object.prototype.toString;function HV(s){if(s===null)return!0;var t,e,r,i,n,o=s;for(n=new Array(o.length),t=0,e=o.length;t<e;t+=1){if(r=o[t],WV.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;n[t]=[i[0],r[i[0]]]}return!0}function kV(s){if(s===null)return[];var t,e,r,i,n,o=s;for(n=new Array(o.length),t=0,e=o.length;t<e;t+=1)r=o[t],i=Object.keys(r),n[t]=[i[0],r[i[0]]];return n}var $V=new Pe("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:HV,construct:kV}),ZV=Object.prototype.hasOwnProperty;function KV(s){if(s===null)return!0;var t,e=s;for(t in e)if(ZV.call(e,t)&&e[t]!==null)return!1;return!0}function JV(s){return s!==null?s:{}}var QV=new Pe("tag:yaml.org,2002:set",{kind:"mapping",resolve:KV,construct:JV});AV.extend({implicit:[bV,FV],explicit:[YV,UV,$V,QV]});function cg(s){return s===48?"\0":s===97?"\x07":s===98?"\b":s===116||s===9?"	":s===110?`
`:s===118?"\v":s===102?"\f":s===114?"\r":s===101?"\x1B":s===32?" ":s===34?'"':s===47?"/":s===92?"\\":s===78?"":s===95?"":s===76?"\u2028":s===80?"\u2029":""}var jV=new Array(256),qV=new Array(256);for(var mr=0;mr<256;mr++)jV[mr]=cg(mr)?1:0,qV[mr]=cg(mr);Phaser.GameObjects.Image;Phaser.GameObjects.Sprite;Phaser.GameObjects.Video;Phaser.GameObjects.Text;Phaser.Utils.Objects.IsPlainObject;class _V{constructor(t){this.nextId=K(t,"start",1),this.uidKey=K(t,"uidKey","$uid"),this.autoRemove=K(t,"remove",!0),this.refs={},this.count=0}add(t,e){var r=this.refs,i=this.uidKey;if(i){var e=t[i];if(e!=null)return this}if(e==null)do e=this.nextId,this.nextId++;while(r.hasOwnProperty(e));return r.hasOwnProperty(e)?e=null:(r[e]=t,this.count++,i&&(t[i]=e),this.autoRemove&&t.on&&t.once("destroy",function(){this.remove(e)},this)),i?this:e}addMultiple(t){for(var e=0,r=t.length;e<r;e++)this.add(t[e]);return this}get(t){return this.refs[t]}has(t){return this.refs.hasOwnProperty(t)}remove(t){var e=this.refs;if(e.hasOwnProperty(t)){if(this.uidKey){var r=e[t];r[this.uidKey]=void 0}delete e[t],this.count--}return this}forEach(t,e){var r=this.refs,i;for(var n in r)i=r[n],e?t.call(e,i,n):t(i,n)}clear(){this.forEach(function(t){this.remove(t)},this)}}var Ir=new _V({uidKey:"$uid",remove:!1}),t5=function(s,t){var e=this.board;return e===null?null:(Nu.x=s,Nu.y=t,e.getNeighborTileDirection(this.tileXYZ,Nu))},Nu={x:0,y:0};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var hs=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};const Xu=Ir.uidKey;class Jy extends Qt{constructor(t,e){super(t,{eventEmitter:!1}),Ir.add(this,e),this.board=null,this.blocker=!1}shutdown(t){this.isShutdown||(this.board&&this.board.removeChess(this[Xu]),Ir.remove(this[Xu]),this.board=null,super.shutdown(t))}setBoard(t){return this.board=t,this}get tileXYZ(){return this.board==null?null:this.board.chessToTileXYZ(this[Xu])}setTileZ(t){return this.board==null?this:(this.board.setChessTileZ(this.parent,t),this)}setBlocker(t){return t===void 0&&(t=!0),this.blocker=t,this}setBlockEdge(t,e){this.blocker===!1&&(this.blocker={});var r=this.blocker;if(hs(t)){var i=t;for(t in i)r[t]=i[t]}else e===void 0&&(e=!0),r[t]=e;return this}getBlockEdge(t){var e=this.blocker;return e===!1?!1:e.hasOwnProperty(t)?e[t]:!1}}var e5={getTileDirection:t5};Object.assign(Jy.prototype,e5);var Hr=function(s){var t=typeof s;return t==="number"||t==="string"},_n=function(s){return Hr(s)?Ir.get(s):(s.hasOwnProperty("rexChess")||(s.rexChess=new Jy(s)),s.rexChess)},Qy=function(s){return s.type==="rexMiniBoard"};const i5=Phaser.GameObjects.Polygon;class Fe extends i5{constructor(t,e,r,i,n,o,a){a===void 0&&(a=!0);var h=Qy(t),u;h&&(u=t,t=u.board);var l=t.scene,f,c;a?(f=0,c=0):(f=e,c=r);var d=t.getGridPoints(void 0,void 0,!0);s5(d),super(l,f,c,d,n,o),a?h?u.addChess(this,e,r,i):t.addChess(this,e,r,i,!0):_n(this)}}var s5=function(s){for(var t=1/0,e=1/0,r,i=0,n=s.length;i<n;i++)r=s[i],t=Math.min(t,r.x),e=Math.min(e,r.y);if(t===0&&e===0)return s;for(var i=0,n=s.length;i<n;i++)r=s[i],r.x-=t,r.y-=e;return s};const Ee=le({isArmored:he.i8}),jy=5,_e=le({unit:[he.eid,jy]}),ti=le({target:he.eid}),bi=le({by:he.eid}),Mt=le({x:he.i8,y:he.i8}),Vn=le({frame:he.i8}),He=le({turns:he.ui8}),Ce=le({hp:he.ui8}),ei=le({enemy:he.eid,originX:he.i8,originY:he.i8}),Lr=le({monsters:[he.ui8,2]}),ci=le({cost:he.i8}),kh=le(),ae=le(),Ii=le(),ka=le(),Le=le({turns:he.i8}),Ht=le({targetX:he.i8,targetY:he.i8,type:he.i8}),n5=le();function r5(s){const t=Ni([Ee]),e=Os(t),r=nn(t);return ln(i=>{const n=e(i),o=r(i),a=t(i);return o.forEach(h=>{const u=()=>{var l;(l=Ar.get(h))==null||l.destroy(),ts.delete(h),Ar.delete(h)};if(!s.scene){u();return}s.scene.time.delayedCall(at(10),()=>{var f;const l=It.get(h);!(l!=null&&l.destroyScheduled)&&(l!=null&&l.active)&&((f=ts.get(h))==null||f.shake()),u()})}),n.forEach(h=>{const{x:u,y:l}=s.tileXYToWorldXY(Mt.x[h],Mt.y[h]);Ee.isArmored[h]=1,Ar.set(h,s.scene.add.image(u,l,"icons",Nt.Armor).setScale(.8).setDepth(pt.Actions).setOrigin(1,0).setVisible(!!Ee.isArmored[h]));const f=It.get(h);!ts.has(h)&&f&&ts.set(h,new oo(f,{duration:at(300),magnitudeMode:"decay",magnitude:3}))}),a.forEach(h=>{var l;const u=It.get(h);u&&((l=Ar.get(h))==null||l.setX(u.x).setY(u.y))}),i})}const ni=8;class qy{constructor(t,e,r,i=!1,n){k(this,"isRaised",!1);k(this,"debugText");k(this,"image");k(this,"_isOwned",!1);k(this,"_burnt",!1);k(this,"originalY");var a,h;this.board=t,this.tileXY=e,this.gameScene=r;const o=this.board.tileXYToWorldXY(this.tileXY.x,this.tileXY.y);(h=(a=window.process)==null?void 0:a.env)!=null&&h.isTest||(this.debugText=this.gameScene.add.bitmapText(o.x,o.y,"basis33_red",`${e.x},${e.y}`,22).setOrigin(.5).setDepth(pt.Debug).setVisible(!1).setInteractive().on("pointerup",()=>{console.group(`Tap on {x: ${this.tileXY.x}, y: ${this.tileXY.y}}`),console.log(this.board.tileXYToChessArray(this.tileXY.x,this.tileXY.y)),console.groupEnd()})),this.originalY=o.y+5,this.image=this.gameScene.add.image(o.x,this.originalY,"tiles",n||this.randomEmptyFrame()).setDepth(pt.Standard),i?this.isOwned=i:this._isOwned=i,this.drawOutline()}get isOwned(){return this._isOwned}set isOwned(t){var e;this._isOwned=t,(e=this.image)==null||e.setTint(t?13820127:void 0),this.board.refreshCells()}get burnt(){return this._burnt}set burnt(t){t===!1&&this._burnt===!1||(this.setFrame(t===!1?this._burnt:ft.Burnt),this._burnt=t)}debug(t){this.debugText.setVisible(t===void 0?!this.debugText.visible:t)}clear(){this.setFrame(this.randomEmptyFrame())}setFrame(t){this.image.setFrame(t)}getFrame(){return this.image.frame.name}getShakeTarget(){return this.image}drawOutline(){const t=this.board.getGridPoints(this.tileXY.x,this.tileXY.y,!0).map(e=>this.isRaised?{...e,y:e.y-ni}:e);(this.isOwned?this.gameScene.cellGfxPlayerOwned:this.gameScene.cellGfxFree).strokePoints(t,!0).setDepth(this.isOwned?pt.Icons:pt.Player)}destroy(){this.image.destroy(),this.debugText&&this.debugText.destroy()}setTint(t){this.image.setTint(t)}raise(){this.isRaised||(this.image.setY(this.image.y-ni).setDepth(pt.RaisedCell),this.isRaised=!0)}resetRaise(){this.image.setY(this.originalY).setDepth(pt.Standard),this.isRaised=!1}randomEmptyFrame(){return Phaser.Math.RND.pick([ft.Empty,ft.ClearedWood,ft.Wood1,ft.Wood2])}}class tn extends Fe{constructor(e,r){const i=e.board,n=i.scene;super(i,r.x,r.y,Tt.Marker,vc,.5);k(this,"constructingIcon");k(this,"animTween");this.piece=e,n.add.existing(this),this.setScale(.5).setDepth(pt.Marker),i.getCell(r).isRaised&&this.setY(this.y-ni);const{x:o,y:a}=i.tileXYToWorldXY(r.x,r.y);this.constructingIcon=i.scene.add.image(o,a,"icons",Nt.Hammer).setVisible(!0).setScale(.8).setDepth(pt.Actions).setVisible(!1),this.animTween=this.scene.add.tween({duration:at(1200),alpha:{from:.1,to:1},yoyo:!0,targets:[this],repeat:-1,ease:Phaser.Math.Easing.Quadratic.InOut})}setConstructionHint(){return this.constructingIcon.setVisible(!0),this.setFillStyle(vc,0),this}destroy(){this.constructingIcon.destroy(),this.animTween.stop(),super.destroy()}}function kt(s,t){return s.x===t.x&&s.y===t.y}function _y(s,t){return!!s.find(e=>kt(e,t))}function Rf(s,t,e){return s.tileXYToChessArray(t.x,t.y).filter(i=>!(i instanceof tn)&&(!(e!=null&&e.length)||(e.length>0?!(e!=null&&e.some(n=>i instanceof n)):!0))).length===0}function a5(s){switch(s){case 3:return 1;default:return s}}function o5(s){const t=Ni([Ce,ei,gC(Lr)]),e=Os(t);return ln(r=>{const i=e(r),n=t(r);return i.forEach(o=>{var u;const a=It.get(o),h=((u=a==null?void 0:a.cell)==null?void 0:u.getShakeTarget())||a;!ts.has(o)&&h&&ts.set(o,new oo(h,{duration:at(300),magnitudeMode:"decay",magnitude:3}))}),n.forEach(o=>{var a,h;if(Ce.hp[o]!==0){if(Ce.hp[o]-=1,Ce.hp[o]>0)(a=ts.get(o))==null||a.shake();else{(h=It.get(o))==null||h.destroy(),ts.delete(o),Nf(r,o);return}me(r,ei,o)}}),r})}function h5(s){const t=Ni([Ce,ei,Lr]),e=Os(t),r=nn(t);return ln(i=>{const n=e(i);return r(i).forEach(a=>{if(Xf(i,a)){const h=ht(i,kh,ei.enemy[a])&&It.get(ei.enemy[a]);if(!h||!h.active||h.destroyScheduled)return}else s.getMonsterGenerators().filter(h=>h.active).length===0&&s.scene.gameOver(!0)}),n.forEach(a=>{var h,u,l,f,c;if(Ce.hp[a]-=1,s.scene.cameras.main.shake(100,.05),navigator.vibrate&&navigator.vibrate([200,30,70]),Ce.hp[a]===0)(h=It.get(a))==null||h.destroy();else{const d={x:ei.originX[a],y:ei.originY[a]},v=s.getNeighborTileXY({x:Mt.x[a],y:Mt.y[a]},null).filter(m=>!s.hasBlocker(m.x,m.y)),p=s.getNeighborTileXY(d,null).filter(m=>!s.hasBlocker(m.x,m.y)&&!kt(m,{x:Mt.x[a],y:Mt.y[a]})&&!v.some(x=>kt(x,m)));p.length?(l=(u=It.get(ei.enemy[a]))==null?void 0:u.moveTo)==null||l.moveTo(p[0]):(c=(f=It.get(ei.enemy[a]))==null?void 0:f.moveTo)==null||c.moveTo(d);const g=s.getPlayerPieces();v.forEach(m=>{const x=g.find(y=>!y.active||kt(m,y.rexChess.tileXYZ));if(x&&(x.destroy(),ht(i,kh,x.entity)))return s.scene.gameOver(),!1;if(Ce.hp[a]<=Lr.monsters[a].length){const y=Za[Lr.monsters[a].at(Ce.hp[a]-1)];new y(s,m)}}),me(i,ei,a)}}),i})}function l5(s){const t=Ni([Le,Ht]),e=Os(t),r=nn(t);return ln(i=>{const n=e(i),o=r(i);return n.forEach(a=>{var c;const h=It.get(a);if(!h)return;const{x:u,y:l}=s.tileXYToWorldXY(Ht.targetX[a],Ht.targetY[a]);La.set(a,s.scene.add.image(u,l,"icons",Nt.Hammer).setScale(.8).setDepth(pt.Actions).setOrigin(.5,.6)),s.setSelected(s.scene.data.get("player")),si(i,ae,a),si(i,Ii,a),(c=h==null?void 0:h.hideMoveableArea)==null||c.call(h);const f=s.scene.scene.get(nt.UI);Ht.type[a]===wr.Farm&&f.queueEffect(Le.turns[a],["farmerConstructionDone",h.id,{x:Ht.targetX[a],y:Ht.targetY[a]}]),Ht.type[a]===wr.Hive&&f.queueEffect(Le.turns[a],["hiveConstructionDone",h.id,{x:Ht.targetX[a],y:Ht.targetY[a]}])}),o.forEach(a=>{const h=It.get(a);La.get(a).destroy(),La.delete(a),h&&(me(i,Le,a),me(i,Ii,a))}),i})}function u5(s){const t=new Map,e=Ni([He]),r=Os(e),i=nn(e);return ln(n=>{const o=r(n),a=i(n),h=e(n);return o.forEach(u=>{const{x:l,y:f}=s.tileXYToWorldXY(Mt.x[u],Mt.y[u]);t.set(u,s.scene.add.image(l,f,"icons",Nt.SpiderWeb).setScale(1.2).setDepth(pt.Actions).setOrigin(.5).setAlpha(1).setTint(0).setVisible(!0))}),a.forEach(u=>{var l;(l=t.get(u))==null||l.destroy(),t.delete(u),Xf(n,u)&&me(n,Ii,u)}),h.forEach(u=>{var f;const l=It.get(u);si(n,ae,u),si(n,Ii,u),l&&ht(n,ka,u)&&He.turns[u]>0?l.hideMoveableArea():me(n,He,u),l&&((f=t.get(u))==null||f.setX(l.x).setY(l.y))}),n})}function ml(s,t){Nf(s,t),It.delete(t)}function ut(s,t,e,r,i){si(s,t,e,i),r&&Object.entries(r).forEach(([n,o])=>{Array.isArray(o)&&t[n][e].set(o),t[n][e]=o})}function f5(s){const t=Ni([_e]),e=Os(t),r=nn(t),i=Ni([ti]),n=Os(i),o=nn(i);return ln(a=>{const h=e(a),u=r(a);return h.forEach(l=>{const{x:f,y:c}=s.tileXYToWorldXY(Mt.x[l],Mt.y[l]);ba.set(l,s.scene.add.image(f,c,"icons",Nt.Mounted).setScale(.6).setDepth(pt.Actions).setOrigin(.5,1.3)),Ce.hp[l]+=1}),u.forEach(l=>{var f;(f=ba.get(l))==null||f.destroy(),ba.delete(l)}),n(a).forEach(l=>{var c;const f=It.get(l);f&&!f.destroyScheduled&&(f.setVisible(!1),(c=Yi.get(l))==null||c.setVisible(!1),s.setChessTileZ(f,Tt.Mounting),ht(a,_e,ti.target[l])?_e.unit[ti.target[l]].set([..._e.unit[ti.target[l]],l]):ut(a,_e,ti.target[l],{unit:[l]}))}),o(a).forEach(l=>{var c;const f=It.get(l);if(f){f.setVisible(!0),(c=Yi.get(l))==null||c.setVisible(!0),s.setChessTileZ(f,Tt.Default);const d=_e.unit[ti.target[l]];d.length>1?_e.unit[ti.target[l]].set(d.filter(v=>v!==l)):me(a,_e,ti.target[l])}}),a})}class zd extends Fe{constructor(e,r){const i=e.scene,n=i.scene.get(nt.UI);r===void 0&&(r=e.getFreeTile(Tt.PlayerTiles));super(e,r.x,r.y,Tt.PlayerTiles);k(this,"createdAtTurn");k(this,"cell");this.createdAtTurn=n.turn,this.cell=e.getCell(r),this.cell.isOwned=!0,i.add.existing(this)}destroy(){this.cell.isOwned=!1,super.destroy()}}class At extends zd{constructor(t,e){super(t,e)}}function d5(s){const t=Ni([ka,xc(ci)]),e=Os(t),r=nn(t),i=Ni([ka,kh,ae,xc(Mt)]);return ln(n=>{const o=e(n),a=r(n),h=t(n);return i(n).forEach(u=>{var f,c;const l={x:Mt.x[u],y:Mt.y[u]};s.isClaimableTile(l)&&s.getCell(l).getFrame()!==ft.Burnt&&(new At(s,l),(c=(f=s.uiScene)==null?void 0:f.updateControlledTiles)==null||c.call(f))}),o.forEach(u=>{const l=It.get(u);l&&en.set(u,s.scene.rexBoard.add.pathFinder(l,{blockerTest:!0,cost:ci.cost[u]}))}),a.forEach(u=>{en.delete(u)}),h.forEach(u=>{en.get(u).setCostFunction(ci.cost[u])}),n})}const It=new Map,ts=new Map,en=new Map,La=new Map,ba=new Map,Ar=new Map,Yi=new Map;function Of(){It.forEach(s=>s.destroy()),It.clear(),ts.forEach(s=>s.destroy()),ts.clear(),en.forEach(s=>s.destroy()),en.clear(),La.forEach(s=>s.destroy()),La.clear(),ba.forEach(s=>s.destroy()),ba.clear(),Ar.forEach(s=>s.destroy()),Ar.clear(),Yi.forEach(s=>s.destroy()),Yi.clear()}class Wn extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Buildings));super(e,r.x,r.y,Tt.Buildings);k(this,"cell");k(this,"_entity");i.add.existing(this),this.setScale(.8),this.entity=Gr(i.world),this.cell=e.getCell(r)}get entity(){return this._entity}set entity(e){this._entity=e,It.set(e,this)}destroy(){this.cell.clear(),super.destroy()}}class zi extends Wn{constructor(e,r){super(e,r);k(this,"icon");this.setScale(1),this.icon=e.scene.add.image(this.x,this.y,"icons",Nt.Farm);const i=this.cell.getFrame();[ft.Wood1,ft.Wood2].includes(i)&&this.cell.setFrame(ft.ClearedWood),e.scene.time.delayedCall(at(10),()=>this.cell.isOwned=!0),e.getCell(r).isRaised&&this.icon.setY(this.icon.y-ni).setDepth(pt.RaisedCell)}getUpkeep(){return 0}productionPerTurn(){return 2}destroy(){this.cell.isOwned=!1,this.icon.destroy(),super.destroy()}}let th;const c5=new Uint8Array(16);function v5(){if(!th&&(th=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!th))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return th(c5)}const pe=[];for(let s=0;s<256;++s)pe.push((s+256).toString(16).slice(1));function p5(s,t=0){return(pe[s[t+0]]+pe[s[t+1]]+pe[s[t+2]]+pe[s[t+3]]+"-"+pe[s[t+4]]+pe[s[t+5]]+"-"+pe[s[t+6]]+pe[s[t+7]]+"-"+pe[s[t+8]]+pe[s[t+9]]+"-"+pe[s[t+10]]+pe[s[t+11]]+pe[s[t+12]]+pe[s[t+13]]+pe[s[t+14]]+pe[s[t+15]]).toLowerCase()}const g5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vg={randomUUID:g5};function Vd(s,t,e){if(vg.randomUUID&&!t&&!s)return vg.randomUUID();s=s||{};const r=s.random||(s.rng||v5)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(let i=0;i<16;++i)t[e+i]=r[i];return t}return p5(r)}class po{integerInRange(t,e){return Phaser.Math.RND.integerInRange(t,e)}}const Rt=new Phaser.Events.EventEmitter,Ot={NewTurn:"new-turn",MonsterKilled:"monster-killed",PlayerTileDestroyed:"player-tile-destroyed"};class gi extends Wn{constructor(e,r){super(e,r);k(this,"slimedForTurns",0);k(this,"_claimed",!1);this.setScale(1),this.cell.setFrame(Phaser.Math.RND.pick([ft.Mine,ft.MineAlt])),this.cell.raise()}get claimed(){return this._claimed}set claimed(e){this._claimed=e,this._claimed?(this.cell.setFrame(ft.MineClaimed),this.scene.time.delayedCall(at(10),()=>this.cell.isOwned=!0)):this.cell.setFrame(Phaser.Math.RND.pick([ft.Mine,ft.MineAlt]))}claim(e){this.claimed=!0,e.destroy()}getUpkeep(){return 0}productionPerTurn(){return Math.floor(10/(this.slimedForTurns>0?2:1))}setSlimedTurns(e){this.slimedForTurns+=e,this.cell.setTint(this.slimedForTurns>0?7918443:void 0)}}class wi extends Wn{constructor(t,e){super(t,e),this.cell.setFrame(ft.PowerTile)}getUpkeep(){return 1}productionPerTurn(){return 0}}const m5="modulepreload",x5=function(s,t){return new URL(s,t).href},pg={},y5=function(t,e,r){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(n=>{if(n=x5(n,r),n in pg)return;pg[n]=!0;const o=n.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let l=i.length-1;l>=0;l--){const f=i[l];if(f.href===n&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":m5,o||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),o)return new Promise((l,f)=>{u.addEventListener("load",l),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())},Kh=class extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=Kh.getFreeTile(e));super(e,r.x,r.y,Tt.Default);k(this,"cell");k(this,"_bridgeBuilt",!1);k(this,"bridgeIcon");i.add.existing(this),this.rexChess.setBlocker(!0),this.cell=e.getCell(r),this.cell.setFrame(ft.Water);const{x:n,y:o}=e.tileXYToWorldXY(r.x,r.y);this.bridgeIcon=i.add.image(n,o,"bridge").setScale(.25).setVisible(!1)}get bridgeBuilt(){return this._bridgeBuilt}set bridgeBuilt(e){var r;this._bridgeBuilt=e,Number.isNaN(Number.parseFloat((r=this._bridgeBuilt)==null?void 0:r.toString()))?(this.rexChess.setBlocker(!0),this.bridgeIcon.setVisible(!1)):(this.bridgeIcon.setVisible(!0).setRotation(this._bridgeBuilt),this.rexChess.setBlocker(!1))}destroy(){this.cell.clear(),this.bridgeIcon.destroy(),super.destroy()}getUpkeep(){return this._bridgeBuilt?15:0}static getFreeTile(e){const r=e.getFreeTile(Tt.Default),i=e.getHomebase();return e.getNeighborTileXY(r,null).every(a=>i.moveTo.canMoveTo(a.x,a.y))?r:Kh.getFreeTile(e)}};let Jt=Kh;k(Jt,"cost",40);class Yt extends Fe{constructor(e,r,i){const n=e.scene,{x:o,y:a}=r;super(e,o,a,Tt.Player);k(this,"_entity");k(this,"id",Vd());k(this,"moveTo");k(this,"fortifiedIcon");k(this,"destroyScheduled",!1);k(this,"_fortified",!1);k(this,"_movingPoints",4);k(this,"_markers",[]);this.board=e,this.entity=Gr(this.world),ut(this.world,Mt,this.entity),ut(this.world,ka,this.entity),ut(this.world,ci,this.entity,{cost:3}),n.systems.movement(n.world);const{x:h,y:u}=e.tileXYToWorldXY(o,a);ut(this.world,Vn,this.entity,{frame:i}),this.moveTo=n.rexBoard.add.moveTo(this,{blockerTest:!0,speed:at(400,!0)}).on("complete",()=>{Mt.x[this.entity]=this.rexChess.tileXYZ.x,Mt.y[this.entity]=this.rexChess.tileXYZ.y,ut(this.world,ae,this.entity),e.getCell(this.rexChess.tileXYZ).isRaised&&this.setY(this.y-ni),this.hideMoveableArea()}),n.add.existing(this),this.setDepth(pt.Player),this.board.selected===this&&this.showMoveableArea(),Rt.on(Ot.NewTurn,()=>{const l=()=>{if(this.moveTo.isRunning){this.scene.time.delayedCall(at(50),l);return}this.active&&(ht(this.world,He,this.entity)&&(He.turns[this.entity]-=1),ht(this.world,Ii,this.entity)||(me(this.world,ae,this.entity),this.board.selected===this&&(this.board.selected.fortified?(this.hideMoveableArea(),this.board.checkAutoTurn()):this.showMoveableArea())))};l()}),this.fortifiedIcon=e.scene.add.image(h,u,"icons",Nt.Fortified).setScale(.8).setDepth(pt.Actions).setOrigin(.2,.2).setVisible(this.fortified),e.getCell(this.rexChess.tileXYZ).isRaised&&this.setY(this.y-ni)}get entity(){return this._entity}set entity(e){this._entity=e,It.set(e,this)}get fortified(){return this._fortified}set fortified(e){this._fortified=e,this.fortifiedIcon.setVisible(e),e?(this.hideMoveableArea(),ut(this.world,ae,this.entity)):this.showMoveableArea()}get world(){return(this.scene||this.board.scene).world}showMoveableArea(){if(ht(this.world,ae,this.entity)||ht(this.world,He,this.entity))return;this.hideMoveableArea();const e=en.get(this.entity).findArea(this._movingPoints),r=this.board.getMonsterGenerators();for(let i=0,n=e.length;i<n;i++){const o=r.find(a=>kt(a.rexChess.tileXYZ,e[i]));o&&!o.canBeAttacked(this)||this._markers.push(new tn(this,e[i]))}y5(()=>Promise.resolve().then(()=>C5),void 0,import.meta.url).then(i=>{this instanceof i.default&&this.buildingTurns===0&&this.board.getWaterTiles(!0).length<this.board.maxBridges&&this.board.getNeighborChess(this,null,Tt.Default).filter(n=>n instanceof Jt&&!n.bridgeBuilt).map(n=>this._markers.push(new tn(this,n.rexChess.tileXYZ).setConstructionHint()))})}hideMoveableArea(){for(let e=0,r=this._markers.length;e<r;e++)this._markers[e].destroy();return this._markers.length=0,this}moveToTile(e){if(this.moveTo.isRunning||ht(this.world,He,this.entity))return!1;this.hideMoveableArea();const r=en.get(this.entity).getPath(e);return this.moveAlongPath(r)}destroy(){this.board.selected===this&&(this.board.selected=void 0),this.hideMoveableArea(),this.destroyScheduled=!0,this.fortifiedIcon.destroy(),this.scene.tweens.add({targets:[this,Yi.get(this.entity)],alpha:0,scaleX:2,scaleY:2,duration:at(500),ease:"Power2",onComplete:()=>{(this.scene||this.board.scene)&&(this!=null&&this.world)&&ml(this.world,this.entity),super.destroy()}})}moveAlongPath(e){return e.length===0?(this.board.selected===this&&this.showMoveableArea(),!1):(this.moveTo.once("complete",()=>{this.moveAlongPath(e)},this),this.moveTo.moveTo(e.shift()),!0)}}class Gt extends Yt{constructor(t,e){e===void 0&&(e=t.getFreeTile(Tt.Player)),super(t,e,ie.Player),this.board=t,si(this.world,kh,this.entity)}getUpkeep(){return 0}getCost(){return 1/0}}class ge extends Fe{constructor(e,r,i){const n=e.scene,{x:o,y:a}=i;super(e,o,a,Tt.Default,jT,.7);k(this,"id",Vd());k(this,"rangeAttackShot");k(this,"moveTo");k(this,"destroyScheduled",!1);k(this,"goals",[]);k(this,"phaser",new po);k(this,"_entity");this.board=e,this.tileXY=i,this.entity=Gr(this.world),ut(this.world,Mt,this.entity),ut(this.world,ci,this.entity,{cost:3}),this.moveTo=n.rexBoard.add.moveTo(this,{blockerTest:!0,speed:at(400,!0)}).on("complete",(l,f)=>{if(!this.active||this.destroyScheduled)return;Mt.x[this.entity]=this.rexChess.tileXYZ.x,Mt.y[this.entity]=this.rexChess.tileXYZ.y,this.checkRaised();const{x:c,y:d}=this.rexChess.tileXYZ,v=e.tileXYToChessArray(c,d),p=v.find(x=>x instanceof zd),g=v.find(x=>x instanceof Wn),m=v.find(x=>x instanceof gi&&x.claimed);p&&this.enterPlayerTile(p),g&&this.enterPlayerProductionBuilding(g),m&&this.enterClaimedMine(m)}),n.add.existing(this),this.setScale(.8);const{x:h,y:u}=e.tileXYToWorldXY(this.tileXY.x,this.tileXY.y);ut(this.world,Vn,this.entity,{frame:r}),this.setDepth(pt.Icons),this.rangeAttackShot=n.add.image(h,u,"arrows",Phaser.Math.RND.integerInRange(0,2)).setDepth(pt.Actions).setOrigin(.5,.5).setVisible(!1),this.checkRaised()}get entity(){return this._entity}set entity(e){this._entity=e,It.set(e,this)}get world(){return(this.scene||this.board.scene).world}destroy(){this.destroyScheduled=!0,this.scene.tweens.add({targets:[this,Yi.get(this.entity)],alpha:0,scaleX:2,scaleY:2,duration:at(500),ease:"Power2",onComplete:()=>{this.rangeAttackShot.destroy(),(this.scene||this.board.scene)&&(this!=null&&this.world)&&ml(this.world,this.entity),super.destroy()}})}getAIGoal(e){return this.goals.find(r=>r instanceof e)}battleOutcome(e,r,i,n){const o=this.board.getCell(n||r.rexChess.tileXYZ).isRaised,a=this.board.getCell(this.rexChess.tileXYZ).isRaised,u=this.phaser.integerInRange(0,10)>e+(r instanceof Yt&&r.fortified?1:0)+(o?1:0)-(a?1:0);return u||Rt.emit(Ot.MonsterKilled,i),u}handleAttackMove(e,r=!1,i=!0){const n=this.board.tileXYToChessArray(e.x,e.y).find(a=>a instanceof Yt&&!a.destroyScheduled),o=this.board.tileXYToChessArray(e.x,e.y).find(a=>a instanceof $e);if(n)if(this.battle(n)){if(ht(this.world,Ee,n.entity)){me(this.world,Ee,n.entity);return}n instanceof Gt?this.scene.scene.get(nt.Game).gameOver():n.destroy(),this.board.tileXYToChessArray(e.x,e.y).find(u=>u instanceof wi)&&ht(this.world,bi,this.entity)&&me(this.world,bi,this.entity),r||this.moveTo.moveTo(e)}else{if(ht(this.world,Ee,this._entity)){me(this.world,Ee,this._entity);return}r?i&&this.fireAt(n):this.destroy();return}else if(o){const a=this.towerBattle(o);if(r&&i&&this.fireAt(o),a){if(ut(this.world,ei,o.entity,{enemy:this.entity,originX:this.tileXY.x,originY:this.tileXY.y}),this.scene.scene.get(nt.Game).systems.attckedTarget(this.world),Xf(this.world,o.entity))return;r||this.moveTo.moveTo(e)}}else this.moveTo.moveTo(e)}fireAt(e,r=this.rangeAttackShot){const{x:i,y:n}=this.board.tileXYToWorldXY(this.rexChess.tileXYZ.x,this.rexChess.tileXYZ.y),{x:o,y:a}=this.board.tileXYToWorldXY(e.rexChess.tileXYZ.x,e.rexChess.tileXYZ.y);r.setPosition(i,n).setVisible(!0);const h=Phaser.Math.RAD_TO_DEG*Phaser.Math.Angle.Between(r.x,r.y,o,a)+45;r.setAngle(h),this.scene.tweens.add({targets:[r],x:{from:i,to:o},y:{from:n,to:a},duration:at(250),ease:"Expo.easeIn",onComplete:()=>{r.setVisible(!1)}})}checkRaised(){this.board.getCell(this.rexChess.tileXYZ).isRaised&&this.setY(this.y-ni)}}function tT(s,t,e,r,i=!0){const n=s[r?"filledRingToTileXYArray":"ringToTileXYArray"](t,e);return s.tileXYArrayToChessArray(n).filter(o=>o instanceof Yt||(i?o instanceof $e:!1))}function eT(s,t,e,r,i=!0){return tT(s,t,e,r,i).map(n=>n.rexChess.tileXYZ)}class $e extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Buildings));super(e,r.x,r.y,Tt.Buildings);k(this,"_entity");k(this,"cell");k(this,"rangeAttackShot");k(this,"phaser",new po);this.board=e,i.add.existing(this),this.cell=e.getCell(r),this.cell.setFrame(ft.Tower);const{x:n,y:o}=e.tileXYToWorldXY(r.x,r.y);this.rangeAttackShot=i.add.image(n,o,"arrows",0).setDepth(pt.Actions).setOrigin(.5,.5).setVisible(!1);const a=i.world;this.entity=Gr(a),ut(a,Ce,this.entity,{hp:2}),ut(a,Mt,this.entity,{x:r.x,y:r.y})}get entity(){return this._entity}set entity(e){this._entity=e,It.set(e,this)}getUpkeep(){return 25}destroy(){this.board.scene.time.delayedCall(at(300),()=>{this.cell.clear()}),super.destroy()}attack(){const e=T5(this.board,this.rexChess.tileXYZ,2,!0);if(e.length){const r=e[this.phaser.integerInRange(0,e.length-1)],i=r.towerBattle(this);this.fireAt(r),i||r.destroy()}}fireAt(e){const{x:r,y:i}=this.board.tileXYToWorldXY(this.rexChess.tileXYZ.x,this.rexChess.tileXYZ.y),{x:n,y:o}=this.board.tileXYToWorldXY(e.rexChess.tileXYZ.x,e.rexChess.tileXYZ.y);this.rangeAttackShot.setPosition(r,i).setVisible(!0);const a=Phaser.Math.RAD_TO_DEG*Phaser.Math.Angle.Between(this.rangeAttackShot.x,this.rangeAttackShot.y,n,o)+45;this.rangeAttackShot.setAngle(a),this.scene.tweens.add({targets:[this.rangeAttackShot],x:{from:r,to:n},y:{from:i,to:o},duration:at(250),ease:"Expo.easeIn",onComplete:()=>{this.rangeAttackShot.setVisible(!1)}})}}k($e,"cost",40);function T5(s,t,e,r){const i=s[r?"filledRingToTileXYArray":"ringToTileXYArray"](t,e);return s.tileXYArrayToChessArray(i).filter(n=>n instanceof ge)}class go{constructor(t,e){k(this,"score",8);k(this,"pathFinder");k(this,"config");k(this,"lastPath");this.monster=t,this.config={exclude:[],radius:Phaser.Math.RND.integerInRange(2,3),...e},this.pathFinder=t.board.scene.rexBoard.add.pathFinder(t,{blockerTest:!0})}setScore(t){return this.score=t,this}isApplicable(){return this.getTargets().length>0}nextTile(){if(this.lastPath&&this.lastPath.length>0){const r=this.lastPath[this.lastPath.length-1],i=this.monster.board.tileXYToChessArray(r.x,r.y).filter(n=>n instanceof Yt||n instanceof $e);if(!(this.config.exclude.length>0)||i.find(n=>this.config.exclude.every(o=>!(n instanceof o))))return this.lastPath.shift();this.lastPath=void 0}const t=this.monster.board.getMonsters().map(r=>r.rexChess.tileXYZ);this.pathFinder.setCostFunction((r,i,n)=>_y(t,r)?n.BLOCKER:1);const e=this.getTargets().map(r=>({target:r,path:this.pathFinder.findPath(r.rexChess.tileXYZ)})).sort((r,i)=>{var n,o,a,h;return((o=r.path)==null?void 0:o[((n=r.path)==null?void 0:n.length)-1].cost)-((h=i.path)==null?void 0:h[((a=i.path)==null?void 0:a.length)-1].cost)})[0];return this.lastPath=e.path,this.lastPath.shift()}getTargets(){const t=this.monster.board.filledRingToTileXYArray(this.monster.rexChess.tileXYZ,this.config.radius);return this.monster.board.tileXYArrayToChessArray(t).filter(e=>e instanceof Yt||e instanceof $e).filter(e=>this.config.exclude.length>0?this.config.exclude.every(r=>!(e instanceof r)):!0)}}class xl{constructor(t,e){k(this,"score",4);k(this,"pathFinder");k(this,"config");k(this,"lastPath");this.monster=t,this.config={include:[],radius:Phaser.Math.RND.integerInRange(1,3),...e},this.pathFinder=t.board.scene.rexBoard.add.pathFinder(t,{blockerTest:!0})}setScore(t){return this.score=t,this}isApplicable(){return this.getTargets().length>0}nextTile(){if(this.lastPath&&this.lastPath.length>0){const e=this.lastPath[this.lastPath.length-1],r=this.monster.board.tileXYToChessArray(e.x,e.y).filter(i=>i instanceof Wn);if(!(this.config.include.length>0)||r.find(i=>this.config.include.every(n=>i instanceof n)))return this.lastPath.shift();this.lastPath=void 0}const t=this.getTargets().map(e=>({target:e,path:this.pathFinder.findPath(e.rexChess.tileXYZ)})).sort((e,r)=>{var i,n,o,a,h;return((n=e.path)==null?void 0:n[((i=e.path)==null?void 0:i.length)-1].cost)-(((h=(a=r.path)==null?void 0:a[((o=r.path)==null?void 0:o.length)-1])==null?void 0:h.cost)||0)})[0];return this.lastPath=t.path,this.lastPath.shift()}getTargets(){const t=this.monster.board.filledRingToTileXYArray(this.monster.rexChess.tileXYZ,this.config.radius);return this.monster.board.tileXYArrayToChessArray(t).filter(e=>e instanceof Wn).filter(e=>this.config.include.length>0?this.config.include.some(r=>e instanceof r&&this.handleMine(e)):!0)}handleMine(t){return!(t instanceof gi&&!this.config.unclaimedMines&&!t.claimed)}}class Ud{constructor(t,e){k(this,"score",7);k(this,"pathFinder");k(this,"config");k(this,"lastPath");this.monster=t,this.config={exclude:[],...e},this.pathFinder=t.board.scene.rexBoard.add.pathFinder(t,{blockerTest:!0})}setScore(t){return this.score=t,this}isApplicable(){return this.getTargets().length>0}nextTile(){if(this.lastPath&&this.lastPath.length>0){const e=this.lastPath[this.lastPath.length-1],r=this.monster.board.tileXYToChessArray(e.x,e.y).filter(i=>i instanceof Yt);if(!(this.config.exclude.length>0)||r.find(i=>this.config.exclude.every(n=>!(i instanceof n))))return this.lastPath.shift();this.lastPath=void 0}const t=this.getTargets().map(e=>({target:e,path:this.pathFinder.findPath(e)})).sort((e,r)=>{var i,n,o,a;return((n=e.path)==null?void 0:n[((i=e.path)==null?void 0:i.length)-1].cost)-((a=r.path)==null?void 0:a[((o=r.path)==null?void 0:o.length)-1].cost)})[0];return this.lastPath=t.path,this.lastPath.shift()}getTargets(){const t=this.monster.scene,e=this.monster.board.getMonsterGenerators().filter(o=>o.canBeAttacked(t.data.get("player")));if(e.length===0)return[];const r=e.reduce((o,a)=>{const h=this.monster.board.getDistance(this.monster.rexChess.tileXYZ,a.rexChess.tileXYZ);return!o||o.distance===-1||o.distance>h?{generator:a,distance:h}:o},{generator:void 0,distance:-1}).generator,i=this.monster.board.filledRingToTileXYArray(r.rexChess.tileXYZ,1),n=i.find(o=>kt(this.monster.rexChess.tileXYZ,o));return n?[n]:i.filter(o=>!(this.monster.board.tileXYToChessArray(o.x,o.y).filter(h=>h instanceof ge||this.config.exclude.length>0?this.config.exclude.some(u=>h instanceof u):!1).length>0))}}class Wd{constructor(t,e={excludePlayer:!1}){k(this,"score",6);k(this,"pathFinder");k(this,"lastPath");this.monster=t,this.config=e,this.pathFinder=t.board.scene.rexBoard.add.pathFinder(t,{blockerTest:!0})}setScore(t){return this.score=t,this}isApplicable(){return this.getOccupiedTiles().length===0?(this.lastPath=void 0,!1):!0}nextTile(){if(this.lastPath&&this.lastPath.length>0){const e=this.lastPath[this.lastPath.length-1],r=this.monster.board.tileXYToChessArray(e.x,e.y);if(!(r.find(i=>i instanceof wi)&&r.find(i=>i instanceof Yt)&&this.config.excludePlayer)||r.find(i=>!(i instanceof Gt)))return this.lastPath.shift();this.lastPath=void 0}const t=this.getOccupiedTiles().map(e=>({target:e,path:this.pathFinder.findPath(e.rexChess.tileXYZ)})).sort((e,r)=>{var i,n,o,a;return((n=e.path)==null?void 0:n[((i=e.path)==null?void 0:i.length)-1].cost)-((a=r.path)==null?void 0:a[((o=r.path)==null?void 0:o.length)-1].cost)})[0];return this.lastPath=t.path,this.lastPath.shift()}getOccupiedTiles(){const t=this.monster.board.scene.data.get("player");return this.monster.board.getPowerTiles(!0).filter(e=>this.config.excludePlayer?!kt(e.rexChess.tileXYZ,t.rexChess.tileXYZ):!0)}}class kr{constructor(t,e={excludePlayer:!1}){k(this,"score",0);this.monster=t,this.config=e}setScore(t){return this.score=t,this}isApplicable(){return this.possibleTiles().length>0}nextTile(){const t=this.possibleTiles(),e=this.monster.board.tileXYArrayToChessArray(t).find(i=>i instanceof vi),r=e&&t.findIndex(i=>kt(i,e==null?void 0:e.rexChess.tileXYZ));return t.length>1&&r!==void 0&&r>=0&&t.splice(r,1),t[Phaser.Math.RND.integerInRange(0,t.length-1)]}possibleTiles(){const t=this.monster.board.scene.data.get("player"),e=this.monster.board.filledRingToTileXYArray(this.monster.rexChess.tileXYZ,a5(ci.cost[this.monster.entity])).filter(o=>!kt(o,this.monster.rexChess.tileXYZ)),r=this.monster.board.tileXYArrayToChessArray(e).filter(o=>o instanceof Jt),i=this.monster.board.getMonsters(),n=e==null?void 0:e.filter(o=>!r.some(a=>kt(a.rexChess.tileXYZ,o))&&!i.some(a=>kt(a.rexChess.tileXYZ,o))&&(this.config.excludePlayer?!kt(o,t.rexChess.tileXYZ):!(this.monster.board.tileXYZToChess(o.x,o.y,Tt.Default)instanceof ge)));return n.length===0&&this.config.excludePlayer&&_y(e,t.rexChess.tileXYZ)?[t.rexChess.tileXYZ]:n}}class as extends Wn{constructor(t,e){super(t,e),this.cell.setFrame(ft.Sawmill)}getUpkeep(){return 0}productionPerTurn(){return 7}}k(as,"cost",25);const Zs=class extends Yt{constructor(e,r){super(e,r,ie.Engineer);k(this,"constructionTargetTile");k(this,"buildingTurns",0);k(this,"buildingType");k(this,"constructingIcon");this.board=e;const{x:i,y:n}=e.tileXYToWorldXY(r.x,r.y);this.constructingIcon=e.scene.add.image(i,n,"icons",Nt.Hammer).setVisible(!0).setScale(.8).setDepth(pt.Actions).setOrigin(.5,.6).setVisible(!1)}getUpkeep(){return 10}getCost(){return Zs.cost}buildTower(e,r){if(this.buildingTurns>0)return;r||(this.board.uiScene.gold-=$e.cost),this.buildingType="tower",this.buildingTurns=r||3;const{x:i,y:n}=this.board.tileXYToWorldXY(this.rexChess.tileXYZ.x,this.rexChess.tileXYZ.y);this.constructingIcon.setPosition(i,n,pt.Actions).setVisible(!0),this.board.setSelected(this.board.scene.data.get("player")),si(this.world,ae,this.entity),si(this.world,Ii,this.entity),this.hideMoveableArea(),this.board.uiScene.queueEffect(this.buildingTurns,["engineerTowerDone",this.id,e])}buildSawmill(e,r){if(this.buildingTurns>0)return;r||(this.board.uiScene.gold-=as.cost),this.buildingType="sawmill",this.buildingTurns=r||3;const{x:i,y:n}=this.board.tileXYToWorldXY(this.rexChess.tileXYZ.x,this.rexChess.tileXYZ.y);this.constructingIcon.setPosition(i,n,pt.Actions).setVisible(!0),this.board.setSelected(this.board.scene.data.get("player")),si(this.world,ae,this.entity),si(this.world,Ii,this.entity),this.hideMoveableArea(),this.board.uiScene.queueEffect(this.buildingTurns,["engineerSawmillDone",this.id,e])}buildBridge(e,r){if(this.buildingTurns>0)return;r||(this.board.uiScene.gold-=Jt.cost),this.buildingType="bridge";const i=this.board.directionBetween(this,e),n=[0,3].includes(i)?0:[1,4].includes(i)?1.05:5.25;this.constructionTargetTile=e,this.buildingTurns=r||3;const{x:o,y:a}=this.board.tileXYToWorldXY(this.rexChess.tileXYZ.x,this.rexChess.tileXYZ.y);this.constructingIcon.setPosition(o,a,pt.Actions).setVisible(!0),this.board.setSelected(this.board.scene.data.get("player")),si(this.world,ae,this.entity),si(this.world,Ii,this.entity),this.hideMoveableArea(),this.board.uiScene.queueEffect(this.buildingTurns,["engineerBridgeDone",this.id,e,n])}destroy(){this.constructingIcon.destroy(),super.destroy()}constructionDone(){this.constructingIcon.visible&&(this.constructingIcon.setVisible(!1),this.buildingTurns=0,me(this.world,Ii,this.entity),this.buildingType=void 0)}static canBuildTower(e,r){const i=Rf(e,r,[Zs,At]),n=e.tileXYToChessArray(r.x,r.y),o=n.find(h=>h instanceof Zs);return n.find(h=>h instanceof At)&&o&&i&&e.uiScene.gold>=$e.cost&&e.maxTowers>e.getTowers().length}static canBuildSawmill(e,r){const i=e.tileXYToChessArray(r.x,r.y),n=Rf(e,r,[Zs,At]),o=e.getCell(r),a=i.find(l=>l instanceof Zs),h=i.find(l=>l instanceof At),u=e.getNeighborTileXY(r,null).filter(l=>e.getCell(l).getFrame()===ft.Water);return[ft.Wood1,ft.Wood2].includes(o.getFrame())&&u.length>0&&a&&h&&n&&e.uiScene.gold>=as.cost}static canBuildBridge(e,r){const i=e.tileXYToChessArray(r.x,r.y),n=i==null?void 0:i.find(o=>o instanceof Jt);return e.selected instanceof Zs&&n&&n.bridgeBuilt===!1&&e.uiScene.gold>=Jt.cost&&e.maxBridges>e.getWaterTiles(!0).length}};let Kt=Zs;k(Kt,"cost",30);const C5=Object.freeze(Object.defineProperty({__proto__:null,default:Kt},Symbol.toStringTag,{value:"Module"})),Jh=class extends Yt{constructor(t,e){super(t,e,ie.Farmer),this.board=t}getUpkeep(){return 5}getCost(){return Jh.cost}cultivate(t,e){ht(this.world,Ht,this.entity)||(ut(this.world,Le,this.entity,{turns:e||3}),ut(this.world,Ht,this.entity,{targetX:t.x,targetY:t.y,type:wr.Farm}))}destroy(){super.destroy()}static canCultivate(t,e){const r=t.tileXYToChessArray(e.x,e.y),i=r.find(o=>o instanceof Jh);return r.find(o=>o instanceof At)&&i&&r.length===2}};let xe=Jh;k(xe,"cost",10);const rc=class extends Yt{constructor(t,e){super(t,e,ie.Miner),this.board=t}getUpkeep(){return 10}getCost(){return rc.cost}};let ke=rc;k(ke,"cost",20);const ac=class extends Yt{constructor(t,e){super(t,e,ie.Soldier),this.board=t}getUpkeep(){return 15}getCost(){return ac.cost}};let be=ac;k(be,"cost",40);class ji extends ge{constructor(t,e){super(t,ie.Ant,e),this.goals=[new go(this),new xl(this,{include:[gi,zi]}),new Wd(this),new kr(this),new Ud(this),new $r(this,{})].sort((r,i)=>i.score-r.score)}battle(t,e){return t instanceof Gt?this.battleOutcome(8,t,ji,e):t instanceof be?this.battleOutcome(7,t,ji,e):t instanceof xe?!0:t instanceof Kt?this.battleOutcome(1,t,ji,e):t instanceof ke?this.battleOutcome(5,t,ji,e):!1}towerBattle(t){return this.battleOutcome(4,t,ji)}makeMove(){var e;if(!this.active)return;const t=(e=this.goals.find(r=>r.isApplicable()))==null?void 0:e.nextTile();t&&this.handleAttackMove(t)}enterPlayerTile(t){t instanceof At&&(Rt.emit(Ot.PlayerTileDestroyed,{x:t.x,y:t.y}),t.destroy())}enterPlayerProductionBuilding(t){(t instanceof zi||t instanceof as)&&(Rt.emit(Ot.PlayerTileDestroyed,{x:t.x,y:t.y}),new At(this.board,t.rexChess.tileXYZ),t.destroy())}enterClaimedMine(t){t.claimed=!1}}class S5{constructor(t,e){k(this,"score",2);k(this,"config");this.monster=t,this.config={exclude:[],radius:1,...e}}setScore(t){return this.score=t,this}isApplicable(){return this.possibleTiles().length>0}nextTile(){const t=this.possibleTiles();return t[Phaser.Math.RND.integerInRange(0,t.length-1)]}possibleTiles(){const t=this.monster.board.filledRingToTileXYArray(this.monster.rexChess.tileXYZ,this.config.radius),e=this.monster.board.tileXYArrayToChessArray(t).filter(a=>a instanceof Yt).filter(a=>this.config.exclude.length>0?this.config.exclude.every(h=>!(a instanceof h)):!0);if(!e.length)return[];const r=this.monster.board.getNeighborTileXY(this.monster.rexChess.tileXYZ,null).filter(a=>e.every(h=>!kt(h.rexChess.tileXYZ,a))),i=e.map(a=>({enemy:a,distance:this.monster.board.getDistance(this.monster.rexChess.tileXYZ,a.rexChess.tileXYZ)}));return r.map(a=>({score:i.every(h=>this.monster.board.getDistance(a,h.enemy.rexChess.tileXYZ)>h.distance)?1:-1,tile:a})).sort((a,h)=>h.score-a.score).filter(a=>a.score===1).map(a=>a.tile)}}class Oi extends ge{constructor(t,e){super(t,ie.Goblin,e),this.goals=[new go(this,{radius:2}),new Wd(this),new S5(this,{exclude:[xe]}).setScore(10),new kr(this),new $r(this,{})].sort((r,i)=>i.score-r.score)}battle(t,e){return t instanceof Gt?this.battleOutcome(9,t,Oi,e):t instanceof be?this.battleOutcome(8,t,Oi,e):t instanceof xe?this.battleOutcome(4,t,Oi,e):t instanceof Kt?this.battleOutcome(5,t,Oi,e):t instanceof ke?this.battleOutcome(6,t,Oi,e):!1}towerBattle(t){return this.battleOutcome(7,t,Oi)}makeMove(){var r;if(!this.active)return;const t=eT(this.board,this.rexChess.tileXYZ,2,!1);if(t.length>0){this.handleAttackMove(t[0],!0);return}const e=(r=this.goals.find(i=>i.isApplicable()))==null?void 0:r.nextTile();e&&this.handleAttackMove(e)}enterPlayerTile(t){t instanceof At&&(Rt.emit(Ot.PlayerTileDestroyed,{x:t.x,y:t.y}),t.destroy())}enterPlayerProductionBuilding(t){}enterClaimedMine(t){}}class Fi extends ge{constructor(e,r){super(e,ie.Golem,r);k(this,"slamSprite");k(this,"slamCooldownTurns",0);this.goals=[new xl(this,{include:[gi],unclaimedMines:!0,radius:4}).setScore(9),new kr(this),new $r(this,{})].sort((i,n)=>n.score-i.score),this.slamSprite=this.scene.add.sprite(0,0,"stun").setScale(.18).setDepth(pt.StatusEffects).setVisible(!1),ut(this.world,Ee,this.entity)}battle(e,r){return e instanceof Gt?this.battleOutcome(7,e,Fi,r):e instanceof be?this.battleOutcome(5,e,Fi,r):e instanceof xe?!0:e instanceof Kt?this.battleOutcome(1,e,Fi,r):e instanceof ke?this.battleOutcome(3,e,Fi,r):!1}towerBattle(e){return this.battleOutcome(2,e,Fi)}makeMove(){var i;if(!this.active)return;const e=tT(this.board,this.rexChess.tileXYZ,1,!1,!1).filter(n=>n instanceof Yt&&!ht(this.world,He,n.entity)||n instanceof $e);if(this.slamCooldownTurns===0&&e.length){this.slam(e);return}const r=(i=this.goals.find(n=>n.isApplicable()))==null?void 0:i.nextTile();r&&this.handleAttackMove(r)}slam(e){this.scene.cameras.main.shake(400,.02),this.slamCooldownTurns+=5,navigator.vibrate&&navigator.vibrate([200,30,70]),e.forEach(r=>{r instanceof Yt?ut(this.world,He,r.entity,{turns:3}):r instanceof $e&&this.handleAttackMove(r.rexChess.tileXYZ,!0,!1)}),this.slamSprite.setVisible(!0).play("slam").once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.slamSprite.setVisible(!1)})}enterPlayerTile(e){e instanceof At&&(Rt.emit(Ot.PlayerTileDestroyed,{x:e.x,y:e.y}),e.destroy())}enterPlayerProductionBuilding(e){(e instanceof zi||e instanceof as)&&(Rt.emit(Ot.PlayerTileDestroyed,{x:e.x,y:e.y}),new At(this.board,e.rexChess.tileXYZ),e.destroy())}enterClaimedMine(e){e.claimed=!1}destroy(){this.slamSprite.destroy(),super.destroy()}}class E5{constructor(t,e){k(this,"score",8);k(this,"pathFinder");k(this,"config");k(this,"lastPath");this.monster=t,this.config={exclude:[],...e},this.pathFinder=t.board.scene.rexBoard.add.pathFinder(t,{blockerTest:!0})}setScore(t){return this.score=t,this}isApplicable(){return this.getTargets().length>0}nextTile(){if(this.lastPath&&this.lastPath.length>0){const e=this.lastPath[this.lastPath.length-1],r=this.monster.board.tileXYToChessArray(e.x,e.y).filter(i=>i instanceof Yt);if(!(this.config.exclude.length>0)||r.find(i=>this.config.exclude.every(n=>!(i instanceof n))))return this.lastPath.shift();this.lastPath=void 0}const t=this.getTargets().map(e=>({target:e,path:this.pathFinder.findPath(e)})).sort((e,r)=>{var i,n,o,a;return((n=e.path)==null?void 0:n[((i=e.path)==null?void 0:i.length)-1].cost)-((a=r.path)==null?void 0:a[((o=r.path)==null?void 0:o.length)-1].cost)})[0];return this.lastPath=t.path,this.lastPath.shift()}getTargets(){const t=this.monster.board.getMines(!0).filter(r=>r.slimedForTurns===0);return t.length===0?[]:[t.reduce((r,i)=>{const n=this.monster.board.getDistance(this.monster.rexChess.tileXYZ,i.rexChess.tileXYZ);return!r||r.distance===-1||r.distance>n?{target:i,distance:n}:r},{target:void 0,distance:-1}).target.rexChess.tileXYZ]}}class As extends ge{constructor(t,e){super(t,ie.Slime,e),this.goals=[new go(this,{exclude:[Gt,be]}),new xl(this,{include:[zi]}).setScore(7),new Wd(this,{excludePlayer:!0}),new kr(this,{excludePlayer:!0}),new Ud(this,{exclude:[Gt]}),new E5(this,{exclude:[Gt]}),new $r(this,{})].sort((r,i)=>i.score-r.score)}battle(t,e){return t instanceof Gt||t instanceof be?(Rt.emit(Ot.MonsterKilled,"Slime"),!1):t instanceof xe?this.battleOutcome(6,t,As,e):t instanceof Kt?this.battleOutcome(7,t,As,e):t instanceof ke?this.battleOutcome(8,t,As,e):!1}towerBattle(t){return this.battleOutcome(9,t,As)}makeMove(){var e;if(!this.active)return;const t=(e=this.goals.find(r=>r.isApplicable()))==null?void 0:e.nextTile();t&&this.handleAttackMove(t)}enterPlayerTile(t){t instanceof At&&(Rt.emit(Ot.PlayerTileDestroyed,{x:t.x,y:t.y}),t.destroy())}enterPlayerProductionBuilding(t){t instanceof zi&&(Rt.emit(Ot.PlayerTileDestroyed,{x:t.x,y:t.y}),new At(this.board,t.rexChess.tileXYZ),t.destroy())}enterClaimedMine(t){t.setSlimedTurns(3)}}class P5{constructor(t,e={shootingRange:2}){k(this,"score",6);k(this,"pathFinder");k(this,"lastPath");this.monster=t,this.config=e,this.pathFinder=t.board.scene.rexBoard.add.pathFinder(t,{blockerTest:!0})}setScore(t){return this.score=t,this}isApplicable(){return"spinningCooldownTurns"in this.monster&&this.monster.spinningCooldownTurns>0?!1:this.getTargets().length===0?(this.lastPath=void 0,!1):!0}nextTile(){if(this.lastPath&&this.lastPath.length>0)return this.lastPath.shift();const t=this.getTargets().map(e=>({target:e,path:this.pathFinder.findPath(e.rexChess.tileXYZ).slice(0,-2)})).sort((e,r)=>{var i,n,o,a;return((n=e.path)==null?void 0:n[((i=e.path)==null?void 0:i.length)-1].cost)-((a=r.path)==null?void 0:a[((o=r.path)==null?void 0:o.length)-1].cost)})[0];return this.lastPath=t.path,this.lastPath.shift()}getTargets(){const t=this.monster.board.getHomebase();return t.ensnaredTurns===0?[t]:[]}}class Li extends ge{constructor(e,r){super(e,ie.Spider,r);k(this,"spinAttackShot");k(this,"spinningCooldownTurns",0);this.goals=[new P5(this),new go(this),new xl(this,{include:[gi,zi]}),new Ud(this),new kr(this),new $r(this,{})].sort((o,a)=>a.score-o.score);const{x:i,y:n}=e.tileXYToWorldXY(this.tileXY.x,this.tileXY.y);this.spinAttackShot=e.scene.add.image(i,n,"icons",Nt.SpiderWeb).setDepth(pt.Actions).setOrigin(.5,.5).setVisible(!1)}battle(e,r){return e instanceof Gt?this.battleOutcome(9,e,Li,r):e instanceof be?this.battleOutcome(8,e,Li,r):e instanceof xe?this.battleOutcome(3,e,Li,r):e instanceof Kt?this.battleOutcome(5,e,Li,r):e instanceof ke?this.battleOutcome(6,e,Li,r):!1}towerBattle(e){return this.battleOutcome(7,e,Li)}makeMove(){var n;if(!this.active)return;const e=this.board.getHomebase();if(e.ensnaredTurns===0&&this.spinningCooldownTurns===0&&this.board.getDistance(this.rexChess.tileXYZ,e.rexChess.tileXYZ)<=2){this.ensnareHomebase(e);return}const r=Rh.Utils.Array.Shuffle(eT(this.board,this.rexChess.tileXYZ,2,!1,!1));if(this.spinningCooldownTurns===0&&r.length>0){const o=this.board.tileXYToChessArray(r[0].x,r[0].y)[0];this.spinEnemy(o);return}else this.spinningCooldownTurns=Math.max(this.spinningCooldownTurns-1,0);const i=(n=this.goals.find(o=>o.isApplicable()))==null?void 0:n.nextTile();i&&this.handleAttackMove(i)}enterPlayerTile(e){e instanceof At&&(Rt.emit(Ot.PlayerTileDestroyed,{x:e.x,y:e.y}),e.destroy())}enterPlayerProductionBuilding(e){e instanceof zi&&(Rt.emit(Ot.PlayerTileDestroyed,{x:e.x,y:e.y}),new At(this.board,e.rexChess.tileXYZ),e.destroy())}enterClaimedMine(e){}destroy(){this.spinAttackShot.destroy(),super.destroy()}ensnareHomebase(e){e.ensnaredTurns>0||(this.spinningCooldownTurns+=5,this.fireAt(e,this.spinAttackShot),this.phaser.integerInRange(0,10)>2&&(e.ensnaredTurns+=3))}spinEnemy(e){ht(this.world,He,e.entity)||(this.spinningCooldownTurns+=5,this.fireAt(e,this.spinAttackShot),this.phaser.integerInRange(0,10)>5&&ut(this.world,He,e.entity,{turns:2}))}}class vi extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Buildings));super(e,r.x,r.y,Tt.Buildings);k(this,"cell");k(this,"_entity");k(this,"generate",e=>{const r=()=>{const i=this.board.getPlayerPieces().find(n=>kt(n.rexChess.tileXYZ,this.rexChess.tileXYZ));i&&(i instanceof Gt?this.board.scene.gameOver():i.destroy())};e%9===0&&this.rexChess.tileXYZ&&(r(),new As(this.board,this.rexChess.tileXYZ)),e%29===0&&this.rexChess.tileXYZ&&(r(),new ji(this.board,this.rexChess.tileXYZ)),e%33===0&&this.rexChess.tileXYZ&&(r(),new Li(this.board,this.rexChess.tileXYZ)),e%39===0&&this.rexChess.tileXYZ&&(r(),new Oi(this.board,this.rexChess.tileXYZ)),e%52===0&&this.rexChess.tileXYZ&&(r(),new Fi(this.board,this.rexChess.tileXYZ))});this.board=e,i.add.existing(this),this.setScale(.8),this.cell=e.getCell(r),this.cell.setFrame(ft.MonsterGenerator),Rt.on(Ot.NewTurn,this.generate),this.entity=Gr(i.world),ut(i.world,Ce,this.entity,{hp:3}),ut(i.world,Lr,this.entity,{monsters:[Za.findIndex(n=>n===ji),Za.findIndex(n=>n===As)]}),ut(i.world,Mt,this.entity,{x:r.x,y:r.y})}get entity(){return this._entity}set entity(e){this._entity=e,It.set(e,this)}canBeAttacked(e){const r=this.board.scene;return r.devMode.gennyAttackOverride||this.board.getPowerTiles(!1).every(i=>ht(r.world,bi,i.entity))&&(e instanceof Gt||e instanceof be)}destroy(){this.cell.clear(),Rt.off(Ot.NewTurn,this.generate),ml(this.board.scene.world,this.entity),super.destroy()}}class $r{constructor(t,e){k(this,"score",8);this.monster=t,this.config=e}setScore(t){return this.score=t,this}isApplicable(){return!!this.monster.board.tileXYToChessArray(this.monster.rexChess.tileXYZ.x,this.monster.rexChess.tileXYZ.y).find(t=>t instanceof vi)}nextTile(){const t=this.possibleTiles();return t[Phaser.Math.RND.integerInRange(0,t.length-1)]}possibleTiles(){const t=this.monster.board.scene.data.get("player"),e=this.monster.board.getNeighborTileXY(this.monster.rexChess.tileXYZ,null),r=this.monster.board.tileXYArrayToChessArray(e).filter(i=>!(i instanceof Jt));return e==null?void 0:e.filter(i=>r.every(n=>!kt(n.rexChess.tileXYZ,i))&&this.config.excludePlayer?!kt(i,t.rexChess.tileXYZ):!(this.monster.board.tileXYZToChess(i.x,i.y,Tt.Default)instanceof ge))}}class M5{constructor(t,e){k(this,"score",10);k(this,"pathFinder");k(this,"lastPath");this.monster=t,this.config=e,this.pathFinder=t.board.scene.rexBoard.add.pathFinder(t,{blockerTest:!0})}setScore(t){return this.score=t,this}isApplicable(){const t=this.monster.board.getHive(),e=this.monster.scene;return!(!this.monster.isQueen||!t||ht(e.world,_e,t.entity)&&_e.unit[t.entity].length===jy)}nextTile(){if(this.lastPath&&this.lastPath.length>0)return this.lastPath.shift();const t=this.getTargets().map(e=>({target:e,path:this.pathFinder.findPath(e.rexChess.tileXYZ)})).sort((e,r)=>{var i,n,o,a;return((n=e.path)==null?void 0:n[((i=e.path)==null?void 0:i.length)-1].cost)-((a=r.path)==null?void 0:a[((o=r.path)==null?void 0:o.length)-1].cost)})[0];return this.lastPath=t.path,this.lastPath.shift()}getTargets(){return[this.monster.board.getHive()]}}class Ve extends ge{constructor(e,r){super(e,ie.Hornet,r);k(this,"_isQueen",!1);this.goals=[new M5(this,{}),new go(this),new kr(this),new $r(this,{})].sort((i,n)=>n.score-i.score),ci.cost[this.entity]=2,this.phaser.integerInRange(0,10)>8&&!e.getMonsters().find(i=>i instanceof Ve&&i.isQueen)&&(this.isQueen=!0)}get isQueen(){return this._isQueen}set isQueen(e){this._isQueen=e,Vn.frame[this.entity]=e?ie.HornetQueen:ie.Hornet}battle(e,r){const i=this.isQueen?3:0;return e instanceof Gt?this.battleOutcome(9-i,e,Ve,r):e instanceof be?this.battleOutcome(6-i,e,Ve,r):e instanceof xe?this.battleOutcome(3-i,e,Ve,r):e instanceof Kt?this.battleOutcome(3-i,e,Ve,r):e instanceof ke?this.battleOutcome(3-i,e,Ve,r):!1}towerBattle(e){return this.battleOutcome(5,e,Ve)}makeMove(){var i;if(!this.active||ht(this.world,Le,this.entity)||ht(this.world,ti,this.entity))return;if(!this.isQueen&&this.phaser.integerInRange(0,10)>7&&!this.board.getHive()&&!this.board.getMonsters().filter(n=>n instanceof Ve).find(n=>Ht.type[n.entity]===wr.Hive)&&Rf(this.board,this.rexChess.tileXYZ,[Ve])){ut(this.world,Le,this.entity,{turns:4}),ut(this.world,Ht,this.entity,{targetX:this.rexChess.tileXYZ.x,targetY:this.rexChess.tileXYZ.y,type:wr.Hive});return}const e=(i=this.goals.find(n=>n.isApplicable()))==null?void 0:i.nextTile();if(!e)return;const r=this.board.getHive();if(r&&this.isQueen&&kt(r.rexChess.tileXYZ,e)){this.moveTo.moveTo(e),ut(this.world,ti,this.entity,{target:r.entity});return}this.handleAttackMove(e)}enterPlayerTile(e){e instanceof At&&(Rt.emit(Ot.PlayerTileDestroyed,{x:e.x,y:e.y}),e.destroy())}enterPlayerProductionBuilding(e){e instanceof zi&&(Rt.emit(Ot.PlayerTileDestroyed,{x:e.x,y:e.y}),new At(this.board,e.rexChess.tileXYZ),e.destroy())}enterClaimedMine(e){e.claimed=!1}}class Br extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Buildings));super(e,r.x,r.y,Tt.Buildings);k(this,"id",Vd());k(this,"cell");k(this,"_entity");this.board=e,i.add.existing(this),this.setScale(.8),this.cell=e.getCell(r),this.cell.setFrame(ft.Hive),this.entity=Gr(i.world),ut(i.world,Ce,this.entity,{hp:1}),ut(i.world,Lr,this.entity,{monsters:[Za.findIndex(n=>n===Ve),Za.findIndex(n=>n===Ve)]}),ut(i.world,Mt,this.entity,{x:r.x,y:r.y})}get entity(){return this._entity}set entity(e){this._entity=e,It.set(e,this)}destroy(){this.cell.clear(),ml(this.board.scene.world,this.entity),super.destroy()}}class ss extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Buildings));super(e,r.x,r.y,Tt.Buildings);k(this,"cell");k(this,"moveTo");k(this,"_ensnaredTurns",0);k(this,"ensnaredIcon");i.add.existing(this),this.setScale(.97),this.moveTo=e.scene.rexBoard.add.moveTo(this,{blockerTest:!0,speed:at(400,!0)}),this.cell=e.getCell(r),this.cell.isOwned=!0,this.cell.setFrame(ft.HomeBase);const{x:n,y:o}=e.tileXYToWorldXY(r.x,r.y);this.ensnaredIcon=e.scene.add.image(n,o,"icons",Nt.SpiderWeb).setScale(1.2).setDepth(pt.Actions).setOrigin(.5).setAlpha(1).setTint(0).setVisible(this.ensnaredTurns>0),Rt.on(Ot.NewTurn,()=>{this.ensnaredTurns>0&&(this.ensnaredTurns-=1)})}get ensnaredTurns(){return this._ensnaredTurns}set ensnaredTurns(e){this._ensnaredTurns=e,this.ensnaredIcon.setVisible(this._ensnaredTurns>0);const r=this.scene.scene.get(nt.UI);r==null||r.updateBuyingOptions()}destroy(){this.cell.clear(),this.cell.isOwned=!1,super.destroy()}}class $a extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Items));super(e,r.x,r.y,Tt.Items,Bf,.5);k(this,"icon");i.add.existing(this),this.setScale(.8),this.icon=i.add.image(this.x,this.y,"icons",Nt.Armor).setDepth(pt.Icons),this.setDepth(pt.Icons),e.getCell(r).isRaised&&(this.setY(this.y-ni),this.icon.setY(this.icon.y-ni))}passiveEffect(e,r,i){const n=r.scene;return ht(n.world,Ee,e.entity)?!1:(si(n.world,Ee,e.entity),!0)}activeEffect(e,r,i){throw new Error("Method not implemented.")}destroy(){this.icon.destroy(),super.destroy()}}class yl extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Items));super(e,r.x,r.y,Tt.Items,Bf,.5);k(this,"icon");i.add.existing(this),this.setScale(.8),this.icon=i.add.image(this.x,this.y,"icons",Nt.SpeedBooster).setDepth(pt.Icons),this.setDepth(pt.Icons),e.getCell(r).isRaised&&(this.setY(this.y-ni),this.icon.setY(this.icon.y-ni))}passiveEffect(e,r,i){return ci.cost[e.entity]-=1,i.queueEffect(5,["speedBoosterPassiveEffect",e.id]),!0}activeEffect(e,r,i){throw new Error("Method not implemented.")}destroy(){this.icon.destroy(),super.destroy()}}class Lf extends Fe{constructor(e,r){const i=e.scene;r===void 0&&(r=e.getFreeTile(Tt.Items));super(e,r.x,r.y,Tt.Items,Bf,.5);k(this,"phaser",new po);k(this,"icon");i.add.existing(this),this.setScale(.8),this.icon=i.add.image(this.x,this.y,"icons",Nt.Treasure).setDepth(pt.Icons),this.setDepth(pt.Icons),e.getCell(r).isRaised&&(this.setY(this.y-ni),this.icon.setY(this.icon.y-ni))}passiveEffect(e,r,i){i.gold+=this.phaser.integerInRange(50,350);const n=r.getRandomEmptyTileXYInRange(this.rexChess.tileXYZ,1,Tt.Default);return n&&this.phaser.integerInRange(1,10)>7&&new Oi(r,n),!0}activeEffect(e,r,i){throw new Error("Method not implemented.")}destroy(){this.icon.destroy(),super.destroy()}}const Za=[As,ji,Oi,Li,Fi,Ve],Hd={"-Monsters":String,Slime:As,Ant:ji,Goblin:Oi,Spider:Li,Golem:Fi,Hornet:Ve,"-Buildings":String,Mine:gi,Farm:zi,HomeBase:ss,PowerTile:wi,Tower:$e,Sawmill:as,MonsterGenerator:vi,Hive:Br,"-Units":String,Player:Gt,Farmer:xe,Miner:ke,Engineer:Kt,Soldier:be,"-Items":String,SpeedBooster:yl,Armor:$a,Treasure:Lf,"-Misc":String,Water:Jt,UncultivatedTile:At};function A5(s){var t;return(t=Object.entries(Hd).find(([e,r])=>s instanceof r))==null?void 0:t[0]}function zu(s){return[Jt,gi,ss,wi,vi,$e,as,Br].includes(s)}class Et extends Phaser.GameObjects.Image{constructor(e,r){const{x:i,y:n,portrait:o,face:a,imageKey:h,icon:u,onClick:l,disabled:f}=r;super(e,i,n,h||(a!==void 0?"buttons":o!==void 0?"portraits":"icons"),a||o||u);k(this,"_disabled",!1);k(this,"tooltipId",Math.random()*1e4);this.scene=e;let d;this.disabled=f,this.setScale(a?1.5:1),this.setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this._disabled||(clearTimeout(d),e.tooltip.hideTooltip(this.tooltipId,!1),l==null||l())}),e.add.existing(this),r.tooltip&&(this.createTooltip(i,n,r.tooltip),this.on("pointerover",v=>{clearTimeout(d),e.tooltip.hideTooltip(this.tooltipId),e.tooltip.showTooltip(this.tooltipId),d=setTimeout(()=>e.tooltip.hideTooltip(this.tooltipId),2e3)},e).on("pointerout",()=>{clearTimeout(d),e.tooltip.hideTooltip(this.tooltipId)},e))}get disabled(){return this._disabled}set disabled(e){e===void 0||this._disabled===e||(this._disabled=e,this.setAlpha(this._disabled?.5:1))}createTooltip(e,r,i){this.scene.tooltip.createTooltip({x:e+(i.left||0),y:r+(i.top||20),hasBackground:!0,text:{text:i.text,fontFamily:"JunkDog"},background:{width:100,height:50},id:this.tooltipId,target:this}),this.scene.tooltip.hideTooltip(this.tooltipId)}}var ii=(s=>(s[s.Play=73]="Play",s[s.DisbandPiece=52]="DisbandPiece",s[s.EditorErase=16]="EditorErase",s[s.EditorSave=15]="EditorSave",s[s.EditorPlay=1]="EditorPlay",s[s.EditorLoad=28]="EditorLoad",s[s.Menu=2]="Menu",s[s.Reload=3]="Reload",s))(ii||{});class R5{constructor(t,e={text:"",x:0,y:0,width:100,type:"text"}){k(this,"element");this.scene=t,this.config=e,this.element=this.scene.add.dom(this.config.x+20,this.config.y).createFromCache("form");const r=this.element.getChildByName("name");r.setAttribute("type",e.type),r.setAttribute("min","0"),r.setAttribute("step","1"),r.onkeyup=i=>{(i.code==="Enter"||i.keyCode===13)&&r.blur()},r.onblur=i=>{e.type==="number"&&(r.value=Number.parseInt(r.value).toString())},r.style.width=(this.config.width||100)+"px",r.style.fontSize=(this.config.fontSize||14)+"px",r.setAttribute("placeholder",e.placeholder||""),r.value=e.text||""}get value(){return this.element.getChildByName("name").value}set value(t){const e=this.element.getChildByName("name");e.value=t}}class kd{constructor(t,e){k(this,"pluginManager");k(this,"game");k(this,"scene");k(this,"systems");k(this,"sticks");k(this,"buttons");k(this,"_pointerTotal");k(this,"tooltipCollection");k(this,"target");k(this,"tween");this.pluginManager=e,this.game=e.game,this.scene=t,this.systems=t.sys,this.sticks=null,this.buttons=null,this._pointerTotal=0,t.sys.events.once("boot",this.boot,this),this.tooltipCollection={},this.target=null}boot(){this.systems.events.once("destroy",this.destroy,this),this.systems.settings.active?this.start():this.systems.events.on("start",this.start,this)}start(){this.systems.events.on("update",this.update,this),this.systems.events.once("shutdown",this.shutdown,this)}update(t){}shutdown(){const t=this.systems.events;t.off("update",this.update,this),t.off("shutdown",this.shutdown,this)}destroy(){this.shutdown()}hideTooltip(t,e){var r;(r=this.tooltipCollection[t])!=null&&r.container&&(e?(this.scene.tweens.isTweening(this.tooltipCollection[t].container)&&this.scene.tweens.killTweensOf(this.tooltipCollection[t].container),this.tween=this.scene.tweens.add({targets:this.tooltipCollection[t].container,alpha:0,ease:"Power1",duration:at(150),delay:0,onComplete:n=>{}})):this.tooltipCollection[t].container.visible=!1)}showTooltip(t,e){e?(this.tooltipCollection[t].container.alpha=0,this.tooltipCollection[t].container.visible=!0,this.scene.children.bringToTop(this.tooltipCollection[t].container),this.scene.tweens.isTweening(this.tooltipCollection[t].container)&&this.scene.tweens.killTweensOf(this.tooltipCollection[t].container),this.tween=this.scene.tweens.add({targets:this.tooltipCollection[t].container,alpha:1,ease:"Power1",duration:at(500),delay:0,onComplete:i=>{}})):(this.tooltipCollection[t].container.visible=!0,this.scene.children.bringToTop(this.tooltipCollection[t].container))}createTooltip(t){let e;const r=this.scene.add.container(0,0);let i;return t.content===void 0&&t.text.text!==void 0&&t.html===void 0?i=this.createLabel(0,0,t):t.html!==void 0?i=t.html:(i=t.content,i.x=i.displayWidth/2),r.width=i.displayWidth,r.height=i.displayHeight,t.hasBackground&&(e=this.createBackground(r,i,t.x,t.y,t.background.width,t.background.height,t),t.content===void 0&&t.html===void 0?(i.x=e.rect.centerX-i.displayWidth*.5,i.y=e.rect.centerY-i.displayHeight*.5):(i.x=e.rect.centerX,i.y=e.rect.centerY),r.width=e.rect.width,r.height=e.rect.height),r.add(i),r.x=t.x,r.y=t.y,this.tooltipCollection[t.id]={container:r,target:t.target,options:t},this.target=t.target,r}getTarget(t){return this.tooltipCollection[t].target}getHeight(t){return this.tooltipCollection[t].container.height}getPadding(t){const e=this.tooltipCollection[t].options.paddingTop||12,r=this.tooltipCollection[t].options.paddingBottom||12,i=this.tooltipCollection[t].options.paddingLeft||16,n=this.tooltipCollection[t].options.paddingRight||16;return{paddingLeft:i,paddingRight:n,paddingTop:e,paddingBottom:r}}createLabel(t,e,r){const i=this.scene.add.text(t,e,r.text.text,{fontFamily:r.text.fontFamily||"new_rockerregular",fontSize:r.text.fontSize||19,color:r.text.textColor||"#ffffff",fontStyle:r.text.fontStyle||"",align:r.text.align||"center"});if(r.hasShadow){const n=r.text.shadowColor||"#1e1e1e",o=r.text.blur||1,a=r.text.shadowStroke||!1,h=r.text.shadowFill||!0;i.setShadow(0,0,n,o,a,h)}return i}createBackground(t,e,r,i,n,o,a){const h=a.paddingTop||12,u=a.paddingBottom||12,l=a.paddingLeft||16,f=a.paddingRight||16,c=a.background.lineStyle||{width:2,color:0,alpha:.4},d=a.background.fillStyle||{color:0,alpha:.4},v=this.scene.add.graphics({lineStyle:c,fillStyle:d}),p=n>=e.displayWidth+l+f?n:e.displayWidth+l+f,g=o>=e.displayHeight+h+u?o:e.displayHeight+h+u,m=new js.Geom.Rectangle(a.html===void 0?-p/2+t.width/2:-p/2,0,p,g);return m.width=p,m.height=g,v.fillRoundedRect(m.x,m.y,m.width,m.height,{tl:12,tr:22,bl:22,br:12}),t.add(v),{rect:m,graphic:v}}}const gg=`You're lacking one or multiple of:
* Monster Generator
* Homebase
* Player
* Power Tile`;class O5 extends Phaser.Scene{constructor(){super(nt.Editor);k(this,"activeItem");k(this,"eraseActive",!1);k(this,"levelingMode",!1);k(this,"tooltip");k(this,"menuPosY",30);k(this,"resetMap");k(this,"btnErase");k(this,"btnSave");k(this,"btnPlay");k(this,"btnLoad");k(this,"activeButton");k(this,"goldInput");k(this,"btnMenu");k(this,"toast");k(this,"btnRaise");k(this,"btnLower");k(this,"groupsAndButtons",[])}get menuPosX(){return Math.min(ct.grid.cellWidth*ct.width+ct.grid.x+70,window.innerWidth-150)}create(){const e=this.scene.get(nt.Game);e.world||(e.world=ef());const r=new kn(this,0,0,2,2,20,496634,1);r.setStrokeStyle(2,0,1),this.add.existing(r),this.toast=new iX(this,{x:400,y:200,background:r,text:this.add.text(0,0,"",{fontSize:"18px"}),space:{left:20,right:20,top:20,bottom:20},duration:{in:at(250),hold:at(2e3),out:at(250)}}),this.add.existing(this.toast),this.tooltip=new kd(this,this.game.plugins),this.btnMenu=new Et(this,{x:140,y:30,face:ii.Menu,onClick:Ps(()=>this.showMenu(),300),tooltip:{text:"Show menu"}}),this.add.text(20,285,"Gold:"),this.goldInput=new R5(this,{x:142,y:325,width:60,placeholder:"Gold",fontSize:14,text:"0",type:"number"}),this.btnLoad=new Et(this,{x:30,y:230,face:ii.EditorLoad,tooltip:{text:"Resume board"},onClick:()=>{const o=this.menuPosX;if(e.loadGame(!0)){o!==this.menuPosX&&this.repositionSpawnButtonsAndText(this.menuPosX-o);const a=JSON.parse(window.localStorage.getItem(Yn));this.goldInput.value=a.gold.toString()}}}),this.resetMap=new Et(this,{x:60,y:230,face:ii.Reload,tooltip:{text:"Reset map"},onClick:()=>{e.newEditor(),e.board.refreshCells()}}),this.btnRaise=new Et(this,{x:30,y:150,face:ii.EditorPlay,tooltip:{text:"Raise tile"},onClick:()=>{this.levelingMode="raise",this.eraseActive=!1,this.highlight(this.btnRaise)}}).setRotation(4.71239),this.btnLower=new Et(this,{x:60,y:150,face:ii.EditorPlay,tooltip:{text:"Lower tile"},onClick:()=>{this.levelingMode="lower",this.eraseActive=!1,this.highlight(this.btnLower)}}).setRotation(1.5708),this.btnPlay=new Et(this,{x:30,y:200,face:ii.EditorPlay,tooltip:{text:"Play board"},onClick:()=>{if(!e.board.isValidBoard()){this.toast.showMessage(gg);return}const o=Number.parseInt(this.goldInput.value);e.saveGame({gold:o&&o>0?o:0,turn:0,income:0,upkeep:0}),this.scene.launch(nt.UI),this.scene.stop();const a=this.scene.get(nt.Menu);a.gameIsActive=!0,e.loadGame()}}),this.btnSave=new Et(this,{x:60,y:200,face:ii.EditorSave,tooltip:{text:"Save board"},onClick:()=>{if(!e.board.isValidBoard()){this.toast.showMessage(gg);return}const o=Number.parseInt(this.goldInput.value);e.saveGame({gold:o&&o>0?o:0,turn:0,income:0,upkeep:0})}}),this.btnErase=new Et(this,{x:90,y:200,face:ii.EditorErase,tooltip:{text:"Erase tiles"},onClick:()=>{this.eraseActive=!0,this.levelingMode=!1,this.highlight(this.btnErase)}});let i=this.menuPosY-10,n=0;Object.entries(Hd).forEach(([o,a],h)=>{if(o.startsWith("-")){h!==0&&(i+=20),this.groupsAndButtons.push(this.add.text(this.menuPosX-10,i,o.slice(1))),n=0;return}else n===0&&(i+=30);const u=new Et(this,{x:this.menuPosX+n,y:i,portrait:ie[o],icon:zu(a)?ft[o]:Nt[o],imageKey:this.getImageKey(a),onClick:()=>{this.eraseActive=!1,this.levelingMode=!1,a instanceof String||(this.activeItem=a,this.highlight(u))}}).setScale(a===At||zu(a)?.5:1);this.groupsAndButtons.push(u),n===80?n=0:n+=40})}showMenu(){this.scene.launch(nt.Menu);const e=this.scene.get(nt.Menu);e.openedFromEditor=!0,this.scene.get(nt.Game).scene.pause(),this.scene.pause()}handleTap(e,r){if(!(!this.activeItem&&!this.eraseActive&&this.levelingMode===!1))if(this.levelingMode){const i=e.getCell(r);this.levelingMode==="raise"?i.raise():i.resetRaise()}else if(this.eraseActive)e.tileXYToChessArray(r.x,r.y).forEach(n=>e.removeChess(n,null,null,null,!0)),e.getCell(r).clear();else{const i=e.tileXYToChessArray(r.x,r.y),n=i.find(v=>v instanceof At),o=i.find(v=>v instanceof ge),a=i.find(v=>v instanceof Yt),h=i.find(v=>v instanceof vi),u=i.find(v=>v instanceof Jt);u&&e.removeChess(u,null,null,null,!0),(this.activeItem===Jt&&n||a||o)&&(n==null||n.destroy(),a==null||a.destroy(),o==null||o.destroy());const l=i.find(v=>v instanceof ss||v instanceof vi);this.activeItem===At&&l&&e.removeChess(l,null,null,null,!0),(this.activeItem===ss||this.activeItem===vi)&&n&&e.removeChess(n,null,null,null,!0),(this.activeItem.prototype instanceof ge||this.activeItem.prototype instanceof Yt)&&(e.removeChess(a||o,null,null,null,!0),h==null||h.destroy());const f=e.getPlayerPieces().find(v=>v instanceof Gt);this.activeItem===Gt&&f&&e.removeChess(f,null,null,null,!0);const c=e.getHomebase();this.activeItem===ss&&c&&e.removeChess(c,null,null,null,!0);const d=e.getHive();this.activeItem===Br&&d&&e.removeChess(d,null,null,null,!0),new this.activeItem(e,r)}}repositionSpawnButtonsAndText(e){this.groupsAndButtons.forEach(r=>r.setX(r.x+e))}getImageKey(e){if(zu(e))return"tiles";if(e===At)return"controlled_tile"}highlight(e){var r,i;if(!((i=(r=window.process)==null?void 0:r.env)!=null&&i.isTest)){this.activeButton&&this.activeButton.removePostPipeline(Gn),this.activeButton=e,e.setPostPipeline(Gn);try{e.getPostPipeline(Gn).setThickness(3).setOutlineColor(Jg)}catch{}}}}class ri{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.sys.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,e){ri.prototype[t]=e}}var bf={},L5={get exports(){return bf},set exports(s){bf=s}};(function(s){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function i(h,u,l){this.fn=h,this.context=u,this.once=l||!1}function n(h,u,l,f,c){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new i(l,f||h,c),v=e?e+u:u;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],d]:h._events[v].push(d):(h._events[v]=d,h._eventsCount++),h}function o(h,u){--h._eventsCount===0?h._events=new r:delete h._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,f;if(this._eventsCount===0)return u;for(f in l=this._events)t.call(l,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=e?e+u:u,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,v=new Array(d);c<d;c++)v[c]=f[c].fn;return v},a.prototype.listenerCount=function(u){var l=e?e+u:u,f=this._events[l];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,l,f,c,d,v){var p=e?e+u:u;if(!this._events[p])return!1;var g=this._events[p],m=arguments.length,x,y;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,f),!0;case 4:return g.fn.call(g.context,l,f,c),!0;case 5:return g.fn.call(g.context,l,f,c,d),!0;case 6:return g.fn.call(g.context,l,f,c,d,v),!0}for(y=1,x=new Array(m-1);y<m;y++)x[y-1]=arguments[y];g.fn.apply(g.context,x)}else{var T=g.length,C;for(y=0;y<T;y++)switch(g[y].once&&this.removeListener(u,g[y].fn,void 0,!0),m){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,l);break;case 3:g[y].fn.call(g[y].context,l,f);break;case 4:g[y].fn.call(g[y].context,l,f,c);break;default:if(!x)for(C=1,x=new Array(m-1);C<m;C++)x[C-1]=arguments[C];g[y].fn.apply(g[y].context,x)}}return!0},a.prototype.on=function(u,l,f){return n(this,u,l,f,!1)},a.prototype.once=function(u,l,f){return n(this,u,l,f,!0)},a.prototype.removeListener=function(u,l,f,c){var d=e?e+u:u;if(!this._events[d])return this;if(!l)return o(this,d),this;var v=this._events[d];if(v.fn)v.fn===l&&(!c||v.once)&&(!f||v.context===f)&&o(this,d);else{for(var p=0,g=[],m=v.length;p<m;p++)(v[p].fn!==l||c&&!v[p].once||f&&v[p].context!==f)&&g.push(v[p]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=e?e+u:u,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,s.exports=a})(L5);class b5 extends bf{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}const w5=Ir.uidKey;var iT=function(s){var t;return Hr(s)?t=s:t=_n(s)[w5],t},F5=function(s){if(this.infinityMode)return this;if(this.width===void 0||this.width<=s)return this.width=s,this;var t,e,r,i;for(t=s;t<this.width;t++)for(e=0;e<this.height;e++){i=this.boardData.getUID(t,e);for(r in i)this.RemoveChess(!1,t,e,r)}return this.width=s,this},D5=function(s){if(this.infinityMode)return this;if(this.height===void 0||this.height<=s)return this.height=s,this;var t,e,r,i;for(e=s;e<this.height;e++)for(t=0;t<this.width;t++){i=this.boardData.getUID(t,e);for(r in i)this.RemoveChess(!1,t,e,r)}return this.height=s,this},I5=function(s,t,e,r){return r===void 0&&(r=","),`${s}${r}${t}${r}${e}`},wf=function(s,t,e){return e===void 0&&(e=","),`${s}${e}${t}`},B5=function(s,t,e){t===void 0?t={}:t===!0&&(t=G5),e===void 0&&(e=",");var r=s.split(e);return t.x=r[0],t.y=r[1],t.z=r[2],t},G5={},Y5=function(s,t){return this.tileXYToWorldXY(s,t,!0).x},N5=function(s,t){return this.tileXYToWorldXY(s,t,!0).y},X5=function(s,t,e){return this.grid.getWorldXY(s,t,e)},z5=function(s,t){t===void 0&&(t=[]);for(var e,r=0,i=s.length;r<i;r++)e=s[r],t.push(this.tileXYToWorldXY(e.x,e.y));return t},V5=function(s,t){return this.worldXYToTileXY(s,t,!0).x},U5=function(s,t){return this.worldXYToTileXY(s,t,!0).y},W5=function(s,t,e){return this.grid.getTileXY(s,t,e)},H5=function(s,t,e){var r=this.worldXYToTileXY(s,t,!0);return this.tileXYToChessArray(r.x,r.y,e)},k5=function(s,t,e){var r=this.worldXYToTileXY(s,t,!0);if(e!==void 0)return this.tileXYZToChess(r.x,r.y,e);var i=this.boardData.getUID(r.x,r.y);if(i==null)return null;for(var e in i)return this.uidToChess(i[e])},$5=function(s,t,e){return e===void 0?e={}:e===!0&&(e=Z5),this.worldXYToTileXY(s,t,e),this.tileXYToWorldXY(e.x,e.y,e),e},Z5={};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Tl=function(s,t,e,r){return Math.atan2(r-t,e-s)},K5=function(s,t){s=this.chessToTileXYZ(s),t=this.chessToTileXYZ(t);var e=this.tileXYToWorldXY(s.x,s.y,!0),r=e.x,i=e.y;e=this.tileXYToWorldXY(t.x,t.y,!0);var n=e.x,o=e.y;return Tl(r,i,n,o)};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var sT=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var J5=function(s,t,e){return e===void 0&&(e=1e-4),Math.abs(s-t)<e},Q5=function(s,t,e,r){var i=this.chessToTileXYZ(s),n=this.chessToTileXYZ(t),o=this.angleBetween(i,n);o=sT(o);var a=Math.abs(o-e);a=Math.min(a,j5-a);var h=r/2;return J5(a,h)||a<h};const j5=Math.PI*2;var q5=function(s,t){s===void 0&&(s=_5);var e=this.wrapMode,r=this.infinityMode;this.wrapMode=!1,this.infinityMode=!0;var i=this.getNeighborTileXY(s,t,!0);return this.wrapMode=e,this.infinityMode=r,this.angleBetween(s,i)},_5={x:0,y:0};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var tU=180/Math.PI,$h=function(s){return s*tU};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var eU=function(s,t){var e=t-s;if(e===0)return 0;var r=Math.floor((e- -180)/360);return e-r*360},iU=function(s,t){t=$h(t);for(var e=this.grid.allDirections,r,i,n=1/0,o=void 0,a=0,h=e.length;a<h;a++)r=$h(this.angleToward(s,e[a])),i=Math.abs(eU(t,r)),i<n&&(n=i,o=a);return o},sU=function(s,t,e){if(this.infinityMode&&e===void 0)return!0;var r=this.worldXYToTileXY(s,t,!0);return this.contains(r.x,r.y,e)},nU=function(s,t,e){if(s===void 0)for(var r=this.getAllChess(),i=0,n=r.length;i<n;i++)this.gridAlign(r[i]);else{if(Hr(s)&&(s=this.uidToChess(s)),t===void 0){var o=this.chessToTileXYZ(s);t=o.x,e=o.y}this.tileXYToWorldXY(t,e,s)}return this},mg=function(s,t,e){if(s&&typeof s!="number"){e=t;var r=this.chessToTileXYZ(s);s=r.x,t=r.y}return this.grid.getGridPoints(s,t,e)},rU=function(s,t,e){if(s&&typeof s!="number"){e=t;var r=this.chessToTileXYZ(s);s=r.x,t=r.y}return this.grid.getBounds(s,t,e)};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function aU(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}function oU(s,t,e){var r=e?s[t]:Object.getOwnPropertyDescriptor(s,t);return!e&&r.value&&typeof r.value=="object"&&(r=r.value),r&&aU(r)?(typeof r.enumerable>"u"&&(r.enumerable=!0),typeof r.configurable>"u"&&(r.configurable=!0),r):!1}function hU(s,t){var e=Object.getOwnPropertyDescriptor(s,t);return e?(e.value&&typeof e.value=="object"&&(e=e.value),e.configurable===!1):!1}function $d(s,t,e,r){for(var i in t)if(t.hasOwnProperty(i)){var n=oU(t,i,e);if(n!==!1){var o=r||s;if(hU(o.prototype,i)){if(cn.ignoreFinals)continue;throw new Error("cannot override final property '"+i+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(s.prototype,i,n)}else s.prototype[i]=t[i]}}function nT(s,t){if(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)$d(s,t[e].prototype||t[e])}}function cn(s){s||(s={});var t,e;if(s.initialize){if(typeof s.initialize!="function")throw new Error("initialize must be a function");t=s.initialize,delete s.initialize}else if(s.Extends){var r=s.Extends;t=function(){r.apply(this,arguments)}}else t=function(){};s.Extends?(t.prototype=Object.create(s.Extends.prototype),t.prototype.constructor=t,e=s.Extends,delete s.Extends):t.prototype.constructor=t;var i=null;return s.Mixins&&(i=s.Mixins,delete s.Mixins),nT(t,i),$d(t,s,!0,e),t}cn.extend=$d;cn.mixin=nT;cn.ignoreFinals=!1;/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var lU=function(s,t,e){return s.width<=0||s.height<=0?!1:s.x<=t&&s.x+s.width>=t&&s.y<=e&&s.y+s.height>=e};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var rT=function(s){return 2*(s.width+s.height)};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var mo=new cn({initialize:function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e},setTo:function(s,t){return s===void 0&&(s=0),t===void 0&&(t=s),this.x=s,this.y=t,this}});/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var aT=function(s,t,e){if(e===void 0&&(e=new mo),t<=0||t>=1)return e.x=s.x,e.y=s.y,e;var r=rT(s)*t;return t>.5?(r-=s.width+s.height,r<=s.width?(e.x=s.right-r,e.y=s.bottom):(e.x=s.x,e.y=s.bottom-(r-s.width))):r<=s.width?(e.x=s.x+r,e.y=s.y):(e.x=s.right,e.y=s.y+(r-s.width)),e};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var uU=function(s,t,e,r){r===void 0&&(r=[]),t||(t=rT(s)/e);for(var i=0;i<t;i++){var n=i/t;r.push(aT(s,n))}return r};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var fU=function(s,t,e){return e===void 0&&(e=new mo),e.x=s.x1+(s.x2-s.x1)*t,e.y=s.y1+(s.y2-s.y1)*t,e};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var dU=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var cU=function(s,t,e,r){r===void 0&&(r=[]),t||(t=dU(s)/e);for(var i=s.x1,n=s.y1,o=s.x2,a=s.y2,h=0;h<t;h++){var u=h/t,l=i+(o-i)*u,f=n+(a-n)*u;r.push(new mo(l,f))}return r};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var vU=function(s,t){t===void 0&&(t=new mo);var e=Math.random();return t.x=s.x1+e*(s.x2-s.x1),t.y=s.y1+e*(s.y2-s.y1),t};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var we=new cn({initialize:function(t,e){this.x=0,this.y=0,typeof t=="object"?(this.x=t.x||0,this.y=t.y||0):(e===void 0&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new we(this.x,this.y)},copy:function(s){return this.x=s.x||0,this.y=s.y||0,this},setFromObject:function(s){return this.x=s.x||0,this.y=s.y||0,this},set:function(s,t){return t===void 0&&(t=s),this.x=s,this.y=t,this},setTo:function(s,t){return this.set(s,t)},setToPolar:function(s,t){return t==null&&(t=1),this.x=Math.cos(s)*t,this.y=Math.sin(s)*t,this},equals:function(s){return this.x===s.x&&this.y===s.y},angle:function(){var s=Math.atan2(this.y,this.x);return s<0&&(s+=2*Math.PI),s},add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.x-=s.x,this.y-=s.y,this},multiply:function(s){return this.x*=s.x,this.y*=s.y,this},scale:function(s){return isFinite(s)?(this.x*=s,this.y*=s):(this.x=0,this.y=0),this},divide:function(s){return this.x/=s.x,this.y/=s.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(s){var t=s.x-this.x,e=s.y-this.y;return Math.sqrt(t*t+e*e)},distanceSq:function(s){var t=s.x-this.x,e=s.y-this.y;return t*t+e*e},length:function(){var s=this.x,t=this.y;return Math.sqrt(s*s+t*t)},lengthSq:function(){var s=this.x,t=this.y;return s*s+t*t},normalize:function(){var s=this.x,t=this.y,e=s*s+t*t;return e>0&&(e=1/Math.sqrt(e),this.x=s*e,this.y=t*e),this},normalizeRightHand:function(){var s=this.x;return this.x=this.y*-1,this.y=s,this},dot:function(s){return this.x*s.x+this.y*s.y},cross:function(s){return this.x*s.y-this.y*s.x},lerp:function(s,t){t===void 0&&(t=0);var e=this.x,r=this.y;return this.x=e+t*(s.x-e),this.y=r+t*(s.y-r),this},transformMat3:function(s){var t=this.x,e=this.y,r=s.val;return this.x=r[0]*t+r[3]*e+r[6],this.y=r[1]*t+r[4]*e+r[7],this},transformMat4:function(s){var t=this.x,e=this.y,r=s.val;return this.x=r[0]*t+r[4]*e+r[12],this.y=r[1]*t+r[5]*e+r[13],this},reset:function(){return this.x=0,this.y=0,this}});we.ZERO=new we;we.RIGHT=new we(1,0);we.LEFT=new we(-1,0);we.UP=new we(0,-1);we.DOWN=new we(0,1);we.ONE=new we(1,1);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var eh=new cn({initialize:function(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x1=t,this.y1=e,this.x2=r,this.y2=i},getPoint:function(s,t){return fU(this,s,t)},getPoints:function(s,t,e){return cU(this,s,t,e)},getRandomPoint:function(s){return vU(this,s)},setTo:function(s,t,e,r){return s===void 0&&(s=0),t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),this.x1=s,this.y1=t,this.x2=e,this.y2=r,this},getPointA:function(s){return s===void 0&&(s=new we),s.set(this.x1,this.y1),s},getPointB:function(s){return s===void 0&&(s=new we),s.set(this.x2,this.y2),s},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(s){this.x1<=this.x2?this.x1=s:this.x2=s}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(s){this.x1>this.x2?this.x1=s:this.x2=s}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(s){this.y1<=this.y2?this.y1=s:this.y2=s}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(s){this.y1>this.y2?this.y1=s:this.y2=s}}});/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var pU=function(s,t){return t===void 0&&(t=new mo),t.x=s.x+Math.random()*s.width,t.y=s.y+Math.random()*s.height,t};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var Ds=new cn({initialize:function(t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=t,this.y=e,this.width=r,this.height=i},contains:function(s,t){return lU(this,s,t)},getPoint:function(s,t){return aT(this,s,t)},getPoints:function(s,t,e){return uU(this,s,t,e)},getRandomPoint:function(s){return pU(this,s)},setTo:function(s,t,e,r){return this.x=s,this.y=t,this.width=e,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(s,t){return t===void 0&&(t=s),this.x=s,this.y=t,this},setSize:function(s,t){return t===void 0&&(t=s),this.width=s,this.height=t,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(s){return s===void 0&&(s=new eh),s.setTo(this.x,this.y,this.right,this.y),s},getLineB:function(s){return s===void 0&&(s=new eh),s.setTo(this.right,this.y,this.right,this.bottom),s},getLineC:function(s){return s===void 0&&(s=new eh),s.setTo(this.right,this.bottom,this.x,this.bottom),s},getLineD:function(s){return s===void 0&&(s=new eh),s.setTo(this.x,this.bottom,this.x,this.y),s},left:{get:function(){return this.x},set:function(s){s>=this.right?this.width=0:this.width=this.right-s,this.x=s}},right:{get:function(){return this.x+this.width},set:function(s){s<=this.x?this.width=0:this.width=s-this.x}},top:{get:function(){return this.y},set:function(s){s>=this.bottom?this.height=0:this.height=this.bottom-s,this.y=s}},bottom:{get:function(){return this.y+this.height},set:function(s){s<=this.y?this.height=0:this.height=s-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(s){this.x=s-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(s){this.y=s-this.height/2}}});/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var gU=function(s,t,e){e===void 0&&(e=new Ds);var r=Math.min(s.x,t.x),i=Math.min(s.y,t.y),n=Math.max(s.right,t.right)-r,o=Math.max(s.bottom,t.bottom)-i;return e.setTo(r,i,n,o)},mU=function(s){s===void 0?s=new Ds:s===!0&&(s=xU);var t=!0;return this.forEachTileXY(function(e,r){var i=r.getGridBounds(e.x,e.y,!0);t?(s.setTo(i.x,i.y,i.width,i.height),t=!1):s=gU(s,i,s)}),s},xU=new Ds;/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var yU=function(s,t,e,r){var i=s-e,n=t-r;return Math.sqrt(i*i+n*n)},Hn=function(s,t){return s&&t&&s.x===t.x&&s.y===t.y},TU=function(s,t,e,r,i){if(typeof s!="number"){var n=s;i=t,s=n.x1,t=n.y1,e=n.x2,r=n.y2}i===void 0&&(i=[]);for(var o=yU(s,t,e,r),a=Math.min(this.grid.cellWidth,this.grid.cellHeight),h=Math.ceil(o/(a/4)),u,l,f,c,d,v=0;v<=h;v++)u=v/h,l=zn(s,e,u),f=zn(t,r,u),d=this.worldXYToTileXY(l,f),this.contains(d.x,d.y)&&(c&&Hn(c,d)||(i.push(d),c=d));return i},CU=function(s,t,e){return this.shapeToTileXYArray(s,t,e)},SU=function(s,t,e){return this.shapeToTileXYArray(s,t,e)};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var EU=function(s,t){t===void 0&&(t=new Ds);for(var e=1/0,r=1/0,i=-e,n=-r,o,a=0;a<s.points.length;a++)o=s.points[a],e=Math.min(e,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x),n=Math.max(n,o.y);return t.x=e,t.y=r,t.width=i-e,t.height=n-r,t},PU=function(s,t,e){Array.isArray(t)&&(e=t,t=void 0),Vu=EU(s,Vu);var r={testMode:t,searchRectangle:Vu};return this.shapeToTileXYArray(s,r,e)},Vu,MU=function(s,t,e){return this.shapeToTileXYArray(s,t,e)},AU=function(s,t,e){return this.shapeToTileXYArray(s,t,e)},RU=function(s,t,e){return typeof t=="number"&&(t={testMode:t}),Array.isArray(t)&&(e=t,t=void 0),e===void 0&&(e=[]),this.forEachTileXYInShape(s,function(r){e.push({x:r.x,y:r.y})},void 0,t),e},OU=function(s,t,e,r){var i=K(r,"testMode",0),n=K(r,"searchRectangle",s);K(r,"order",0),e&&(t=t.bind(e)),ih=this.worldXYToTileXY(n.left,n.top,ih),sh=this.worldXYToTileXY(n.right,n.bottom,sh);var o=ih.x-1,a=ih.y-1,h=sh.x+1,u=sh.y+1;return this.forEachTileXY(function(l,f){if(LU(f,s,l.x,l.y,i))return t(l,f)},this,{left:o,right:h,top:a,bottom:u}),this},LU=function(s,t,e,r,i){var n=s.tileXYToWorldXY(e,r,!0);if(t.contains(n.x,n.y))return!0;switch(i){case 1:var o=s.getGridBounds(e,r,!0);return bU(t,o);case 2:var a=s.getGridPoints(e,r,!0);return wU(t,a);default:return!1}},bU=function(s,t){var e=t.top,r=t.bottom,i=t.left,n=t.right;return!!(s.contains(i,e)||s.contains(i,r)||s.contains(n,e)||s.contains(n,r))},wU=function(s,t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(s.contains(i.x,i.y))return!0}return!1},ih,sh,FU=function(s){return s==null?null:this.boardData.exists(s)?Ir.get(s).parent:null},xg=function(s,t,e,r,i){if(!this.contains(t,e))return this;i===void 0&&(i=!0);var n=this.chessToTileXYZ(s);if(r===void 0&&(n?r=n.z:r=0),n&&n.x===t&&n.y===e&&n.z===r)return this;var o=this.tileXYZToChess(t,e,r);return o&&this.emit("kickout",s,o,n),this.removeChess(s),o&&this.removeChess(o,t,e,r),this.boardData.addUID(this.getChessUID(s),t,e,r),this.isBoard&&this.getChessData(s).setBoard(this),i&&this.gridAlign(s,t,e),this},DU=function(s,t,e){e===void 0&&(e=!1);var r=this.chessToTileXYZ(s);return r&&this.moveChess(s,r.x,r.y,t,e),this},IU=function(s,t,e,r,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=!1),s){var o=this.chessToTileXYZ(s);if(o)t=o.x,e=o.y,r=o.z;else return this}else if(s=this.tileXYZToChess(t,e,r),!s)return this;return n||this.boardData.removeUID(t,e,r),this.isBoard&&this.getChessData(s).setBoard(null),i&&s.destroy&&s.destroy(),this},BU=function(s,t){for(var e=this.getAllChess(),r=0,i=e.length;r<i;r++)this.removeChess(e[r],void 0,void 0,void 0,s,t);return this},GU=function(s,t,e){e===void 0&&(e=!0);var r=this.chessToTileXYZ(s),i=this.chessToTileXYZ(t);return r==null||i==null?this:(this.removeChess(s),this.removeChess(t),this.addChess(s,i.x,i.y,i.z,e),this.addChess(t,r.x,r.y,r.z,e),this)},YU=function(s){s===void 0&&(s=[]);var t=this.boardData.UIDToXYZ;for(var e in t)s.push(this.uidToChess(e));return s},NU=function(s,t,e){var r;return this.infinityMode?r=!0:r=s>=0&&s<this.width&&t>=0&&t<this.height,r&&e!==void 0&&(r=this.boardData.contains(s,t,e)),r};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var nh=function(s,t,e){return Math.max(t,Math.min(e,s))},XU=function(s,t,e){typeof e=="number"&&(e={order:e});var r=this.width-1,i=this.height-1,n=K(e,"order",0),o=K(e,"left",0),a=K(e,"right",r),h=K(e,"top",0),u=K(e,"bottom",i);switch(this.infinityMode||(o=nh(o,0,r),h=nh(h,0,i),a=nh(a,0,r),u=nh(u,0,i)),n){case 0:for(var c,l=h;l<=u;l++)for(var f=o;f<=a&&(Te.x=f,Te.y=l,t?c=s.call(t,Te,this):c=s(Te,this),!c);f++);break;case 1:for(var c,l=h;l<=u;l++)for(var f=a;f>=o&&(Te.x=f,Te.y=l,t?c=s.call(t,Te,this):c=s(Te,this),!c);f--);break;case 2:for(var c,f=o;f<=a;f++)for(var l=h;l<=u&&(Te.x=f,Te.y=l,t?c=s.call(t,Te,this):c=s(Te,this),!c);l++);break;case 3:for(var c,f=o;f<=a;f++)for(var l=u;l>=h&&(Te.x=f,Te.y=l,t?c=s.call(t,Te,this):c=s(Te,this),!c);l--);}return this},Te={x:0,y:0};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Ka=function(s,t,e){var r=e-t;return t+((s-t)%r+r)%r},zU=function(s,t,e){return e===void 0?e={}:e===!0&&(e=VU),this.wrapMode?s=Ka(s,0,this.width):!this.infinityMode&&(s<0||s>=this.width)&&(s=null),this.wrapMode?t=Ka(t,0,this.height):!this.infinityMode&&(t<0||t>=this.height)&&(t=null),e.x=s,e.y=t,e},VU={},UU=function(s,t,e){var r=this.boardData.getUID(s,t,e);return this.uidToChess(r)},WU=function(s,t,e){e===void 0&&(e=[]);var r=this.boardData.getUID(s,t);if(r==null)return e;for(var i in r)e.push(this.uidToChess(r[i]));return e},HU=function(s,t){t===void 0&&(t=[]);var e=this.boardData.UIDToXYZ,r;for(var i in e)r=e[i],r.z===s&&t.push(this.uidToChess(i));return t},kU=function(s,t,e){Array.isArray(t)&&(e=t,t=void 0),e===void 0&&(e=[]);for(var r=t!=null,i,n=0,o=s.length;n<o;n++)i=s[n],r?e.push(this.tileXYZToChess(i.x,i.y,t)):this.tileXYToChessArray(i.x,i.y,e);return e},$U=function(s){return Hr(s)?!1:s&&!!s.rexChess},ZU=function(s){return s&&(hs(s)||s.isTileXYZ)},KU=function(s){if(!s)return null;if(Hr(s)||$U(s)){var t=iT(s);return this.boardData.getXYZ(t)}else return ZU(s)?s:null},JU=function(s,t,e){if(s&&typeof s!="number"){e=t;var r=s,i=this.chessToTileXYZ(r);s=i.x,t=i.y}return this.grid.getOppositeDirection(s,t,e)},QU=function(s,t,e){return s=this.chessToTileXYZ(s),t=this.chessToTileXYZ(t),this.grid.getDistance(s,t,e)},jU=function(s,t,e){e===void 0&&(e=!0);var r=this.chessToTileXYZ(s),i=this.chessToTileXYZ(t);return this.grid.directionBetween(r,i,e)},qU=function(s,t,e,r){var i=this.chessToTileXYZ(s),n=this.chessToTileXYZ(t),o=this.grid.directions;this.grid.setDirectionMode(this.sides);var a=this.grid.directionBetween(i,n,!1);this.grid.setDirectionMode(o);var h=Math.abs(a-e);return h=Math.min(h,this.grid.directions-h),h<=r/2},_U=function(s,t,e,r){return r===void 0?r={}:r===!0&&(r=t4),t===0&&e===0?(r.x=s.x,r.y=s.y):this.grid.offset(s,t,e,r),r},t4={},e4=function(s,t,e,r){return r===void 0?r={}:r===!0&&(r=i4),e!==void 0?this.offset(s,-e.x,-e.y,r):(r.x=s.x,r.y=s.y),this.grid.mirror(r,t,r),e!==void 0&&this.offset(r,e.x,e.y,r),r},i4={},s4=function(s,t,e,r){return r===void 0?r={}:r===!0&&(r=n4),e!==void 0?this.offset(s,-e.x,-e.y,r):(r.x=s.x,r.y=s.y),this.grid.rotate(r,t,r),e!==void 0&&this.offset(r,e.x,e.y,r),r},n4={},r4=function(s){var t=1/0,e=1/0,r;for(var i in s)r=s[i],t=Math.min(t,r.x),e=Math.min(e,r.y);if(t!==0||e!==0)for(var i in s)r=s[i],this.offset(r,-t,-e,r);var n=-1/0,o=-1/0;for(var i in s)r=s[i],n=Math.max(n,r.x),o=Math.max(o,r.y);return this.setBoardWidth(n+1),this.setBoardHeight(o+1),s},a4=function(s,t,e){return this.contains(s,t)&&!this.contains(s,t,e)},o4=function(s,t){s===void 0&&(s=0),t===void 0&&(t=[]);for(var e=0;e<this.height;e++)for(var r=0;r<this.width;r++)this.isEmptyTileXYZ(r,e,s)&&t.push({x:r,y:e});return t};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Ff=function(s,t){return Math.floor(Math.random()*(t-s+1)+s)};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Df=function(s,t,e){t===void 0&&(t=0),e===void 0&&(e=s.length);var r=t+Math.floor(Math.random()*e);return s[r]===void 0?null:s[r]},h4=function(s,t){s===void 0&&(s=0),t===void 0?t={}:t===!0&&(t=l4);for(var e,r,i=!0,n=20;i&&n>0;)e=Ff(0,this.width-1),r=Ff(0,this.height-1),i=this.tileXYZToChess(e,r,s)!==null,n--;if(i){if(ca=this.getEmptyTileXYArray(s,ca),ca.length===0)return null;var o=Df(ca);return t.x=o.x,t.y=o.y,ca.length=0,t}else return t.x=e,t.y=r,t},ca=[],l4={},u4=function(s,t,e,r){t===void 0&&(t=1),e===void 0&&(e=0),r===void 0&&(r=[]),s=this.chessToTileXYZ(s),this.grid.ringToTileXYArray(s,t,rh);for(var i,n=0,o=rh.length;n<o;n++)i=rh[n],this.isEmptyTileXYZ(i.x,i.y,e)&&r.push(i);return rh.length=0,r},rh=[];/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Cl=function(s){for(var t=s.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),r=s[t];s[t]=s[e],s[e]=r}return s},f4=function(s,t,e,r){t===void 0&&(t=1),e===void 0&&(e=0),r===void 0?r={}:r===!0&&(r=d4),s=this.chessToTileXYZ(s),this.grid.ringToTileXYArray(s,t,xr),Cl(xr);for(var i,n=0,o=xr.length;n<o;n++)if(i=xr[n],this.isEmptyTileXYZ(i.x,i.y,e))return r.x=i.x,r.y=i.y,xr.length=0,r;return xr.length=0,null},xr=[],d4={},c4=function(s,t,e,r){var i=this.chessToTileXYZ(s);if(!i)return null;typeof t=="string"&&(t.indexOf(",")===-1?t=parseInt(t):t=t.split(","));var n=typeof t=="number",o=typeof e=="number";if(n&&o)r=this.grid.getTileXYAtDirection(i.x,i.y,t,e,r),this.getWrapTileXY(r.x,r.y,r),r.x==null||r.y==null?r=null:r.direction=t;else{r===void 0&&(r=[]),t==null&&(t=this.grid.allDirections);var a;if(n)if(hs(e)){var h=K(e,"end",1),u=K(e,"start",h>0?1:-1),l=K(e,"step",h>=u?1:-1);if(u===h)a=this.getTileXYAtDirection(i,t,h),a!==null&&r.push(a);else if(u<h)for(var f=u;f<=h;f+=l)a=this.getTileXYAtDirection(i,t,f),a!==null&&r.push(a);else for(var f=u;f>=h;f+=l)a=this.getTileXYAtDirection(i,t,f),a!==null&&r.push(a)}else for(var f=0,c=e.length;f<c;f++)a=this.getTileXYAtDirection(i,t,e[f]),a!==null&&r.push(a);else for(var f=0,c=t.length;f<c;f++)o?(a=this.getTileXYAtDirection(i,t[f],e),a!==null&&r.push(a)):this.getTileXYAtDirection(i,t[f],e,r)}return r},v4=function(s,t,e){return this.getTileXYAtDirection(s,t,1,e)},p4=function(s,t,e){var r=this.angleSnapToDirection(s,t);return this.getTileXYAtDirection(s,r,1,e)},g4=function(i,t,e,r){var i=this.chessToTileXYZ(i);if(i===null)return null;e==null&&(e=i.z);var n=typeof t;if(n==="number"||n==="string"&&t.indexOf(",")===-1){var o=t,a=this.getNeighborTileXY(i,o,!0);return a===null?null:this.tileXYZToChess(a.x,a.y,e)}else{r===void 0&&(r=[]),this.getNeighborTileXY(i,t,va);for(var h,u=0,l=va.length;u<l;u++)h=this.tileXYZToChess(va[u].x,va[u].y,e),h!=null&&r.push(h);return va.length=0,r}},va=[],m4=function(s,t){if(s===null||t===null||(s=this.chessToTileXYZ(s),t=this.chessToTileXYZ(t),Hn(s,t)))return null;var e=this.grid.getNeighborTileDirection(s,t);if(this.wrapMode&&e===null){pa=this.getNeighborTileXY(s,null,pa);for(var r=0,i=pa.length;r<i;r++)if(Hn(t,pa[r])){e=r;break}pa.length=0}return e},pa=[],x4=function(s,t){var e=this.chessToTileXYZ(s),r=this.chessToTileXYZ(t);return this.getNeighborTileDirection(e,r)},y4=function(s,t){return this.getNeighborChessDirection(s,t)!==null},T4=function(s,t,e,r){typeof t!="number"&&(r=e,e=t,t=1);var i=this.getTileXYAtDirection(s,void 0,t);return i.map(e,r)},C4=function(s,t,e){e===void 0&&(e=[]),s=this.chessToTileXYZ(s),this.grid.ringToTileXYArray(s,t,ah);for(var r,i=0,n=ah.length;i<n;i++)r=ah[i],this.contains(r.x,r.y)&&e.push(r);return ah.length=0,e},ah=[],S4=function(s,t,e,r){Array.isArray(e)&&(r=e,e=void 0),r===void 0&&(r=[]),s=this.chessToTileXYZ(s),this.grid.ringToTileXYArray(s,t,oh);for(var i,n,o=0,a=oh.length;o<a;o++)i=oh[o],n=this.tileXYZToChess(i.x,i.y,e),n&&r.push(n);return oh.length=0,r},oh=[],E4=function(s,t,e,r){se(e)&&(r=e,e=void 0),e===void 0&&(e=!0),r===void 0&&(r=[]),s=this.chessToTileXYZ(s);for(var i,n=0;n<=t;n++)i=e?n:t-n,this.ringToTileXYArray(s,i,r);return r},P4=function(s,t,e,r,i){se(r)&&(i=r,r=void 0),r===void 0&&(r=!0),i===void 0&&(i=[]),s=this.chessToTileXYZ(s);for(var n,o=0;o<=t;o++)n=r?o:t-o,this.ringToChessArray(s,n,e,i);return i},M4=function(s,t,e){if(s&&typeof s!="number"){var r=this.chessToTileXYZ(s);s=r.x,t=r.y,e=r.z}var i,n;if(e===void 0){i=this.tileXYToChessArray(s,t,Uu);for(var o=0,a=i.length;o<a;o++)if(n=this.getChessData(i[o]).blocker,n===!0)return Uu.length=0,!0;return Uu.length=0,!1}else{var i=this.tileXYZToChess(s,t,e);return i===null?!1:(n=this.getChessData(i).blocker,n===!0)}},Uu=[],A4=function(s,t,e,r){var i;if(e===void 0){i=this.tileXYToChessArray(s,t,Wu);for(var n=0,o=i.length;n<o;n++)if(yg(this.getChessData(i[n]).blocker))return Wu.length=0,!0;return Wu.length=0,!1}else{var i=this.tileXYZToChess(s,t,e);return i===null?!1:yg(this.getChessData(i).blocker)}},yg=function(s,t){return s===!1||s===!0?s:s[t]===!0},Wu=[],oT=function(s){if(s)return s.rexChess?s.rexChess.board:s.mainBoard?s.mainBoard:void 0};const R4={getChessData:_n,getChessUID:iT,setBoardWidth:F5,setBoardHeight:D5,tileXYZToKey:I5,tileXYToKey:wf,keyToTileXYZ:B5,tileXYToWorldX:Y5,tileXYToWorldY:N5,tileXYToWorldXY:X5,tileXYArrayToWorldXYArray:z5,worldXYToTileX:V5,worldXYToTileY:U5,worldXYToTileXY:W5,worldXYToChessArray:H5,worldXYToChess:k5,worldXYSnapToGrid:$5,angleBetween:K5,isAngleInCone:Q5,angleToward:q5,angleSnapToDirection:iU,isOverlappingPoint:sU,gridAlign:nU,getGridPoints:mg,getGridBounds:rU,getBoardBounds:mU,lineToTileXYArray:TU,circleToTileXYArray:CU,ellipseToTileXYArray:SU,polygonToTileXYArray:PU,rectangleToTileXYArray:MU,triangleToTileXYArray:AU,shapeToTileXYArray:RU,forEachTileXYInShape:OU,uidToChess:FU,addChess:xg,removeChess:IU,removeAllChess:BU,swapChess:GU,moveChess:xg,setChessTileZ:DU,getAllChess:YU,contains:NU,forEachTileXY:XU,getWrapTileXY:zU,tileXYZToChess:UU,tileXYToChessArray:WU,tileZToChessArray:HU,tileXYArrayToChessArray:kU,chessToTileXYZ:KU,offset:_U,mirror:e4,rotate:s4,getOppositeDirection:JU,getDistance:QU,directionBetween:jU,isDirectionInCone:qU,fit:r4,isEmptyTileXYZ:a4,getEmptyTileXYArray:o4,getRandomEmptyTileXY:h4,getEmptyTileXYArrayInRange:u4,getRandomEmptyTileXYInRange:f4,getTileXYAtDirection:c4,getNeighborTileXY:v4,getNeighborTileXYAtAngle:p4,getNeighborChess:g4,getNeighborTileDirection:m4,getNeighborChessDirection:x4,areNeighbors:y4,mapNeighbors:T4,ringToTileXYArray:C4,ringToChessArray:S4,filledRingToTileXYArray:E4,filledRingToChessArray:P4,hasBlocker:M4,hasEdgeBlocker:A4,getGridPoints:mg,chessToBoard:oT};class O4{constructor(){this.XYZToUID={},this.UIDToXYZ={},this.clear()}shutdown(t){return this.XYZToUID=void 0,this.UIDToXYZ=void 0,this}destroy(t){return this.shutdown(t),this}clear(){return ui(this.UIDToXYZ),ui(this.XYZToUID),this.chessCount=0,this.clearBounds(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}addUID(t,e,r,i){this.XYZToUID.hasOwnProperty(e)||(this.XYZToUID[e]={});var n=this.XYZToUID[e];n.hasOwnProperty(r)||(n[r]={});var o=n[r];return o[i]=t,this.UIDToXYZ[t]={x:e,y:r,z:i},this.chessCount++,this.clearBounds(),this}getUID(t,e,r){var i=this.XYZToUID[t];return i&&(i=i[e],i&&r!==void 0&&(i=i[r])),i}removeUID(t,e,r){if(!this.XYZToUID.hasOwnProperty(t))return this;var i=this.XYZToUID[t];if(!i.hasOwnProperty(e))return this;var n=i[e];if(!n.hasOwnProperty(r))return this;var o=n[r];return delete n[r],delete this.UIDToXYZ[o],Xa(n)&&delete i[e],Xa(i)&&delete this.XYZToUID[t],this.chessCount--,this.clearBounds(),this}exists(t){return this.UIDToXYZ.hasOwnProperty(t)}contains(t,e,r){return this.getUID(t,e,r)!=null}getXYZ(t){return this.exists(t)?this.UIDToXYZ[t]:null}get xMax(){if(this._xMax===void 0){this._xMax=-1/0;var t=this.UIDToXYZ,e;for(var r in t)e=t[r].x,this._xMax<e&&(this._xMax=e)}return this._xMax}get xMin(){if(this._xMin===void 0){this._xMin=1/0;var t=this.UIDToXYZ,e;for(var r in t)e=t[r].x,this._xMin>e&&(this._xMin=e)}return this._xMin}get yMax(){if(this._yMax===void 0){this._yMax=-1/0;var t=this.UIDToXYZ,e;for(var r in t)e=t[r].y,this._yMax<e&&(this._yMax=e)}return this._yMax}get yMin(){if(this._yMin===void 0){this._yMin=1/0;var t=this.UIDToXYZ,e;for(var r in t)e=t[r].y,this._yMin>e&&(this._yMin=e)}return this._yMin}}var L4=function(s,t,e){e===void 0?e={}:e===!0&&(e=b4);var r,i;switch(this.mode){case 0:r=s*this.width,i=t*this.height;break;case 1:r=(s-t)*this._halfWidth,i=(s+t)*this._halfHeight;break}return r+=this.x,i+=this.y,e.x=r,e.y=i,e},b4={},w4=function(s,t){return this.getWorldXY(s,t,!0).x},F4=function(s,t){return this.getWorldXY(s,t,!0).y},D4=function(s,t,e){e===void 0?e={}:e===!0&&(e=I4),s-=this.x,t-=this.y;var r=s/this.width,i=t/this.height;switch(this.mode){case 0:e.x=Math.round(r),e.y=Math.round(i);break;case 1:e.x=Math.round(+r+i),e.y=Math.round(-r+i);break}return e},I4={},B4=function(s,t){return this.getTileXY(s,t,!0).x},G4=function(s,t){return this.getTileXY(s,t,!0).y};class hT{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(K(t,"type",0)),this.setDirectionMode(K(t,"dir",4)),this.setOriginPosition(K(t,"x",0),K(t,"y",0)),this.setCellSize(K(t,"cellWidth",0),K(t,"cellHeight",0))}setType(t){return typeof t=="string"&&(t=N4[t]),this.mode=t,this}setDirectionMode(t){return typeof t=="string"&&(t=X4[t]),this.directions=t,this}setOriginPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this._width=t,this._halfWidth=t/2}get height(){return this._height}set height(t){this._height=t,this._halfHeight=t/2}setCellSize(t,e){return this.width=t,this.height=e,this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHeight(t){this.height=t}}var Y4={getWorldXY:L4,getWorldX:w4,getWorldY:F4,getTileXY:D4,getTileX:B4,getTileY:G4};Object.assign(hT.prototype,Y4);const N4={orthogonal:0,isometric:1,staggered:2},X4={"4dir":4,"8dir":8};var lT=function(){return this._savedOriginX=this.x,this._savedOriginY=this.y,this},uT=function(){return this.x=this._savedOriginX,this.y=this._savedOriginY,this};const Zh=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],Tg=Zh;var fT=function(s,t,e,r,i){i===void 0?i={}:i===!0&&(i=z4);var n,o;switch(this.mode){case 0:n=Zh[e][0],o=Zh[e][1];break;case 1:n=Tg[e][0],o=Tg[e][1];break}return i.x=s+r*n,i.y=t+r*o,i},z4={},V4=function(s,t,e,r){return fT.call(this,s,t,e,1,r)},U4=function(s){var t={},e,r,i;for(var n in s)e=s[n],r=e[0],i=e[1],t.hasOwnProperty(r)||(t[r]={}),t[r][i]=parseInt(n);return t};const dT=U4(Zh),W4=dT;var H4=function(s,t){var e;switch(this.mode){case 0:e=dT;break;case 1:e=W4;break}var r=t.x-s.x,i=t.y-s.y;if(e.hasOwnProperty(r)){var n=e[r];if(n.hasOwnProperty(i))return n[i]}return null},k4=function(s,t,e){return $4[e]};const $4={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5};var Sa=function(s,t,e,r){r===void 0?r={}:r===!0&&(r=Z4);var i=s.x+t,n=s.y+e;return r.x=i,r.y=n,r},Z4={},K4=function(s,t,e){return e===void 0?e={}:e===!0&&(e=J4),e.x=t&1?-s.x:s.x,e.y=t&2?-s.y:s.y,e},J4={},Q4=function(s,t,e){e===void 0?e={}:e===!0&&(e=j4),t=Ka(t,0,3);var r,i;switch(t){case 1:r=-s.y,i=s.x;break;case 2:r=-s.x,i=-s.y;break;case 3:r=s.y,i=-s.x;break;default:r=s.x,i=s.y;break}return e.x=r,e.y=i,e},j4={},q4=function(s,t,e){var r=t.x-s.x,i=t.y-s.y,n;return e?n=Math.abs(r)+Math.abs(i):n=Math.sqrt(r*r+i*i),n},_4=function(s,t,e){e===void 0&&(e=!0);var r;switch(this.mode){case 0:case 1:if(s.y===t.y)r=t.x>=s.x?0:2;else if(s.x===t.x)r=t.y>=s.y?1:3;else if(this.directions===4){var i=$h(Tl(s.x,s.y,t.x,t.y));i<0&&(i+=360),r=i/90,e&&(r=Math.round(r))}else{var n=t.x-s.x,o=t.y-s.y;if(n===o)r=n>0?4:6;else if(n===-o)r=n>0?7:5;else{var i=$h(Math.atan2(o,n));i<0&&(i+=360);var a=i/45;e&&(a=Math.round(a)),a>=0&&a<1?r=a:a>=1&&a<2?r=a+3:a>=2&&a<3?r=a-1:a>=3&&a<4?r=a+2:a>=4&&a<5?r=a-2:a>=5&&a<6?r=a+1:a>=6&&a<7?r=a-3:r=a}}break}return r===this.directions&&(r=0),r},cT=function(s){return Ka(s,0,this.directions)},Zr=function(s){for(var t=[],e=0;e<s;e++)t.push({x:0,y:0});return t},tW=function(s,t,e,r,i,n){n===void 0&&(n=Zr(4));var o=e/2,a=r/2;return i===0?(n[0].x=s+o,n[0].y=t-a,n[1].x=s+o,n[1].y=t+a,n[2].x=s-o,n[2].y=t+a,n[3].x=s-o,n[3].y=t-a):(n[0].x=s+o,n[0].y=t,n[1].x=s,n[1].y=t+a,n[2].x=s-o,n[2].y=t,n[3].x=s,n[3].y=t-a),n},eW=function(s,t,e){e===void 0?e=Zr(4):e===!0&&(e=iW),s===void 0?(ga.x=0,ga.y=0):this.getWorldXY(s,t,ga);var r=this.mode===0?0:1;return tW(ga.x,ga.y,this.width,this.height,r,e),e},ga={},iW=Zr(4),sW=function(s,t,e){e===void 0?e=new Ds:e===!0&&(e=nW);var r=this.getWorldXY(s,t,!0);return e.x=r.x-this.width*.5,e.y=r.y-this.height*.5,e.width=this.width,e.height=this.height,e},nW=new Ds,rW=function(s,t,e){e===void 0&&(e=[]);var r,i;for(r=t,i=-t;i<=t;i++)e.push(Sa(s,r,i));for(i=t,r=t-1;r>=-t;r--)e.push(Sa(s,r,i));for(r=-t,i=t-1;i>=-t;i--)e.push(Sa(s,r,i));for(i=-t,r=-t+1;r<=t-1;r++)e.push(Sa(s,r,i));return e};class Zd extends hT{constructor(t){super(t),this.sides=4}get allDirections(){return this.directions===4?aW:oW}get halfDirections(){return this.directions===4?hW:lW}}const aW=[0,1,2,3],oW=[0,1,2,3,4,5,6,7],hW=[0,1],lW=[0,1,4,5];var uW={saveOrigin:lT,restoreOrigin:uT,getTileXYAtDirection:fT,getNeighborTileXY:V4,getNeighborTileDirection:H4,getOppositeDirection:k4,offset:Sa,mirror:K4,rotate:Q4,getDistance:q4,directionBetween:_4,directionNormalize:cT,getGridPoints:eW,getBounds:sW,ringToTileXYArray:rW};Object.assign(Zd.prototype,uW);const fW=Math.sqrt(3);var dW=function(s){return s.type===0?2*s.size:fW*s.size};const cW=Math.sqrt(3);var vW=function(s){return s.type===0?cW*s.size:2*s.size};const Ft={ODD_R:0,EVEN_R:1,ODD_Q:2,EVEN_Q:3},pW=Ft.ODD_R,gW=Ft.EVEN_R,mW=Ft.ODD_Q,xW=Ft.EVEN_Q;var yW=function(s,t,e){e===void 0?e={}:e===!0&&(e=TW);var r=s*this.width,i=t*this.height;switch(this.mode){case pW:t&1&&(r+=this._halfWidth),i*=.75;break;case gW:t&1&&(r-=this._halfWidth),i*=.75;break;case mW:r*=.75,s&1&&(i+=this._halfHeight);break;case xW:r*=.75,s&1&&(i-=this._halfHeight);break}return r+=this.x,i+=this.y,e.x=r,e.y=i,e},TW={},CW=function(s,t){return this.getWorldXY(s,t,!0).x},SW=function(s,t){return this.getWorldXY(s,t,!0).y};const vT=Ft.ODD_R,pT=Ft.EVEN_R,gT=Ft.ODD_Q,mT=Ft.EVEN_Q;var on=function(s,t,e,r){switch(r===void 0?r={}:r===!0&&(r=Kd),s){case vT:r.x=t-(e-(e&1))/2,r.z=e;break;case pT:r.x=t-(e+(e&1))/2,r.z=e;break;case gT:r.x=t,r.z=e-(t-(t&1))/2;break;case mT:r.x=t,r.z=e-(t+(t&1))/2;break}return r.y=-r.x-r.z,r},EW=function(s,t,e,r){typeof s!="number"&&(r=s,s=r.x,t=r.y,e=r.z),r===void 0?r={}:r===!0&&(r=Kd);var i=Math.round(s),n=Math.round(t),o=Math.round(e),a=Math.abs(i-s),h=Math.abs(n-t),u=Math.abs(o-e);return a>h&&a>u?i=-n-o:h>u?n=-i-o:o=-i-n,r.x=i,r.y=n,r.z=o,r},Oe=function(s,t,e,r,i){switch(i===void 0?i={}:i===!0&&(i=MW),s){case vT:i.x=t+(r-(r&1))/2,i.y=r;break;case pT:i.x=t+(r+(r&1))/2,i.y=r;break;case gT:i.x=t,i.y=r+(t-(t&1))/2;break;case mT:i.x=t,i.y=r+(t+(t&1))/2;break}return i},PW=function(s,t,e){return e===void 0?e={}:e===!0&&(e=Kd),e.x=s,e.y=-s-t,e.z=t,e},Kd={},MW={};const AW=Ft.ODD_R,RW=Ft.EVEN_R,OW=Ft.ODD_Q,LW=Ft.EVEN_Q,Cg=4/3,Sg=2/3;var bW=function(s,t,e){e===void 0?e={}:e===!0&&(e=FW),s-=this.x,t-=this.y;var r,i;switch(this.mode){case AW:case RW:i=t*Cg/this.height,r=s/this.width-Sg*(t/this.height);break;case OW:case LW:i=t/this.height-Sg*(s/this.width),r=s*Cg/this.width;break}var n=PW(r,i,wW);return EW(n),Oe(this.mode,n.x,n.y,n.z,e),e},wW={},FW={},DW=function(s,t){return this.getTileXY(s,t,!0).x},IW=function(s,t){return this.getTileXY(s,t,!0).y};const BW=Ft.ODD_R,GW=Ft.EVEN_R,YW=Ft.ODD_Q,NW=Ft.EVEN_Q;class xT{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(K(t,"staggeraxis",1),K(t,"staggerindex",1)),this.setDirectionMode(),this.setOriginPosition(K(t,"x",0),K(t,"y",0));var e=K(t,"size",void 0);e!==void 0?this.setCellRadius(e):this.setCellSize(K(t,"cellWidth",0),K(t,"cellHeight",0))}setType(t,e){return typeof t=="string"&&(t=zW[t]),typeof e=="string"&&(e=VW[e]),this.staggeraxis=t,this.staggerindex=e,t===0?this.mode=e===0?NW:YW:this.mode=e===0?GW:BW,this}setDirectionMode(){return this.directions=6,this}setOriginPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this._width=t,this._halfWidth=t/2}get height(){return this._height}set height(t){this._height=t,this._halfHeight=t/2}setCellSize(t,e){return this.width=t,this.height=e,this}setCellRadius(t){this.size=t;var e={size:this.size,type:this.staggeraxis},r=dW(e),i=vW(e);return this.setCellSize(r,i),this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHeight(t){this.height=t}}var XW={getWorldXY:yW,getWorldX:CW,getWorldY:SW,getTileXY:bW,getTileX:DW,getTileY:IW};Object.assign(xT.prototype,XW);const zW={y:0,x:1},VW={even:0,odd:1},UW=[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],WW=[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],HW=[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],kW=[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]],Qi=[UW,WW,HW,kW],$W=Ft.ODD_R,ZW=Ft.EVEN_R,KW=Ft.ODD_Q,JW=Ft.EVEN_Q;var yT=function(s,t,e){var r;switch(s){case $W:case ZW:r=e&1;break;case KW:case JW:r=t&1;break}return r},TT=function(s,t,e,r,i){if(i===void 0?i={}:i===!0&&(i=QW),r===1){var n=yT(this.mode,s,t);i.x=s+Qi[this.mode][n][e][0],i.y=t+Qi[this.mode][n][e][1]}else if(r===0)i.x=s,i.y=t;else{var o=on(this.mode,s,t,!0),a,h,u;switch(e){case 1:a=o.x,h=o.y-r,u=o.z+r;break;case 2:a=o.x-r,h=o.y,u=o.z+r;break;case 3:a=o.x-r,h=o.y+r,u=o.z;break;case 4:a=o.x,h=o.y+r,u=o.z-r;break;case 5:a=o.x+r,h=o.y,u=o.z-r;break;default:a=o.x+r,h=o.y-r,u=o.z;break}Oe(this.mode,a,h,u,i)}return i},QW={},jW=function(s,t,e,r){return TT.call(this,s,t,e,1,r)},Ws=function(s){var t={},e,r,i;for(var n in s)e=s[n],r=e[0],i=e[1],t.hasOwnProperty(r)||(t[r]={}),t[r][i]=parseInt(n);return t};const qW=[[Ws(Qi[0][0]),Ws(Qi[0][1])],[Ws(Qi[1][0]),Ws(Qi[1][1])],[Ws(Qi[2][0]),Ws(Qi[2][1])],[Ws(Qi[3][0]),Ws(Qi[3][1])]];var _W=function(s,t){var e=yT(this.mode,s.x,s.y),r=qW[this.mode][e],i=t.x-s.x,n=t.y-s.y;if(r.hasOwnProperty(i)){var o=r[i];if(o.hasOwnProperty(n))return o[n]}return null},tH=function(s,t,e){return(e+3)%6};const eH=Ft.ODD_R,iH=Ft.EVEN_R,sH=Ft.ODD_Q,nH=Ft.EVEN_Q;var rH=function(s,t,e,r){r===void 0?r={}:r===!0&&(r=aH);var i=s.x+t,n=s.y+e;switch(this.mode){case eH:e&1&&(n&1||(i+=1));break;case iH:e&1&&(n&1||(i-=1));break;case sH:t&1&&(i&1||(n+=1));break;case nH:t&1&&(i&1||(n-=1));break}return r.x=i,r.y=n,r},aH={};const oH=Ft.ODD_R,hH=Ft.EVEN_R;var lH=function(s,t,e){e===void 0?e={}:e===!0&&(e=uH);var r=on(this.mode,s.x,s.y,!0),i=this.mode===oH||this.mode===hH,n,o,a;return t&1&&(i?(n=r.y,o=r.x,a=r.z):(n=-r.x,o=-r.z,a=-r.y),r.x=n,r.y=o,r.z=a),t&2&&(i?(n=-r.y,o=-r.x,a=-r.z):(n=r.x,o=r.z,a=r.y)),Oe(this.mode,n,o,a,e),e},uH={},fH=function(s,t,e){e===void 0?e={}:e===!0&&(e=dH),t=Ka(t,0,5);var r=on(this.mode,s.x,s.y,!0),i,n,o;switch(t){case 1:i=-r.z,n=-r.x,o=-r.y;break;case 2:i=r.y,n=r.z,o=r.x;break;case 3:i=-r.x,n=-r.y,o=-r.z;break;case 4:i=r.z,n=r.x,o=r.y;break;case 5:i=-r.y,n=-r.z,o=-r.x;break;default:i=r.x,n=r.y,o=r.z;break}return Oe(this.mode,i,n,o,e),e},dH={},cH=function(s,t,e){on(this.mode,s.x,s.y,hh),on(this.mode,t.x,t.y,lh);var r=lh.x-hh.x,i=lh.y-hh.y,n=lh.z-hh.z;return(Math.abs(r)+Math.abs(i)+Math.abs(n))/2},hh={},lh={},vH=function(s,t,e){e===void 0&&(e=!0);var r;on(this.mode,s.x,s.y,uh),on(this.mode,t.x,t.y,fh);var i=fh.x-uh.x,n=fh.y-uh.y,o=fh.z-uh.z;return o===0?r=i>0?0:3:i===0?r=o>0?1:4:n===0?r=o>0?2:5:i>0&&n<0&&o>0?r=0+o/-n:i<0&&n<0&&o>0?r=1+-n/o:i<0&&n>0&&o>0?r=2+n/-i:i<0&&n>0&&o<0?r=3+-o/n:i>0&&n>0&&o<0?r=4+i/-o:r=5+-n/i,e&&(r=Math.round(r)),r},uh={},fh={};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const pH=Math.PI/180;var CT=function(s){return s*pH},gH=function(s,t,e,r,i){if(i===void 0&&(i=Zr(6)),e!==void 0)if(typeof e=="number")for(var n=r===0?0:-30,o,a,h=0;h<6;h++)o=60*h+n,a=CT(o),i[h].x=s+e*Math.cos(a),i[h].y=t+e*Math.sin(a);else{var u=e,l=u.width,f=u.height,c=l/2,d=l/4,v=f/2,p=f/4;r===0?(i[0].x=s+c,i[0].y=t,i[1].x=s+d,i[1].y=t+v,i[2].x=s-d,i[2].y=t+v,i[3].x=s-c,i[3].y=t,i[4].x=s-d,i[4].y=t-v,i[5].x=s+d,i[5].y=t-v):(i[0].x=s+c,i[0].y=t-p,i[1].x=s+c,i[1].y=t+p,i[2].x=s,i[2].y=t+v,i[3].x=s-c,i[3].y=t+p,i[4].x=s-c,i[4].y=t-p,i[5].x=s,i[5].y=t-v)}return i},mH=function(s,t,e){e===void 0?e=Zr(6):e===!0&&(e=xH),s===void 0?(ma.x=0,ma.y=0):this.getWorldXY(s,t,ma);var r;return this.size!==void 0?r=this.size:(r=yH,r.width=this.width,r.height=this.height),gH(ma.x,ma.y,r,this.staggeraxis,e),e},xH=Zr(6),ma={},yH={},TH=function(s,t,e){e===void 0?e=new Ds:e===!0&&(e=CH);var r=this.getWorldXY(s,t,!0);return e.x=r.x-this.width*.5,e.y=r.y-this.height*.5,e.width=this.width,e.height=this.height,e},CH=new Ds,SH=function(s,t,e){e===void 0&&(e=[]);var r=on(this.mode,s.x,s.y,!0),i=r.x,n=r.y,o=r.z,a,h,u;for(u=t,a=0;a>=-t;a--)h=-a-u,e.push(Oe(this.mode,i+a,n+h,o+u));for(a=-t,h=1;h<=t;h++)u=-a-h,e.push(Oe(this.mode,i+a,n+h,o+u));for(h=t,u=-1;u>=-t;u--)a=-h-u,e.push(Oe(this.mode,i+a,n+h,o+u));for(u=-t,a=1;a<=t;a++)h=-a-u,e.push(Oe(this.mode,i+a,n+h,o+u));for(a=t,h=-1;h>=-t;h--)u=-a-h,e.push(Oe(this.mode,i+a,n+h,o+u));for(h=-t,u=1;u<=t-1;u++)a=-h-u,e.push(Oe(this.mode,i+a,n+h,o+u));return e};class Jd extends xT{constructor(t){super(t),this.sides=6}get allDirections(){return EH}get halfDirections(){return PH}}const EH=[0,1,2,3,4,5],PH=[0,1,2];var MH={saveOrigin:lT,restoreOrigin:uT,getTileXYAtDirection:TT,getNeighborTileXY:jW,getNeighborTileDirection:_W,getOppositeDirection:tH,offset:rH,mirror:lH,rotate:fH,getDistance:cH,directionBetween:vH,directionNormalize:cT,getGridPoints:mH,getBounds:TH,ringToTileXYArray:SH};Object.assign(Jd.prototype,MH);const AH={quadGrid:Zd,hexagonGrid:Jd};let Qd=class extends b5{constructor(t,e){super(),this.isShutdown=!1,this.scene=t,this.boardData=new O4,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isBoard=K(t,"isBoard",!0),this.setGrid(K(t,"grid",void 0)),this.setWrapMode(K(t,"wrap",!1)),this.setInfinityMode(K(t,"infinity",!1)),this.setBoardWidth(K(t,"width",0)),this.setBoardHeight(K(t,"height",0)),this}boot(){this.scene&&this.isBoard&&this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){if(!this.isShutdown)return this.scene&&this.isBoard&&this.scene.sys.events.off("shutdown",this.destroy,this),this.isBoard&&this.removeAllChess(!t,!0),super.shutdown(),this.boardData.shutdown(t),this.scene=void 0,this.boardData=void 0,this.isShutdown=!0,this}destroy(t){this.isShutdown||(this.emit("destroy",this,t),this.shutdown(t))}setGrid(t){if(hs(t))var e=t,r=K(e,"gridType","quadGrid"),t=new AH[r](e);return this.grid=t,this}setWrapMode(t){return t===void 0&&(t=!0),this.wrapMode=t,this}setInfinityMode(t){return t===void 0&&(t=!0),this.infinityMode=t,this}setBoardSize(t,e){return this.setBoardWidth(t),this.setBoardHeight(e),this}exists(t){return this.boardData.exists(this.getChessUID(t))}get chessCount(){return this.boardData.chessCount}clear(t){return t===void 0&&(t=!0),this.removeAllChess(t,!0),this.boardData.clear(),this}static GetBoard(t){return oT(t)}};Object.assign(Qd.prototype,R4);const RH=Phaser.GameObjects.Zone;class OH extends RH{constructor(t){super(t,0,0,1,1),t.add.existing(this),this.setScrollFactor(0),this.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}})}}const Eg=Phaser.GameObjects.GameObject.RENDER_MASK;var LH=function(s){if(s.renderFlags!==Eg)return!1;var t=!0,e=s.parentContainer;if(e)do{if(e.renderFlags!==Eg){t=!1;break}e=e.parentContainer}while(e);return t},hn=function(s,t,e,r,i,n){if(!(r==null||i==null)){for(var o=typeof s!="string"?s:void 0,a=typeof t!="string"?t:void 0,h=e.tileXYToChessArray(r,i,Pg),u,l=0,f=h.length;l<f;l++)u=h[l],LH(u)&&(u.emit&&(a?a(u):u.emit(t,n)),o?o(u):e.emit(s,n,u));Pg.length=0}},Pg=[],Hu=function(s){if(this.enable&&s.isDown){var t=this.board;this.pointer===null&&(this.pointer=s);var e=t.worldXYToTileXY(s.worldX,s.worldY,!0),r=e.x,i=e.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=r,this.tilePosition.y=i,!!t.contains(r,i)){t.emit("tiledown",s,this.tilePosition),t.emit("tileover",s,this.tilePosition);var n=function(a){t.emit("gameobjectdown",s,a),t.emit("gameobjectover",s,a)},o=function(a){a.emit("board.pointerdown",s),a.emit("board.pointerover",s)};hn(n,o,t,r,i,s)}}},ku=function(s){if(this.enable){var t=this.board,e=t.worldXYToTileXY(s.worldX,s.worldY,!0),r=e.x,i=e.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=r,this.tilePosition.y=i,!!t.contains(r,i)){t.emit("tileup",s,this.tilePosition),t.emit("tileout",s,this.prevTilePosition);var n=function(a){t.emit("gameobjectup",s,a),t.emit("gameobjectout",s,a)},o=function(a){a.emit("board.pointerup",s),a.emit("board.pointerout",s)};hn(n,o,t,r,i,s),this.pointer===s&&(this.pointer=null)}}},$u=function(s){if(this.enable){var t=this.board,e=t.worldXYToTileXY(s.worldX,s.worldY,!0);if(!Hn(this.tilePosition,e)){this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.prevTilePosition.x!=null&&this.prevTilePosition.y!=null&&t.emit("tileout",s,this.prevTilePosition);var r=e.x,i=e.y;if(this.tilePosition.x=r,this.tilePosition.y=i,!t.contains(r,i)){this.pointer===s&&(this.pointer=null);return}this.pointer===null&&(this.pointer=s),t.emit("tilemove",s,this.tilePosition),t.emit("tileover",s,this.tilePosition),hn("gameobjectout","board.pointerout",t,this.prevTilePosition.x,this.prevTilePosition.y,s);var n=function(a){t.emit("gameobjectmove",s,a),t.emit("gameobjectover",s,a)},o=function(a){a.emit("board.pointermove",s),a.emit("board.pointerover",s)};hn(n,o,t,r,i,s)}}},bH=function(){var s=this.touchZone?this.touchZone:this.board.scene,t=new Ed(s);return t.on("tap",wH,this),t},wH=function(s){var t=this.board,e=t.worldXYToTileXY(s.worldX,s.worldY),r=e.x,i=e.y;if(t.contains(r,i)){t.emit("tiletap",s,e),t.emit(`tile${s.tapsCount}tap`,s,e);var n=function(a){t.emit("gameobjecttap",s,a),t.emit(`gameobject${s.tapsCount}tap`,s,a)},o=function(a){a.emit("board.tap",s),a.emit(`board.${s.tapsCount}tap`,s)};hn(n,o,t,r,i,s)}},FH=function(){var s=this.touchZone?this.touchZone:this.board.scene,t=new Pd(s);return t.on("pressstart",DH,this).on("pressend",IH,this),t},DH=function(s){var t=this.board,e=t.worldXYToTileXY(s.worldX,s.worldY),r=e.x,i=e.y;t.contains(r,i)&&(t.emit("tilepressstart",s,e),hn("gameobjectpressstart","board.pressstart",t,r,i,s))},IH=function(s){var t=this.board,e=t.worldXYToTileXY(s.worldX,s.worldY),r=e.x,i=e.y;t.contains(r,i)&&(t.emit("tilepressend",s,e),hn("gameobjectpressend","board.pressend",t,r,i,s))},BH=function(){var s=this.touchZone?this.touchZone:this.board.scene,t=new ll(s);return t.on("swipe",GH,this),t},GH=function(s){var t=this.board,e=t.worldXYToTileXY(s.worldX,s.worldY),r=e.x,i=e.y;t.contains(r,i)&&(s.direction=t.angleSnapToDirection(e,s.getVelocityAngle()),t.emit("tileswipe",s,e),hn("gameobjectswipe","board.swipe",t,r,i,s))};class YH{constructor(t,e){var r=K(e,"enable",!0),i=K(e,"useTouchZone",!0),n=t.scene;if(this.board=t,this.touchZone=void 0,this._enable=!0,this.pointer=null,this.tilePosition={x:void 0,y:void 0},this.prevTilePosition={x:void 0,y:void 0},i){var o=new OH(n);o.on("pointerdown",Hu,this),o.on("pointerup",ku,this),o.on("pointermove",$u,this),this.touchZone=o}else n.input.on("pointerdown",Hu,this),n.input.on("pointerup",ku,this),n.input.on("pointermove",$u,this);this.tap=bH.call(this),this.press=FH.call(this),this.swipe=BH.call(this),t.once("destroy",this.onBoardDestroy,this),this.setEnable(r)}destroy(t){if(this.tap.destroy(t),this.press.destroy(t),this.swipe.destroy(t),this.touchZone)this.touchZone.destroy(t),this.touchZone=void 0;else{var e=this.board.scene;e&&(e.input.off("pointerdown",Hu,this),e.input.off("pointerup",ku,this),e.input.off("pointermove",$u,this))}this.board=void 0}onBoardDestroy(t,e){this.destroy(e)}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.pointer=null),this._enable=t,this.touchZone&&(t?this.touchZone.setInteractive():this.touchZone.disableInteractive()),this.tap.setEnable(t),this.press.setEnable(t),this.swipe.setEnable(t))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}}var NH=function(s){if(!this.input)this.input=new YH(this,s);else{var t=s!==!1;this.input.setEnable(t)}return this},XH=function(s,t,e){typeof e=="number"&&(e={order:e}),e===void 0&&(e={});var r=K(e,"order",0),i=K(e,"camera",this.scene.cameras.main),n=K(e,"paddingX",1),o=K(e,"paddingY",1);return Rn===void 0&&(Rn=new Ds),Rn.width=(i.width+n*2)/i.zoomX,Rn.height=(i.height+o*2)/i.zoomY,Rn.centerX=i.centerX+i.scrollX,Rn.centerY=i.centerY+i.scrollY,this.forEachTileXYInShape(Rn,s,t,{order:r,testMode:1}),this},Rn;let Sl=class extends Qd{get touchZone(){return this.input?this.input.touchZone:null}getTouchZone(){return this.touchZone}};var zH={setInteractive:NH,forEachCullTileXY:XH};Object.assign(Sl.prototype,zH);ri.register("board",function(s){return new Sl(this.scene,s)});Ue(window,"RexPlugins.Board.Board",Sl);ri.register("hexagonGrid",function(s){return new Jd(s)});ri.register("quadGrid",function(s){return new Zd(s)});ri.register("shape",function(s,t,e,r,i,n,o){var a=new Fe(s,t,e,r,i,n,o);return s.scene.add.existing(a),a});Ue(window,"RexPlugins.Board.Shape",Fe);var VH=function(s,t,e){var r=this.chessData.board;if(r==null)return!1;var i=this.chessData.tileXYZ,n=i.x,o=i.y,a=i.z;if(s===n&&t===o)return!0;if(!r.contains(s,t)||this.blockerTest&&r.hasBlocker(s,t))return!1;if(this.edgeBlockerTest,this.moveableTestCallback){if(e===void 0&&(e=this.chessData.getTileDirection(s,t)),xa.x=s,xa.y=t,xa.z=a,this.moveableTestScope)var h=this.moveableTestCallback.call(this.moveableTestScope,i,xa,e,r);else var h=this.moveableTestCallback(i,xa,e,r);if(!h)return!1}if(this.occupiedTest&&!this.sneakMode){var u=r.tileXYZToChess(s,t,a);if(u&&(this.emit("occupy",u,this.parent,this),r.contains(s,t,a)))return!1}return!0},xa={x:0,y:0,z:0},Mg=function(s,t,e,r){var i=s.chessData.board,n=r.toString();do n+=".";while(i.contains(t,e,n));return n},UH=function(s,t,e){var r=this.chessData.board;if(r===null)return this.lastMoveResult=!1,this;if(s!=null&&typeof s!="number"){var i=s;s=K(i,"x",void 0),t=K(i,"y",void 0),e=K(i,"direction",void 0)}var n=this.chessData.tileXYZ;if(e!==void 0&&s==null||t==null){var o=r.getNeighborTileXY(n,e,!0);o!==null?(s=o.x,t=o.y):(s=null,t=null)}if(s==null||t==null)return this.lastMoveResult=!1,this;if(e===void 0&&(Zu.x=s,Zu.y=t,e=r.getNeighborTileDirection(n,Zu)),!this.canMoveTo(s,t,e))return this.lastMoveResult=!1,this;if(this.destinationTileX=s,this.destinationTileY=t,this.destinationDirection=e,r.wrapMode&&e!==null)if(r.grid.getNeighborTileXY(n.x,n.y,e,Hs),Hs.x===s&&Hs.y===t){var a=r.tileXYToWorldXY(s,t,!0);this.moveAlongLine(void 0,void 0,a.x,a.y)}else{var a=r.tileXYToWorldXY(Hs.x,Hs.y,!0),h=a.x,u=a.y;a=r.tileXYToWorldXY(n.x,n.y,!0);var l=a.x,f=a.y,c=(l+h)/2,d=(f+u)/2;this.moveAlongLine(void 0,void 0,c,d);var v=r.getOppositeDirection(s,t,e);r.grid.getNeighborTileXY(s,t,v,Hs),a=r.tileXYToWorldXY(Hs.x,Hs.y,!0),h=a.x,u=a.y,a=r.tileXYToWorldXY(s,t,!0),c=a.x,d=a.y,l=(h+c)/2,f=(u+d)/2,this.addMoveLine(l,f,c,d)}else{var a=r.tileXYToWorldXY(s,t,!0);this.moveAlongLine(void 0,void 0,a.x,a.y)}var p=n.z;return this.sneakMode&&(this.tileZSave===void 0?r.contains(s,t,p)&&(this.tileZSave=p,p=Mg(this,s,t,this.tileZSave)):r.contains(s,t,this.tileZSave)?p=Mg(this,s,t,this.tileZSave):(p=this.tileZSave,this.tileZSave=void 0)),r.moveChess(this.parent,s,t,p,!1),this.isRunning=!0,this.lastMoveResult=!0,this},Zu={},Hs={},WH=function(s){return this.moveTo(void 0,void 0,s),this},HH=function(){var s=this.chessData.board;if(s===null)return this.lastMoveResult=!1,this;var t=s.grid.allDirections;ya.length!==t.length&&Ls(t,ya),Cl(ya);for(var e=0,r=ya.length;e<r;e++)if(this.moveToward(ya[e]),this.lastMoveResult)return this;return this},ya=[],kH=function(s,t,e){var r=this.chessData.board;if(r===null)return this.lastMoveResult=!1,this;if(typeof s!="number"){var i=s;s=i.x,t=i.y}dh.x=s,dh.y=t,e===void 0&&(e=!0);for(var n=this.chessData.tileXYZ,o=r.grid.allDirections,a=0,h=o.length+1;a<h;a++){var u=yr[a];if(u||(u={},yr.push(u)),a<h-1){var l=r.getNeighborTileXY(n,a,u);l===null?(u.x=void 0,u.y=void 0,u.distance=void 0):u.distance=r.getDistance(u,dh,!0)}else u.direction=void 0,u.x=n.x,u.y=n.y,u.distance=r.getDistance(u,dh,!0)}yr.length=o.length+1;var f=this.destinationDirection;yr.sort(function(c,d){var v=c.distance,p=d.distance;if(v===void 0)return 1;if(p===void 0)return-1;if(v>p)return e?-1:1;if(v<p)return e?1:-1;var g=c.direction,m=d.direction;return g===f?1:m===f?-1:g===void 0?1:m===void 0?-1:0});for(var a=0,h=yr.length;a<h;a++){if(u=yr[a],u.distance===null)return this;if(this.moveTo(u),this.lastMoveResult)return this}return this},dh={x:0,y:0},yr=[],$H=function(s,t){return this.moveAway(s,t,!1),this};const ZH={canMoveTo:VH,moveTo:UH,moveToward:WH,moveToRandomNeighbor:HH,moveAway:kH,moveCloser:$H},On=Phaser.Utils.Objects.GetValue,KH=Phaser.Math.Distance.Between,Ag=Phaser.Math.Linear,JH=Phaser.Math.Angle.Between;let ST=class extends rl{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=On(t,"isRunning",!1),this.setEnable(On(t,"enable",!0)),this.timeScale=On(t,"timeScale",1),this.setSpeed(On(t,"speed",400)),this.setRotateToTarget(On(t,"rotateToTarget",!1)),this.targetX=On(t,"targetX",0),this.targetY=On(t,"targetY",0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}setRotateToTarget(t){return this.rotateToTarget=t,this}moveTo(t,e){if(typeof t!="number"){var r=t;t=r.x,e=r.y}return this.targetX=t,this.targetY=e,super.start(),this}moveFrom(t,e){if(typeof t!="number"){var r=t;t=r.x,e=r.y}var i=this.parent,n=i.x,o=i.y;return i.setPosition(t,e),this.moveTo(n,o),this}moveToward(t,e){var r=this.parent,i=r.x+Math.cos(t)*e,n=r.y+Math.sin(t)*e;return this.moveTo(i,n),this}update(t,e){if(!this.isRunning||!this.enable)return this;var r=this.parent;if(!r.active)return this;var i=r.x,n=r.y,o=this.targetX,a=this.targetY;if(i===o&&n===a)return this.complete(),this;if(this.speed===0||e===0||this.timeScale===0)return this;var h=e*this.timeScale/1e3,u=this.speed*h,l=KH(i,n,o,a),f,c;if(u<l){var d=u/l;f=Ag(i,o,d),c=Ag(n,a,d)}else f=o,c=a;return r.setPosition(f,c),this.rotateToTarget&&(r.rotation=JH(i,n,f,c)),this}},jd=class extends rl{constructor(t,e){super(t,e),this.chessData=_n(t),this.scene=t.scene,this.moveToTask=new ST(t,{tickingMode:0}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=K(t,"isRunning",!1),this.setEnable(K(t,"enable",!0)),this.timeScale=K(t,"timeScale",1),this.setSpeed(K(t,"speed",400)),this.setRotateToTarget(K(t,"rotateToTarget",!1)),this.setOccupiedTest(K(t,"occupiedTest",!1)),this.setBlockerTest(K(t,"blockerTest",!1)),this.setEdgeBlockerTest(K(t,"edgeBlockerTest",!1)),this.setMoveableTestCallback(K(t,"moveableTest",void 0),K(t,"moveableTestScope",void 0)),this.setSneakEnable(K(t,"sneak",!1)),this.destinationTileX=K(t,"destinationTileX",null),this.destinationTileY=K(t,"destinationTileY",null),this.destinationDirection=K(t,"destinationDirection",null),this.lastMoveResult=K(t,"lastMoveResult",void 0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,occupiedTest:this.occupiedTest,blockerTest:this.blockerTest,edgeBlockerTest:this.edgeBlockerTest,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,rotateToTarget:this.rotateToTarget,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}shutdown(t){this.moveToTask.shutdown(t),super.shutdown(t)}set enable(t){this.moveToTask.setEnable(t)}get enable(){return this.moveToTask.enable}setEnable(t){return t==null&&(t=!0),this.enable=t,this}get timeScale(){return this.moveToTask.timeScale}set timeScale(t){this.moveToTask.timeScale=t}set speed(t){this.moveToTask.setSpeed(t)}get speed(){return this.moveToTask.speed}setSpeed(t){return this.speed=t,this}set rotateToTarget(t){this.moveToTask.setRotateToTarget(t)}get rotateToTarget(){return this.moveToTask.rotateToTarget}setRotateToTarget(t){return t===void 0&&(t=!0),this.rotateToTarget=t,this}setOccupiedTest(t){return t===void 0&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return t===void 0&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return t===void 0&&(t=!0),this.edgeBlockerTest=t,this}setMoveableTestCallback(t,e){return this.moveableTestCallback=t,this.moveableTestScope=e,this}setSneakEnable(t){return t===void 0&&(t=!0),this.sneakMode=t,this.tileZSave=void 0,this}moveAlongLine(t,e,r,i){return t!==void 0&&(this.parent.x=t),e!==void 0&&(this.parent.y=e),this.moveToTask.moveTo(r,i),this}addMoveLine(t,e,r,i){return this.moveToTask.hasOwnProperty("nextlines")||(this.moveToTask.nextlines=[]),this.moveToTask.nextlines.push([t,e,r,i]),this}moveNextLine(){var t=this.moveToTask.nextlines;return!t||t.length===0?!1:(this.moveAlongLine.apply(this,t[0]),t.length=0,!0)}update(t,e){if(!this.isRunning||!this.enable)return this;var r=this.moveToTask;return r.update(t,e),r.isRunning?this:(this.moveNextLine()||this.complete(),this)}};Object.assign(jd.prototype,ZH);var QH=function(s,t,e){var r=this.parent,i=r.mainBoard;if(i==null)return!1;if(Ln.x=r.tileX,Ln.y=r.tileY,Ss.x=s,Ss.y=t,Ss.x===Ln.x&&Ss.y===Ln.y)return!0;if(r.pullOutFromMainBoard(),!r.canPutOnMainBoard(i,Ss.x,Ss.y))return r.putBack(),!1;if(this.moveableTestCallback){if(e===void 0&&(e=i.getNeighborTileDirection(Ln,Ss)),this.moveableTestScope)var n=this.moveableTestCallback.call(this.moveableTestScope,Ln,Ss,e,i);else var n=this.moveableTestCallback(Ln,Ss,e,i);if(!n)return r.putBack(),!1}return r.putBack(),!0},Ln={x:0,y:0,z:0},Ss={x:0,y:0,z:0},jH=function(s,t,e){var r=this.parent,i=r.mainBoard;if(i==null)return this.lastMoveResult=!1,this;if(s!=null&&typeof s!="number"){var n=s;s=K(n,"x",void 0),t=K(n,"y",void 0),e=K(n,"direction",void 0)}if(ch.x=r.tileX,ch.y=r.tileY,e!==void 0&&s==null||t==null){var o=i.getNeighborTileXY(ch,e,!0);o!==null?(s=o.x,t=o.y):(s=null,t=null)}if(s==null||t==null)return this.lastMoveResult=!1,this;if(e===void 0&&(Ku.x=s,Ku.y=t,e=board.getNeighborTileDirection(ch,Ku)),!this.canMoveTo(s,t,e))return this.lastMoveResult=!1,this;this.destinationTileX=s,this.destinationTileY=t,this.destinationDirection=e;var o=i.tileXYToWorldXY(s,t,!0);return this.moveToTask.moveTo(o.x,o.y),r.putOnMainBoard(i,s,t,!1),this.isRunning=!0,this.lastMoveResult=!0,this},ch={},Ku={},qH=function(s){return this.moveTo(void 0,void 0,s),this},_H=function(){var s=this.parent,t=s.mainBoard;if(t==null)return this.lastMoveResult=!1,this;var e=t.grid.allDirections;Ta.length!==e.length&&Ls(e,Ta),Cl(Ta);for(var r=0,i=Ta.length;r<i;r++)if(this.moveToward(Ta[r]),this.lastMoveResult)return this;return this},Ta=[];class qd extends rl{constructor(t,e){super(t,e),this.moveToTask=new ST(t,{tickingMode:0}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=K(t,"isRunning",!1),this.setEnable(K(t,"enable",!0)),this.timeScale=K(t,"timeScale",1),this.setSpeed(K(t,"speed",400)),this.destinationTileX=K(t,"destinationTileX",null),this.destinationTileY=K(t,"destinationTileY",null),this.destinationDirection=K(t,"destinationDirection",null),this.lastMoveResult=K(t,"lastMoveResult",void 0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}shutdown(t){this.isShutdown||(this.moveToTask.shutdown(t),super.shutdown(t))}set enable(t){this.moveToTask.setEnable(t)}get enable(){return this.moveToTask.enable}setEnable(t){return t==null&&(t=!0),this.enable=t,this}get timeScale(){return this.moveToTask.timeScale}set timeScale(t){this.moveToTask.timeScale=t}set speed(t){this.moveToTask.setSpeed(t)}get speed(){return this.moveToTask.speed}setSpeed(t){return this.speed=t,this}moveAlongLine(t,e,r,i){return t!==void 0&&(this.parent.x=t),e!==void 0&&(this.parent.y=e),this.moveToTask.moveTo(r,i),this}update(t,e){if(!this.isRunning||!this.enable)return this;var r=this.moveToTask;return r.update(t,e),r.isRunning?this:(this.complete(),this)}}var t6={canMoveTo:QH,moveTo:jH,moveToward:qH,moveToRandomNeighbor:_H};Object.assign(qd.prototype,t6);ri.register("moveTo",function(s,t){var e=Qy(s)?qd:jd;return new e(s,t)});Ue(window,"RexPlugins.Board.MoveTo",jd);Ue(window,"RexPlugins.Board.MiniBoardMoveTo",qd);var e6=function(s,t,e,r){for(var i=this.board,n=i.grid,o=n.halfDirections,a,h=this.dirMask,u=i.width,l=i.height,f,c,d=0,v=o.length;d<v;d++)if(a=o[d],h[a]!==!1)for(var p=0;p<l;p++){for(var g=0;g<u;g++)if(f=this.matchAtDir(s,g,p,a),f!==!1){if(t&&(e?c=t.call(e,f,i):c=t(f,i)),r)return f;if(c)break}if(c)break}return this},i6=function(s,t,e,r){var i=typeof s=="number",n;i?(n=s,s=null):n=s.length;var o,a=this.wildcard,h,u=this.board,l=vh.tileXY;l.length=0;for(var f=0;f<n;f++){if(h===void 0)h={x:t,y:e};else if(h=u.getNeighborTileXY(h,r,h),h===null)return!1;if(o=this.getSymbol(h.x,h.y),o==null)return!1;if(o!==a){if(i){if(s===null)s=o;else if(s!==o)return!1}else if(s[f]!==o)return!1}l.push({x:h.x,y:h.y})}return vh.direction=r,vh.pattern=s,vh},vh={tileXY:[],direction:void 0,pattern:void 0},s6=function(s,t,e){e===void 0&&(e=[]);var r=this.board,i=this.wildcard,n=this.getSymbol(s,t);if(n==null||n===i)return e;bn===void 0&&(bn=new n6);var o,a;for(bn.push(s,t);bn.length;)o=bn.pop(),a=this.getSymbol(o.x,o.y),(a===n||a===i)&&(e.push(o),bn.push(r.getNeighborTileXY(o)));return bn.clear(),e};class n6{constructor(){this.data=[],this.visited={}}push(t,e){if(se(t)){for(var r=t,i=0,n=r.length;i<n;i++)this.push(r[i]);return this}if(hs(t)){var o=t;t=o.x,e=o.y}var a=`${t},${e}`;return this.visited.hasOwnProperty(a)?this:(this.data.push({x:t,y:e}),this.visited[a]=!0,this)}pop(){return this.data.pop()}get length(){return this.data.length}clear(){return ui(this.data),ui(this.visited),this}}var bn;const r6={match:e6,matchAtDir:i6,group:s6};class _d{constructor(t){this.symbols=[],this.dirMask={},this.resetFromJSON(t),this.boot()}resetFromJSON(t){this.setBoard(K(t,"board",void 0)),this.setWildcard(K(t,"wildcard",void 0));var e=K(t,"dirMask",void 0);return e!==void 0&&this.setDirMask(e),this}boot(){}shutdown(){return this.board=void 0,this.symbols=void 0,this.dirMask=void 0,this}destroy(){return this.shutdown(),this}setBoard(t){return this.board=t,t&&this.clearSymbols(),this}setDirMask(t,e){if(hs(t)){var r=t;for(t in r)this.dirMask[t]=r[t]}else this.dirMask[t]=e;return this}setDirectionMode(t){return this.board.grid.setDirectionMode(t),this}clearSymbols(){return this.refreshSymbols(null),this}setSymbol(t,e,r){var i=this.board;return i.contains(t,e)?(this.symbols[this.tileXYToKey(t,e)]=r,this):this}getSymbol(t,e){return this.symbols[this.tileXYToKey(t,e)]}forEach(t,e){for(var r=this.board,i,n,o,a=0,h=this.symbols.length;a<h&&(n=this.symbols[a],i=this.keyToTileXY(a),e?o=t.call(e,i,n,r):o=t(i,n,r),!o);a++);return this}refreshSymbols(t,e){var r=this.board,i=r.width,n=r.height;this.symbols.length=i*n;var o,a;if(ho(t))for(var h=0,u=this.symbols.length;h<u;h++)a=this.keyToTileXY(h,!0),e?o=t.call(e,a,r):o=t(a,r),this.symbols[h]=o;else{o=t;for(var h=0,u=this.symbols.length;h<u;h++)this.symbols[h]=o}return this}setWildcard(t){return this.wildcard=t,this}tileXYToKey(t,e){return t+e*this.board.width}keyToTileXY(t,e){e===void 0?e={}:e===!0&&(e=a6);var r=this.board.width;return e.x=t%r,e.y=Math.floor(t/r),e}anyMatch(t){return this.match(t,null,null,!0)}}var a6={x:0,y:0};Object.assign(_d.prototype,r6);ri.register("match",function(s){return new _d(s)});Ue(window,"RexPlugins.Board.Match",_d);class o6{constructor(){this.preNodes=[],this.manager=void 0}reset(t){this.manager=t,this.sn=void 0,this.key=void 0,this.x=void 0,this.y=void 0,this.isTileXYZ=!0,this._px=void 0,this._py=void 0,this.cost=void 0,this.f=0,this.g=0,this.h=0,this.closerH=0,this.visited=!1,this.closed=!1,this.preNodes.length=0}destroy(){this.preNodes.length=0,this.manager=void 0}heuristic(t,e,r){if(e===null)return 0;var i,n=this.board.getDistance(t,this,!0)*this.pathFinder.weight;if(e===1&&r!==void 0){var o=t.angleTo(r)-this.angleTo(r);i=n+Math.abs(o)}else e===2?i=n+Math.random():i=n;return i}getNeighborNodes(){var t=this.board.getNeighborTileXY(this);this.pathFinder.shuffleNeighbors&&Cl(t);for(var e,r=[],i=0,n=t.length;i<n;i++)e=this.manager.getNode(t[i],!0),r.push(e);return r}getCost(t){return this.pathFinder.cacheCost?this.cost===void 0&&(this.cost=this.pathFinder.getCost(this,t)):this.cost=this.pathFinder.getCost(this,t),this.cost}angleTo(t){return Tl(this.worldX,this.wroldY,t.worldX,t.wroldY)}get pathFinder(){return this.manager.pathFinder}get board(){return this.manager.pathFinder.board}get worldX(){return this._px===void 0&&(this._px=this.board.tileXYToWroldX(this.x,this.y)),this._px}get wroldY(){return this._py===void 0&&(this._py=this.board.tileXYToWroldY(this.x,this.y)),this._py}get pathCost(){return this.g}}var h6=new Yr;class l6{constructor(t){this.sn=0,this.pool=h6,this.nodes={},this.pathFinder=t,this.closestNode=null}destroy(){return this.freeAllNodes(),this.pathFinder=null,this.pool=void 0,this}getNode(t,e,r){var i;switch(typeof t){case"number":i=wf(t,e);break;case"string":i=t,r=e;break;default:var n=t;r=e,t=n.x,e=n.y,i=wf(t,e);break}if(r===void 0&&(r=!1),this.sn++,!this.nodes.hasOwnProperty(i)){if(!r)return null;var o=this.pool.pop();o===null&&(o=new o6),o.reset(this),o.sn=this.sn,o.key=i,o.x=t,o.y=e,this.nodes[i]=o}return this.nodes[i]}freeAllNodes(){this.closestNode=null;var t=this.nodes,e=this.pool,r;for(var i in t)r=t[i],r.destroy(),e.push(r),delete t[i];return this.sn=0,this}getAllNodes(){return this.nodes}}class u6{constructor(t){this.content=[],this.scoreFunction=t}clear(){this.content.length=0}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,i=this.content[r];if(this.scoreFunction(e)<this.scoreFunction(i))this.content[r]=e,this.content[t]=i,t=r;else break}}bubbleUp(t){for(var e=this.content.length,r=this.content[t],i=this.scoreFunction(r);;){var n=t+1<<1,o=n-1,a=null,h;if(o<e){var u=this.content[o];h=this.scoreFunction(u),h<i&&(a=o)}if(n<e){var l=this.content[n],f=this.scoreFunction(l);f<(a===null?i:h)&&(a=n)}if(a!==null)this.content[t]=this.content[a],this.content[a]=r,t=a;else break}}}const $t={AREA_MODE:16,PATH_MODE:0,random:0,diagonal:1,straight:2,line:3,"A*":10,"A*-random":11,"A*-line":12,BLOCKER:null,INFINITY:void 0},f6=$t.PATH_MODE,Rg=$t["A*"],Og=$t["A*-line"],Lg=$t["A*-random"],d6=$t.BLOCKER,c6=$t.INFINITY;var Tr=new u6(function(s){return s.f}),v6=function(s,t,e,r){this.nodeManager===void 0&&(this.nodeManager=new l6(this));var i=this.nodeManager;i.freeAllNodes();const n=r===f6,o=this.pathMode===Rg||this.pathMode===Og||this.pathMode===Lg,a=n&&o,h=n&&!o,u=a?this.pathMode==Rg?0:this.pathMode==Og?1:this.pathMode==Lg?2:null:null;var l=t!==null?i.getNode(t.x,t.y,!0):null,f=i.getNode(s.x,s.y,!0);f.h=f.heuristic(l,u);var c;for(n&&(c=f,c.closerH=c.h||c.heuristic(l,0)),Tr.push(f);Tr.size()>0;){var d=Tr.pop();if(n&&d===l){c=l;break}d.closed=!0;for(var v=d.getNeighborNodes(),p,g,m,x=0,y=v.length;x<y;++x)if(p=v[x],g=p.getCost(d),!(p.closed||g===d6)){var T=d.g+g,C=p.visited;e!=c6&&T>e||(!C||T<p.g?(p.visited=!0,p.preNodes.length=0,p.preNodes.push(d),p.h=p.h||p.heuristic(l,u,f),p.g=T,p.f=p.g+p.h,n&&(p.closerH=p.h||p.heuristic(l,0),m=p.closerH<c.closerH||p.closerH===c.closerH&&p.g<c.g,m&&(c=p)),C?Tr.rescoreElement(p):Tr.push(p)):h&&T==p.g&&p.preNodes.push(d))}}return i.closestNode=n?c:null,Tr.clear(),this};const Ju=$t.BLOCKER;var p6=function(s,t){if(this.occupiedTest&&this.board.contains(s.x,s.y,this.chessData.tileXYZ.z)||this.blockerTest&&this.board.hasBlocker(s.x,s.y))return Ju;if(this.edgeBlockerTest,typeof this.costCallback=="number")return this.costCallback;var e;return this.costCallbackScope?e=this.costCallback.call(this.costCallbackScope,s,t,this):e=this.costCallback(s,t,this),e===void 0&&(e=Ju),e};const g6=$t.AREA_MODE,m6=$t.INFINITY;var x6=function(s,t){if(t===void 0&&(t=[]),this.board===null||s!==m6&&s<=0)return t;var e=this.chessData.tileXYZ,r=e.x,i=e.y;this.aStarSearch(e,null,s,g6);var n=this.nodeManager.getAllNodes(),o,a=[];for(var h in n)o=n[h],!(o.x===r&&o.y===i)&&o.closed&&a.push(o);a.sort(function(f,c){var d=f.sn,v=c.sn;return d>v?1:d<v?-1:0});for(var u=0,l=a.length;u<l;u++)o=a[u],t.push({x:o.x,y:o.y,cost:o.g});return t};const y6=$t.random,T6=$t.diagonal,C6=$t.straight,S6=$t.line,E6=$t["A*"],P6=$t["A*-line"],M6=$t["A*-random"];var A6=function(s,t,e){for(var r=s.board,i,n,o,a=t,h,u,l=[];a.preNodes.length>0;)switch(l.push(a),u=a.preNodes.length,e){case E6:case P6:case M6:h=a.preNodes[0],a=h;break;case y6:h=u===1?a.preNodes[0]:a.preNodes[Ff(0,u-1)],a=h;break;case T6:for(var f=0;f<u;f++)if(h=a.preNodes[f],n=r.getNeighborTileDirection(a,h),n!==i){i=n;break}a=h;break;case C6:for(f=0;f<u&&(h=a.preNodes[f],n=r.getNeighborTileDirection(a,h),n!==i);f++);i=n,a=h;break;case S6:if(o===void 0&&(o=t.angleTo(s)),u===1)h=a.preNodes[0],a=h,o=t.angleTo(a);else{h=a.preNodes[0];for(var c=Math.abs(t.angleTo(h)-o),d,v,f=1;f<u;f++)d=a.preNodes[f],v=Math.abs(t.angleTo(d)-o),v<c&&(h=d);a=h}break}return l.reverse()},R6=function(s,t){if(t===void 0&&(t=[]),this.board===void 0)return t;var e=this.nodeManager;if(e===void 0)return t;var r=e.getNode(this.chessData.tileXYZ,!1),i=e.getNode(s,!1);if(r===null||i===null)return t;for(var n=A6(r,i,this.pathMode),o,a=0,h=n.length;a<h;a++)o=n[a],t.push({x:o.x,y:o.y,cost:o.g});return t};const O6=$t.PATH_MODE,L6=$t.INFINITY;var b6=function(s,t,e,r){if(e===void 0&&(e=!0),r===void 0&&(r=[]),this.board===null||t!==L6&&t<=0)return r;var i=this.chessData.tileXYZ;this.aStarSearch(i,s,t,O6);var n=this.nodeManager,o=e?n.closestNode:n.getNode(s);return o===null?r:this.getPath(o,r)},w6=function(s,t,e){if(this.nodeManager===void 0)return null;var r=this.nodeManager.getNode(s,t);return r===null?null:(e===void 0&&(e=!0),e?r.g:r.cost)};const F6={aStarSearch:v6,getCost:p6,findArea:x6,getPath:R6,findPath:b6,tileXYToCost:w6},D6=$t.BLOCKER,I6=$t.INFINITY;class tc extends Qt{constructor(t,e){hs(t)&&(e=t,t=void 0),super(t,{eventEmitter:!1}),this.setChess(t),this.nodeManager=void 0,this.resetFromJSON(e)}resetFromJSON(t){var e=K(t,"costCallback",void 0),r=K(t,"costCallbackScope",void 0);return e===void 0&&(e=K(t,"cost",1)),this.setOccupiedTest(K(t,"occupiedTest",!1)),this.setBlockerTest(K(t,"blockerTest",!1)),this.setEdgeBlockerTest(K(t,"edgeBlockerTest",!1)),this.setCostFunction(e,r),this.setPathMode(K(t,"pathMode",0)),this.setCacheCostMode(K(t,"cacheCost",!0)),this.setWeight(K(t,"weight",10)),this.setShuffleNeighborsMode(K(t,"shuffleNeighbors",!1)),this}shutdown(t){this.isShutdown||(this.nodeManager!==void 0&&this.nodeManager.destroy(),this.chessData=void 0,super.shutdown(t))}get gameObject(){return this.parent}setChess(t){return t?(this.chessData=_n(t),this.parent!==t&&(this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.setParent(t),this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))):(this.setParent(),this.chessData=void 0),this}setCostFunction(t,e){return this.costCallback=t,this.costCallbackScope=e,this}setPathMode(t){return typeof t=="string"&&(t=$t[t]),this.pathMode=t,this}setCacheCostMode(t){return t===void 0&&(t=!0),this.cacheCost=t,this}setOccupiedTest(t){return t===void 0&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return t===void 0&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return t===void 0&&(t=!0),this.edgeBlockerTest=t,this}setWeight(t){return this.weight=t,this}setShuffleNeighborsMode(t){return t===void 0&&(t=!0),this.shuffleNeighbors=t,this}get BLOCKER(){return D6}get INFINITY(){return I6}get board(){return this.chessData.board}}Object.assign(tc.prototype,F6);ri.register("pathFinder",function(s,t){return new tc(s,t)});Ue(window,"RexPlugins.Board.PathFinder",tc);var B6=function(s,t){if(this.occupiedTest||this.blockerTest||this.edgeBlockerTest)for(var e=this.chessData.tileXYZ.z,r,i=1,n=s.length;i<n;i++){if(r=s[i],this.occupiedTest&&this.board.contains(r.x,r.y,e)||this.blockerTest&&this.board.hasBlocker(r.x,r.y))return!1;this.edgeBlockerTest}return this.preTestCallback?this.preTestCallbackScope?this.preTestCallback.call(this.preTestCallbackScope,s,t,this):this.preTestCallback(s,t,this):!0},G6=function(s,t){return typeof this.costCallback=="number"?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,s,this,t):this.costCallback(s,this,t)},Y6=function(s){if(this.cone===void 0)return!0;var t=this.board,e=this.chessData.tileXYZ;return this.coneMode===0?t.isDirectionInCone(e,s,this.face,this.cone):t.isAngleInCone(e,s,this.faceAngle,this.coneRad)};const xo={BLOCKER:null,INFINITY:void 0},N6=xo.BLOCKER,X6=xo.INFINITY;var z6=function(s,t){if(this.preTest(s,t)===!1)return!1;if(this.costCallback===void 0)return!0;for(var e=this.chessData.tileXYZ,r,i,n=!1,o=1,a=s.length;o<a;o++)if(r=s[o],!Hn(e,r)){if(n)return!1;if(i=this.getCost(r,s),i===N6){n=!0;continue}if(t!==X6&&(t-=i,t<0))return!1}return!0},V6=function(s,t){if(s.length!==t.length)return!1;for(var e=0,r=s.length;e<r;e++)if(!Hn(s[e],t[e]))return!1;return!0};const U6=xo.INFINITY,ph=.001;var W6=function(s,t,e){if(t!==U6&&t<=0)return!1;var r=this.board,i=r.chessToTileXYZ(s);if(!this.isInCone(i))return!1;e===void 0&&(e=this.chessData.tileXYZ),this.debugLog&&console.log("Visible test from ("+e.x+","+e.y+") to ("+i.x+","+i.y+")"),ks||(ks=[],Cr=[]);var n=r.tileXYToWorldXY(e.x,e.y,!0),o=n.x,a=n.y;n=r.tileXYToWorldXY(i.x,i.y,!0);var h=n.x,u=n.y,l=Tl(o,a,h,u),f,c,d;l+=Math.PI/2,f=ph*Math.cos(l),c=ph*Math.sin(l);var v=o+f,p=a+c,g=h+f,m=u+c;if(r.lineToTileXYArray(v,p,g,m,ks),this.debugLog&&console.log("Line 0: "+JSON.stringify(ks)),d=this.isPathVisible(ks,t),d)return ks.length=0,bg(this.debugGraphics,this.debugVisibleLineColor,o,a,h,u),!0;l+=Math.PI,f=ph*Math.cos(l),c=ph*Math.sin(l);var v=o+f,p=a+c,g=h+f,m=u+c;return r.lineToTileXYArray(v,p,g,m,Cr),this.debugLog&&console.log("Line 1: "+JSON.stringify(Cr)),V6(ks,Cr)||(d=this.isPathVisible(Cr,t)),ks.length=0,Cr.length=0,bg(this.debugGraphics,d?this.debugVisibleLineColor:this.debugInvisibleLineColor,o,a,h,u),d},bg=function(s,t,e,r,i,n){s&&t!==void 0&&s.lineStyle(1,t,1).lineBetween(e,r,i,n)},ks,Cr,H6=function(s,t,e,r){if(se(s)){hs(t)?(r=e,e=t,t=void 0):se(t)&&(r=t,t=void 0,e=void 0),se(e)&&(r=e,e=void 0),r===void 0&&(r=[]);for(var i,n=0,o=s.length;n<o;n++)i=s[n],this.isInLOS(i,t,e)&&r.push(i);return r}else{var i=s;return this.isInLOS(i,t,e)}},k6=function(s,t,e){hs(s)?(e=t,t=s,s=void 0):se(s)&&(e=s,t=void 0,s=void 0),se(t)&&(e=t,t=void 0),e===void 0&&(e=[]);for(var r=this.board,i=this.chessData.tileXYZ,n,o,a,h=1;;){o=!1,a=!1,r.ringToTileXYArray(i,h,gh);for(var u=0,l=gh.length;u<l;u++)n=gh[u],r.contains(n.x,n.y)&&(a=!0,this.isInLOS(n,s,t)&&(o=!0,e.push(n)));if(h++,gh.length=0,!this.perspectiveEnable&&!o){if(!o)break}else if(!a)break}return e},gh=[];const $6={preTest:B6,getCost:G6,isInCone:Y6,isPathVisible:z6,isInLOS:W6,LOS:H6,findFOV:k6},Z6=xo.BLOCKER,K6=xo.INFINITY;class ec extends Qt{constructor(t,e){hs(t)&&(e=t,t=void 0),super(t,{eventEmitter:!1}),this.setChess(t),this.resetFromJSON(e)}resetFromJSON(t){var e=K(t,"occupiedTest",!1),r=K(t,"blockerTest",!1),i=K(t,"edgeBlockerTest",!1),n=K(t,"preTestCallback",void 0),o=K(t,"preTestCallbackScope",void 0),a=K(t,"costCallback",void 0),h=K(t,"costCallbackScope",void 0);return a===void 0&&(a=K(t,"cost",void 0)),this.setFace(K(t,"face",0)),this.setConeMode(K(t,"coneMode",0)),this.setCone(K(t,"cone",void 0)),this.setOccupiedTest(e),this.setBlockerTest(r),this.setEdgeBlockerTest(i),this.setPreTestFunction(n,o),this.setCostFunction(a,h),this.setPerspectiveEnable(K(t,"perspective",!1)),this.setDebugGraphics(K(t,"debug.graphics",void 0)),this.setDebugLineColor(K(t,"debug.visibleLineColor",65280),K(t,"debug.invisibleLineColor",16711680)),this.setDebugLog(K(t,"debug.log",!1)),this}shutdown(t){this.isShutdown||(this.debugGraphics=void 0,this.chessData=void 0,super.shutdown(t))}setChess(t){return t?(this.chessData=_n(t),this.parent!==t&&(this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.setParent(t),this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))):(this.setParent(),this.chessData=void 0),this}get face(){return this._face}set face(t){if(!this.chessData){this._face===void 0&&(this._face=0);return}if(t=this.board.grid.directionNormalize(t),this._face=t,this.coneMode!==0){var e=this.board.angleToward(this.chessData.tileXYZ,t);this.faceAngle=sT(e)}}setFace(t){return this.face=t,this}get cone(){return this._cone}set cone(t){this._cone=t,t!==void 0&&(this.coneMode===0||(this.coneRad=CT(t)))}setConeMode(t){return typeof t=="string"&&(t=J6[t]),this.coneMode=t,this}setCone(t){return this.cone=t,this}setOccupiedTest(t){return t===void 0&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return t===void 0&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return t===void 0&&(t=!0),this.edgeBlockerTest=t,this}setCostFunction(t,e){return this.costCallback=t,this.costCallbackScope=e,this}setPreTestFunction(t,e){return this.preTestCallback=t,this.preTestCallbackScope=e,this}setPerspectiveEnable(t){return t===void 0&&(t=!0),this.perspectiveEnable=t,this}setDebugGraphics(t){return this.debugGraphics=t,this}setDebugLineColor(t,e){return this.debugVisibleLineColor=t,this.debugInvisibleLineColor=e,this}setDebugLog(t){return t===void 0&&(t=!0),this.debugLog=t,this}clearDebugGraphics(){return this.debugGraphics&&this.debugGraphics.clear(),this}get BLOCKER(){return Z6}get INFINITY(){return K6}get board(){return this.chessData.board}}const J6={direction:0,angle:1};Object.assign(ec.prototype,$6);ri.register("fieldOfView",function(s,t){return new ec(s,t)});Ue(window,"RexPlugins.Board.FieldOfView",ec);var ET=function(s,t,e){return{x:s,y:t,direction:e}};const ic={BLOCKER:null,STOP:-1},Q6=ic.STOP;var j6=function(s,t){if(t===void 0&&(t=[]),this.board===null)return t;for(var e=this.chessData.tileXYZ,r=ET(e.x,e.y,this.face),i,n;s>0&&(i=this.getNextTile(r,this.preTileXY),i!==null);)n=this.getCost(i,r),n===Q6&&(n=s),i.cost=n,s>=n&&t.push(i),s-=n,this.preTileXY=r,r=i;for(var o=t.length-1;o>=0&&t[o].cost===0;o--)t.length=o;return t},q6=function(s,t){for(var e=this.board,r=e.grid.allDirections,i=null,n=null,o=[],a,h=null,u=0,l=r.length;u<l;u++)a=e.getNeighborTileXY(s,r[u],!0),a!==null&&e.contains(a.x,a.y,this.pathTileZ)&&(h=ET(a.x,a.y,r[u]),r[u]===s.direction&&(i=h),t!==void 0&&Hn(a,t)?n=h:o.push(h));var f;if(n===null&&o.length===0)f=null;else if(n===null&&o.length===1)f=o[0];else if(n!==null&&o.length===0)f=n;else switch(this.pickMode){case 1:n!==null&&o.push(n),f=Df(o);break;default:i!==null?f=i:f=Df(o);break}return f},_6=function(s,t){return typeof this.costCallback=="number"?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,s,t,this):this.costCallback(s,t,this)};const t8={getPath:j6,getNextTile:q6,getCost:_6},e8=ic.BLOCKER,i8=ic.STOP;class sc extends Qt{constructor(t,e){super(t,{eventEmitter:!1}),this.chessData=_n(t),this.resetFromJSON(e)}resetFromJSON(t){this.preTileXY=K(t,"preTileXY",void 0);var e=K(t,"costCallback",void 0),r=K(t,"costCallbackScope",void 0);return e===void 0&&(e=K(t,"cost",1)),this.setFace(K(t,"face",0)),this.setPathMode(K(t,"pathMode",0)),this.setPathTileZ(K(t,"pathTileZ",0)),this.setCostFunction(e,r),this}shutdown(t){this.isShutdown||(this.chessData=void 0,super.shutdown(t))}setFace(t){return t=this.board.grid.directionNormalize(t),this.face=t,this}setPathMode(t){return typeof t=="string"&&(t=s8[t]),this.pathMode=t,this}setCostFunction(t,e){return this.costCallback=t,this.costCallbackScope=e,this}setPathTileZ(t){return t===void 0&&(t=!0),this.pathTileZ=t,this}get BLOCKER(){return e8}get STOP(){return i8}get board(){return this.chessData.board}}Object.assign(sc.prototype,t8);const s8={forward:0,random:1};ri.register("monopoly",function(s,t){return new sc(s,t)});Ue(window,"RexPlugins.Board.Monopoly",sc);var n8=function(s,t,e,r){var i=this.grid;return i.saveOrigin(),i.setOriginPosition(this.x,this.y),this.board.addChess(s,t,e,r,!0),Hr(s)&&(s=this.board.uidToChess(s)),this.add(s),i.restoreOrigin(),this},r8=function(s,t,e,r,i){return this.board.removeChess(s,t,e,r,i),this},a8=function(s){return this.board.removeAllChess(s),this},o8=function(s,t,e){return this.mainBoardRef.set(s,t,e),s&&this.lastMainBoardRef.set(s,t,e),this},h8=function(s,t,e,r){if(!s)return!1;r===void 0&&(r=this.tileXYZMap);var i,n,o;for(var a in r){if(i=r[a],n=s.offset(i,t,e,!0),!s.contains(n.x,n.y))return!1;if(this.putTestCallback){Ca.x=n.x,Ca.y=n.x,Ca.z=i.z;var h=this.board.uidToChess(a);this.putTestCallbackScpe?o=this.putTestCallback.call(this.putTestCallbackScpe,Ca,s,h):o=this.putTestCallback(Ca,s,h)}else o=s.contains(n.x,n.y,i.z);if(o)return!1}return!0},Ca={x:0,y:0,z:0},l8=function(s,t,e,r){if(!s)return this;if(t===void 0){var i=s.worldXYToTileXY(this.x,this.y,!0);t=i.x,e=i.y}if(r===void 0&&(r=!0),this.pullOutFromMainBoard(),!this.canPutOnMainBoard(s,t,e))return this;this.setMainBoard(s,t,e);var n=this.tileXYZMap,o,a;for(var h in n)o=n[h],h=parseInt(h),a=s.offset(o,t,e,!0),s.addChess(h,a.x,a.y,o.z,!1);return r&&this.alignToMainBoard(s,t,e),this},u8=function(){var s=this.mainBoard;if(s===null)return this;var t=this.tileXYZMap;for(var e in t)s.removeChess(parseInt(e));return this.setMainBoard(null),this},f8=function(){var s=this.lastMainBoardRef.mainBoard,t=this.lastMainBoardRef.tileX,e=this.lastMainBoardRef.tileY;return this.putOnMainBoard(s,t,e,!1),this},d8=function(s,t){if(!s)return!1;var e;for(var r in this.tileXYZMap)if(e=this.board.uidToChess(r),s.isOverlappingPoint(e.x,e.y,t))return!0;return!1},c8=function(s,t,e){if(!s)return this;if(t===void 0){var r=s.worldXYToTileXY(this.x,this.y,!0);t=r.x,e=r.y}return s.gridAlign(this,t,e),this},wg=function(s){if(this.input.enable&&s.isDown){this.input.pointer===null&&(this.input.pointer=s);var t=v8.call(this,s);t&&p8.call(this,s)}},v8=function(s){var t=this.grid;t.saveOrigin(),t.setOriginPosition(this.x,this.y);var e=this.board.worldXYToTileXY(s.x,s.y,!0),r=e.x,i=e.y;t.restoreOrigin(),this.input.tilePosition.x=r,this.input.tilePosition.y=i;var n=this.board.tileXYToChessArray(r,i,Fg),o=n.length>0;if(o){for(var a,h=0,u=n.length;h<u;h++)a=n[h],a.emit&&a.emit("miniboard.pointerdown",s),this.emit("gameobjectdown",s,a);this.emit("pointerdown",s,this)}return Fg.length=0,o},p8=function(s){var t=this.input.drag;if(t.state!==1){var e=t.position;e.x=s.x-this.x,e.y=s.y-this.y,t.state=1,this.emit("dragstart",s,e.x,e.y)}},Fg=[],PT=function(s){var t=this.input.drag;if(t.state!==0){s===void 0&&(s=this.input.pointer);var e=t.position,r=s.x-e.x,i=s.y-e.y;return t.state=0,this.emit("dragend",s,r,i),this}},Dg=function(s){this.input.enable&&(g8.call(this,s),PT.call(this,s),this.input.pointer===s&&(this.input.pointer=null))},g8=function(s){var t=this.grid;t.saveOrigin(),t.setOriginPosition(this.x,this.y);var e=this.board.worldXYToTileXY(s.x,s.y,!0),r=e.x,i=e.y;t.restoreOrigin(),this.input.tilePosition.x=r,this.input.tilePosition.y=i;var n=this.board.tileXYToChessArray(r,i,Ig),o=n.length>0;if(o){for(var a,h=0,u=n.length;h<u;h++)a=n[h],a.emit&&a.emit("miniboard.pointerup",s),this.emit("gameobjectup",s,a);this.emit("pointerup",s,this)}return Ig.length=0,o},Ig=[],Bg=function(s){this.input.enable&&(m8.call(this,s),x8.call(this,s))},m8=function(s){var t=this.grid;t.saveOrigin(),t.setOriginPosition(this.x,this.y);var e=this.board.worldXYToTileXY(s.x,s.y,!0),r=e.x,i=e.y;if(t.restoreOrigin(),!(this.input.tilePosition.x===r&&this.input.tilePosition.y===i)){this.input.tilePosition.x=r,this.input.tilePosition.y=i;var n=this.board.tileXYToChessArray(r,i,Gg),o=n.length>0;if(o){for(var a,h=0,u=n.length;h<u;h++)a=n[h],a.emit&&a.emit("miniboard.pointermove",s),this.emit("gameobjectmove",s,a);this.emit("pointermove",s,this)}else this.input.pointer===s&&(this.input.pointer=null);Gg.length=0,this.input.drag.state===0&&(this.input.pointer===s?o||(this.input.pointer=null):this.input.pointer===null&&(this.input.pointer=s))}},x8=function(s){var t=this.input.drag;if(t.state!==0){var e=t.position,r=s.x-e.x,i=s.y-e.y;this.emit("drag",s,r,i)}},Gg=[],y8=function(s){return s===void 0&&(s=!0),this.input||(this.input={enable:!0,tilePosition:{x:void 0,y:void 0},pointer:void 0,drag:{enable:!1,state:0,position:{x:void 0,y:void 0}}},this.scene.input.on("pointerdown",wg,this),this.scene.input.on("pointerup",Dg,this),this.scene.input.on("pointermove",Bg,this),this.once("destroy",function(){this.scene&&(this.scene.input.off("pointerdown",wg,this),this.scene.input.off("pointerup",Dg,this),this.scene.input.off("pointermove",Bg,this))},this)),this.input.enable=s,s||(this.input.pointer=null),this},T8=function(s){return s===void 0&&(s=!0),this.setInteractive(),this.input.drag.enable=s,s||(this.input.drag.state=0),this},MT=function(s,t,e){s===void 0?s=1:typeof s=="string"&&(s=C8[s]),t===void 0&&(t=this.tileXYZMap),e===void 0&&(e={});var r,i;for(var n in t)r=t[n],i=this.board.mirror(r,s),i.z=r.z,e[n]=i;return e};const C8={x:1,y:2,"x&y":3};var S8=function(s){if(this.mainBoard===null)return!0;var t=MT.call(this,s);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,t)},Ja=function(s){this.removeAllChess();var t;for(var e in s)t=s[e],e=parseInt(e),this.addChess(e,t.x,t.y,t.z,!1);return this},E8=function(s){var t=this.mainBoard!=null;t&&this.pullOutFromMainBoard();var e=MT.call(this,s);if(t){var r=this.lastMainBoardRef.mainBoard,i=this.lastMainBoardRef.tileX,n=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(r,i,n,e),this.lastTransferResult&&Ja.call(this,e),this.putBack()}else this.lastTransferResult=!0,Ja.call(this,e);return this},AT=function(s,t,e){s===void 0&&(s=0),t===void 0&&(t=this.tileXYZMap),e===void 0&&(e={});var r,i;for(var n in t)r=t[n],i=this.board.rotate(r,s),i.z=r.z,e[n]=i;return e},P8=function(s){if(this.mainBoard===null)return!0;var t=AT.call(this,s);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,t)},M8=function(s){if(s===0)return this;var t=this.mainBoard!=null;t&&this.pullOutFromMainBoard();var e=AT.call(this,s);if(t){var r=this.lastMainBoardRef.mainBoard,i=this.lastMainBoardRef.tileX,n=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(r,i,n,e),this.lastTransferResult&&Ja.call(this,e),this.putBack()}else this.lastTransferResult=!0,Ja.call(this,e);return this.lastTransferResult&&this.setFace(this.face+s),this},A8=function(s){return s-=this.face,this.canRotate(s)},R8=function(s){return s-=this.face,this.rotate(s),this},O8=function(s,t){s===void 0&&(s=this.tileXYZMap),t===void 0?t={}:t===!0&&(t=L8);var e=1/0,r=-1/0,i=1/0,n=-1/0,o;for(var a in this.tileXYZMap)o=this.tileXYZMap[a],o.x<e&&(e=o.x),o.x>r&&(r=o.x),o.y<i&&(i=o.y),o.y>n&&(n=o.y);return t.minX=e,t.minY=i,t.maxX=r,t.maxY=n,t},L8={},b8=function(s,t,e,r){e===void 0&&(e=this.tileXYZMap),r===void 0&&(r={});var i,n;for(var o in e)i=e[o],n=this.board.offset(i,s,t),n.z=i.z,r[o]=n;return r},w8=function(s,t){switch(s){case"center":s=.5,t=.5;break;case"top-left":case"left-top":s=0,t=0;break}s===void 0&&(s=.5),t===void 0&&(t=s);var e=O8.call(this,void 0,!0),r=-Math.floor(zn(e.minX,e.maxX,s)),i=-Math.floor(zn(e.minY,e.maxY,t));if(r!==0||i!==0){var n=b8.call(this,r,i);Ja.call(this,n);var o=this.board.tileXYToWorldXY(r,i),a=this.board.tileXYToWorldXY(0,0);this.setPosition(this.x+(a.x-o.x),this.y+(a.y-o.y))}return this};const F8={addChess:n8,removeChess:r8,removeAllChess:a8,pullOutFromMainBoard:u8,canPutOnMainBoard:h8,putOnMainBoard:l8,putBack:f8,isOverlapping:d8,alignToMainBoard:c8,setInteractive:y8,setDraggable:T8,dragEnd:PT,setMainBoard:o8,canMirror:S8,mirror:E8,canRotate:P8,rotate:M8,canRotateTo:A8,rotateTo:R8,setOrigin:w8};class Yg{constructor(t){this.miniBoard=t,this.set(null)}set(t,e,r){t||(t=null,e=null,r=null),this.mainBoard=t,this.tileX=e,this.tileY=r}}class nc extends Vi{constructor(t,e,r,i){super(t,e,r,0,0),this.type="rexMiniBoard";var n={isBoard:!1,grid:K(i,"grid",void 0),infinity:!0,wrap:!1};this.board=new Qd(t,n),this.mainBoardRef=new Yg,this.lastMainBoardRef=new Yg,this.resetFromJSON(i)}resetFromJSON(t){this.setFace(K(t,"face",0));var e=K(t,"draggable",void 0);return e!==void 0&&this.setDraggable(e),this.setPutTestCallback(K(t,"putTestCallback",void 0),K(t,"putTestCallbackScpe",void 0)),this.lastTransferResult=K(t,"lastTransferResult",void 0),this}destroy(t){this.scene&&(this.clear(!t),this.board.shutdown(t),this.board=void 0,this.setPutTestCallback(void 0,void 0),super.destroy(t))}setFace(t){return this.face=this.board.grid.directionNormalize(t),this}get mainBoard(){return this.mainBoardRef.mainBoard}get tileX(){return this.mainBoardRef.tileX}get tileY(){return this.mainBoardRef.tileY}get grid(){return this.board.grid}get tileXYZMap(){return this.board.boardData.UIDToXYZ}setPutTestCallback(t,e){return this.putTestCallback=t,this.putTestCallbackScpe=e,this}}Object.assign(nc.prototype,F8);ri.register("miniBoard",function(s,t,e){var r=new nc(this.scene,s,t,e);return this.scene.add.existing(r),r});Ue(window,"RexPlugins.Board.MiniBoard",nc);var D8=function(s,t,e){e===void 0&&(e=[]);for(var r=s.grid.mode,i,n,o=-t;o<=t;o++){i=Math.max(-t,-o-t),n=Math.min(t,-o+t);for(var a=i;a<=n;a++)e.push(Oe(r,o,a,-o-a))}return e},I8=function(s,t,e,r){r===void 0&&(r=[]);for(var i=s.grid.mode,n,o,a=0;a<=e;a++){t===1?(n=e-a,o=e):(n=0,o=e-a);for(var h=n;h<=o;h++)r.push(Oe(i,a,h,-a-h))}return r},B8=function(s,t,e,r,i){i===void 0&&(i=[]);var n=s.grid.mode;switch(t){case 1:for(var o=0;o<=e;o++)for(var a=0;a<=r;a++)i.push(Oe(n,a,-a-o,o));break;case 2:for(var h=0;h<=e;h++)for(var o=0;o<=r;o++)i.push(Oe(n,-h-o,h,o));break;default:for(var a=0;a<=e;a++)for(var h=0;h<=r;h++)i.push(Oe(n,a,h,-a-h));break}return i};const G8={hexagon:D8,triangle:I8,parallelogram:B8};var Y8=function(s,t,e,r,i,n,o,a){r===void 0&&i===void 0&&(r=16777215),i===void 0?n=0:n===void 0&&(n=2),a===void 0&&(a="round"),o===void 0&&(o=!1),Es=N8(e,Es),Xg(e,-Es.left,-Es.top);var h=Es.right-Es.left,u=Es.bottom-Es.top;o?(h+=n,u+=n,Xg(e,n/2)):X8(e,Es,n);var l=s.sys.textures.createCanvas(t,Math.ceil(h),Math.ceil(u)),f=l.getCanvas(),c=l.getContext();Ch(f,c,e,dt(r,f,c),dt(i,f,c),n,a),l.refresh()},N8=function(s,t){t===void 0&&(t={});for(var e=1/0,r=1/0,i=-1/0,n=-1/0,o=0,a=s.length;o<a;o++){var h=s[o],u=h.x,l=h.y;e=Math.min(e,u),r=Math.min(r,l),i=Math.max(i,u),n=Math.max(n,l)}return t.left=e,t.top=r,t.right=i,t.bottom=n,t},X8=function(s,t,e){if(e===0)return s;for(var r=t.right-t.left,i=t.bottom-t.top,n=r/2,o=i/2,a=e/2,h=0,u=s.length;h<u;h++){var l=s[h];l.x=Ng(l.x,n,a),l.y=Ng(l.y,o,a)}return s},Ng=function(s,t,e){return s<t?s+e:s>t?s-e:s},Xg=function(s,t,e){if(e===void 0&&(e=t),t===0&&e===0)return s;for(var r=0,i=s.length;r<i;r++){var n=s[r];n.x+=t,n.y+=e}return s},Es,z8=function(s,t,e,r,i,n,o){typeof n=="string"&&(o=n,n=void 0),n===void 0&&(n=!0),o===void 0&&(o="miter"),Y8(s.scene,t,s.getGridPoints(0,0,!0),e,r,i,n,o)};class V8 extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new ri(t),this.hexagonMap=G8,this.createTileTexture=z8}start(){var t=this.scene.sys.events;t.on("destroy",this.destroy,this)}}function U8(s){const t=Ni([Mt,Vn]),e=Os(t),r=nn(t);return ln(i=>{const n=e(i),o=r(i),a=t(i);return n.forEach(h=>{const{x:u,y:l}=s.tileXYToWorldXY(Mt.x[h],Mt.y[h]),f=ht(i,ka,h)?s.scene.add.image(u,l,"portraits",Vn.frame[h]).setDepth(pt.Icons).setAlpha(.7).setOrigin(.5,.6):s.scene.add.image(u,l,"portraits",Vn.frame[h]).setDepth(pt.Icons).setOrigin(.6,.6).setScale(.8);Yi.set(h,f)}),o.forEach(h=>{var u;(u=Yi.get(h))==null||u.destroy()}),a.forEach(h=>{const u=It.get(h);if(u&&u.active){const l=s.tileXYToChessArray(Mt.x[h],Mt.y[h]).filter(c=>!(c instanceof At)&&c!==u),f=Yi.get(h);if(!f||(f.setX(u.x).setY(u.y),u.destroyScheduled))return;u instanceof Kt&&u.buildingTurns>0||ht(i,Le,h)?f.setAlpha(.5):f.setAlpha(l!=null&&l.length?.7:1)}}),i})}const W8=s=>U8(s);class H8{constructor(t){k(this,"phaser");k(this,"lightningSprite");this.gameScene=t,this.phaser=new po,this.lightningSprite=t.add.sprite(0,0,"lightning").setScale(.7).setDepth(pt.StatusEffects).setVisible(!1),Rt.on(Ot.NewTurn,e=>this.nextTick(e))}destroy(){Rt.off(Ot.NewTurn),this.lightningSprite.destroy()}nextTick(t){if(t===0||t%35!==0)return;const e=this.gameScene.board,r={x:this.phaser.integerInRange(0,ct.width-1),y:this.phaser.integerInRange(0,ct.height-1)};this.lightningStrike(e,r)}lightningStrike(t,e){const{x:r,y:i}=t.tileXYToWorldXY(e.x,e.y),n=t.getCell(e),o=this.getTargetChess(t,e);this.lightningSprite.setPosition(r,i-ct.grid.cellHeight/3).setVisible(!0).play("lightning").once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>{this.lightningSprite.setVisible(!1),[ft.HomeBase,ft.Mine,ft.MineAlt,ft.MonsterGenerator,ft.PowerTile,ft.Water].includes(n.getFrame())||(n.burnt=n.getFrame(),this.gameScene.scene.get(nt.UI).queueEffect(5,["restoreBurntCell",e,n.burnt]),o.forEach(h=>{h instanceof Jt&&h.bridgeBuilt?h.bridgeBuilt=!1:t.selected===h&&(t.selected instanceof Gt?this.gameScene.gameOver():h.destroy(),t.selected=void 0)}))})}getTargetChess(t,e){return t.tileXYToChessArray(e.x,e.y).filter(r=>!(r instanceof $a||r instanceof yl||r instanceof tn||r instanceof ss||r instanceof vi))}}class k8{createMap(t,e){const r=this.createRiver(e);new Array(Phaser.Math.RND.integerInRange(1,4)+ct.currentLevel).fill(0).forEach(()=>{const o=e.cells.filter(a=>!a.isRaised&&r.every(h=>!kt(h.rexChess.tileXYZ,a.tileXY)));o[Phaser.Math.RND.integerInRange(0,o.length-1)].raise()});const i=new Gt(e);t.data.set("player",i),e.setSelected(i),t.scene.get(nt.UI).reset(),new ss(e,i.rexChess.tileXYZ),new Array(2+ct.currentLevel-1).fill(0).map(()=>new gi(e)),new Array(3).fill(0).forEach(()=>new wi(e)),new yl(e),new $a(e),new Array(this.getMonsterGeneratorAmount(ct.currentLevel)).fill(0).map(()=>new vi(e))}getMonsterGeneratorAmount(t){const e=Ea.map((r,i)=>i+1).filter((r,i)=>!(i%2));return e.indexOf(t-(e.includes(t)?0:1))+1}createRiver(t){const e={x:Phaser.Math.RND.integerInRange(1,Math.sqrt(hi())-2),y:0},r={x:Phaser.Math.RND.integerInRange(2,Math.sqrt(hi())-2),y:Math.sqrt(hi())-2},i=[],n=new gi(t,e),o=t.scene.rexBoard.add.pathFinder(n,{blockerTest:!0}),a={x:Phaser.Math.RND.integerInRange(2,Math.sqrt(hi())-2),y:Math.floor(Math.sqrt(hi())/2)};return i.push(...o.findPath(a).map(h=>new Jt(t,{x:h.x,y:h.y}))),i.push(...o.setChess(i[i.length-1]).findPath(r).map(h=>new Jt(t,{x:h.x,y:h.y}))),i}}async function zg(s,t){if(s.cameras.main.zoom!==t)return new Promise(e=>s.cameras.main.zoomTo(t,at(100),"Linear",!0,(r,i)=>i===1&&e()))}function Qu(s,t){return new Promise(e=>s.cameras.main.pan(t.x,t.y,at(100),"Linear",!0,(r,i)=>i===1&&e()))}class ju extends Sl{constructor(e,r){super(e,r);k(this,"uiScene");k(this,"_selected");k(this,"cells",[]);k(this,"maxBridges",2);k(this,"maxTowers",2);this.uiScene=e.scene.get(nt.UI);const i=e.scene.get(nt.Game),n=e.scene.get(nt.Editor);r.skipCells||this.initCells(),this.on("gameobjectup",(o,a)=>{a instanceof Yt&&!i.isEditor&&a!==this.selected&&this.setSelected(a)}),this.setInteractive().on("tile1tap",(o,a)=>{i.isEditor?n.handleTap(this,a):this.performPlayerMove(a)}),this.setInteractive().on("tile2tap",this.tap2),this.on("kickout",(o,a,h)=>{o instanceof ge&&a instanceof ge&&(a.destroyScheduled||a.destroy())}),this.touchZone.setDepth(Tt.BoardTouchZone)}get selected(){return this._selected}set selected(e){this._selected=e,this.uiScene.btnDisbandPiece.disabled=!this._selected||this._selected instanceof Gt}get world(){return this.scene.world}initCells(){const e=this.scene.scene.get(nt.Game);this.forEachTileXY(r=>{this.cells.push(new qy(this,{...r},e))})}getCell(e){return this.cells.find(r=>kt(r.tileXY,e))}refreshCells(){const e=this.scene;e&&(e.cellGfxFree.clear(),e.cellGfxPlayerOwned.clear(),this.cells.forEach(r=>r.drawOutline()))}setSelected(e){var r,i,n;if(this.selected&&((i=(r=window.process)==null?void 0:r.env)!=null&&i.isTest||(n=Yi.get(this.selected.entity))==null||n.removePostPipeline(Gn),this.selected.hideMoveableArea()),this.selected=e,this.selected&&this.scene.needsScrolling&&!this.scene.cameras.main.worldView.contains(this.selected.x,this.selected.y)&&Qu(this.scene,this.selected),e){const o=Yi.get(e.entity);e.fortified=!1,o==null||o.setPostPipeline(Gn);try{(o==null?void 0:o.getPostPipeline(Gn)).setThickness(3).setOutlineColor(Jg)}catch{}e.showMoveableArea()}}performPlayerMove(e){var p,g;if(!this.selected||ht(this.world,ae,this.selected.entity)||kt(this.selected.rexChess.tileXYZ,e))return!1;const{x:r,y:i}=this.selected.rexChess.tileXYZ,o=this.tileXYToChessArray(r,i).find(m=>m instanceof wi);let a=this.tileXYToChessArray(e.x,e.y).filter(m=>!(m instanceof tn));const h=a==null?void 0:a.find(m=>m instanceof ge&&!m.destroyScheduled),u=a==null?void 0:a.find(m=>"passiveEffect"in m),l=a==null?void 0:a.find(m=>m instanceof wi),f=a==null?void 0:a.find(m=>m instanceof vi),c=a==null?void 0:a.find(m=>m instanceof Br);if(!this.premoveCheck(this.selected,h,f))return!1;if(!f&&h&&h.visible)if(this.performBattleMove(h,e,{x:r,y:i}))a=a.filter(x=>x!==h);else{!((p=this.selected)!=null&&p.destroyScheduled)&&((g=this.selected)!=null&&g.active)&&(ut(this.world,ae,this.selected.entity),this.checkAutoTurn());return}const d=this.scene,v=this.selected.moveToTile(e);this.selected instanceof Kt&&Kt.canBuildBridge(this,e)&&this.uiScene.showBuildDialog(this.selected,[{texture:"bridge",cost:Jt.cost,scale:{x:.25,y:.5}}],m=>{m.texture==="bridge"&&this.selected.buildBridge(e)}),v&&(!h&&(f!=null&&f.canBeAttacked(this.selected))&&ut(this.world,ei,f.entity,{enemy:this.selected.entity,originX:r,originY:i}),(!h||!h.visible)&&c&&ut(this.world,ei,c.entity,{enemy:this.selected.entity,originX:r,originY:i}),u&&this.executeItemPassive(this.selected,u,this.scene)&&(a=a.filter(m=>m!==u)),o&&ht(this.world,bi,o.entity)&&me(this.world,bi,o.entity),!d.isGameOver&&(l&&!ht(this.world,bi,l.entity)&&ut(this.world,bi,l.entity,{by:this.selected.entity}),ut(this.world,ae,this.selected.entity),this.checkAutoTurn()))}performBattleMove(e,r,i){return this.selected?(ht(this.world,n5,e.entity)?!0:e.battle(this.selected,i))?ht(this.world,Ee,this.selected.entity)?(me(this.world,Ee,this.selected.entity),!1):(this.selected instanceof Gt?this.scene.scene.get(nt.Game).gameOver():(this.selected.destroy(),this.selected=void 0),!1):ht(this.world,Ee,e.entity)?(me(this.world,Ee,e.entity),!1):(e.destroy(),!0):void 0}isHomeBaseOccupied(){const e=this.getHomebase();if(!e)return!0;const{x:r,y:i}=e.rexChess.tileXYZ;return this.tileXYToChessArray(r,i).filter(o=>!(o instanceof tn)).length>1}getHomebase(){return this.getAllChess().find(e=>e instanceof ss)}isClaimableTile(e){return!this.tileXYToChessArray(e.x,e.y).filter(i=>!(i instanceof tn)&&!(i instanceof wi)&&i!==this.selected&&("destroyScheduled"in i?!i.destroyScheduled:!0)).length}getMonsterGenerators(){return this.getAllChess().filter(e=>e instanceof vi)}getMonsters(){return this.getAllChess().filter(e=>e instanceof ge&&!e.destroyScheduled)}getItems(e){return this.getAllChess().filter(r=>"passiveEffect"in r&&!e?!0:r instanceof e)}getFarms(){return this.getAllChess().filter(e=>e instanceof zi)}getHive(){return this.getAllChess().find(e=>e instanceof Br)}getSawmills(){return this.getAllChess().filter(e=>e instanceof as)}getPowerTiles(e){return this.getAllChess().filter(r=>r instanceof wi&&(e&&ht(this.world,bi,r.entity)||!e))}getTowers(){return this.getAllChess().filter(e=>e instanceof $e)}getWaterTiles(e=!1){return this.getAllChess().filter(r=>r instanceof Jt&&(e?r.bridgeBuilt!==!1:!0))}getChessById(e){return this.getAllChess().find(r=>r.id===e)}getChessByEntity(e){return this.getAllChess().find(r=>r.entity===e)}getPlayerPieces(e){return this.getAllChess().filter(r=>r instanceof Yt&&(typeof e!="string"?r instanceof(e||Yt):r.id===e)&&!r.destroyScheduled)}getMines(e=!0){return this.getAllChess().filter(r=>r instanceof gi&&(e&&r.claimed||!e))}getPlayerTiles(){return this.getAllChess().filter(e=>e instanceof zd)}getFreeTile(e){const r=this.getRandomEmptyTileXY(e);return this.tileXYToChessArray(r.x,r.y).filter(n=>!(n instanceof At)).length>0?this.getFreeTile(e):r}destroy(){Rt.off(Ot.NewTurn),Rt.off(Ot.PlayerTileDestroyed),this.cells.forEach(e=>e.destroy()),super.destroy()}isValidBoard(){return _T(this.getAllChess(),[Gt,vi,wi,ss])}checkAutoTurn(){const e=this.getPlayerPieces();this.scene.time.delayedCall(at(140),()=>{if(e.length===1&&!e[0].fortified||e.length>1&&e.every(r=>ht(this.world,ae,r.entity)||r.fortified)&&!e.every(r=>r.fortified)){const r=e.find(i=>i instanceof Gt);if(r&&(r.destroyScheduled||!r.active))return;this.uiScene.updateTurn()}else{const r=e.find(i=>!ht(this.world,ae,i.entity)&&i!==this.selected&&!i.fortified);this.setSelected(r)}})}async performMonsterMoves(){const e=this.getMonsters();let r=0;for(const i of e)this.scene.cameras.main.worldView.contains(i.x,i.y)||(await zg(this.scene,.7),await Qu(this.scene,i)),await new Promise(n=>{var o;return(o=this.scene)==null?void 0:o.time.delayedCall(at(r*30),()=>{i.destroyScheduled||i.makeMove(),n()})}),r++;return new Promise(i=>{var n;(n=this.scene)==null||n.time.delayedCall(at(Math.max(e.length*100,300)+200),async()=>{await zg(this.scene,1),this.selected&&!this.scene.cameras.main.worldView.contains(this.selected.x,this.selected.y)&&await Qu(this.scene,this.selected),i()})})}async performTowerMoves(){const e=this.getTowers();return e.forEach((r,i)=>this.scene.time.delayedCall(at(i*20),()=>r.attack())),new Promise(r=>{this.scene.time.delayedCall(at(Math.max(e.length*20,this.maxTowers*20)),r)})}tap2(e,r){if(this.scene.scene.get(nt.Game).isEditor)return;const n=this.tileXYToChessArray(r.x,r.y),o=n.find(l=>l instanceof ke),a=n.find(l=>l instanceof gi),h=n.find(l=>l instanceof Kt),u=n.find(l=>l instanceof xe);o&&a&&!a.claimed&&a.claim(o),h&&this.uiScene.showBuildDialog(h,[...Kt.canBuildTower(this,r)?[{texture:"tiles",frame:ft.Tower,cost:$e.cost}]:[],...Kt.canBuildSawmill(this,r)?[{texture:"tiles",frame:ft.Sawmill,cost:as.cost}]:[]],l=>{l.frame===ft.Tower?h.buildTower(r):l.frame===ft.Sawmill&&h.buildSawmill(r)}),xe.canCultivate(this,r)&&this.uiScene.showBuildDialog(u,[{cost:0,texture:"icons",offset:{x:40,y:-20},frame:Nt.Farm}],l=>l.frame===Nt.Farm&&u.cultivate(r))}premoveCheck(e,r,i){var n;return!(r&&e instanceof xe||r&&((n=en.get(e.entity))==null?void 0:n.getPath(r.rexChess.tileXYZ).length)===0||this.selected&&i&&(r||!i.canBeAttacked(this.selected)))}executeItemPassive(e,r,i){if(r&&"passiveEffect"in r){const n=i.scene.get(nt.UI);return r.passiveEffect(e,this,n)&&r.destroy(),!0}return!1}}class $8 extends js.Scene{constructor(){super(nt.Game);k(this,"rexBoard");k(this,"board");k(this,"isGameOver",!1);k(this,"isEditor",!1);k(this,"devMode",{});k(this,"cellGfxFree");k(this,"cellGfxPlayerOwned");k(this,"world");k(this,"needsScrolling",!1);k(this,"phaser",new po);k(this,"mapGenerator");k(this,"systems");k(this,"hazards");k(this,"handleTurns",e=>{e%30===0&&this.board.getItems($a).length===0&&new $a(this.board),this.phaser.integerInRange(0,40)===7&&this.board.getItems(Lf).length===0&&new Lf(this.board)});this.mapGenerator=new k8}preload(){this.rexBoard=new V8(this,this.plugins,"rexBoard"),this.anims.create({key:"slam",frameRate:16,frames:this.anims.generateFrameNumbers("stun",{start:0,end:4}),repeat:2}),this.anims.create({key:"lightning",frameRate:24,frames:this.anims.generateFrameNumbers("lightning",{start:0,end:9})})}create(){var r;(r=this.devMode)==null||r.init(),this.needsScrolling=((ct.grid.cellHeight-5)*ct.height+ct.grid.y)*.5>window.innerHeight,this.cellGfxFree=this.add.graphics({lineStyle:{width:1,color:QT,alpha:1}}),this.cellGfxPlayerOwned=this.add.graphics({lineStyle:{width:1.5,color:qT,alpha:1}});const e=document.querySelector(".logo");e&&(e.style.visibility="visible"),this.input.on("pointerdown",()=>{const i=this.scene.get(nt.UI);i!=null&&i.buildDialogActive&&i.hideDialog()}),this.hazards=new H8(this),this.events.on("destroy",()=>{this.hazards.destroy()})}async resetCamera(){return new Promise(e=>this.cameras.main.pan(this.cameras.main.width/2,this.cameras.main.height/2,200,"Linear",!1,(r,i)=>i===1&&e()))}fortify(e){e.fortified=!0,this.board.checkAutoTurn()}newEditor(){this.board&&this.board.destroy(),this.board=new ju(this,ct),this.scene.get(nt.UI).scene.stop(),this.initSystems(),this.scene.launch(nt.Editor),this.isEditor=!0}newGame(){this.world=ef(),Rt.off(Ot.NewTurn,this.handleTurns),this.time.delayedCall(at(100),()=>{Rt.on(Ot.NewTurn,this.handleTurns)}),this.board&&this.board.destroy(),this.board=new ju(this,ct),this.initSystems(),this.mapGenerator.createMap(this,this.board),this.saveGame()}gameOver(e=!1){this.isGameOver=!0,this.scene.launch(nt.Menu),this.time.delayedCall(at(300),()=>{const r=this.data.get("player");r&&r.active&&!r.destroyScheduled&&r.destroy(),e&&(ct.currentLevel=Math.min(ct.currentLevel+1,Ea.length));const i=this.scene.get(nt.Menu);i.gameIsActive=!1,i.txtDeath.setVisible(!e),i.txtWin.setVisible(e),i.btnResumeGame.setAlpha(.5),this.scene.stop(nt.Game),this.scene.stop(nt.UI),this.board.shutdown(),this.board.destroy(),Of(),yc(this.world),e||window.localStorage.removeItem(Yn)})}loadGame(e=!1){var n,o,a,h,u;Of(),this.world&&yc(this.world),this.world=ef(),Rt.off(Ot.NewTurn,this.handleTurns),this.time.delayedCall(at(100),()=>{Rt.on(Ot.NewTurn,this.handleTurns)}),this.isEditor=e,this.board&&this.board.destroy();const r=window.localStorage.getItem(Yn);if(!r)return!1;const i=JSON.parse(r);if(i.map){const l=Ea.indexOf(i.map.width*i.map.height);ct.currentLevel=l<Ea.length?l+1:1}if(this.scene.isActive(nt.UI)&&this.scene.get(nt.UI).scene.restart(),this.board=new ju(this,{...ct,grid:{...ct.grid,width:((n=i.map)==null?void 0:n.width)||Math.sqrt(hi()),height:((o=i.map)==null?void 0:o.height)||Math.sqrt(hi())},skipCells:!0}),this.initSystems(),!i.cells||i.cells.length===0?this.board.initCells():this.board.cells=(a=i.cells)==null?void 0:a.map(l=>{const f=new qy(this.board,l.tile,this,l.isOwned,l.frame);return l.isRaised&&f.raise(),l.burnt!==void 0&&(f.burnt=l.burnt),f}),i.pieces.forEach(l=>{const f=Hd[l.className],c=new f(this.board,l.tile);l.id!==void 0&&(c.id=l.id),l.hadTurn&&ut(this.world,ae,c.entity),l.nextTurnBlocked&&ut(this.world,Ii,c.entity),l.hp&&ut(this.world,Ce,c.entity,{hp:l.hp}),l.movementCost&&ut(this.world,ci,c.entity,{cost:l.movementCost}),l.mounting&&this.time.delayedCall(at(10),()=>ut(this.world,ti,c.entity,{target:this.board.getAllChess().find(d=>d.id===l.mounting).entity})),l.mountedBy&&this.time.delayedCall(at(10),()=>{const d=this.board.getAllChess().filter(v=>{var p;return(p=l.mountedBy)==null?void 0:p.includes(v.id)}).map(v=>v.entity);_e.unit[c.entity].set(d)}),c instanceof Yt&&(l.fortified&&(c.fortified=l.fortified),Number.isInteger(l.immobilizedTurns)&&l.immobilizedTurns&&l.immobilizedTurns>=0&&ut(this.world,He,c.entity,{turns:l.immobilizedTurns})),l.isQueen!==void 0&&(c.isQueen=l.isQueen),l.isArmored&&ut(this.world,Ee,c.entity),f===Gt&&this.data.set("player",c),f===ss&&(c.ensnaredTurns=l.ensnaredTurns||0),f===Jt&&(c.bridgeBuilt=l.bridgeBuilt===void 0?!1:l.bridgeBuilt),f===gi&&(c.claimed=l.claimed,Number.isInteger(l.slimedForTurns)&&c.setSlimedTurns(l.slimedForTurns)),f===Li&&(c.spinningCooldownTurns=l.spinningCooldownTurns||0),f===wi&&l.occupiedBy&&this.time.delayedCall(at(10),()=>{const d=this.board.getChessById(l.occupiedBy);ut(this.world,bi,c.entity,{by:d.entity})}),c instanceof Fi&&(c.slamCooldownTurns=l.slamCooldownTurns||0),Number.isInteger(l.constructionTurns)&&l.constructionTurns&&l.constructionTurns>0&&l.constructionType&&l.constructionTargetTile&&this.time.delayedCall(at(10),()=>{ut(this.world,Le,c.entity,{turns:l.constructionTurns}),ut(this.world,Ht,c.entity,{targetX:l.constructionTargetTile.x,targetY:l.constructionTargetTile.y,type:l.constructionType})}),l.buildingTurns&&l.buildingTurns>0&&l.constructionTargetTile&&this.time.delayedCall(at(10),()=>{c.constructionTargetTile=l.constructionTargetTile,l.buildingType==="tower"?c.buildTower(l.constructionTargetTile,l.buildingTurns):l.buildingType==="bridge"?c.buildBridge(l.constructionTargetTile,l.buildingTurns):l.buildingType==="sawmill"&&c.buildSawmill(l.constructionTargetTile,l.buildingTurns)})}),!e){this.time.delayedCall(at(50),()=>{const f=this.scene.get(nt.UI);f.queuedEffects.load(i.queuedEffects),f.gold=i.gold,f.upkeep=i.upkeep,f.income=i.income,f.turn=i.turn}),(u=(h=this.systems).render)==null||u.call(h,this.world);const l=this.board.getPlayerPieces().find(f=>!ht(this.world,ae,f.entity));l&&this.board.setSelected(l)}return!0}saveGame(e={gold:0,turn:0,upkeep:0,income:0}){const r=this.board.getAllChess(),{turn:i,gold:n,upkeep:o,income:a}=this.isEditor?e:this.scene.get(nt.UI),h={cells:this.board.cells.map(u=>({frame:u.getFrame(),isOwned:u.isOwned,tile:u.tileXY,isRaised:u.isRaised,burnt:u.burnt})),queuedEffects:this.scene.get(nt.UI).queuedEffects.serialize(),pieces:this.board.getAllChess().filter(u=>!(u instanceof tn||!u.active||(u instanceof ge||u instanceof Yt)&&u.destroyScheduled)).map(u=>{var l,f;return{id:u.id,tile:u.rexChess.tileXYZ,className:A5(u),constructionType:ht(this.world,Ht,u.entity)?Ht.type[u.entity]:void 0,constructionTargetTile:ht(this.world,Ht,u.entity)?{x:Ht.targetX[u.entity],y:Ht.targetY[u.entity]}:void 0,constructionTurns:ht(this.world,Le,u.entity)?Le.turns[u.entity]:void 0,buildingTurns:u.buildingTurns,claimed:u.claimed,isQueen:u.isQueen,occupiedBy:ht(this.world,bi,u.entity)?(l=this.board.getChessByEntity(bi.by[u.entity]))==null?void 0:l.id:void 0,slimedForTurns:u.slimedForTurns,nextTurnBlocked:ht(this.world,Ii,u.entity),hadTurn:ht(this.world,ae,u.entity),movementCost:ht(this.world,ci,u.entity)?ci.cost[u.entity]:void 0,hp:ht(this.world,Ce,u.entity)&&Ce.hp[u.entity],fortified:u.fortified,isArmored:ht(this.world,Ee,u.entity),immobilizedTurns:ht(this.world,He,u.entity)&&He.turns[u.entity],bridgeBuilt:u.bridgeBuilt,buildingType:u.buildingType,spinningCooldownTurns:u.spinningCooldownTurns,mountedBy:ht(this.world,_e,u.entity)?[..._e.unit[u.entity]].map(c=>r.find(d=>d.entity===c).id):void 0,mounting:ht(this.world,ti,u.entity)?(f=r.find(c=>c.entity===ti.target[u.entity]))==null?void 0:f.id:void 0}}),turn:i,gold:n,upkeep:o,income:a,map:{height:ct.height,width:ct.width}};return window.localStorage.setItem(Yn,JSON.stringify(h)),JSON.stringify(h)}addPiece(e){const r=this.board.getHomebase();return new e(this.board,r.rexChess.tileXYZ)}update(){var e,r,i,n,o,a,h,u,l,f,c,d,v,p;!this.board||this.board.isShutdown||(this.board.getAllChess().forEach(g=>{g instanceof Yt&&g.fortifiedIcon.setX(g.x).setY(g.y),g instanceof Fi&&g.slamSprite.setX(g.x).setY(g.y)}),this.world&&((r=(e=this.systems)==null?void 0:e.movement)==null||r.call(e,this.world),(n=(i=this.systems)==null?void 0:i.attackTargetWithProtectors)==null||n.call(i,this.world),(a=(o=this.systems)==null?void 0:o.armor)==null||a.call(o,this.world),(u=(h=this.systems)==null?void 0:h.immobilized)==null||u.call(h,this.world),(f=(l=this.systems)==null?void 0:l.construction)==null||f.call(l,this.world),(d=(c=this.systems)==null?void 0:c.mounted)==null||d.call(c,this.world),(p=(v=this.systems)==null?void 0:v.render)==null||p.call(v,this.world)),this.adjustCameraScroll())}initSystems(){this.systems={armor:r5(this.board),immobilized:u5(this.board),attackTargetWithProtectors:h5(this.board),attckedTarget:o5(this.board),movement:d5(this.board),construction:l5(this.board),mounted:f5(this.board),render:W8(this.board)}}adjustCameraScroll(){const e=this.game,r=(ct.grid.cellHeight-5)*ct.height;if(this.game.input.activePointer.isDown){if(e.origDragPoint){const n=this.cameras.main.scrollX+e.origDragPoint.x-this.game.input.activePointer.position.x,o=this.cameras.main.scrollY+e.origDragPoint.y-this.game.input.activePointer.position.y;if(!this.needsScrolling)return;const a=n>ct.grid.cellWidth*ct.width+ct.grid.x-window.innerWidth/2,h=n<-ct.grid.x/2,u=o<-window.innerHeight/2*.75,l=o>r-ct.grid.y-window.innerHeight;a||h?this.cameras.main.scrollX=a?ct.grid.cellWidth*ct.width+ct.grid.x-window.innerWidth/2:-ct.grid.x/2:this.cameras.main.scrollX+=e.origDragPoint.x-this.game.input.activePointer.position.x,u||l?this.cameras.main.scrollY=u?-window.innerHeight/2*.75:r-ct.grid.y-window.innerHeight:this.cameras.main.scrollY+=e.origDragPoint.y-this.game.input.activePointer.position.y}e.origDragPoint=this.game.input.activePointer.position.clone()}else e.origDragPoint=null;const i=this.scene.get(nt.UI);this.scene.isActive(i)&&(this.cameras.main.scrollX!==0||this.cameras.main.scrollY!==0)?i.btnMap.setVisible(!0):i.btnMap.setVisible(!1)}}class Z8 extends Phaser.Scene{constructor(){super("LoadingScene")}preload(){var t,e;(e=(t=window.process)==null?void 0:t.env)!=null&&e.isTest&&this.load.setBaseURL("../../../../public"),this.loadSpritesheets(),this.loadImages(),this.loadFonts(),this.load.html("form","assets/form.html")}create(){this.scene.launch("MenuScene")}loadFonts(){var t,e;(e=(t=window.process)==null?void 0:t.env)!=null&&e.isTest||this.load.bitmapFont("basis33_red","assets/fonts/basis33.png","assets/fonts/basis33.xml")}loadImages(){this.load.image("bridge","assets/bridge.png"),this.load.image("table_landscape","assets/menu/table_landscape.png"),this.load.image("table_portrait","assets/menu/table_portrait.png"),this.load.image("table_sidebar","assets/menu/table_sidebar.png"),this.load.image("window_panel","assets/menu/window.png"),this.load.image("build_dialog","assets/build_dialog/table_down.png"),this.load.image("build_dialog_tag","assets/build_dialog/price_tag.png"),this.load.image("logo","assets/logo.png"),this.load.image("controlled_tile","assets/controlled_tile.png"),this.load.image("map","assets/map.png")}loadSpritesheets(){this.load.spritesheet("menu_buttons","assets/menu_buttons.png",{frameWidth:149,frameHeight:149}),this.load.spritesheet("buttons","assets/buttons.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("portraits","assets/portraits.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("tiles","assets/tiles.png",{frameWidth:48.5,frameHeight:64,spacing:1,margin:1}),this.load.spritesheet("icons","assets/icons.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("arrows","assets/arrows.png",{frameWidth:32,frameHeight:32,spacing:1}),this.load.spritesheet("stun","assets/anims/stun_sprite.png",{frameWidth:752,frameHeight:408,spacing:1}),this.load.spritesheet("lightning","assets/anims/lightning-bolt.png",{frameWidth:72,frameHeight:72,spacing:0})}}class K8 extends Phaser.Scene{constructor(){super(nt.Menu);k(this,"container");k(this,"panel");k(this,"logo");k(this,"btnStartGame");k(this,"btnResumeGame");k(this,"btnEditor");k(this,"btnUpload");k(this,"btnSave");k(this,"btnHelp");k(this,"txtDeath");k(this,"txtWin");k(this,"gameIsActive",!1);k(this,"helpContainer");k(this,"helpShake");k(this,"txtVersionInfo");k(this,"openedFromEditor",!1);k(this,"tooltip")}preload(){this.tooltip=new kd(this,this.game.plugins)}create(){const e=document.querySelector("#btnSavegame"),r=document.querySelector("#gameUploader");r&&r.addEventListener("change",async i=>{var o;const n=i.target;if((o=n.files)!=null&&o.length){const a=await eC(n.files[0]);window.localStorage.setItem(Yn,JSON.stringify(a)),r.value="",this.resumeGame(!0)}}),this.cameras.main.setBackgroundColor({r:102,g:102,b:102,a:140}),this.container=this.add.container(0,0),Phaser.Display.Align.In.Center(this.container,this.add.zone(window.innerWidth/2,window.innerHeight/2,window.innerWidth,window.innerHeight)),this.panel=this.add.image(0,0,"table_landscape").setScale(.4),this.logo=this.add.image(0,-150,"logo").setScale(.31),Oh()&&this.panel.displayHeight+100>window.screen.availHeight&&this.container.setScale(.7),this.btnStartGame=this.add.text(-65,-70,"Start new game",{backgroundColor:"#4c4545",fontFamily:"JunkDog",padding:{bottom:10,left:10,top:10,right:10},strokeThickness:0}).setInteractive({cursor:"pointer"}).on("pointerover",()=>this.pointerover(this.btnStartGame)).on("pointerout",()=>this.pointerout(this.btnStartGame)).on("pointerup",()=>this.startNewGame()),this.btnResumeGame=this.add.text(-65,-20,this.gameIsActive||this.openedFromEditor?"    Close menu   ":"  Resume game  ",{backgroundColor:"#4c4545",fontFamily:"JunkDog",padding:{bottom:10,left:10,top:10,right:12},strokeThickness:0}).setInteractive({cursor:"pointer"}).on("pointerover",()=>this.pointerover(this.btnResumeGame)).on("pointerout",()=>this.pointerout(this.btnResumeGame)).on("pointerup",()=>this.resumeGame()).setAlpha(window.localStorage.getItem(Yn)?1:.5),this.txtDeath=this.add.text(-120,30,"You're dead. Start a new game",{backgroundColor:"#a03636",fontFamily:"JunkDog",padding:{bottom:10,left:10,top:10,right:12},strokeThickness:0}).setVisible(!1),this.txtWin=this.add.text(-120,30,"You've won. Start a new game",{backgroundColor:"#4ba02e",fontFamily:"JunkDog",padding:{bottom:10,left:10,top:10,right:12},strokeThickness:0}).setVisible(!1),this.btnHelp=this.add.text(100,-60,"?",{color:"white",fontFamily:"JunkDog",strokeThickness:1}),this.helpContainer=this.add.container(0,0,[this.add.circle(105,-50,20,4998469).setInteractive({cursor:"pointer"}).on("pointerover",()=>this.pointerover(this.btnHelp)).on("pointerout",()=>this.pointerout(this.btnHelp)).on("pointerup",()=>{window.open("https://github.com/zewa666/codhex-public/wiki")}),this.btnHelp]),this.helpShake=new oo(this.helpContainer,{duration:at(3e3),magnitudeMode:1,magnitude:2}),this.btnEditor=this.add.image(105,0,"menu_buttons",yh.Editor).setScale(.27).setInteractive({cursor:"pointer"}).on("pointerup",()=>this.startNewGame(!0)),this.btnUpload=new Et(this,{x:-100,y:0,imageKey:"menu_buttons",icon:yh.Upload,disabled:this.openedFromEditor,onClick:()=>{r.click()}}).setScale(.27),this.btnSave=new Et(this,{x:-100,y:-50,imageKey:"menu_buttons",icon:yh.Download,disabled:!this.gameIsActive,onClick:()=>{const i="data:text/json;charset=utf-8,"+encodeURIComponent(window.localStorage.getItem(Yn));e.setAttribute("href",i),e.click()}}).setScale(.27),this.txtVersionInfo=this.add.text(-143,93,`Version: 0.11.0, 42c71a2
`,{fontFamily:"JunkDog",fontSize:"10",color:"black",strokeThickness:0}),this.container.add(this.panel),this.container.add(this.add.image(0,0,"window_panel").setScale(.51,.36)),this.container.add(this.btnStartGame),this.container.add(this.btnResumeGame),this.container.add(this.txtDeath),this.container.add(this.txtWin),this.container.add(this.logo),this.container.add(this.helpContainer),this.container.add(this.txtVersionInfo),this.container.add(this.btnEditor),this.container.add(this.btnUpload),this.container.add(this.btnSave),window.localStorage.getItem(pc)||(this.helpShake.shake(),window.localStorage.setItem(pc,new Date().toUTCString()))}resumeGame(e=!1){if(this.btnResumeGame.alpha===1){if(this.openedFromEditor){this.openedFromEditor=!1,this.scene.stop(),this.scene.resume(nt.Editor),this.scene.resume(nt.Game);return}if(this.gameIsActive){this.scene.stop(),this.scene.resume(nt.UI),this.scene.resume(nt.Game),e&&this.scene.get(nt.Game).loadGame();return}this.gameIsActive=!0,this.startFullScreen(),this.scene.launch(nt.UI),this.scene.launch(nt.Game),this.time.delayedCall(at(10),()=>{this.scene.get(nt.Game).loadGame(),this.scene.stop()})}}startNewGame(e=!1){this.startFullScreen(),this.gameIsActive?(ct.currentLevel=1,this.scene.resume(nt.Game),this.scene.resume(nt.UI),this.scene.get(nt.UI).scene.restart()):(this.scene.launch(nt.Game),this.scene.launch(nt.UI)),this.time.delayedCall(at(10),()=>{const r=this.scene.get(nt.Game);r.isGameOver=!1,Of(),e?(this.gameIsActive=!1,r.newEditor(),r.board.refreshCells()):(this.gameIsActive=!0,r.isEditor=!1,this.openedFromEditor=!1,this.scene.stop(nt.Editor),r.newGame()),this.scene.stop()})}pointerover(e){e.setStyle({strokeThickness:.5,backgroundColor:"#605656"})}pointerout(e){e.setStyle({strokeThickness:0,backgroundColor:"#4c4545"})}startFullScreen(){Oh()&&document.fullscreenEnabled&&document.documentElement.requestFullscreen()}}function J8(s){const{menuPosX:t,menuPosY:e}=s,[r,i]=wn(s,{x:t-70,y:e+40,imageKey:"controlled_tile",tooltip:{text:"Controlled tiles"}},.4),[n,o]=wn(s,{x:t-70,y:e+70,icon:Nt.Farm,tooltip:{text:"Farms"}}),[a,h]=wn(s,{x:t-70,y:e+105,imageKey:"tiles",icon:ft.MineClaimed,tooltip:{text:"Mines"}},.5),[u,l]=wn(s,{x:t-70,y:e+140,imageKey:"tiles",icon:ft.Sawmill,tooltip:{text:"Sawmills"}},.5),[f,c]=wn(s,{x:t-10,y:e+40,icon:Nt.Units,tooltip:{text:"Units"}}),[d,v]=wn(s,{x:t-10,y:e+70,imageKey:"bridge",tooltip:{text:"Bridges"}},.15),[p,g]=wn(s,{x:t-10,y:e+105,imageKey:"tiles",icon:ft.Tower,tooltip:{text:"Towers"}},.5);return{iuoControlledTilesIcon:r,iuoControlledTilesLabel:i,iuoFarmsIcon:n,iuoFarmsLabel:o,iuoMinesIcon:a,iuoMinesLabel:h,iuoSawmillsIcon:u,iuoSawmillsLabel:l,iuoUnitsIcon:f,iuoUnitsLabel:c,iuoBridgesIcon:d,iuoBridgesLabel:v,iuoTowersIcon:p,iuoTowersLabel:g}}function Vg(s){const e=s.scene.get(nt.Game).board,i=e.getPlayerTiles().filter(c=>c instanceof At),n=e.getFarms(),o=e.getSawmills(),a=e.getMines(),h=i.length,u=Math.floor(a.reduce((c,d)=>c+=d.productionPerTurn(),0)),l=n.reduce((c,d)=>c+=d.productionPerTurn(),0),f=o.reduce((c,d)=>c+=d.productionPerTurn(),0);return s.iuoControls.iuoControlledTilesLabel.setText(h.toString()),s.iuoControls.iuoFarmsLabel.setText(l.toString()),s.iuoControls.iuoMinesLabel.setText(u.toString()),s.iuoControls.iuoSawmillsLabel.setText(f.toString()),h+u+l+f}function mh(s){const e=s.scene.get(nt.Game).board,r=e.getPlayerPieces(),i=e.getWaterTiles(!0),n=e.getTowers(),o=r.reduce((u,l)=>u+=l.getUpkeep(),0),a=i.reduce((u,l)=>u+=l.getUpkeep(),0),h=n.reduce((u,l)=>u+=l.getUpkeep(),0);return s.iuoControls.iuoUnitsLabel.setText(o.toString()),s.iuoControls.iuoTowersLabel.setText(h.toString()),s.iuoControls.iuoBridgesLabel.setText(a.toString()),o+a+h}function wn(s,t,e){const r=new Et(s,t).setScale(e||1).setAlpha(0).setDepth(10),i=s.add.text(t.x+20,t.y-9,"0",{color:"black",fontFamily:"JunkDog"}).setAlpha(0).setDepth(10);return[r,i]}class Ug{constructor(t,e){k(this,"queuedEffects",new Map);this.gameScene=t,this.uiScene=e}queue(t,e){this.queuedEffects.set(t,[...this.queuedEffects.get(t)||[],e])}execute(t){const[e,...r]=t;this[e](...r)}checkTurn(t){var e;this.queuedEffects.has(t)&&((e=this.queuedEffects.get(t))==null||e.forEach(r=>this.execute(r)),this.queuedEffects.delete(t))}serialize(){return Array.from(this.queuedEffects)}load(t){this.queuedEffects=new Map(t)}restoreBurntCell(t,e){const r=this.gameScene.board.getCell(t);r.setFrame(e),r.burnt=!1}speedBoosterPassiveEffect(t){var n;const e=this.gameScene.board,r=(n=e.getPlayerPieces(t))==null?void 0:n[0];r&&r.active&&!r.destroyScheduled&&(ci.cost[r.entity]+=1);const i=e.getFreeTile(Tt.Items);new yl(e,i)}farmerConstructionDone(t,e){var o;const r=this.gameScene.board,i=this.gameScene.world,n=(o=r.getPlayerPieces(t))==null?void 0:o[0];if(n&&n.active&&!n.destroyScheduled){new zi(r,e);const a=r.getAllChess().find(h=>h instanceof At&&kt(h.rexChess.tileXYZ,e));a&&a.destroy(),me(i,Ht,n.entity)}}hiveConstructionDone(t,e){const{board:r,world:i}=this.gameScene,n=r.getChessById(t);n&&n.active&&!n.destroyScheduled&&(new Br(r,e),me(i,Ht,n.entity),n.destroy())}engineerTowerDone(t,e){var n;const r=this.gameScene.board,i=(n=r.getPlayerPieces(t))==null?void 0:n[0];i&&i.active&&!i.destroyScheduled&&(new $e(r,e),i.constructionDone())}engineerSawmillDone(t,e){var n;const r=this.gameScene.board,i=(n=r.getPlayerPieces(t))==null?void 0:n[0];i&&i.active&&!i.destroyScheduled&&(new as(r,e),i.constructionDone())}engineerBridgeDone(t,e,r){var o;const i=this.gameScene.board,n=(o=i.getPlayerPieces(t))==null?void 0:o[0];if(n&&n.active&&!n.destroyScheduled){const a=i.tileXYToChessArray(e.x,e.y).find(h=>h instanceof Jt);a.bridgeBuilt=r,n.constructionDone()}}}class Q8 extends Phaser.Scene{constructor(){super(nt.UI);k(this,"tooltip");k(this,"menuPosY",80);k(this,"buildDialogActive",!1);k(this,"btnDisbandPiece");k(this,"btnMap");k(this,"queuedEffects");k(this,"iuoControls");k(this,"incomeUpkeepOverviewActive",!1);k(this,"buildDialogContainer");k(this,"btnMenu");k(this,"controlledTilesLabel");k(this,"controlledTilesIcon");k(this,"controlledPowerTilesLabel");k(this,"controlledPowerTilesIcon");k(this,"bridgesLabel");k(this,"bridgesIcon");k(this,"towersIcon");k(this,"towersLabel");k(this,"btnFortify");k(this,"btnHourglass");k(this,"turnLabel");k(this,"btnNextTurn");k(this,"incomeLabel");k(this,"upkeepLabel");k(this,"goldLabel");k(this,"btnFarmer");k(this,"btnMiner");k(this,"btnSoldier");k(this,"btnEngineer");k(this,"btnUpkeep");k(this,"btnIncome");k(this,"goldLabelShake");k(this,"keySpace");k(this,"keyEscape");k(this,"keyFortify");k(this,"_gold",0);k(this,"_upkeep",0);k(this,"_income",0);k(this,"_turn",1);k(this,"gameScene")}get menuPosX(){return Math.min(ct.grid.cellWidth*ct.width+ct.grid.x+70,window.innerWidth-150)}get turn(){return this._turn}set turn(e){this._turn=e,this.turnLabel.setText(`Turn #${this.turn}`)}get upkeep(){return this._upkeep}set upkeep(e){this._upkeep=e,this.upkeepLabel.setText(mh(this).toString())}get income(){return this._income}set income(e){this._income=e,this.incomeLabel.setText(Vg(this).toString())}get gold(){return this._gold}set gold(e){this._gold=e,this.goldLabel.setText(`Gold | ${this.gold}`),this.updateBuyingOptions()}preload(){this.gameScene=this.scene.get(nt.Game),this.tooltip=new kd(this,this.game.plugins)}create(){var e,r;this.iuoControls=J8(this),this.queuedEffects=new Ug(this.gameScene,this),this.keySpace=this.input.keyboard.addKey("SPACE").on("up",Ps(()=>this.updateTurn(),300)),this.keyFortify=this.input.keyboard.addKey("F").on("up",Ps(()=>{this.gameScene.board.selected&&this.gameScene.fortify(this.gameScene.board.selected)},300)),this.keyEscape=this.input.keyboard.addKey("ESC").on("up",Ps(()=>this.showMenu(),300)),this.time.delayedCall(at(100),()=>this.initBuildDialog()),this.add.image(75,130,"table_sidebar").setRotation(4.71239).setOrigin(1,.5).setScale(1,1.45),this.controlledTilesIcon=new Et(this,{x:45,y:170,imageKey:"controlled_tile",tooltip:{text:"Controlled tiles"}}).setScale(.4),this.controlledTilesLabel=this.add.text(65,160,`1/${hi()}`,{color:"white",fontFamily:"JunkDog"}),this.controlledPowerTilesIcon=new Et(this,{x:45,y:200,icon:ft.PowerTile,imageKey:"tiles",tooltip:{text:"Occupied Power Tiles"}}).setScale(.5),this.controlledPowerTilesLabel=this.add.text(65,190,"0/3",{color:"white",fontFamily:"JunkDog"}),this.bridgesIcon=new Et(this,{x:45,y:231,imageKey:"bridge",tooltip:{text:"Bridges"}}).setScale(.13),this.bridgesLabel=this.add.text(65,220,`0/${((e=this.gameScene.board)==null?void 0:e.maxBridges)||2}`,{color:"white",fontFamily:"JunkDog"}),this.towersIcon=new Et(this,{x:45,y:260,icon:ft.Tower,imageKey:"tiles",tooltip:{text:"Towers"}}).setScale(.5),this.towersLabel=this.add.text(65,250,`0/${((r=this.gameScene.board)==null?void 0:r.maxTowers)||2}`,{color:"white",fontFamily:"JunkDog"}),this.btnFortify=new Et(this,{x:65,y:300,icon:Nt.Fortified,tooltip:{text:"Fortify"},onClick:Ps(()=>{this.gameScene.board.selected&&this.gameScene.fortify(this.gameScene.board.selected)})}),this.btnHourglass=new Et(this,{x:65,y:335,icon:Nt.Hourglass,tooltip:{text:"CPU turn"}}).setVisible(!1),this.time.delayedCall(at(100),()=>{this.updateControlledTiles(),this.updateTowersCounter(),this.updateBridgesCounter()}),this.btnMenu=new Et(this,{x:140,y:30,face:ii.Menu,onClick:Ps(()=>this.showMenu(),300),tooltip:{text:"Show menu"}}),this.add.image(this.menuPosX-50,this.menuPosY-50,"table_portrait").setScale(.3,.4).setOrigin(0,0),this.add.image(this.menuPosX-43,this.menuPosY-35,"window_panel").setScale(.22,.41).setOrigin(0,0),this.turnLabel=this.add.text(this.menuPosX+20,this.menuPosY,`Turn #${this.turn}`,{color:"black",fontFamily:"JunkDog"}),this.btnNextTurn=new Et(this,{x:this.menuPosX,y:this.menuPosY+8,face:ii.Play,onClick:Ps(()=>this.updateTurn(),300),tooltip:{text:"End this turn",top:-65}}),this.btnIncome=new Et(this,{x:this.menuPosX,y:this.menuPosY+40,icon:Nt.Income,onClick:gc(()=>this.toggleIncomeUpkeepOverview(),500)}).setScale(.8),this.incomeLabel=this.add.text(this.menuPosX+20,this.menuPosY+31,this.income.toString(),{color:"black",fontFamily:"JunkDog"}),this.btnUpkeep=new Et(this,{x:this.menuPosX+60,y:this.menuPosY+42,icon:Nt.Upkeep,onClick:gc(()=>this.toggleIncomeUpkeepOverview(),500)}).setScale(.8),this.upkeepLabel=this.add.text(this.menuPosX+80,this.menuPosY+31,this.upkeep.toString(),{color:"black",fontFamily:"JunkDog"}),this.goldLabel=this.add.text(this.menuPosX-12,this.menuPosY+60,`Gold | ${this.gold}`,{color:"gold",backgroundColor:"darkgrey",padding:{right:10,bottom:10,left:10,top:10},fontFamily:"JunkDog"}),this.goldLabelShake=new oo(this.goldLabel,{duration:at(500)}),this.btnDisbandPiece=new Et(this,{x:this.menuPosX,y:this.menuPosY+118,face:ii.DisbandPiece,disabled:!0,onClick:Ps(()=>{this.gameScene.board.selected&&(this.gameScene.board.selected.destroy(),this.gameScene.board.selected=void 0)},300),tooltip:{text:"Disband selected unit",left:-100}}),this.btnFarmer=new Et(this,{x:this.menuPosX+3,y:this.menuPosY+148,portrait:ie.Farmer,disabled:!0,onClick:this.buyPiece.bind(this,xe),tooltip:{text:`Farmer ${xe.cost}g`,left:-70}}),this.btnMiner=new Et(this,{x:this.menuPosX+43,y:this.menuPosY+148,portrait:ie.Miner,disabled:!0,onClick:this.buyPiece.bind(this,ke),tooltip:{text:`Miner ${ke.cost}g`,left:-70}}),this.btnEngineer=new Et(this,{x:this.menuPosX+81,y:this.menuPosY+147,portrait:ie.Engineer,disabled:!0,onClick:this.buyPiece.bind(this,Kt),tooltip:{text:`Engineer ${Kt.cost}g`,left:-80}}),this.btnEngineer.setScale(1,1.05),this.btnSoldier=new Et(this,{x:this.menuPosX+3,y:this.menuPosY+176,portrait:ie.Soldier,disabled:!0,onClick:this.buyPiece.bind(this,be),tooltip:{text:`Soldier ${be.cost}g`,left:-80}}),this.btnSoldier.setScale(1,1.1),this.btnMap=new Et(this,{x:this.menuPosX+43,y:this.menuPosY+250,imageKey:"map",onClick:async()=>{this.btnMap.disabled=!0,await this.gameScene.resetCamera(),this.btnMap.disabled=!1}}),this.time.delayedCall(at(10),()=>this.reset()),Rt.on(Ot.PlayerTileDestroyed,()=>this.time.delayedCall(at(100),this.updateControlledTiles.bind(this)))}reset(){this.turn=1,this.gold=0,this.income=0,this.upkeep=0,this.queuedEffects=new Ug(this.gameScene,this)}showMenu(){this.scene.launch(nt.Menu),this.gameScene.scene.pause(),this.scene.pause(nt.UI)}async updateTurn(){const e=this.gameScene.data.get("player");if(!e||!e.active||e.destroyScheduled){this.gameScene.gameOver();return}this.btnHourglass.setVisible(!0);const r=this.tweens.addCounter({from:0,to:360,duration:2500,repeat:-1,onUpdate:i=>this.btnHourglass.setAngle(i.getValue())});this.turn++,this.turnLabel.setText(`Turn #${this.turn}`),this.collectedResourcesForTurn(),this.deductUpkeep(),this.updateBuyingOptions(),this.deductActionTurns(),this.updateControlledTiles(),this.updatePowerTiles(),this.updateTowersCounter(),this.updateBridgesCounter(),await this.gameScene.board.performMonsterMoves(),await this.gameScene.board.performTowerMoves(),Rt.emit(Ot.NewTurn,this.turn),this.queuedEffects.checkTurn(this.turn),this.gameScene.saveGame(),this.btnHourglass.setVisible(!1),r.stop()}updateBridgesCounter(){const e=this.gameScene.board;this.bridgesLabel.setText(`${e.getWaterTiles(!0).length}/${e.maxBridges}`)}updateTowersCounter(){const e=this.gameScene.board;this.towersLabel.setText(`${e.getTowers().length}/${e.maxTowers}`)}updateControlledTiles(){const e=this.gameScene.board,r=e.getAllChess().filter(i=>i instanceof At);this.controlledTilesLabel.setText(`${r.length+e.getFarms().length+e.getMines(!0).length+1}/${hi()-e.getWaterTiles().length-e.getMonsterGenerators().length}`)}updatePowerTiles(){const e=this.gameScene.board;this.controlledPowerTilesLabel.setText(`${e.getPowerTiles(!0).length}/${e.getPowerTiles(!1).length}`)}queueEffect(e,r){const i=this.turn+e;this.queuedEffects.queue(i,r)}buyPiece(e){const r=this.gameScene.addPiece(e);this.gold-=r.getCost(),this.upkeep+=r.getUpkeep()}updateBuyingOptions(){var n,o;const e=(n=this.gameScene.board)==null?void 0:n.getHomebase(),r=(e==null?void 0:e.ensnaredTurns)>0,i=(o=this.gameScene.board)==null?void 0:o.isHomeBaseOccupied();this.btnFarmer.disabled=this.gold<xe.cost||i||r,this.btnMiner.disabled=this.gold<ke.cost||i||r,this.btnEngineer.disabled=this.gold<Kt.cost||i||r,this.btnSoldier.disabled=this.gold<be.cost||i||r}hideDialog(){this.tweens.add({targets:[this.buildDialogContainer],scaleX:{from:.3,to:0},duration:at(250),ease:"Expo.easeIn",onComplete:()=>{this.buildDialogActive=!1,this.buildDialogContainer.removeAll()}})}showBuildDialog(e,r,i){this.buildDialogActive=!0;const n=this.add.image(120,-70,"portraits",Vn.frame[e.entity]).setScale(3.5,2.8).setOrigin(0,1),o=new Et(this,{x:1350,y:-170,face:ii.DisbandPiece,onClick:Ps(()=>this.hideDialog(),300)}).setScale(3.5,2.8);this.buildDialogContainer.add([this.add.image(0,0,"build_dialog").setOrigin(0,1).setInteractive().on("pointerdown",()=>!1),n,o]),r.map((a,h)=>{var l,f,c,d;const u=[this.add.image(400+h*250+(((l=a.offset)==null?void 0:l.x)||0),-115+(((f=a.offset)==null?void 0:f.y)||0),a.texture,a.frame).setScale(4*(((c=a.scale)==null?void 0:c.x)||1),2.8*(((d=a.scale)==null?void 0:d.y)||1)).setOrigin(0,.5).setInteractive({cursor:"pointer"}).on("pointerdown",()=>{this.hideDialog(),i(a)}),this.add.image(405+h*250,-15,"build_dialog_tag").setScale(.8).setOrigin(0,1),this.add.text(400+h*250,-75,a.cost.toString(),{color:"white",fontFamily:"JunkDog",fontSize:"30px",align:"center",fixedWidth:150}).setScale(1.3,1)];return this.buildDialogContainer.add(u),u},n),this.tweens.add({targets:[this.buildDialogContainer],scaleX:{from:0,to:.3},duration:at(250),ease:"Expo.easeIn"})}deductActionTurns(){Ni([Le])(this.gameScene.world).forEach(r=>{ht(this.gameScene.world,Le,r)&&Le.turns[r]>0&&Le.turns[r]--})}collectedResourcesForTurn(){this.gameScene.board.getMines().forEach(i=>i.slimedForTurns>0&&i.setSlimedTurns(-1));const r=Vg(this);this.gold+=r,this.income=r,this.upkeep=mh(this)}deductUpkeep(){const e=this.gameScene.board.getPlayerPieces().filter(o=>!(o instanceof Gt)),r=this.gameScene.board.getWaterTiles(!0),i=this.gameScene.board.getTowers();this.gold-=mh(this);const n=()=>{var o;if(this.gold<0||this.gold===0&&this.upkeep>this.income){if(e.length>0){const a=Phaser.Math.RND.integerInRange(0,e.length-1),h=(o=e.splice(a,1))==null?void 0:o[0];this.gold=Math.min(0,h.getUpkeep()+this.gold),h.destroy()}else if(r.length>0){const a=Phaser.Math.RND.integerInRange(0,r.length-1);r[a].bridgeBuilt=!1,r.splice(a,1)}else if(i.length>0){const a=Phaser.Math.RND.integerInRange(0,i.length-1);i[a].destroy(),i.splice(a,1)}else return;this.upkeep=mh(this),this.goldLabelShake.isRunning||this.goldLabelShake.shake(),n()}};n()}initBuildDialog(){const{x:e,y:r}=this.gameScene.board.tileXYToWorldXY(0,Math.sqrt(hi())-2);this.buildDialogContainer=this.add.container(e-ct.grid.cellWidth/2,r).setScale(0,.4)}toggleIncomeUpkeepOverview(){this.incomeUpkeepOverviewActive=!this.incomeUpkeepOverviewActive;const e=this.incomeUpkeepOverviewActive,r=n=>{n==null||n(),this.time.delayedCall(at(250),()=>{this.tweens.add({targets:[this.turnLabel,this.goldLabel,this.btnFarmer,this.btnMiner,this.btnSoldier,this.btnEngineer],scaleX:`${e?"-":"+"}=1`,duration:at(250),ease:"Expo.easeIn"}),this.tweens.add({targets:[this.btnNextTurn,this.btnDisbandPiece],scaleX:`${e?"-":"+"}=1.5`,duration:at(250),ease:"Expo.easeIn"})})},i=n=>{this.tweens.add({targets:[this.btnIncome,this.incomeLabel,this.btnUpkeep,this.upkeepLabel],y:`${e?"-":"+"}=37`,duration:at(500),ease:"Back.easeIn"}),this.tweens.add({targets:Object.values(this.iuoControls),alpha:e?1:0,x:`${e?"+":"-"}=70`,duration:at(500),ease:`Circ.ease${e?"In":"Out"}`}),n&&this.time.delayedCall(at(10),n==null?void 0:n())};e?r(i):i(r)}}try{window.process=process}catch{}const qu=(s=!1)=>new js.Game(Object.assign(iC(),{type:s?js.HEADLESS:js.AUTO,scene:[Z8,$8,Q8,O5,K8],pipeline:[Gn]}));var Wg,Hg,kg;if(Oh()){(Wg=document.querySelector(".logo"))==null||Wg.addEventListener("click",()=>{document.fullscreenEnabled&&document.documentElement.requestFullscreen()}),fc.setOverlaysWebView({overlay:!0}),fc.hide();const s=document.querySelector("#game"),t=document.querySelector(".phone-tilt"),e=document.querySelector(".logo");let r=!1;tC()?(qu(),r=!0):(t.style.display="flex",s.style.display="none"),window.addEventListener("orientationchange",i=>{const n=i.target.screen.orientation.type.startsWith("landscape");t.style.display=n?"none":"flex",s.style.display=n?"initial":"none",e.style.display=n?"initial":"none",i.target.screen.orientation.type.startsWith("landscape")&&!r&&setTimeout(()=>qu(),100)})}else(kg=(Hg=window.process)==null?void 0:Hg.env)!=null&&kg.isTest||qu();
